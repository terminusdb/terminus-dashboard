var TerminusDashboard=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=16)}([function(e,t,r){function n(e,t){return function(e){if(Array.isArray(e))return e}
/**
 * @file Javascript Api explorer tool
 * @author Kitty Jose
 * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more
 *
 * @summary Set of functions used across scripts
 */(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=r(19);function a(e){var t=document.createElement("div");t.setAttribute("class","terminus-module-head");var r=document.createElement("h3");return r.innerHTML=e,t.appendChild(r),t}function s(e,t,r,n){var a=e.pluginAvailable("codemirror");if(!a)return!1;var s=new i(t,n,a).colorizePre();return r.appendChild(s),!0}function o(e){for(var t=document.getElementsByClassName(e),r=0;r<t.length;r++)t[r].classList.remove(e)}function u(e){e.classList.contains("terminus-display")&&(e.classList.remove("terminus-display"),e.classList.add("terminus-hide"))}e.exports={tolggleContent:function(e,t){"block"===t.style.display?(o("fa-chevron-up"),e.classList.add("fa-chevron-down"),t.style.display="none"):(o("fa-chevron-down"),e.classList.add("fa-chevron-up"),t.style.display="block")},removeSelectedNavClass:o,stylizeCodeDisplay:s,stylizeEditor:function(e,t,r,n){var a=e.pluginAvailable("codemirror");if(a){var s=new i(t,n,a),o=s.colorizeTextArea(r);s.updateTextArea(o)}},deleteStylizedEditor:function(e,t){if(e.pluginAvailable("codemirror")){var r=t.nextElementSibling;r.setAttribute("class","terminus-hide"),TerminusClient.FrameHelper.removeChildren(r)}},showHttpResult:function(e,t,r,i){var o=document.createElement("BR");r.appendChild(o),o=document.createElement("BR"),r.appendChild(o),r.appendChild(a("HTTP Header")),o=document.createElement("BR"),r.appendChild(o);var u="",l=!0,c=!1,d=void 0;try{for(var p,h=e.headers[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var m=n(p.value,2),f=m[0],g=m[1];u=u+"".concat(f," = ").concat(g)+"\n"}}catch(e){c=!0,d=e}finally{try{l||null==h.return||h.return()}finally{if(c)throw d}}var v=document.createElement("pre");v.setAttribute("class","terminus-api-signature-pre");var y=document.createTextNode(u);return v.appendChild(y),s(i,v,r,"message/http")||r.appendChild(v),e.json().then((function(e){!function(e,t,r,n){var i=document.createElement("div");i.appendChild(a("Result"));var o=document.createElement("BR");i.appendChild(o);var u=JSON.stringify(r,0,4),l=document.createElement("pre");l.setAttribute("class","terminus-api-view terminus-scheme-pre"),l.innerHTML=u,s(n,l,i,"javascript")||i.appendChild(l),o=document.createElement("BR"),i.appendChild(o),e.appendChild(i)}(r,0,e,i)}))},getHeaderDom:a,getInfoAlertDom:function(e,t,r){var n=document.createElement("div");"info"==e?n.setAttribute("class","terminus-alert terminus-alert-success"):n.setAttribute("class","alert");var i=document.createElement("STRONG");i.innerHTML=t,n.appendChild(i);var a=document.createTextNode(r);return n.appendChild(a),n},getFunctionSignature:function(e){var t={connect:{spec:"WOQLClient.connect(surl, key)",descr:"\n\nConnect to a Terminus server at the given URI with an API keyStores the terminus:ServerCapability document returned in the connection registerwhich stores, the url, key, capabilities, and database meta-data for the connected serverIf the curl argument is false or null, the this.server will be used if present, or the promise will be rejected.\n1)The first (surl) argument: {string} argument it is the Server Url\n2)The second(key) argument: {string} argument contains an API key",result:"HTTP 200 on success, 409 for already existing database, otherwise error code",args:{server_url:"url",key:"Api key"},options:{title:"",description:""}},create:{spec:"WOQLClient.createDatabase(dburl, details, key)",descr:"\n\nCreate a Terminus Database\n1)The first (dburl) argument:{string}, it is a terminusDB Url or a terminusDB Id \n2)The second(details) argument:{object}, details which is the payload\n which included information of the new database to be created\n3)The third (key) argument:{string}, contains an API key ",result:"HTTP 200 on success, 409 for already existing database, otherwise error code",args:{database_url:"url",details:"",key:" Api key"},options:{title:"",description:""}},delete:{spec:"WOQLClient.deleteDatabase(dburl, key)",descr:"\n\nDeletes a Database\n1)The first (dburl) argument: {string}, it is a terminusDB Url or a terminusDB Id \n2)The second(key) argument: {string}, contains an API key",result:"HTTP 200 on success, otherwise error code"},getSchema:{spec:"WOQLClient.getSchema(surl, options)",descr:"\n\nGets the schema of a database.\n1)The first (surl) argument: {string}, it is a dbUrl/schema\n2)The second(key) argument: {string}, contains an API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",options:{format:"turtle"}},getClassFrames:{spec:"WOQLClient.getClassFrame = function(cfurl, cls, opts)",descr:"\n\nRetrieves a WOQL query on the specified database which updates the state and returns the results\nThe first (cfurl) argument can be\n1) a valid URL of a terminus database or\n2) omitted - the current database will be used\nthe second argument (cls) is the URL / ID of a document class that exists in the database schema\nthe third argument (opts) is an options json - opts.key is an optional API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",options:{format:"turtle"}},updateSchema:{spec:"WOQLClient.updateSchema(schurl, docs, options)",descr:"\n\nUpdates the Schema of the specified database\n1)The first (surl) argument :{string}, is a dbUrl/schema\n2)The second(docs) argument:{object}, is a valid owl ontology (new schema to be updated) in turtle format\n3)The third (key) argument:{string}, contains an API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",args:{document:"doc"},options:{format:"turtle",editmode:"replace"}},createDocument:{spec:"WOQLClient.createDocument(docurl, document, options)",descr:"\n\nCreates a new document in the specified database\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\n2)The second(document) argument: {object}, is a valid document in json-ld\n3)The third (key) argument:{string}, contains an API key",result:"Created Document on success (HTTP 200), Violation Report Otherwise (HTTP 400+)",args:{document_url:"url",document:"doc"},options:{format:"turtle",fail_on_id_denied:!1}},viewDocument:{spec:"WOQLClient.getDocument(docurl, options)",descr:"\n\nRetrieves a document from the specified database\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\n2)The second (key) argument: {string}, contains an API key",result:"Document (HTTP 200), Violation Report Otherwise (HTTP 400+)",args:{document_url:"url"},options:{format:"turtle"}},updateDocument:{spec:"WOQLClient.updateDocument(docurl, document, options)",descr:"\n\nUpdates a document in the specified database with a new version\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\n2)The second(document) argument: {object}, is a valid document in json-ld\n3)The third (key) argument:{string} argument contains an API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",args:{document_url:"url",document:"doc"},options:{format:"turtle",editmode:"replace"}},deleteDocument:{spec:"WOQLClient.deleteDocument(docurl, key)",descr:"\n\nDeletes a document from the specified database\n1)The first (docurl) argument: {string},is a dbUrl/document/document_id\n2)The second (key) argument: {string}, contains an API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",args:{document_url:"url"}},select:{spec:"WOQLClient.select(dburl, query, options)",descr:"\n\nExecutes a read-only WOQL query on the specified database and returns the results\n1)The first (docurl) argument: {string}, is a terminusDB Url or a terminusDB Id\n2)The second (query) argument: {object}, a valid query in json-ld format \n3)The third (key) argument:{string}, contains an API key",result:"WOQL Result (HTTP 200), otherwise error code",args:{woql:"woql"}},update:{spec:"WOQLClient.update(dburl, query, options)",descr:"\n\nExecutes a WOQL query on the specified database which updates the state and returns the results\n1)The first (dburl) argument: {string}, is a terminusDB Url or a terminusDB Id\n2)The second (query) argument: {object}, a valid query in json-ld format \n3)The third (key) argument:{string}, contains an API key",result:"WOQL Result (HTTP 200), otherwise error code",args:{woql:"woql"}},lookup:{spec:"WOQLClient.lookup(database_url, woql, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url",term:"string"}},map:{spec:"WOQLClient.lookup(source, target, woql, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{source:"json",target:"json",woql:"json"}},getClassFrame:{spec:"WOQLClient.getClassFrame(class, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url"}},getPropertyFrame:{spec:"WOQLClient.getPropertyFrame(class, property, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url",property:"url"}},getFilledPropertyFrame:{spec:"WOQLClient.getPropertyFrame(document_url, property, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{document_url:"url",property:"url"}},getSubClasses:{spec:"WOQLClient.getSubClasses(class, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url"}}};return t[e]},toggleVisibility:function(e){e.classList.contains("terminus-display")?(e.classList.remove("terminus-display"),e.classList.add("terminus-hide")):e.classList.contains("terminus-hide")&&(e.classList.remove("terminus-hide"),e.classList.add("terminus-display"))},extractValueFromCell:function(e){return(new DOMParser).parseFromString(e,"text/xml").firstChild.innerHTML},activateSelectedNav:function(e,t){o("terminus-selected"),function(e){if(e.ui.showControl("get_document")){u(document.getElementsByClassName("terminus-get-doc")[0])}if(e.ui.showControl("create_document")){u(document.getElementsByClassName("terminus-create-doc")[0])}}(t),e.classList.add("terminus-selected")}}},function(e,t,r){var n=r(6);function i(e,t,r){if(this.client=e,this.options=t,this.ui=r,this.default_limit=1e3,this.prefixes={},e.connectionConfig.platformEndpoint()){var n=e.connectionConfig.server.substring(0,e.connectionConfig.server.lastIndexOf("platform"));this.sid=n;var i=e.connectionConfig.server.substring(0,e.connectionConfig.server.lastIndexOf("platform"))+e.connectionConfig.dbid;this.prefixes.s=i+"/ontology/main#",this.prefixes.g=n,this.prefixes.db=i+"/",this.prefixes.doc=i+"/candidate/",this.prefixes.dg=i+"/graph/main/"}else this.sid=e.connectionConfig.serverURL(),this.prefixes.s=e.connectionConfig.schemaURL()+"#",this.prefixes.dg=e.connectionConfig.dbURL()+"/schema",this.prefixes.doc=e.connectionConfig.docURL(),this.prefixes.db=e.connectionConfig.dbURL()+"/",this.prefixes.g=e.connectionConfig.serverURL();for(var a in TerminusClient.FrameHelper.standard_urls)this.prefixes[a]=TerminusClient.FrameHelper.standard_urls[a]}i.prototype.setPrefixes=function(e){this.prefixes=e},i.prototype.shorten=function(e){for(var t in this.prefixes)if(this.prefixes[t]==e.substring(0,this.prefixes[t].length))return t+":"+e.substring(this.prefixes[t].length);return e},i.prototype.execute=function(e){var t=this.wrap(e),r=this;return this.client.select(!1,t).then((function(e){return new n.WOQLResult(e,r,r.options,r.ui)}))},i.prototype.wrap=function(e){return{"@context":this.prefixes,from:[this.client.connectionConfig.dbURL(),e]}},i.prototype.getConcreteDocumentClassPattern=function(e){e=e||"v:Class";return{and:[this.getSubclassQueryPattern(e,"tcs:Document"),{not:[this.getAbstractQueryPattern(e)]}]}},i.prototype.getAbstractQueryPattern=function(e){return{quad:[e,"tcs:tag","tcs:abstract","db:schema"]}},i.prototype.getSubclassQueryPattern=function(e,t){return{sub:[e,t]}},i.prototype.queryWrappedWithLimit=function(e,t,r){return{limit:[t=t||this.default_limit,{start:[r=r||0,e]}]}},i.prototype.getAllDocumentQuery=function(e,t,r){var n={and:[{triple:["v:Document","rdf:type","v:Type"]},this.getSubclassQueryPattern("v:Type","tcs:Document")]};return e&&n.and.push(e),this.queryWrappedWithLimit(n,t,r)},i.prototype.getEverythingQuery=function(e,t,r){var n={triple:["v:Subject","v:Predicate","v:Object"]};return e&&(n={and:[n,e]}),this.queryWrappedWithLimit(n,t,r)},i.prototype.getPropertyListQuery=function(e,t,r){var n={and:[{quad:["v:Property","rdfs:range","v:Range","db:schema"]},{opt:[{quad:["v:Property","rdf:type","v:Type","db:schema"]}]},{opt:[{quad:["v:Property","rdfs:label","v:Label","db:schema"]}]},{opt:[{quad:["v:Property","rdfs:comment","v:Comment","db:schema"]}]},{opt:[{quad:["v:Property","rdfs:domain","v:Domain","db:schema"]}]}]};return e&&(n={and:[n,e]}),this.queryWrappedWithLimit(n,t,r)},i.prototype.getElementMetaDataQuery=function(e,t,r){var n={and:[{quad:["v:Element","rdf:type","v:Type","db:schema"]},{opt:[{quad:["v:Element","rdfs:label","v:Label","db:schema"]}]},{opt:[{quad:["v:Element","rdfs:comment","v:Comment","db:schema"]}]},{opt:[{quad:["v:Element","tcs:tag","v:Abstract","db:schema"]}]},{opt:[{quad:["v:Element","rdfs:domain","v:Domain","db:schema"]}]},{opt:[{quad:["v:Element","rdfs:range","v:Range","db:schema"]}]}]};return e&&(n={and:[n,e]}),this.queryWrappedWithLimit(n,t,r)},i.prototype.getClassListMetaDataQuery=function(e,t,r){var n={and:[{quad:["v:Element","rdf:type","owl:Class","db:schema"]},{opt:[{quad:["v:Element","rdfs:label","v:Label","db:schema"]}]},{opt:[{quad:["v:Element","rdfs:comment","v:Comment","db:schema"]}]},{opt:[{quad:["v:Element","tcs:tag","v:Abstract","db:schema"]}]}]};return e&&(n={and:[n,e]}),this.queryWrappedWithLimit(n,t,r)},i.prototype.getClassMetaDataQuery=i.prototype.getClassListMetaDataQuery,i.prototype.getDataOfChosenClassQuery=function(e,t,r){var n={and:[{triple:["v:Document","rdf:type",e]},{opt:[{triple:["v:Document","v:Property","v:Value"]}]}]};return this.queryWrappedWithLimit(n,t,r)},i.prototype.getDataOfChosenPropertyQuery=function(e,t,r){var n={and:[{triple:["v:Document",e,"v:Value"]},{opt:[{triple:["v:Document","rdfs:label","v:Label"]}]}]};return this.queryWrappedWithLimit(n,t,r)},i.prototype.getInstanceMeta=function(e,t,r){var n={and:[{triple:[e,"rdfs:label","v:InstanceLabel"]},{triple:[e,"rdf:type","v:InstanceType"]},{opt:[{triple:[e,"rdfs:comment","v:InstanceComment"]}]},{opt:[{quad:["v:InstanceType","rdfs:label","v:ClassLabel","db:schema"]}]}]};return this.queryWrappedWithLimit(n,t,r)},i.prototype.getDocumentQuery=function(e,t,r){var n={and:[{triple:[e,"v:Property","v:Property_Value"]},{opt:[{quad:["v:Property","rdfs:label","v:Property_Label","db:schema"]}]},{opt:[{quad:["v:Property","rdf:type","v:Property_Type","db:schema"]}]}]};return this.queryWrappedWithLimit(n,t,r)},i.prototype.getClassesQuery=function(){return{and:[{triple:["v:ID","rdf:type","v:Class"]},{opt:[{triple:["v:ID","rdfs:label","v:Label"]}]},{opt:[{triple:["v:ID","rdfs:comment","v:Comment"]}]},{opt:[{quad:["v:Class","rdfs:label","v:Type","db:schema"]}]},{sub:["v:Class","tcs:Document"]}]}},e.exports=i},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(){this.preloaded=[],this.loaded=[],this.loading=[],this.precluded=[],this.plugins={},this.plugins["font-awesome"]={label:"Font Awesome",css:["https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0-11/css/all.css"]},this.plugins.quill={label:"Quill",js:["https://cdn.quilljs.com/1.3.6/quill.min.js"],css:["https://cdn.quilljs.com/1.3.6/quill.snow.css"]},this.plugins.codemirror={label:"Code Mirror",js:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/xml/xml.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/css/css.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/turtle/turtle.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/javascript/javascript.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/anyword-hint.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/runmode/runmode.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/http/http.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/closebrackets.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/matchbrackets.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/display/placeholder.js"],css:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/neo.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/erlang-dark.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/eclipse.css"]},this.plugins.jquery={label:"jQuery",js:["https://code.jquery.com/jquery-2.2.4.min.js"]},this.plugins.jqueryui={label:"jQuery UI",css:["https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css"],js:["https://code.jquery.com/ui/1.12.0/jquery-ui.js"],requires:["jquery"]},this.plugins.datatables={label:"Data Tables",js:["https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js","https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.16/b-1.5.1/b-html5-1.5.1/datatables.min.js"],css:["https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css"],requires:["jquery"]},this.plugins.gmaps={label:"Google Maps",js:["https://maps.googleapis.com/maps/api/js"]},this.plugins.d3={label:"d3",js:["https://code.jquery.com/jquery-2.2.4.min.js"],requires:["jquery"]},this.plugins.select2={label:"Select 2",js:["https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"],css:["https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css"],requires:["jquery"]}}n.prototype.setPluginOptions=function(e){for(var t in e)if(this.plugins[t])for(var r in e[t])this.plugins[t][r]=e[t][r]},n.prototype.init=function(e,t){e&&this.setPluginOptions(e),this.calculatePreloaded();var r=this.calculateRequiredInitPlugins(e);if(r&&r[0].length)if(r[1].length){var n=this;this.loadPlugins(r[0],(function(){n.loadPlugins(r[1],t)}))}else this.loadPlugins(r[0],t);else t&&t()},n.prototype.calculateRequiredInitPlugins=function(e){if(e){var t=[];for(var n in e)e[n]&&-1==t.indexOf(n)&&("object"!=r(e[n])&&e[n]?t.push(n):"object"==r(e[n])&&(void 0===e[n].loaded||e[n].loaded)&&t.push(n))}else t=this.getDefaultPlugins();for(var i=[],a=0;a<t.length;a++)-1==this.loaded.indexOf(t[a])&&-1==this.preloaded.indexOf(t[a])&&i.push(t[a]);var s=[[],[]];for(a=0;a<i.length;a++)this.plugins[i[a]]&&(this.plugins[i[a]].requires&&this.plugins[i[a]].requires.length?s[1].push(i[a]):s[0].push(i[a]));return s},n.prototype.getAvailablePlugins=function(){return this.plugins},n.prototype.calculatePreloaded=function(){for(var e in this.plugins)this.pluginAvailable(e)&&this.preloaded.push(e)},n.prototype.pluginAvailable=function(e,t){if("object"==r(this.plugins[e])){var n=this.plugins[e];if(n.requires&&n.requires.length)for(var i=0;i<n.requires.length;i++)if(!this.pluginAvailable(n.requires[i],t))return!1;!!n.version&&n.version;switch(e){case"jquery":return"undefined"!=typeof jQuery;case"jqueryui":try{if("undefined"!=typeof jQuery&&jQuery.isFunction(jQuery.fn.slider))return!0}catch(e){}return!1;case"quill":return"undefined"!=typeof Quill;case"jsoneditor":return"undefined"!=typeof JSONEditor;case"codemirror":return"undefined"!=typeof CodeMirror&&this.plugins[e];case"font-awesome":return this.fontAwesomeCheck();case"datatables":return!("undefined"==typeof jQuery||!jQuery.isFunction(jQuery.fn.dataTable));case"select2":return!("undefined"==typeof jQuery||!jQuery.isFunction(jQuery.fn.select2));case"gmaps":return"undefined"!=typeof google&&void 0!==google.maps;case"openlayers":return"undefined"!=typeof ol&&void 0!==ol.Map;case"d3":return"undefined"!=typeof d3}}else console.log(new Error(e+" is not a supported plugin ID"));return!1},n.prototype.fontAwesomeCheck=function(){var e,t,r=document.createElement("span");if(r.className="fa",r.style.display="none",document.body){document.body.insertBefore(r,document.body.firstChild);var n=!1;return"Font Awesome 5 Free"==(e=r,t="font-family",window.getComputedStyle(e,null).getPropertyValue(t)).replace(/"/g,"")&&(n=!0),document.body.removeChild(r),n}return!1},n.prototype.getDefaultPlugins=function(){return["font-awesome"]},n.prototype.loadPlugins=function(e,t){for(var r=e.length,n=function(){--r<=1&&t&&t()},i=0;i<e.length;i++)this.loadPlugin(e[i],n)},n.prototype.loadPlugin=function(e,t){var r=this.plugins[e];if(r.css)for(var n=0;n<r.css.length;n++){var i=e+"_css_"+n;TerminusClient.FrameHelper.loadDynamicCSS(i,r.css[n])}var a=r.js?r.js:[];if("gmaps"==e&&r.key&&(a[0]+="?key="+r.key),r.plugin,"codemirror"==e){var s=a[0],o=e+"_js_"+(a.length-1);a.splice(0,1);var u=this;TerminusClient.FrameHelper.loadDynamicScript(o,s,(function(){u.loadPluginScripts(e,a,t)}))}else this.loadPluginScripts(e,a,t)},n.prototype.loadPluginScripts=function(e,t,r){var n=t.length-1,i=this,a=function(){0==n&&(-1==i.loaded.indexOf(e)&&i.loaded.push(e),-1!=i.loading.indexOf(e)&&i.loading.splice(i.loading.indexOf(e),1),r()),n--};0==t.length?this.loaded.push(e):this.loading.push(e);for(var s=0;s<t.length;s++){var o=e+"_js_"+s;TerminusClient.FrameHelper.loadDynamicScript(o,t[s],a)}},n.prototype.loadPageCSS=function(e){cssfid="terminus_client_css";var t=document.getElementById(cssfid);t&&t.parentNode.removeChild(t),e&&(cssurl="css/"+e+".css",TerminusClient.FrameHelper.loadDynamicCSS(cssfid,cssurl))},n.prototype.pluginLoadable=function(e){return-1!==this.precluded.indexOf(e)||this.pluginLoadedOrLoading(e)},n.prototype.pluginLoadedOrLoading=function(e){return-1!=this.loaded.indexOf(e)||(-1!=this.preloaded.indexOf(e)||-1!=this.loading.indexOf(e))},n.prototype.disabled=function(e,t){if(-1!=this.precluded.indexOf(e))return!0;if(t.requires)for(var r=0;r<t.requires.length;r++)if(!this.pluginLoadedOrLoading(t.requires[r]))return!0;return!1},n.prototype.getPluginDOM=function(e,t,r){var n=document.createElement("a"),i=document.createElement("span");n.appendChild(i),i.setAttribute("class","terminus-plugin-control");var a=document.createElement("input");a.id="terminus-plugin-control-"+e,a.type="checkbox",-1!=this.preloaded.indexOf(e)?(a.checked=!0,a.disabled=!0):-1!=this.loaded.indexOf(e)?a.checked=!0:-1!=this.loading.indexOf(e)?a.checked=!0:this.disabled(e,t)&&(a.disabled=!0);var s=document.createElement("label");s.setAttribute("class","terminus-plugin-label terminus-pointer"),s.setAttribute("for",a.id),s.appendChild(document.createTextNode(t.label)),i.appendChild(s),i.appendChild(a);var o=this;return a.addEventListener("change",(function(){o.togglePlugin(e,r)})),n},n.prototype.togglePlugin=function(e,t){if(-1==this.loaded.indexOf(e)){this.loadPlugin(e,(function(){t.redraw()}))}else this.unloadPlugin(e);TerminusClient.FrameHelper.removeChildren(t.plugins),t.drawPlugins()},n.prototype.unloadPlugin=function(e){if(!this.plugins[e]||-1==this.loaded.indexOf(e))return console.log(new Error(e+" plugin unload request when it is not loaded")),!1;var t=this.plugins[e],r=t.js?t.js.length:0;t.plugin&&r++;for(var n=0;n<r;n++){var i=e+"_js_"+n;(a=document.getElementById(i))&&a.parentNode.removeChild(a)}r=t.css?t.css.length:0;for(n=0;n<r;n++){var a;i=e+"_css_"+n;(a=document.getElementById(i))&&a.parentNode.removeChild(a)}this.loaded.splice(this.loaded.indexOf(e),1)},n.prototype.getAsDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-plugin-manager");var r=document.createElement("span");r.setAttribute("class","terminus-plugin-control-header terminus-plugin-nav terminus-pointer"),r.appendChild(document.createTextNode("Plugins")),t.appendChild(r);var n=document.createElement("a");return this.showPlugins(n,e),r.appendChild(n),n.style.display="none",r.addEventListener("click",(function(){"none"==n.style.display?n.style.display="block":n.style.display="none"})),t},n.prototype.showPlugins=function(e,t){for(var r in e.setAttribute("style","background-color: #111;"),this.plugins)e.appendChild(this.getPluginDOM(r,this.plugins[r],t))},e.exports=n},function(module,exports,__webpack_require__){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ObjectViewer=__webpack_require__(9),HTMLStringViewer=__webpack_require__(10),HTMLStringEditor=__webpack_require__(21),HTMLBooleanViewer=__webpack_require__(22),HTMLBooleanEditor=__webpack_require__(23),HTMLChoiceViewer=__webpack_require__(24),HTMLChoiceEditor=__webpack_require__(25),HTMLCoordinateViewer=__webpack_require__(26),HTMLCoordinateEditor=__webpack_require__(27),HTMLDateViewer=__webpack_require__(28),HTMLDateEditor=__webpack_require__(29),HTMLEntityViewer=__webpack_require__(30),HTMLEntityEditor=__webpack_require__(31),HTMLImageViewer=__webpack_require__(32),HTMLImageEditor=__webpack_require__(33),HTMLLinkViewer=__webpack_require__(34),HTMLNumberViewer=__webpack_require__(35),HTMLRangeViewer=__webpack_require__(36),HTMLRangeEditor=__webpack_require__(37),SantizedHTMLViewer=__webpack_require__(38),GoogleMapEditor=__webpack_require__(39),GoogleMapViewer=__webpack_require__(40),HTMLMarkupEditor=__webpack_require__(41),S2EntityEditor=__webpack_require__(42),RenderingMap={registeredDataViewers:{},registeredDataEditors:{},registeredPropertyViewers:{},registeredPropertyEditors:{},registeredObjectViewers:{},registeredObjectEditors:{},getValidDataViewerList:function(e,t){var r=["HTMLStringViewer"];return t&&void 0!==this.registeredDataViewers[t]&&(r=r.concat(this.registeredDataViewers[t])),void 0!==this.registeredDataViewers[e]&&(r=r.concat(this.registeredDataViewers[e])),r},getValidDataEditorList:function(e,t){var r=["HTMLStringEditor"];if(t&&void 0!==this.registeredDataEditors[t]){var n=this.registeredDataEditors[t];if(n)for(var i=0;i<n.length;i++)-1==r.indexOf(n[i])&&r.push(n[i])}return void 0!==this.registeredDataEditors[e]&&(r=r.concat(this.registeredDataEditors[e])),r},getValidPropertyViewerList:function(e,t,r,n){var i=["HTMLPropertyViewer"];return e&&void 0!==this.registeredPropertyViewers[e]&&(i=i.concat(this.registeredPropertyViewers[e])),r&&void 0!==this.registeredPropertyViewers[r]&&(i=i.concat(this.registeredPropertyViewers[r])),n&&void 0!==this.registeredPropertyViewers[n]&&(i=i.concat(this.registeredPropertyViewers[n])),t&&void 0!==this.registeredPropertyViewers[t]&&(i=i.concat(this.registeredPropertyViewers[t])),i},getValidPropertyEditorList:function(e,t,r,n){var i=["HTMLPropertyViewer"];return e&&void 0!==this.registeredPropertyEditors[e]&&(i=i.concat(this.registeredPropertyEditors[e])),r&&void 0!==this.registeredPropertyEditors[r]&&(i=i.concat(this.registeredPropertyEditors[r])),n&&void 0!==this.registeredPropertyEditors[n]&&(i=i.concat(this.registeredPropertyEditors[n])),t&&void 0!==this.registeredPropertyEditors[t]&&(i=i.concat(this.registeredPropertyEditors[t])),i},getViewer:function getViewer(type,options){var vi=this.renderers[type];options=options||{};try{var viewer=eval("new "+type+"."+type+"("+JSON.stringify(options)+")");return viewer}catch(e){alert("failed on create "+e.toString())}},getAvailablePropertyViewers:function(e,t){for(var r=[],n=[],i=this.getValidPropertyViewerList(e),a=0;a<i.length;a++)-1==n.indexOf(i[a])&&n.push(i[a]);for(a=0;a<n.length;a++)if(this.renderers[n[a]]){var s=this.renderers[n[a]];r.push({value:n[a],label:s.label})}return r},getAvailablePropertyEditors:function(e,t){for(var r=[],n=[],i=this.getValidPropertyEditorList(),a=0;a<i.length;a++)-1==n.indexOf(i[a])&&n.push(i[a]);for(a=0;a<n.length;a++)if(this.renderers[n[a]]){var s=this.renderers[n[a]];r.push({value:n[a],label:s.label})}return r},getAvailableDataViewers:function(e,t){for(var r=[],n=[],i=this.getValidDataViewerList(e,t),a=0;a<i.length;a++)-1==n.indexOf(i[a])&&n.push(i[a]);for(a=0;a<n.length;a++)if(this.renderers[n[a]]){var s=this.renderers[n[a]];r.push({value:n[a],label:s.label})}return r},getAvailableDataEditors:function(e,t){for(var r=[],n=[],i=this.getValidDataEditorList(e,t),a=0;a<i.length;a++)-1==n.indexOf(i[a])&&n.push(i[a]);for(a=0;a<n.length;a++)if(this.renderers[n[a]]){var s=this.renderers[n[a]];r.push({value:n[a],label:s.label})}return r},getViewerForDataFrame:function(e,t){var r=this.getValidDataViewerList(e,t);return r[r.length-1]},getEditorForDataFrame:function(e,t){var r=this.getValidDataEditorList(e,t);return r[r.length-1]},registerViewerForTypes:function(e,t,r){for(var n=0;n<r.length;n++)void 0===this.registeredDataViewers[r[n]]&&(this.registeredDataViewers[r[n]]=[]),-1==this.registeredDataViewers[r[n]].indexOf(e)&&(this.registeredDataViewers[r[n]].push(e),this.renderers[e]={label:t})},registerEditorForTypes:function(e,t,r){for(var n=0;n<r.length;n++)void 0===this.registeredDataEditors[r[n]]&&(this.registeredDataEditors[r[n]]=[]),-1==this.registeredDataEditors[r[n]].indexOf(e)&&(this.registeredDataEditors[r[n]].push(e),this.renderers[e]={label:t})},registerEditorForFrameType:function(e,t,r){this.renderers[e]={label:t},void 0===this.registeredDataEditors[r]&&(this.registeredDataEditors[r]=[]),-1==this.registeredDataEditors[r].indexOf(e)&&this.registeredDataEditors[r].push(e)},registerViewerForFrameType:function(e,t,r){this.renderers[e]={label:t},void 0===this.registeredDataViewers[r]&&(this.registeredDataViewers[r]=[]),-1==this.registeredDataViewers[r].indexOf(e)&&this.registeredDataViewers[r].push(e)},registerViewerForProperties:function(e,t,r){for(var n=0;n<r.length;n++)void 0===this.registeredPropertyViewers[r[n]]&&(this.registeredPropertyViewers[r[n]]=[]),-1==this.registeredPropertyViewers[r[n]].indexOf(e)&&(this.registeredPropertyViewers[r[n]].push(e),this.renderers[e]={label:t})},registerEditorForProperties:function(e,t,r){for(var n=0;n<r.length;n++)void 0===this.registeredPropertyEditors[r[n]]&&(this.registeredPropertyEditors[r[n]]=[]),-1==this.registeredPropertyEditors[r[n]].indexOf(e)&&(this.registeredPropertyEditors[r].push(e),this.renderers[e]={label:t})},renderers:{HTMLStringViewer:{label:"String Viewer"},HTMLStringEditor:{label:"String Editor"},HTMLPropertyViewer:{label:"HTML Property Viewer"}},patternMatchesRenderer:function(e,t){if("object"==_typeof(e)&&e.length){for(var r=0;r<e.length;r++){if(!new FramePattern(e[r]).checkRenderer(t))return!1}return!0}return new FramePattern(e).checkRenderer(t)},addPlugin:function(e){"gmaps"==e&&(this.registerEditorForTypes("GoogleMapEditor","Google Map Editor",["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"]),this.registerViewerForTypes("GoogleMapViewer","Google Map Editor",["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"])),"quill"==e&&this.registerEditorForTypes("HTMLMarkupEditor","Quill WYSIWIG HTML Editor",["xdd:html"]),"select2"==e&&RenderingMap.registerEditorForFrameType("S2EntityEditor","S2 Autocomplete Selector","document"),"jsoneditor"==e&&RenderingMap.registerEditorForFrameType("S2EntityEditor","S2 Autocomplete Selector","document")},getAvailableObjectViewers:function(e){return["html","json"]},decorateRenderer:function(e,t){var r=this.compileOptions(e,t);if(r&&r.mode?t.mode=r.mode:t.parent&&t.parent.mode?t.mode=t.parent.mode:t.mode="view",r&&r.view?t.view=r.view:t.parent&&t.parent.view?t.view=t.parent.view:t.view="full",r&&r.facets?t.facets=r.facets:t.facets=t.getDefaultFacets(),r&&r.facet&&"object"==_typeof(t.facets[r.facet]))t.facet=r.facet;else{var n=t.getDefaultFacet();"object"==_typeof(t.facets[n])?t.facet=n:t.facet=key(t.facets)}return r&&r.hide_disabled_buttons?t.hide_disabled_buttons=r.hide_disabled_buttons:t.parent?t.hide_disabled_buttons=parent.hide_disabled_buttons:t.hide_disabled_buttons=!0,r&&"object"==_typeof(r.features)?t.features=r.features:t.features=t.facets[t.facet].features,r&&"object"==_typeof(r.controls)?t.controls=r.controls:t.controls=t.facets[t.facet].controls,r&&void 0!==r.viewerType&&(t.viewerType=r.viewerType,r.viewerOptions&&(t.viewerOptions=r.viewerOptions)),r&&void 0!==r.header||(t.header_viewer=new ObjectViewer.HTMLObjectHeaderViewer),r&&r.filter,r&&r.sort,e},compileOptions:function(e,t){var r={};for(var n in e)"rules"!=n&&(r[n]=e[n]);if(e.rules)for(var i=0;i<e.rules.length;i++){if((!e.rules[i].pattern||this.patternMatchesRenderer(e.rules[i].pattern,t))&&e.rules[i].output)for(var a in e.rules[i].output)r[a]=e.rules[i].output[a]}return r}};RenderingMap.registerViewerForTypes("HTMLBooleanViewer","Checkbox Viewer",["xsd:boolean"]),RenderingMap.registerEditorForTypes("HTMLBooleanEditor","Checkbox Editor",["xsd:boolean"]),RenderingMap.registerViewerForFrameType("HTMLChoiceViewer","Choice Viewer","oneOf"),RenderingMap.registerEditorForFrameType("HTMLChoiceEditor","Choice Selector","oneOf"),RenderingMap.registerViewerForTypes("HTMLCoordinateViewer","Coordinate Viewer",["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"]),RenderingMap.registerEditorForTypes("HTMLCoordinateEditor","Coordinate Editor",["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"]),RenderingMap.registerViewerForTypes("HTMLDateViewer","Date Viewer",["xsd:time","xsd:date","xsd:dateTime","xsd:gYear","xsd:gYearRange","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:dateTimeStamp"]),RenderingMap.registerEditorForTypes("HTMLDateEditor","Date Editor",["xsd:time","xsd:date","xsd:dateRange","xsd:dateTime","xsd:gYear","xsd:gYearRange","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:dateTimeStamp"]),RenderingMap.registerViewerForFrameType("HTMLEntityViewer","Document Viewer","document"),RenderingMap.registerEditorForFrameType("HTMLEntityEditor","Document Selector","document"),RenderingMap.registerViewerForTypes("HTMLImageViewer","Image Viewer",["xdd:url","xsd:anyURI","xsd:base64Binary"]),RenderingMap.registerEditorForTypes("HTMLImageEditor","Image Editor",["xsd:base64Binary"]),RenderingMap.registerViewerForTypes("HTMLImageViewer","Image Viewer",["xdd:url","xsd:anyURI","xsd:base64Binary"]),RenderingMap.registerEditorForTypes("HTMLImageEditor","Image Editor",["xsd:base64Binary"]),RenderingMap.registerViewerForTypes("HTMLLinkViewer","Link Viewer",["xdd:url","xsd:anyURI"]),RenderingMap.registerViewerForTypes("HTMLNumberViewer","Number with commas",["xsd:decimal","xsd:double","xsd:float","xsd:short","xsd:integer","xsd:long","xsd:nonNegativeInteger","xsd:positiveInteger","xsd:negativeInteger","xsd:nonPositiveInteger"]),RenderingMap.registerViewerForTypes("HTMLRangeViewer","Range Viewer",["xdd:gYearRange","xdd:dateRange","xdd:integerRange","xdd:decimalRange"]),RenderingMap.registerEditorForTypes("HTMLRangeEditor","Range Editor",["xdd:gYearRange","xdd:dateRange","xdd:integerRange","xdd:decimalRange"]),RenderingMap.registerViewerForTypes("SantizedHTMLViewer","Sanitized HTML",["xsd:string","xdd:html"]),FramePattern=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){if(this.renderer=!!e.renderer&&e.renderer,this.label=!!e.value&&e.value,this.frame_type=!!e.frame_type&&e.frame_type,this.subject=!!e.subject&&e.subject,this.subjectClass=!!e.subjectClass&&e.subjectClass,this.range=!!e.range&&e.range,this.property=!!e.property&&e.property,this.value=!!e.value&&e.value,this.parent=!!e.parent&&new FramePattern(e.parent),this.children=[],e.children)for(var t=0;t<e.children.length;t++)this.children.push(new FramePattern(e.children[t]));this.depth=void 0!==e.depth&&e.depth,this.index=!!e.index&&e.index,this.status=!!e.status&&e.status})),FramePattern.prototype.checkRenderer=function(e){var t=this.getRendererType(e);return!!t&&((!this.renderer||this.renderer==t)&&(!this.illegalRuleType(t)&&(!(this.frame_type&&!this.checkFrameType(t,e))&&(!(this.label&&!this.checkLabel(t,e))&&(!(this.subject&&!this.checkSubject(t,e))&&(!(this.subjectClass&&!this.checkSubjectClass(t,e))&&(!(this.property&&!this.checkProperty(t,e))&&(!(!1!==this.depth&&!this.checkDepth(t,e))&&(!(this.range&&!this.checkRange(t,e))&&(!(this.value&&!this.checkValue(t,e))&&(!(this.parent&&!this.checkParent(t,e))&&(!(this.children&&this.children.length&&!this.checkChildren(t,e))&&(!(this.index&&!this.checkIndex(t,e))&&!(this.status&&!this.checkStatus(t,e)))))))))))))))},FramePattern.prototype.illegalRuleType=function(e){return!("value"!=e||!this.children.length&&!this.label)||!("object"!=e||!this.range)},FramePattern.prototype.checkSubject=function(e,t){"object"==_typeof(this.subject)&&this.subject.length||(this.subject=[this.subject]);for(var r=t.subject(),n=0;n<this.subject.length;n++)if(this.IDsMatch(e[n],r))return!0;return!1},FramePattern.prototype.checkChildren=function(e,t){for(var r=0;r<this.children.length;r++){var n=!1;if("object"==e)for(var i in t.properties)this.children[r].checkRenderer(t.properties[i])&&(n=!0);else if("property"==e)for(var a=0;a<=t.values.length;a++)this.children[a].checkRenderer(t.values[a])&&(n=!0);if(!n)return!1}return!0},FramePattern.prototype.checkStatus=function(e,t){"object"==_typeof(this.status)&&0!=this.status.length||(this.status=[this.status]);for(var r=0;r<this.status.length;r++){if("updated"==this.status[r]&&!t.isUpdated())return!1;if("new"==this.status[r]&&!t.isNew())return!1;if("unchanged"==this.status[r]&&t.isUpdated())return!1}return!0},FramePattern.prototype.checkDepth=function(e,t){return this.numberMatch(this.depth,t.depth())},FramePattern.prototype.checkParent=function(e,t){return this.parent.checkRenderer(t.parent)},FramePattern.prototype.checkIndex=function(e,t){return"value"==e&&this.index==t.index},FramePattern.prototype.checkProperty=function(e,t){"object"==_typeof(this.property)&&this.property.length||(this.property=[this.property]);for(var r=0;r<this.property.length;r++)if(this.propertyIDsMatch(t.property(),this.property[r]))return!0;return!1},FramePattern.prototype.checkValue=function(e,t){"object"==_typeof(this.value)&&this.value.length||(this.value=[this.value]);for(var r=0;r<this.value.length;r++)if("value"==e){if(this.valuesMatch(t.value(),this.value[r]))return!0}else if("property"==e){for(var n=0;n<=t.values.length;n++)if("value"==this.getRendererType(t.values[r])&&this.valuesMatch(t.values[r].value(),this.value[r]))return!0}else if("object"==e)for(var i in t.properties)if(this.checkValue(this.getRendererType(t.properties[i]),t.properties[i]))return!0;return!1},FramePattern.prototype.checkRange=function(e,t){"object"==_typeof(this.range)&&this.range.length||(this.range=[this.range]);for(var r=0;r<this.range.length;r++)if(this.rangeIDsMatch(t.range(),this.range[r]))return!0;return!1},FramePattern.prototype.checkSubjectClass=function(e,t){"object"==_typeof(this.subjectClass)&&this.subjectClass.length||(this.subjectClass=[this.subjectClass]);for(var r=t.subjectClass(),n=0;n<this.subjectClass.length;n++)if(this.classIDsMatch(this.subjectClass[n],r))return!0;return!1},FramePattern.prototype.checkFrameType=function(e,t){if("object"==e)return"object"==this.frame_type;if("value"==e){if(t.frame)return this.frame_type==t.frame.ftype();alert(JSON.stringify(t)),alert("No frame")}return"property"!=e&&void 0},FramePattern.prototype.checkLabel=function(e,t){return"function"!=typeof renderder.getLabel?(console.log(new Error("Rule passed to check label with broken renderer object - no getLabel")),!1):this.stringMatch(this.label,t.getLabel())},FramePattern.prototype.IDsMatch=function(e,t){return TerminusClient.FrameHelper.compareIDs(e,t)},FramePattern.prototype.classIDsMatch=function(e,t){return this.IDsMatch(e,t)},FramePattern.prototype.propertyIDsMatch=function(e,t){return this.IDsMatch(e,t)},FramePattern.prototype.rangeIDsMatch=function(e,t){return this.IDsMatch(e,t)},FramePattern.prototype.valuesMatch=function(e,t){return e==t},FramePattern.prototype.numberMatch=function(vala,valb){if("string"==typeof vala)try{return eval(valb+vala)}catch(e){return!1}return vala===valb},FramePattern.prototype.stringMatch=function(e,t){return new RegExp(e).test(t)},FramePattern.prototype.getRendererType=function(e){return"ObjectRenderer"==e.constructor.name?"object":"PropertyRenderer"==e.constructor.name?"property":"ValueRenderer"==e.constructor.name?"value":e.renderer_type?e.renderer_type:(console.log(new Error("frame configuration passed non-renderer type "+e.constructor.name)),console.log(e),!1)},module.exports=RenderingMap},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(2),a={getActionControl:function(e,t,r,n,a){new i;var s=document.createElement("span");s.setAttribute("class","terminus-action-control terminus-save-btn "+e+"-"+t);new i;var o=document.createElement("button");return o.appendChild(document.createTextNode(r)),a?(o.setAttribute("class","terminus-frame-control terminus-frame-btn frame-control-action action-disabled "+e+"-"+t+"-disabled"),o.setAttribute("title",a)):(o.setAttribute("class","terminus-frame-control terminus-frame-btn frame-control-action "+e+"-"+t),o.addEventListener("click",(function(){if("Save"==this.innerHTML){var e=document.getElementsByClassName("terminus-object-id-input");e.length>0?e[0].value?n(t):(e[0].setAttribute("placeholder","Required field"),e[0].style.background="#f8d7da"):n(t)}else n(t)}))),s.appendChild(o),s},getSettingsControl:function(e){if((new i).pluginAvailable("font-awesome")){var t=document.createElement("icon");return"property"==e?t.setAttribute("class","fa fa-cog terminus-pointer"):"data"==e&&t.setAttribute("class","fa fa-edit terminus-pointer"),t.setAttribute("style","margin: 10px;"),t}var r=document.createElement("button");return r.setAttribute("class","terminus-btn"),r.appendChild(document.createTextNode("Settings")),r},getControlIcon:function(e){var t;switch(e){case"delete":t="-alt-delete";break;case"add":t="-plus";break;case"reset":t="-undo";break;case"save":t="-save";break;case"hide":t="-eye-slash"}return t},getSelectionControl:function(e,t,r,i){var a=document.createElement("select");a.setAttribute("class","terminus-frame-selector frame-control-selection "+e);for(var s=0;s<t.length;s++){var o=document.createElement("option");if("object"==n(t[s])){o.value=t[s].value;var u=t[s].label?document.createTextNode(t[s].label):document.createTextNode(TerminusClient.FrameHelper.labelFromURL(t[s].value));o.appendChild(u)}else o.value=t[s],u=TerminusClient.FrameHelper.labelFromURL(o.value),o.appendChild(document.createTextNode(u));r==o.value&&o.setAttribute("selected","selected"),a.appendChild(o)}return a.addEventListener("change",(function(){i(this.value)})),a},getModeSelectorDOM:function(e,t){var r=document.createElement("span");if(r.setAttribute("class","terminus-mode terminus-"+e+"-mode"),"view"==t.mode){var n=function(){t.setMode("edit")};r.appendChild(a.getActionControl("terminus-mode terminus-"+e+"-mode","edit"," Edit ",n))}else{if(t.isNew())return!1;n=function(){t.cancel()};r.appendChild(a.getActionControl(e,"cancel","Cancel",n))}return r},goToName:function(e,t,r){var n=window.location.href;if(n){var i=n.split("#")[0],a=TerminusClient.FrameHelper.getShorthand(e);a||(a=e),(o=a.split(":")).length>1&&(a=o[1]);var s=a;if(t){var o,u=TerminusClient.FrameHelper.getShorthand(t);u||(u=t),(o=u.split(":")).length>1&&(u=o[1]),s+="_"+u,r&&(s+="_"+r)}window.location=i+"#"+s}},getInfoboxDOM:function(e,t,r,n,i){var a=document.createElement("span");if(a.setAttribute("class","terminus-frame-infobox-box terminus-"+e),n&&a.setAttribute("title",n),t){var s=document.createElement("span");s.setAttribute("class","terminus-frame-infobox-label terminus-"+e+"-label"),s.appendChild(document.createTextNode(t)),a.appendChild(s)}var o=document.createElement("span");o.setAttribute("class","terminus-frame-infobox-spacer terminus-"+e+"-spacer"),o.appendChild(document.createTextNode(" ")),a.appendChild(o);var u=document.createElement("span");if(u.setAttribute("class","terminus-frame-infobox-value terminus-"+e+"-value terminus-property-label-align"),i)i.value=r,u.appendChild(i);else if(r){var l=TerminusClient.FrameHelper.getShorthand(r);if(l){var c=l.split(":");l=c[1],u.setAttribute("title",r),u.appendChild(document.createTextNode(l))}else u.appendChild(document.createTextNode(r))}return a.appendChild(u),a}};e.exports=a},function(e,t,r){var n=r(1);TerminusClassChooser=function(e,t,r){this.ui=e,this.choice=r||!1,this.filter=t,this.show_single=!0},TerminusClassChooser.prototype.setRoot=function(e){this.root=e},TerminusClassChooser.prototype.setFilter=function(e){this.filter=e},TerminusClassChooser.prototype.change=function(e){alert("Need to specify class chooser function ("+e+")")},TerminusClassChooser.prototype.getAsDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-class-chooser");var r=document.createElement("select");r.setAttribute("class",e+" terminus-type-select terminus-class-select");var i=this;r.addEventListener("change",(function(){this.choice=this.value,i.change(this.value),this.value=""})),t.appendChild(r);var a=new n(this.ui.client,{},this.ui),s=a.getClassListMetaDataQuery(this.filter);i=this;return a.execute(s).then((function(e){var n=i.getResultsAsOptions(e);if(n){for(var a=0;a<n.length;a++)r.appendChild(n[a]);i.options=n}else t.removeChild(r)})),t},TerminusClassChooser.prototype.getResultsAsOptions=function(e){var t=[];if(e.bindings){if(0==this.show_single&&e.bindings.length<2)return!1;if(this.empty_choice){var r=document.createElement("option");r.setAttribute("class","terminus-class-choice terminus-empty-choice"),r.value="",r.appendChild(document.createTextNode(this.empty_choice)),t.push(r)}for(var n=[],i=0;i<e.bindings.length;i++){var a=this.getVariableValueFromBinding("Element",e.bindings[i]);if(a||(a=this.getVariableValueFromBinding("Class",e.bindings[i])),a&&-1==n.indexOf(a)){n.push(a);var s=document.createElement("option");s.setAttribute("class","terminus-class-choice"),s.value=a,s.value==this.choice&&(s.selected=!0);var o=this.getVariableValueFromBinding("Label",e.bindings[i]);o&&"unknown"!=o||(o=TerminusClient.FrameHelper.labelFromURL(a)),o["@value"]&&(o=o["@value"]),s.appendChild(document.createTextNode(o)),t.push(s)}}}return t},TerminusClassChooser.prototype.getVariableValueFromBinding=function(e,t){for(var r in t){if(r.substring(r.lastIndexOf("/")+1)==e)return t[r]}return!1},e.exports=TerminusClassChooser},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(2),a=r(8);function s(e,t,r,n){this.ui=n,this.query=t,this.bindings=e&&e.bindings?e.bindings:[]}function o(e,t,r,n,a,s){this.ui=e,this.result=t,this.wQuery=r,this.options=n,this.qPage=s,this.pman=new i,this.settings=a}s.prototype.count=function(){return this.bindings.length},s.prototype.shorten=function(e){return this.query.shorten(e)},s.prototype.hasBindings=function(e){return e?e.bindings&&e.bindings.length:this.bindings&&this.bindings.length},o.prototype.showTable=function(){return!this.options||void 0===this.options.show_table||this.options.show_table},o.prototype.orderColumns=function(e){var t=[];for(var r in e)-1==t.indexOf(r)&&t.unshift(r);return t},o.prototype.getAsDOM=function(e,t){var r=document.createElement("div");if(e.appendChild(r),t){var n=document.createElement("div");n.setAttribute("class","terminus-margin-top-bottom terminus-module-head"),n.appendChild(document.createTextNode("Results")),r.appendChild(n)}return this.result&&this.result.hasBindings()&&this.showTable()?(this.getTableDOM(this.result.bindings,r),r):(nor=document.createElement("div"),nor.setAttribute("class","terminus-no-res-alert"),nor.appendChild(document.createTextNode("No results available, create new ones to view them here...")),r.appendChild(nor),r)},o.prototype.getTableDOM=function(e,t){if(this.pman.pluginAvailable("datatables")){var r=this.getTable(e,!0,{});return t.appendChild(r.tab),new a.Datatables(this,this.qPage).draw(r,t),t.classList.add("terminus-expandable"),t.classList.add("terminus-dt-result-cont"),n}var n=this.getTable(e,!1,{});t.appendChild(n)},o.prototype.getDtTableDOMOnChange=function(e,t,r){var n=this.getTable(e,!0,r);return t.appendChild(n.tab),n},o.prototype.formatResultsForDatatableDisplay=function(e,t){for(var r=[],i={},a=[],s={},o={},u=this.orderColumns(e[0]),l=0;l<u.length;l++){var c=TerminusClient.FrameHelper.validURL(u[l])?TerminusClient.FrameHelper.labelFromURL(u[l]):u[l];r.push({data:c})}for(l=0;l<e.length;l++){i={};for(var d=0;d<u.length;d++){if("object"==n(e[l][u[d]]))var p=e[l][u[d]]["@value"]?e[l][u[d]]["@value"]:"Object?";else if("string"==typeof e[l][u[d]]){"unknown"==(p=this.result.shorten(e[l][u[d]]))&&(p=""),"doc:"==p.substring(0,4)&&(p=this.getDocumentLocalLink(p).outerHTML)}i[c=TerminusClient.FrameHelper.validURL(u[d])?TerminusClient.FrameHelper.labelFromURL(u[d]):u[d]]=p}a.push(i)}return o.columns=r,s.data=a,s.recordsTotal=65,s.recordsFiltered=65,s.draw=1,o.data=s,o},o.prototype.getTableBody=function(e,t){for(var r=document.createElement("tbody"),i=0;i<e.length;i++){for(var a=document.createElement("tr"),s=0;s<t.length;s++){var o=document.createElement("td");if("object"==n(e[i][t[s]]))var u=e[i][t[s]]["@value"]?e[i][t[s]]["@value"]:"?";else if("string"==typeof e[i][t[s]])u=this.result.shorten(e[i][t[s]]);if("unknown"==u&&(u=""),"doc:"==u.substring(0,4)){var l=this.getDocumentLocalLink(u);o.appendChild(l)}else o.appendChild(document.createTextNode(u));a.appendChild(o)}r.appendChild(a)}return r},o.prototype.getDocumentLocalLink=function(e){var t=document.createElement("a");t.setAttribute("title",e),t.setAttribute("href","#");var r=this;return t.addEventListener("click",(function(){r.result.ui&&(r.result.ui.showDocument(this.title),r.result.ui.redraw())})),t.appendChild(document.createTextNode(e)),t},o.prototype.getTable=function(e,t,r){var n=document.createElement("table");n.setAttribute("class","terminus-hover-table");for(var i=document.createElement("thead"),a=document.createElement("tr"),s=this.orderColumns(e[0]),o=0;o<s.length;o++){var u=document.createElement("th");u.setAttribute("class","terminus-table-header-full-css");var l=-1!=s[o].indexOf("http")?TerminusClient.FrameHelper.labelFromURL(s[o]):s[o];u.appendChild(document.createTextNode(l)),a.appendChild(u)}if(i.appendChild(a),n.appendChild(i),t){var c=document.createElement("tbody");n.appendChild(c);var d={};return d.result=this.formatResultsForDatatableDisplay(e,r),d.tab=n,d}c=this.getTableBody(e,s);return n.appendChild(c),n},e.exports={WOQLResultsViewer:o,WOQLResult:s}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(1),a=r(20);function s(e,t,r){this.ui=e,this.server=this.ui.server(),this.db=this.ui.db(),this.init(),this.mode=r&&r.mode?r.mode:"view",this.editor=!(!r||!r.editor)&&r.editor,this.load_schema=!r||!r.load_schema||r.load_schema,this.config_options=this.getBuiltInViewerOptions(),this.options=r||this.config_options[t],this.action=t,this.document=!1}s.prototype.init=function(){var e=new i(this.ui.client,this.options,this.ui),t=e.getClassMetaDataQuery(),r=this;r.classmeta={},r.instancemeta={},e.execute(t).then((function(e){if(e&&e.hasBindings()){for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t].Class;n&&void 0===r.classmeta[n]&&(r.classmeta[n]=e.bindings[t])}r.refreshPage()}})).catch((function(e){console.log(e)}))},s.prototype.getInstanceMeta=function(e){if(this.instancemeta&&void 0!==this.instancemeta[e])return this.instancemeta[e];var t=new i(this.ui.client,this.options,this.ui),r=t.getInstanceMeta(e);return t.execute(r).then((function(e){return!(!e||!e.hasBindings())&&e.bindings[0]})).catch((function(e){console.log(e)}))},s.prototype.getClassMeta=function(e){return!!n(this.classmeta[e])&&this.classmeta[e]},s.prototype.loadCreateDocument=function(e){if(e){this.ui.showBusy("Fetching frame for document class "+e);var t=this;return this.mode="edit",this.page_config="create",-1==e.indexOf("/")&&-1==e.indexOf(":")&&(e="schema:"+e),this.loadDocumentSchema(e).then((function(e){t.ui.clearBusy(),t.setLabel()})).catch((function(e){console.error(e),t.ui.clearBusy(),t.ui.showError(e)}))}},s.prototype.loadDocument=function(e,t){if(!e)return!1;var r=this;return"doc:"==e.substring(0,4)&&(e=e.substring(4)),this.page_config="view",e=e.replace("/candidate","/platform/document"),this.ui.showBusy("Loading Document from "+e),this.ui.client.getDocument(e,{"terminus:encoding":"terminus:frame"}).then((function(e){return r.ui.clearBusy(),r.loadDataFrames(e),r.setLabel(),r.refreshPage(),r.load_schema?r.loadDocumentSchema(r.document.cls).then((function(){r.refreshPage()})).catch((function(e){console.error(e)})):e})).catch((function(e){console.error(e),r.ui.clearBusy(),r.ui.showError(e)}))},s.prototype.loadDocumentSchema=function(e){var t=this,r=TerminusClient.FrameHelper.unshorten(e);return this.ui.client.getClassFrame(!1,r).then((function(r){t.loadSchemaFrames(r,e),t.refreshPage()}))},s.prototype.deleteDocument=function(e){this.document=!1;var t=this;return this.ui.showBusy("Deleting Document "+e),this.ui.client.deleteDocument(e).then((function(e){t.ui.clearBusy()})).catch((function(e){t.ui.clearBusy(),t.ui.showError(e)}))},s.prototype.createDocument=function(e){var t=this,r=this.renderer.extract();return this.ui.showBusy("Creating document"),this.ui.client.createDocument(e,r,{"terminus:encoding":"jsonld"}).then((function(r){t.ui.clearBusy(),t.ui.showDocument(e)})).catch((function(e){t.ui.clearBusy(),e.data&&e.data["terminus:witnesses"]?t.ui.showViolations(e.data["terminus:witnesses"],"instance"):t.ui.showError(e)}))},s.prototype.updateDocument=function(){var e=this.document.subjid,t=this.renderer.extract(),r=this;return this.ui.showBusy("Updating document "+e),this.ui.client.updateDocument(e,t,{"terminus:encoding":"jsonld"}).then((function(t){r.ui.clearBusy(),r.ui.showDocument(e)})).catch((function(e){r.ui.clearBusy(),e.data&&e.data["terminus:witnesses"]?r.ui.showViolations(e.data["terminus:witnesses"],"instance"):r.ui.showError(e)}))},s.prototype.loadDataFrames=function(e,t){t||(this.document?t=this.document.cls:e&&e.length&&e[0]&&e[0].domain&&(t=e[0].domain)),t?this.document?this.document.loadDataFrames(e):this.document=new TerminusClient.ObjectFrame(t,e):alert("Missing Class Failed to add dataframes due to missing class")},s.prototype.loadSchemaFrames=function(e,t){t||e&&e.length&&e[0]&&e[0].domain&&(t=e[0].domain),t?(this.document||(this.document=new TerminusClient.ObjectFrame(t)),e&&(this.document.loadClassFrames(e),this.document.subjid||(this.document.newDoc=!0,this.document.fillFromSchema("_:")))):this.error("Missing Class","Failed to add class frames due to missing class")},s.prototype.render=function(){if(!this.renderer&&this.document){this.page_config&&(this.options=this.getOptionsFromPageConfig(this.page_config));try{this.renderer=new a.ObjectRenderer(this.document,!1,this.options),this.renderer.mode=this.mode,this.renderer.controller=this}catch(e){console.error("TerminusDocumentViewer render",e.toString())}}if(this.renderer)return this.renderer.render()},s.prototype.getBuiltInViewerOptions=function(){return FrameConfig},s.prototype.getOptionsFromPageConfig=function(e){return"object"==n(this.config_options[e])?this.config_options[e]:this.options},s.prototype.getClient=function(){return this.ui.client},s.prototype.extract=function(e){return this.renderer.extract()},s.prototype.getLabel=function(){var e=!!this.cls&&this.cls;return e||(e=this.docid?this.docid:"Void"),e},s.prototype.setLabel=function(){if(this.document&&this.labdom){TerminusClient.FrameHelper.removeChildren(this.labdom);for(var e=this.document.getDataFrames(TerminusClient.FrameHelper.getStdURL("rdfs","label")),t=0;t<e.length;t++){var r=e[t].get();r&&this.labdom.appendChild(document.createTextNode(r))}}},s.prototype.refreshPage=function(){if(this.pagedom){TerminusClient.FrameHelper.removeChildren(this.pagedom);var e=this.render();e&&this.pagedom.appendChild(e)}},s.prototype.getAsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-document-holder"),"edit"!==this.mode&&(this.controldom=document.createElement("div"),this.controldom.setAttribute("class","terminus-document-controller"),Object.keys(this.config_options).length>1&&this.controldom.appendChild(this.getDocumentPageControls()),e.appendChild(this.controldom)),this.pagedom=document.createElement("div"),this.pagedom.setAttribute("class","terminus-document-page");var t=this.render();return t&&this.pagedom.appendChild(t),e.appendChild(this.pagedom),e},s.prototype.getDocumentPageControls=function(){var e=document.createElement("select");for(var t in e.setAttribute("class","terminus-form-select terminus-document-config"),this.config_options)if("create"!==t){var r=document.createElement("option");r.value=t,this.page_config==t&&(r.selected=!0),r.appendChild(document.createTextNode(this.config_options[t].label)),e.appendChild(r)}var n=this;return e.addEventListener("change",(function(){n.page_config=this.value,n.renderer=!1,n.refreshPage()})),e},e.exports=s},function(e,t,r){var n=r(0);function i(e){this.ui=e}function a(e,t){this.wrViewer=e,this.wQuery=e.wQuery,this.ui=e.ui,this.qPage=t}i.prototype.convertToDatatable=function(e){var t=this,r=jQuery(e).DataTable({searching:!1,pageLength:25,lengthMenu:[10,25,50,75,100],paging:!0,select:!0,initComplete:function(e){e.oInstance.api().$("td").each((function(){this.setAttribute("title",$(this).html())}))},columnDefs:[{targets:"_all",className:"truncate"}],createdRow:function(e){var t=$(e).find(".truncate");t.attr("title",t.html())}});return jQuery(e,"tbody").on("click","td",(function(){if(5!=r.cell(this).index().column)t.ui.showDBMainPage();else{var e=r.row(jQuery(this).parents("tr")).data(),i=n.extractValueFromCell(e[0]);t.ui.deleteDatabase(i)}})),e.setAttribute("class","stripe dataTable terminus-db-size"),e.setAttribute("cellpadding","1"),e.setAttribute("cellspacing","0"),e.setAttribute("border","0"),e},i.prototype.draw=function(e){return this.convertToDatatable(e)},a.prototype.executeQuery=function(e,t,r){var n=this;this.wQuery.execute(e).then((function(e){return n.wrViewer.getDtTableDOMOnChange(e.bindings,r,t)})).catch((function(e){console.error(e),n.ui.showError(e)}))},a.prototype.getQueryOnPagination=function(e,t){switch(t.query){case"Show_All_Documents":return e.getAllDocumentQuery(null,t.pageLength,t.start);case"Show_All_Data":return e.getEverythingQuery(null,t.pageLength,t.start);case"Show_All_Schema_Elements":return e.getElementMetaDataQuery(null,t.pageLength,t.start);case"Show_Document_Classes":var r=e.getConcreteDocumentClassPattern("Class");return e.getClassMetaDataQuery(r);case"Show_All_Properties":return e.getPropertyListQuery(null,t.pageLength,t.start);case"Show_All_Classes":return e.getClassMetaDataQuery(null,t.pageLength,t.start);case"Show_Data_Class":return e.getDataOfChosenClassQuery(t.chosenValue,t.pageLength,t.start);case"Show_Property_Class":return e.getDataOfChosenPropertyQuery(t.chosenValue,t.pageLength,t.start);case"Show_Document_Info_by_Id":return e.getDocumentQuery(t.chosenValue,t.pageLength,t.start);default:console.log("Invalid woql option passed")}},a.prototype.generateNewQueryOnPageChange=function(e){this.qPage&&n.deleteStylizedEditor(this.ui,e.qTextDom);var t=this.getQueryOnPagination(this.wQuery,e);return this.qPage&&(e.qTextDom.value=JSON.stringify(t,void 0,2),n.stylizeEditor(this.ui,e.qTextDom,"query","javascript")),t},a.prototype.getCallbackSettings=function(e,t,r){var n={};return n.pageLength=t,n.start=r,n.qTextDom=e.qTextDom,n.query=e.query,n.chosenValue=e.chosenValue,n},a.prototype.setUp=function(e,t,r){TerminusClient.FrameHelper.removeChildren(this.dtdom),this.dtdom=document.createElement("div"),this.dtdom.appendChild(e),r.appendChild(this.dtdom),this.qTextDom=t.qTextDom,this.query=t.query,this.chosenValue=t.chosenValue},a.prototype.getNewDataOnChange=function(e,t,r){var n=this.getCallbackSettings(this,t._iDisplayLength,t._iDisplayStart),i=this.generateNewQueryOnPageChange(n);return this.executeQuery(i,n,r)},a.prototype.getDataFromServer=function(e,t){var r=this,n=e.tab;this.setUp(n,this.wrViewer.settings,t);jQuery(n).DataTable({searching:!1,pageLength:r.wrViewer.settings.pageLength,serverSide:!0,processing:!0,lengthMenu:[5,10,25,50,75,100],dom:"RBlftip",columns:e.result.columns,paging:!0,select:!0,initComplete:function(e){e.oInstance.api().$("td").each((function(){this.setAttribute("title",$(this).html())}))},ajax:function(n,i,a){if(Object.entries(e.result.data).length>0){var s=e.result.data;e.result.data={}}else{s=r.getNewDataOnChange(this,a,t);console.log("res",s)}i(s)},buttons:[{extend:"copy",text:"Copy to clipboard"},{extend:"excel",text:"Export to Excel"}],columnDefs:[{targets:"_all",className:"truncate"}],createdRow:function(e){var t=$(e).find(".truncate");t.attr("title",t.html())},scrollX:!0});return n.setAttribute("class","stripe dataTable"),n.setAttribute("style","margin: 0!important"),n.setAttribute("cellpadding","1"),n.setAttribute("cellspacing","1"),n.setAttribute("border","0"),n},a.prototype.draw=function(e,t){return this.getDataFromServer(e,t)},e.exports={Datatables:a,CspDatatables:i}},function(e,t,r){var n=r(4);function i(e){this.renderer=e,this.properties=[],this.headerViewer=e.getObjectHeaderViewer()}function a(){}i.prototype.render=function(){if(this.renderedDOM){var e=this.getObjectDOM();this.renderedDOM.replaceWith(e),this.renderedDOM=e}else this.renderedDOM=this.getObjectDOM();return this.renderedDOM.appendChild(this.getObjectIDMarker(this.renderer)),this.headerViewer&&(this.header=this.headerViewer.getAsDOM(this.renderer),this.header&&this.renderedDOM.appendChild(this.header)),this.body=this.getObjectBodyDOM(),this.body&&this.renderedDOM.appendChild(this.body),this.renderedDOM},i.prototype.getObjectDOM=function(){var e=this.renderer.getContentOrientation(),t="terminus-object-frame-"+e;if("page"==e)var r=document.createElement("div");else r=document.createElement("span");var n="terminus-object-frame "+t+(this.renderer.parent?"":" terminus-root-frame")+" terminus-object-frame-"+this.renderer.mode;return r.setAttribute("class",n),r.setAttribute("data-class",this.renderer.subjectClass()),r.setAttribute("data-id",this.renderer.subject()),r},i.prototype.getObjectBodyDOM=function(){var e=this.renderer.getContentOrientation(),t="terminus-object-properties-"+e;if("page"==e)var r=document.createElement("div");else r=document.createElement("span");for(var n in r.setAttribute("class","terminus-object-properties "+t),this.properties)this.properties[n]&&r.appendChild(this.properties[n]);return r},i.prototype.getFeatureDOM=function(e){if(this.hasFeatureViewer(e))return this.featureViewer[e](this.renderer,this)},i.prototype.redraw=function(){TerminusClient.FrameHelper.removeChildren(this.renderedDOM),this.properties=[],this.renderer.render(this)},i.prototype.redrawHeader=function(){if(this.headerViewer&&this.header){var e=this.headerViewer.getAsDOM(this.renderer);this.header.replaceWith(e),this.header=e}},i.prototype.redrawBody=function(){if(this.body){var e=this.getObjectBodyDOM();this.body.replaceWith(e),this.body=e}},i.prototype.addRenderedProperty=function(e,t){this.properties[e]=t},i.prototype.clear=function(){TerminusClient.FrameHelper.removeChildren(this.renderedDOM),this.properties={}},i.prototype.remove=function(){this.renderedDOM.parentNode.removeChild(this.renderedDOM)},i.prototype.goTo=function(e,t){n.goToName(e,t)},i.prototype.getObjectIDMarker=function(e){var t=document.createElement("a");t.setAttribute("class","terminus-object-idmarker");var r=TerminusClient.FrameHelper.getShorthand(e.subject());if(r||(r=e.subject()),r){var n=r.split(":");n.length>1&&(r=n[1]),t.setAttribute("name",r)}return t},a.prototype.getAsDOM=function(e){var t,r,n=e.getContentOrientation(),i="terminus-object-frame-btn terminus-object-header-"+n;if("page"==n)var a=document.createElement("div");else a=document.createElement("span");if(a.setAttribute("class","terminus-object-header "+i),e.showFeature("facet")){var s=this.getObjectFacetDOM(e);s&&a.appendChild(s)}e.showFeature("label")&&((t=this.getObjectLabelDOM(e))&&a.appendChild(t));if(e.showFeature("id")){var o=this.getObjectIDDOM(e);o&&a.appendChild(o)}if(e.showFeature("type")){var u=this.getObjectTypeDOM(e);u&&a.appendChild(u)}e.showFeature("status")&&((t=this.getObjectStatusDOM(e))&&a.appendChild(t));if(e.showFeature("view")){var l=this.getViewPropertyDOM(e);l&&a.appendChild(l)}if(e.showFeature("viewer")){var c=this.getViewerSelectorDOM(e);c&&a.appendChild(c)}e.showFeature("control")&&((r=this.getObjectControlsDOM(e))&&a.appendChild(r));e.showFeature("summary")&&((r=this.getObjectSummaryDOM(e))&&a.appendChild(r));return a},a.prototype.getObjectSummaryDOM=function(e){var t=e.getSummary();return n.getInfoboxDOM("object-summary",!1,t.long,t.status)},a.prototype.getObjectControlsDOM=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-object-controls"),e.showFeature("add")){var r=this.getAddPropertyDOM(e);r&&t.appendChild(r)}if(e.showFeature("mode")){var i=n.getModeSelectorDOM("object",e);i&&t.appendChild(i)}if(e.showFeature("delete")){var a=this.getObjectDeleteDOM(e);a&&t.appendChild(a)}if(e.showFeature("clone")){var s=this.getObjectCloneDOM(e);s&&t.appendChild(s)}if(e.showFeature("reset")){var o=this.getObjectResetDOM(e);o&&t.appendChild(o)}if(e.showFeature("update")){var u=this.getObjectUpdateDOM(e);u&&t.appendChild(u)}if(e.showFeature("show")){var l=this.getObjectShowDOM(e);l&&t.appendChild(l)}if(e.showFeature("hide")){var c=this.getObjectHideDOM(e);c&&t.appendChild(c)}return t},a.prototype.getObjectFacetDOM=function(e){var t=e.getAvailableFacets();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-object-facet");var i=n.getSelectionControl("object-facet",t,e.currentFacet(),(function(t){t&&e.setFacet(t)}));return r.appendChild(i),r}return!1},a.prototype.getObjectLabelDOM=function(e){var t=e.getLabel();return!!t&&n.getInfoboxDOM("object-label",!1,t)},a.prototype.getObjectIDDOM=function(e){var t=e.subject(),r=!1;return"edit"==e.mode&&e.isNewDocument()?(e.idDOM&&(t=e.idDOM.value),(r=document.createElement("input")).setAttribute("class","terminus-object-id-input"),r.required=!0,"_:"==t&&(t=""),e.idDOM=r):e.isNewDocument()&&"_:"==t&&(t="New Document"),n.getInfoboxDOM("object-id","ID",t,"Every fragment of data is identified by a unique URL",r)},a.prototype.getObjectTypeDOM=function(e){if("edit"==e.mode&&e.parent&&e.parent.isClassChoice()&&e.isNew()){var t=e.parent.getAvailableClassChoices();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-change-class");var i=document.createElement("span");i.setAttribute("class","terminus-property-change-label"),i.appendChild(document.createTextNode("Type")),r.appendChild(i);var a=n.getSelectionControl("change-class",t,e.subjectClass(),(function(t){t&&e.changeClass(t)}));return r.appendChild(a),r}}var s=e.getClassMeta(e.subjectClass()),o=e.subjectClass(),u="All objects have types, identified by a unique URL";return s&&(o=s.Label&&s.Label["@value"]?s.Label["@value"]:o,u=s.Comment&&s.Comment["@value"]?e.subjectClass()+" "+s.Comment["@value"]:u),n.getInfoboxDOM("object-type","Type",o,u)},a.prototype.getObjectStatusDOM=function(e){var t=e.getSummary();return n.getInfoboxDOM("status-"+t.status,!1,t.status,t.status)},a.prototype.getAddPropertyDOM=function(e){var t=e.getAddableProperties();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-object-add-property"),t.unshift({value:"",label:"Add New Property"});var i=!e.cardControlAllows("add")&&"Cardinality Rules Forbid Add",a=n.getSelectionControl("add-property",t,"",(function(t){t&&e.addNewProperty(t)}),i);return r.appendChild(a),r}return!1},a.prototype.getViewPropertyDOM=function(e){var t=e.getViewableProperties();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-object-view-property"),t.unshift({value:"",label:"View Property"});var i=n.getSelectionControl("view-property",t,"",(function(t){t&&e.goToProperty(t)}));return r.appendChild(i),r}return!1},a.prototype.getObjectDeleteDOM=function(e){var t=!e.cardControlAllows("delete")&&"Cardinality Rules Forbid Delete";return n.getActionControl("object","delete","Delete",(function(){e.delete()}),t)},a.prototype.getObjectCloneDOM=function(e){var t=!e.cardControlAllows("clone")&&"Cardinality Rules Forbid Clone";return n.getActionControl("object","clone","Clone",(function(){e.clone()}),t)},a.prototype.getObjectResetDOM=function(e){var t=!e.isUpdated()&&"Nothing to reset";return n.getActionControl("object","reset","Reset",(function(){e.reset()}),t)},a.prototype.getViewerSelectorDOM=function(e){var t=e.getAvailableViewers();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-object-viewer");var i=e.currentViewer(),a=n.getSelectionControl("object-viewer",t,i,(function(t){t&&e.setViewer(t)}));return r.appendChild(a),r}return!1},a.prototype.getObjectHideDOM=function(e){return n.getActionControl("object","hide","Hide",(function(){e.hide()}))},a.prototype.getObjectShowDOM=function(e){return n.getActionControl("object","show","Show",(function(){e.show()}))},a.prototype.getObjectUpdateDOM=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-object-update"),e.isNewDocument())var r=!1;else r=!e.isUpdated()&&"No changes";return t.appendChild(n.getActionControl("object","save","Save",(function(){e.save()}),r)),t},e.exports={HTMLObjectViewer:i,HTMLObjectHeaderViewer:a}},function(e,t){function r(e){this.size=!(!e||!e.size)&&e.size,this.css=e&&e.css?"terminus-literal-value "+e.css:"terminus-literal-value"}r.prototype.getDOM=function(e,t){var r=e.value(),n=document.createElement("span");return n.setAttribute("class",this.css),n.setAttribute("data-value",r),r=document.createTextNode(r),n.appendChild(r),n},e.exports={HTMLStringViewer:r}},function(e,t){function r(){this.months=["January","Februrary","March","April","May","June","July","August","September","October","November","December"]}r.prototype.getMonthName=function(e){return this.months[e-1]},e.exports={HTMLDateHelper:r}},function(e,t){function r(e){this.polygon=!1,this.polyline=!1,this.markers=[],this.init(e)}r.prototype.init=function(e){this.type=e&&e.type?e.type:"Shape",this.width=e&&e.width?e.width:"400px",this.height=e&&e.height?e.height:"400px",this.mapLat=e&&e.mapLat?e.mapLat:"41.9010004",this.mapLong=e&&e.mapLong?e.mapLong:"12.500061500000015",this.zoom=e&&e.zoom?e.zoom:3,this.stroke=e&&e.stroke?e.stroke:{color:"#FF0000",opacity:.3,weight:3},this.fill=e&&e.fill?e.fill:{color:"#FF0000",opacity:.1},this.line=e&&e.line?e.line:{color:"#000000",opacity:.9,weight:3}},r.prototype.destroy=function(){this.clear()},r.prototype.translatePolygonToArray=function(e){for(var t="[",r=e.getPath(),n=!1,i=0;i<r.getLength();i++){n&&(t+=",");var a=r.getAt(i);t=t+"["+a.lat()+","+a.lng()+"]",n=!0}return t+="]"},r.prototype.translateArrayToPolygon=function(e){for(var t=JSON.parse(e),r=[],n=0;n<t.length;n++){var i={};i.lat=t[n][0],i.lng=t[n][1],r.push(i)}return r},r.prototype.createPolygon=function(e,t){var r=new google.maps.Polygon({paths:e,strokeColor:this.stroke.color,strokeOpacity:this.stroke.opacity,strokeWeight:this.stroke.weight,fillColor:this.fill.color,fillOpacity:this.fill.opacity});return r.setMap(t),r},r.prototype.createPolyline=function(e){var t={strokeColor:this.line.color,strokeOpacity:this.line.opacity,strokeWeight:this.line.weight};return e&&(t.paths=e),new google.maps.Polyline(t)},r.prototype.clearMarkers=function(){for(var e=0;e<this.markers.length;e++)this.markers[e].setMap(null);this.markers.length=0},r.prototype.addMarker=function(e,t,r,n,i){var a={position:e,map:t};n&&(a.title=n);var s=new google.maps.Marker(a),o=this;if(0==this.markers.length&&"xdd:coordinatePolygon"==i&&s.addListener("click",(function(){var e=o.getCoordsFromMarkers();o.polygon=o.createPolygon(e,t),o.clearMarkers(),o.polyline.setMap(null),r.set(o.translatePolygonToArray(o.polygon))})),this.markers.push(s),"xdd:coordinatePolyline"==i){var u=this.translatePolygonToArray(this.polyline);r.set(u)}return s},r.prototype.getCoordsFromMarkers=function(){return this.polyline.getPath()},r.prototype.clear=function(){this.polygon&&(this.polygon.setMap(null),this.polygon=!1),this.polyline&&(this.clearMarkers(),this.polyline.setMap(null))},r.prototype.initMap=function(e,t,r,n){if(e.style.width=this.width,e.style.height=this.height,"undefined"==typeof google)return alert("google is not effing loaded"),!1;var i=new google.maps.Map(e,{zoom:this.zoom,center:{lat:parseFloat(this.mapLat),lng:parseFloat(this.mapLong)}});if("xdd:coordinatePolygon"==n){this.polyline=this.createPolyline(),this.polyline.setMap(i);var a=r?this.translateArrayToPolygon(r):[];r&&(this.polygon=this.createPolygon(a,i))}else if("xdd:coordinatePolyline"==n){a=r?this.translateArrayToPolygon(r):[];this.polyline=this.createPolyline(),this.polyline.setMap(i),r&&this.polyline.setPath(a)}else if("xdd:coordinate"==n&&r){this.clearMarkers();var s={position:{lat:parseFloat(r.substring(1,r.indexOf(","))),lng:parseFloat(r.substring(r.indexOf(",")+1,r.length-1))},map:i},o=new google.maps.Marker(s);this.markers.push(o)}return google.maps.event.trigger(i,"resize"),i},e.exports=r},function(e,t,r){var n=r(4);function i(e){this.renderer=e,this.values=[],this.headerViewer=e.getPropertyHeaderViewer()}function a(){}i.prototype.render=function(){var e=document.createElement("div");e.setAttribute("style","display: flex; margin: 10px");var t=document.createElement("br");if(e.appendChild(t),this.propDOM){var r=this.getPropertyDOM();r.setAttribute("style","display: flex; margin: 10px;"),this.propDOM.replaceWith(r),this.propDOM=r}else this.propDOM=this.getPropertyDOM(),this.propDOM.setAttribute("style","display: flex; margin: 10px;");return this.propDOM.appendChild(this.getPropertyIDMarker(this.renderer)),this.headerViewer&&(this.header=this.headerViewer.getAsDOM(this.renderer),this.header&&this.propDOM.appendChild(this.header)),this.body=this.getPropertyBodyDOM(),this.body&&this.propDOM.appendChild(this.body),this.propDOM},i.prototype.getPropertyDOM=function(){var e=this.renderer.getContentOrientation(),t=" terminus-property-frame-display terminus-property-frame-"+e;if("label"==e)var r=document.createElement("span");else r=document.createElement("div");return r.setAttribute("class","terminus-property-frame terminus-zebra-frame "+r+" terminus-property-frame-"+this.renderer.mode+" "+t),r.setAttribute("data-property",this.renderer.property()),r},i.prototype.getPropertyBodyDOM=function(){var e=this.renderer.getContentOrientation(),t="terminus-property-values-"+e;if("page"==e)var r=document.createElement("div");else r=document.createElement("span");r.setAttribute("class","terminus-property-values "+t+" terminus-property-values-align");for(var n=0;n<this.values.length;n++)r.appendChild(this.values[n]);return r},i.prototype.addRenderedValue=function(e){this.values.push(e)},i.prototype.clear=function(){TerminusClient.FrameHelper.removeChildren(this.propDOM),this.values=[]},i.prototype.remove=function(){this.propDOM.parentNode.removeChild(this.propDOM)},i.prototype.redraw=function(){var e=this.getPropertyDOM();this.propDOM.replaceWith(e),this.propDOM=e,this.values=[],this.renderer.render(this)},i.prototype.redrawHeader=function(){if(this.headerViewer&&this.header){var e=this.headerViewer.getAsDOM(this.renderer);this.header.replaceWith(e),this.header=e}},i.prototype.redrawBody=function(){if(this.body){var e=this.getPropertyBodyDOM();this.body.replaceWith(e),this.body=e}},i.prototype.getPropertyIDMarker=function(e){var t=document.createElement("a");t.setAttribute("class","terminus-property-idmarker");var r=TerminusClient.FrameHelper.getShorthand(e.subject());r||(r=e.subject()),(n=r.split(":")).length>1&&(r=n[1]);var n,i=TerminusClient.FrameHelper.getShorthand(e.property());return i||(i=e.property()),(n=i.split(":")).length>1&&(i=n[1]),t.setAttribute("name",r+"_"+i),t},i.prototype.goTo=function(e,t,r){n.goToName(e,t,r)},a.prototype.getAsDOM=function(e){var t=e.getContentOrientation(),r="terminus-property-header-"+t;if("page"==t)var n=document.createElement("div");else n=document.createElement("span");n.setAttribute("class","terminus-text terminus-property-header "+r);var i=document.createElement("span");if(i.setAttribute("class","terminus-property-header-wrapper"),e.showFeature("control")){var a=this.getPropertyControlsDOM(i,e);this.expModeMenu="page"==t?a:null}if(e.showFeature("label")){var s=this.getPropertyLabelDOM(e);if(e.showFeature("status"))(o=this.getPropertyStatusDOM(e))&&s.prepend(o);s&&i.appendChild(s)}else if(e.showFeature("status")){var o;(o=this.getPropertyStatusDOM(e))&&i.appendChild(o)}e.showFeature("summary")&&((s=this.getPropertySummaryDOM(e))&&i.appendChild(s));var u=document.createElement("span");if(u.setAttribute("class","terminus-property-header-info terminus-property-header-info-"+e.currentFacet()),e.showFeature("facet")){var l=this.getPropertyFacetDOM(e);l&&u.appendChild(l)}if(e.showFeature("view")){var c=this.getViewValueDOM(e);c&&u.appendChild(c)}if(e.showFeature("id")){var d=this.getPropertyIDDOM(e);d&&u.appendChild(d)}if(e.showFeature("type")){var p=this.getPropertyRangeDOM(e);p&&u.appendChild(p)}if(e.showFeature("cardinality")&&e.hasCardinalityRestriction()){var h=this.getPropertyCardinalityDOM(e);h&&u.appendChild(h)}e.showFeature("comment")&&((s=this.getPropertyCommentDOM(e))&&u.appendChild(s));return i.appendChild(u),n.appendChild(i),n},a.prototype.getPropertyFacetDOM=function(e){var t=e.getAvailableFacets();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-facet");var i=n.getSelectionControl("property-facet",t,e.currentFacet(),(function(t){t&&e.setFacet(t)}));return r.appendChild(i),r}return!1},a.prototype.getPropertyIDDOM=function(e){return n.getInfoboxDOM("property-id","Property",e.property(),"This property is identified by this unique URL: "+e.property())},a.prototype.getPropertyRangeDOM=function(e){return n.getInfoboxDOM("property-type","Type",e.range(),"The type of arguments that this property accepts")},a.prototype.getPropertySummaryDOM=function(e){var t=e.getSummary();return n.getInfoboxDOM("property-summary",!1,t.long,t.status)},a.prototype.getPropertyStatusDOM=function(e){var t=e.getSummary();return n.getInfoboxDOM("status-"+t.status,!1,t.status,t.status)},a.prototype.getPropertyLabelDOM=function(e){var t=e.getLabel();return n.getInfoboxDOM("property-label",!1,t)},a.prototype.getPropertyCommentDOM=function(e){var t=e.getComment();return n.getInfoboxDOM("property-comment",!1,t)},a.prototype.getPropertyCardinalityDOM=function(e){var t=e.getRestriction();if(t.min&&t.max)if(t.min==t.max)var r=t.min,i="Cardinality: "+t.min;else{r=t.min+"-"+t.max,i="Minimum Cardinality: "+t.min;i+=", Maximum Cardinality: "+t.max}else if(t.min)r=">"+(t.min-1),i="Minimum Cardinality: "+t.min;else{if(!t.max)return!1;r="<"+(t.max+1),i="Maximum Cardinality: "+t.max}return n.getInfoboxDOM("property-cardinality","Cardinality",r,i)},a.prototype.getActionControlDOM=function(e,t){if(t.showFeature("mode")){var r=n.getModeSelectorDOM("property",t);r&&e.appendChild(r)}if(t.showFeature("delete")){var i=this.getPropertyDeleteDOM(t);i&&e.appendChild(i)}var a,s;t.showFeature("add")&&!t.isClassChoice()&&((s=this.getAddValueDOM(t))&&e.appendChild(s));if(t.showFeature("reset")){var o=this.getPropertyResetDOM(t);o&&e.appendChild(o)}if(t.showFeature("update")){var u=this.getPropertyUpdateDOM(t);u&&e.appendChild(u)}if(t.showFeature("show")){var l=this.getPropertyShowDOM(t);l&&e.appendChild(l)}t.showFeature("hide")&&((a=this.getPropertyHideDOM(t))&&e.appendChild(a));t.showFeature("viewer")&&((a=this.getViewerSelectorDOM(t))&&e.appendChild(a));t.showFeature("add")&&t.isClassChoice()&&((s=this.getAddValueDOM(t))&&e.appendChild(s))},a.prototype.getSettingsControlDOM=function(e,t){var r=document.createElement("div");e.appendChild(r);t.getContentOrientation();this.getActionControlDOM(e,t)},a.prototype.getPropertyControlsDOM=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-property-controls");var n=this.getSettingsControlDOM(r,t);return e.appendChild(r),n},a.prototype.getAddValueDOM=function(e){if(!e.isClassChoice()){a=function(){e.add("edit")};var t=!e.cardControlAllows("add")&&"Cardinality Rules Forbid Add";return n.getActionControl("property","add","Add",a,t)}var r=e.getAvailableClassChoices();if(r&&r.length){var i=document.createElement("span");i.setAttribute("class","terminus-property-add-class"),r.unshift({value:"",label:"Add Type"});var a=function(t){t&&e.addClass(t)},s=n.getSelectionControl("add-property",r,"",a);return i.appendChild(s),i}return!1},a.prototype.getViewValueDOM=function(e){var t=e.getViewableValues();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-view-value"),t.unshift({value:"",label:"View Value"});var i=n.getSelectionControl("view-values",t,"",(function(t){e.goToValue(t)}));return r.appendChild(i),r}return!1},a.prototype.getPropertyDeleteDOM=function(e){var t=!e.cardControlAllows("delete")&&"Cardinality Rules Forbid Delete";return n.getActionControl("property","delete","Delete",(function(){e.delete()}),t)},a.prototype.getPropertyHideDOM=function(e){return n.getActionControl("property","hide","Hide",(function(){e.hide()}))},a.prototype.getPropertyResetDOM=function(e){var t=!e.isUpdated()&&"Nothing to reset";return n.getActionControl("property","reset","Reset",(function(){e.reset()}),t)},a.prototype.getPropertyShowDOM=function(e){return n.getActionControl("property","show","Show",(function(){e.show()}))},a.prototype.getPropertyUpdateDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-property-update");var r=!e.isUpdated()&&"No Change";return t.appendChild(n.getActionControl("property","save","Save",(function(){e.save()}),r)),t},a.prototype.getViewerSelectorDOM=function(e){var t=e.getAvailableViewers();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-viewer");var i=e.currentViewer(),a=n.getSelectionControl("property-viewers",t,i,(function(t){t&&e.setViewer(t)}));return r.appendChild(a),r}return!1},a.prototype.showValue=function(e,t){var r=e.subject()+"->"+e.property()+"_"+t;window.location=(""+window.location).replace(/#[A-Za-z0-9_]*$/,"")+"#"+r},e.exports={HTMLPropertyViewer:i,HTMLPropertyHeaderViewer:a}},function(e,t,r){var n=r(4);r(10);function i(e){this.renderer=e,this.headerViewer=e.getValueHeaderViewer()}function a(){}function s(e){this.renderer=e,this.properties=[]}i.prototype.render=function(){if(this.valDOM){var e=this.getValueDOM();this.valDOM.replaceWith(e),this.valDOM=e}else this.valDOM=this.getValueDOM();return this.valDOM.appendChild(this.getValueIDMarker(this.renderer)),this.body=this.getValueBodyDOM(),this.body&&this.valDOM.appendChild(this.body),this.headerViewer&&(this.header=this.headerViewer.getAsDOM(this.renderer),"page"==this.renderer.facet?this.header&&this.expModeMenu&&this.expModeMenu.appendChild(this.header):this.header&&this.valDOM.appendChild(this.header)),this.valDOM},i.prototype.getValueDOM=function(){if("page"==this.renderer.currentFacet())var e=document.createElement("div");else e=document.createElement("span");return e.setAttribute("class","terminus-property-value property-value-"+this.renderer.currentFacet()+" property-value-"+this.renderer.mode),"view"==this.renderer.mode&&e.setAttribute("data-value",this.renderer.value()),e},i.prototype.getValueBodyDOM=function(){if("page"==this.renderer.currentFacet())var e=document.createElement("div");else e=document.createElement("span");if(e.setAttribute("class"," terminus-property-body property-value-body property-value-body-"+this.renderer.currentFacet()+" terminus-property-body-align"),e.setAttribute("style","display: flex;"),this.renderer.showFeature("body"))var t=this.renderer.getDataValueViewer().getDOM(this.renderer,this);else{if(!this.renderer.showFeature("summary"))return!1;t=this.getSummaryDOM()}return t&&e.appendChild(t),e},i.prototype.remove=function(){this.valDOM.parentNode.removeChild(this.valDOM)},i.prototype.redrawHeader=function(){if(this.headerViewer&&this.header){var e=this.headerViewer.getAsDOM(this.renderer);this.header.replaceWith(e),this.header=e}},i.prototype.redrawBody=function(){if(this.body){var e=this.getValueBodyDOM();this.body.replaceWith(e),this.body=e}},i.prototype.getValueIDMarker=function(e){var t=document.createElement("a");t.setAttribute("class","terminus-value-idmarker");var r=TerminusClient.FrameHelper.getShorthand(e.subject());r||(r=e.subject()),(n=r.split(":")).length>1&&(r=n[1]);var n,i=TerminusClient.FrameHelper.getShorthand(e.property());return i||(i=e.property()),(n=i.split(":")).length>1&&(i=n[1]),t.setAttribute("name",r+"_"+i+"_"+e.index),t},i.prototype.getSummaryDOM=function(){var e=this.renderer.getSummary();return HTMLTerminusClient.FrameHelper.getInfoboxDOM("value-summary",!1,e.long,e.long)},i.prototype.internalLink=function(e,t){var r=this,n=function(t){t.preventDefault(),r.renderer.load(e)},i=document.createElement("a");if(i.onClick=n,i.href="",i.addEventListener("click",n),t)i.appendChild(document.createTextNode(t));else{var a=TerminusClient.FrameHelper.getShorthand(e);a?(i.setAttribute("title",e),i.appendChild(document.createTextNode(a))):i.appendChild(document.createTextNode(e))}return i},i.prototype.clear=function(){TerminusClient.FrameHelper.removeChildren(this.valDOM)},a.prototype.getAsDOM=function(e){if("page"==e.currentFacet())var t=document.createElement("div");else t=document.createElement("span");if(t.setAttribute("class","terminus-value-header terminus-value-header-"+e.currentFacet()),e.showFeature("facet")){var r=this.getValueFacetDOM(e);r&&t.appendChild(r)}if(e.showFeature("viewer")){var n=this.getViewerSelectorDOM(e);n&&t.appendChild(n)}if(e.showFeature("type")){var i=this.getValueTypeDOM(e);i&&t.appendChild(i)}if(e.showFeature("status")){var a=this.getValueStatusDOM(e);a&&t.appendChild(a)}if(e.showFeature("control")){var s=this.getValueControlsDOM(e);s&&t.appendChild(s)}return t},a.prototype.getValueFacetDOM=function(e){var t=e.getAvailableFacets();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-value-facet");var i=n.getSelectionControl("value-facet",t,e.currentFacet(),(function(t){t&&e.setFacet(t)}));return r.appendChild(i),r}return!1},a.prototype.getValueTypeDOM=function(e){return n.getInfoboxDOM("value-type","Type",e.type(),"All data values have types, identified by a unique URL")},a.prototype.getValueStatusDOM=function(e){var t=e.getSummary();return n.getInfoboxDOM("status-"+t.status,!1,t.status,t.status)},a.prototype.getValueControlsDOM=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-value-controls"),e.showFeature("mode")){var r=n.getModeSelectorDOM("value",e);r&&t.appendChild(r)}if(e.showFeature("delete")){var i=this.getValueDeleteDOM(e);i&&t.appendChild(i)}if(e.showFeature("clone")){var a=this.getValueCloneDOM(e);a&&t.appendChild(a)}if(e.showFeature("reset")){var s=this.getValueResetDOM(e);s&&t.appendChild(s)}if(e.showFeature("update")){var o=this.getValueUpdateDOM(e);o&&t.appendChild(o)}if(e.showFeature("show")){var u=this.getValueShowDOM(e);u&&t.appendChild(u)}if(e.showFeature("hide")){var l=this.getValueHideDOM(e);l&&t.appendChild(l)}return t},a.prototype.getValueDeleteDOM=function(e){var t=!e.cardControlAllows("delete")&&"Cardinality Rules Forbid Delete";return n.getActionControl("value","delete","Delete",(function(){e.delete()}),t)},a.prototype.getValueResetDOM=function(e){var t=!e.isUpdated()&&"Nothing to reset";return n.getActionControl("value","reset","Reset",(function(){e.reset()}),t)},a.prototype.getValueShowDOM=function(e){return n.getActionControl("value","show","Show",(function(){e.show()}))},a.prototype.getValueHideDOM=function(e){return n.getActionControl("value","hide","Hide",(function(){e.hide()}))},a.prototype.getValueCloneDOM=function(e){var t=!e.cardControlAllows("clone")&&"Cardinality Rules Forbid Clone";return n.getActionControl("value","clone","Clone",(function(){e.clone()}),t)},a.prototype.getValueUpdateDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-value-update");var r=!e.isUpdated()&&"Nothing to save - no change";return t.appendChild(n.getActionControl("value","save","Save",(function(){e.save()}),r)),t},a.prototype.getViewerSelectorDOM=function(e){var t=e.getAvailableViewers();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-value-viewer");var i=e.currentViewer(),a=n.getSelectionControl("data-viewer",t,i,(function(t){t&&e.setViewer(t)}));return r.appendChild(a),r}return!1},s.prototype.render=function(){alert("render json tbd")},s.prototype.redraw=function(){alert("redraw json tbd")},e.exports={HTMLDataViewer:i,HTMLDataHeaderViewer:a,JSONObjectViewer:s}},function(e,t,r){var n=r(1),i=r(5);TerminusDocumentChooser=function(e,t,r,n){this.ui=e,this.root=t,this.choice=r,this.view=n||"id",this.show_button=!0},TerminusDocumentChooser.prototype.setRoot=function(e){this.root=e},TerminusDocumentChooser.prototype.setFilter=function(e){this.filter=e},TerminusDocumentChooser.prototype.change=function(e){alert("Need to specify doc chooser function ("+e+")")},TerminusDocumentChooser.prototype.getAsDOM=function(e){return"label"==this.view&&this.ui.client.connectionConfig.platformEndpoint()&&this.ui.pluginAvailable("select2")?this.getS2DOM(e):this.getIDDOM()},TerminusDocumentChooser.prototype.getS2DOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-document-chooser terminus-doc-holder");var r=new n(this.ui.client,{},this.ui).getSubclassQueryPattern("v:Class","'"+this.root+"'"),a=new i(this.ui,r);a.empty_choice="Filter by Type",a.show_single=!1;var s=this;a.change=function(e){e&&(s.filter=e)},tdom=a.getAsDOM(e),tdom&&t.appendChild(tdom);var o=document.createElement("span");o.setAttribute("class","terminus-entity-reference-value");var u=document.createElement("select");u.setAttribute("class","terminus-entity-class-input"),o.appendChild(u);document.createElement("option");var l={ajax:{url:this.ui.client.dbURL()+"/search",dataType:"json",data:function(e){return e.class=s.filter,JSON.stringify(e)},type:"POST",contentType:"application/json; charset=utf-8",delay:250,cache:!0},placeholder:"Enter Document Name",width:200};return jQuery(u).select2(l).change((function(){callback(this.value)})),t.appendChild(o),t},TerminusDocumentChooser.prototype.getIDDOM=function(){var e=document.createElement("span");e.setAttribute("class","terminus-document-chooser terminus-doc-holder");var t=document.createElement("input");if(t.setAttribute("class","terminus-document-chooser terminus-query-text"),t.setAttribute("placeholder","Enter Document ID"),t.addEventListener("keypress",(function(e){13===(e.which||e.keyCode)&&t.value&&(n.choice=t.value,n.change(t.value))})),e.appendChild(t),this.show_button){var r=document.createElement("button");r.setAttribute("class","terminus-control-button terminus-btn");var n=this;r.addEventListener("click",(function(){t.value&&(n.choice=t.value,n.change(t.value))})),r.appendChild(document.createTextNode("Go")),e.appendChild(r)}return e},TerminusDocumentChooser.prototype.toggleView=function(){"id"==this.view?this.view="label":this.view="id"},TerminusDocumentChooser.prototype.getChangeViewText=function(){return"id"==this.view?"Document Lookup":"Load Document ID"},e.exports=TerminusDocumentChooser},function(e,t,r){var n=r(17),i=r(3);e.exports={TerminusUI:n,RenderingMap:i}},function(e,t,r){var n=r(18),i=r(7),a=r(44),s=r(45),o=r(46),u=r(49),l=r(50),c=r(51),d=r(52),p=r(2),h=r(0),m=r(3);function f(e){this.client=new TerminusClient.WOQLClient,this.controls=[],this.setOptions(e)}f.prototype.connect=function(e){var t=this;this.client.connectionConfig.server=!1;var r=!(!e||!e.key)&&e.key;return this.showBusy("Connecting to server at "+e.server),this.client.connect(e.server,r).then((function(r){t.clearBusy(),e&&e.db&&t.getDBRecord(e.db)?(t.connectToDB(e.db),e.document&&t.showView("get_document")?t.showDocument(e.document):e.schema&&t.showView("get_schema")?t.showSchemaPage(e.schema):e.query&&t.showView("woql_select")?t.showQueryPage(e.query):e.explorer&&t.showView("api_explorer")?t.showExplorer(e.explorer):t.showDBMainPage()):t.showServerMainPage(),t.redraw()})).catch((function(e){throw t.clearBusy(),t.showError(e),e}))},f.prototype.createDatabase=function(e){var t=this;if(!e.id||!e.title)return Promise.reject(new Error(t.getBadArguments("createDatabase","ID and title are mandatory fields")));var r=e.id,n=this.client.connectionConfig.server;t.showBusy("Creating Database "+e.title+" with id "+r);var i=this.generateNewDatabaseDocument(e);return this.client.createDatabase(r,i).then((function(i){if(e.schema){t.showBusy("Fetching imported schema from "+e.schema);var a=e.key?{"terminus:user_key":e.key}:{};return a["terminus:encoding"]="terminus:turtle",t.client.getSchema(e.schema,a).then((function(e){t.showBusy("Updating database with new schema"),t.client.connectionConfig.server=n,t.client.connectionConfig.dbid=r;return t.client.updateSchema(!1,e,{"terminus:encoding":"terminus:turtle"})})).then((function(e){return t.clearBusy(),t.redraw(),e}))}return t.clearBusy(),i})).then((function(e){return t.refreshDBList().then((function(e){if(!(crec=t.client.connection.getDBRecord(r)))return Promise.reject(new Error(t.getCrashString("createDatabase","Failed to retrieve record of created database "+r)));t.client.connectionConfig.dbid=r,t.showDBMainPage(),t.showMessage("Successfully Created Database "+r,"success")}))})).catch((function(e){t.clearBusy(),t.showError(e)}))},f.prototype.deleteDatabase=function(e){var t=this,r=this.client.connection.getDBRecord(),n=e||this.db(),i=r&&r["rdfs:label"]&&r["rdfs:label"]["@value"]?r["rdfs:label"]["@value"]+" (id: "+n+")":n;return this.showBusy("Deleting database "+i),this.client.deleteDatabase(e).then((function(r){return t.clearBusy(),t.client.connectionConfig.dbid=!1,t.removeDB(e),t.showServerMainPage(),t.showMessage("Successfully Deleted Database "+i,"success"),t.refreshDBList(),r})).catch((function(e){t.clearBusy(),t.showError(e)}))},f.prototype.generateNewDatabaseDocument=function(e){var t={"@context":{rdfs:"http://www.w3.org/2000/01/rdf-schema#",terminus:"http://terminusdb.com/schema/terminus#"},"@type":"terminus:Database"};return e.title&&(t["rdfs:label"]={"@language":"en","@value":e.title}),e.description&&(t["rdfs:comment"]={"@language":"en","@value":e.description}),t["terminus:allow_origin"]={"@type":"xsd:string","@value":"*"},t},f.prototype.getBadArguments=function(e,t){return"Bad arguments to "+e+": "+t},f.prototype.getCrashString=function(e,t){return"Results from "+e+" indicate the possibility of a system failure "+t},f.prototype.load=function(e,t){var r={};return e&&-1!=e.indexOf("/document/")?(e=e.substring(0,e.indexOf("/document/")),r.document=e.substring(e.indexOf("/document/")+10)):e&&-1!=e.indexOf("/schema")?(e=e.substring(0,e.indexOf("/schema")),r.schema={}):e&&-1!=e.indexOf("/woql")&&(e=e.substring(0,e.indexOf("/query")),r.query=e.substring(e.indexOf("/query")+7)),r.server=e,t&&(r.key=t),this.connect(r)},f.prototype.getConnectionEndpoint=function(e){return e&&-1!=e.lastIndexOf("/schema")?e.substring(0,e.lastIndexOf("/schema")):e&&-1!=e.lastIndexOf("/document")?e.substring(0,e.lastIndexOf("/document")):e&&-1!=e.lastIndexOf("/frame")?e.substring(0,e.lastIndexOf("/frame")):e&&-1!=e.lastIndexOf("/woql")?e.substring(0,e.lastIndexOf("/woql")):e},f.prototype.server=function(){return this.client.connectionConfig.server},f.prototype.db=function(){return this.client.connectionConfig.dbid},f.prototype.clearServer=function(){this.client.connectionConfig.server=!1},f.prototype.connectToDB=function(e){this.client.connectionConfig.dbid=e,TerminusClient.FrameHelper.standard_urls.doc=this.client.connectionConfig.dbURL()+"/document/",TerminusClient.FrameHelper.standard_urls.scm=this.client.connectionConfig.dbURL()+"/schema#"},f.prototype.clearDB=function(){this.client.connectionConfig.dbid=!1},f.prototype.removeDB=function(e,t){this.client.connection.removeDB(e,t)},f.prototype.getDBRecord=function(e,t){return this.client.connection.getDBRecord(e,t)},f.prototype.refreshDBList=function(){return this.client.connect()},f.prototype.showServerMainPage=function(){this.viewer=new c.TerminusServerViewer(this),this.redrawMainPage()},f.prototype.showLoadURLPage=function(e){this.viewer=new d(this,e),this.redrawMainPage()},f.prototype.showDBMainPage=function(){this.viewer=new a.TerminusDBViewer(this),this.redraw()},f.prototype.showCreateDBPage=function(){this.viewer=new a.TerminusDBCreator(this),this.redrawMainPage()},f.prototype.showSchemaPage=function(e){this.viewer=new l(this),this.redrawMainPage()},f.prototype.showQueryPage=function(e){this.viewer=new o(this,e,this.options),this.redrawMainPage()},f.prototype.showMappingPage=function(e){this.viewer=new u(this,e,this.options),this.redrawMainPage()},f.prototype.showDocument=function(e){this.viewer=new i(this,"view",this.getDocViewerOptions()),this.viewer.loadDocument(e),this.redrawMainPage()},f.prototype.showCreateDocument=function(e){this.viewer=new i(this,"create",this.getDocCreatorOptions()),this.viewer.loadCreateDocument(e),this.redrawMainPage()},f.prototype.redrawMainPage=function(){TerminusClient.FrameHelper.removeChildren(this.main),this.viewer&&this.main.appendChild(this.viewer.getAsDOM())},f.prototype.showResult=function(e){this.showMessage(e,"success")},f.prototype.showError=function(e){this.showMessage(e,"error")},f.prototype.clearMessages=function(e){this.messages&&TerminusClient.FrameHelper.removeChildren(this.messages)},f.prototype.clearMainPage=function(){this.main&&TerminusClient.FrameHelper.removeChildren(this.main)},f.prototype.setMessageDOM=function(e){this.messages=e},f.prototype.setbuttonControls=function(e){this.buttons=e},f.prototype.setControllerDOM=function(e){this.controller=e},f.prototype.setExplorerDOM=function(e){this.explorer=e},f.prototype.setPluginsDOM=function(e){this.plugins=e},f.prototype.setViewerDOM=function(e){this.main=e},f.prototype.draw=function(e,t){e&&e.buttons&&this.setbuttonControls(e.buttons),e&&e.messages&&this.setMessageDOM(e.messages),e&&e.controller&&this.setControllerDOM(e.controller),e&&e.explorer&&this.setExplorerDOM(e.explorer),e&&e.viewer&&this.setViewerDOM(e.viewer),e&&e.plugins&&this.setPluginsDOM(e.plugins),this.plugins&&this.drawPlugins();var r=this;t&&t.server?void 0===this.client.connection.connection[t.server]&&this.connect(t).catch((function(e){r.showLoadURLPage()})):this.showLoadURLPage(),this.buttons&&this.toggleControl()},f.prototype.redraw=function(e){this.clearMessages(),this.controller&&(TerminusClient.FrameHelper.removeChildren(this.controller),this.drawControls()),this.explorer&&TerminusClient.FrameHelper.removeChildren(this.explorer),this.viewer&&this.redrawMainPage(),e&&this.showMessage(e)},f.prototype.toggleDashboardWidget=function(e){TerminusClient.FrameHelper.removeChildren(this.controller),TerminusClient.FrameHelper.removeChildren(this.explorer),h.removeSelectedNavClass("terminus-dashboard-selected"),e.classList.add("terminus-dashboard-selected")},f.prototype.toggleControl=function(){var e=this;this.buttons.client.addEventListener("click",(function(){e.toggleDashboardWidget(this),e.drawControls(),e.showServerMainPage()})),this.buttons.explorer.addEventListener("click",(function(){e.toggleDashboardWidget(this),e.drawExplorer()}))},f.prototype.drawControls=function(){this.controls=[],this.loadControls();for(var e=0;e<this.controls.length;e++){var t=this.controls[e];t&&(nd=t.getAsDOM())&&this.controller.appendChild(nd)}},f.prototype.drawExplorer=function(){if(this.explorer&&this.showControl("api_explorer")){var e=new n(this);ae=e.getAsDOM(),this.explorer.appendChild(ae),this.explorer.style.display="block"}},f.prototype.loadControls=function(){var e;this.showControl("server")&&((e=new c.TerminusServerController(this))&&this.controls.push(e),this.db()&&this.showControl("db")&&(e=new a.TerminusDBController(this))&&this.controls.push(e))},f.prototype.showControl=function(e){return-1!=this.show_controls.indexOf(e)&&(!!this.pseudoCapability(e)||!!this.client.connection.capabilitiesPermit(e))},f.prototype.showView=function(e){return-1!=this.show_views.indexOf(e)&&(!!this.pseudoCapability(e)||!!this.client.connection.capabilitiesPermit(e))},f.prototype.clearBusy=function(e){this.clearMessages(),this.viewer&&"function"==typeof this.viewer.busy&&this.viewer.busy(!1)},f.prototype.getBusyLoader=function(e){var t=document.createElement("div"),r=document.createElement("div");r.setAttribute("class","term-progress-bar-container"),t.appendChild(r);var n=document.createElement("div");n.setAttribute("class","term-progress-bar term-stripes animated reverse slower"),r.appendChild(n);var i=document.createElement("span");i.setAttribute("class","term-progress-bar-inner"),n.appendChild(i),e.appendChild(t)},f.prototype.showMessage=function(e,t){if(this.messages){TerminusClient.FrameHelper.removeChildren(this.messages);var r=document.createElement("div");switch(t){case"busy":var n=document.createElement("div");n.setAttribute("class","terminus-busy-msg"),n.appendChild(document.createTextNode(e)),r.appendChild(n),this.getBusyLoader(r);break;case"success":r.setAttribute("class","terminus-show-msg-success"),r.appendChild(document.createTextNode(e));break;case"error":r.setAttribute("class","terminus-show-msg-error"),r.appendChild(document.createTextNode(e))}this.messages.appendChild(r)}},f.prototype.showViolations=function(e,t){var r=new s(e,this);if(this.messages){var n="schema"==t?" in Schema":" in Document";TerminusClient.FrameHelper.removeChildren(this.messages),this.messages.appendChild(r.getAsDOM(n))}},f.prototype.showBusy=function(e){this.showMessage(e,"busy"),this.viewer&&"function"==typeof this.viewer.busy&&this.viewer.busy(e)},f.prototype.pseudoCapability=function(e){return-1!=["server","db","change-server","api_explorer","import_schema","schema_format"].indexOf(e)},f.prototype.setOptions=function(e){this.show_controls=e&&e.controls?e.controls:["server","db","change-server","schema_format","import_schema","class_frame","create_database","create_document","get_document","update_schema","get_schema","woql_select"],this.show_views=e&&e.views?e.views:this.show_controls,e.document&&(this.document_options=e.document),e.schema&&(this.schema_options=e.schema),this.piman=new p;var t=this;this.piman.init(e.plugins,(function(){for(var e=["gmaps","quill","select2"],r=0;r<e.length;r++)t.piman.pluginAvailable(e[r])&&m.addPlugin(e[r]);t.redraw()})),e.css&&this.piman&&this.piman.loadPageCSS(e.css),this.loadControls()},f.prototype.pluginAvailable=function(e){return this.piman.pluginAvailable(e)},f.prototype.drawPlugins=function(){if(!this.piman)return console.log(new Error("No plugin manager initialised in UI object")),!1;this.plugins.appendChild(this.piman.getAsDOM(this))},f.prototype.getDocViewerOptions=function(){return!(!this.document_options||!this.document_options.view)&&this.document_options.view},f.prototype.getDocCreatorOptions=function(){return!(!this.document_options||!this.document_options.view)&&this.document_options.view},f.prototype.getClassFrameOptions=function(){return this.viewdoc_options},e.exports=f},function(e,t,r){
/**
 * @file Javascript Api explorer tool
 * @author Kitty Jose
 * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more
 *
 * @summary Displays a demo and description of api calls from WOQLCLient and what happens under the hood of api calls
 */
var n=r(2),i=r(0),a={mainNav:{connect:{navText:"Connect API",action:"connect",icon:"link",defaultSelected:!0},database:{navText:"Database API",action:"create",icon:"database"},schema:{navText:"Schema API",action:"schema",icon:"cog"},document:{navText:"Document API",action:"document",icon:"file"},query:{navText:"Query API",action:"query",icon:"search"}},subNav:{database:{createDatabase:{navText:"Create database",action:"create",icon:"plus",defaultSelected:!0},deleteDatabase:{navText:"Delete database",action:"delete",icon:"trash-alt"}},schema:{getSchema:{navText:"View Schema",action:"getSchema",icon:"eye",defaultSelected:!0},updateSchema:{navText:"Update Schema",action:"updateSchema",icon:"arrow-up"},getClassFrames:{navText:"Get Class Frames",action:"getClassFrames",icon:"share-alt"}},document:{viewDocument:{navText:"View Document",action:"viewDocument",icon:"eye",defaultSelected:!0},createDocument:{navText:"Create Document",action:"createDocument",icon:"plus"},updateDocument:{navText:"Update Document",action:"updateDocument",icon:"arrow-up"},deleteDocument:{navText:"Delete Document",action:"deleteDocument",icon:"trash-alt"}},query:{select:{navText:"Select",action:"select",icon:"mouse-pointer",defaultSelected:!0},update:{navText:"Update",action:"update",icon:"arrow-up"}}}};function s(e){this.ui=e,this.viewer=e.main,this.client=new TerminusClient.WOQLClient,this.client.use_fetch=!0,this.client.return_full_response=!0,this.pman=new n}s.prototype.getAsDOM=function(){var e=document.createElement("div");return e.setAttribute("class","terminus-db-controller"),this.ui&&(this.getApiNav(e,this.viewer),this.getApiExplorerDom("connect",this.viewer)),e},s.prototype.setSelectedNavMenu=function(e){i.removeSelectedNavClass("terminus-selected"),e.classList.add("terminus-selected")},s.prototype.setSelectedSubMenu=function(e){i.removeSelectedNavClass("terminus-submenu-selected"),e.classList.add("terminus-submenu-selected")},s.prototype.navOnSelect=function(e,t,r){i.removeSelectedNavClass("terminus-selected"),t.classList.add("terminus-selected"),this.getApiExplorerDom(e,r)},s.prototype.createNavs=function(e,t,r){var n=document.createElement("a");n.setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer"),e.defaultSelected&&n.classList.add("terminus-selected");var i=this;n.addEventListener("click",(function(){i.navOnSelect(e.action,this,t)}));var a=document.createElement("i");a.setAttribute("class","terminus-menu-icon fa fa-"+e.icon),n.appendChild(a);var s=document.createTextNode(e.navText);n.appendChild(s),r.appendChild(n)},s.prototype.getApiNav=function(e,t){var r=document.createElement("div");e.appendChild(r);var n=document.createElement("ul");for(var i in n.setAttribute("class","terminus-ul"),r.appendChild(n),a.mainNav)a.mainNav.hasOwnProperty(i)&&this.createNavs(a.mainNav[i],t,n);return e},s.prototype.getApiExplorerDom=function(e,t){TerminusClient.FrameHelper.removeChildren(t);var r=document.createElement("div");t.appendChild(r),(s=document.createElement("div")).setAttribute("class","container-fluid"),r.appendChild(s);var n=document.createElement("div");n.setAttribute("class","row-fluid"),s.appendChild(n);var i=document.createElement("div");i.setAttribute("class","terminus-module-body"),n.appendChild(i);var a=document.createElement("div");a.setAttribute("class","terminus-module-body terminus-module-body-white-bg terminus-module-body-width"),i.appendChild(a);var s=document.createElement("div");switch(e){case"connect":var o=this.getConnectExplorer(s);a.appendChild(o);break;case"create":o=this.getDatabaseExplorer(s);a.appendChild(o);break;case"schema":o=this.getSchemaApi(s);a.appendChild(o);break;case"document":o=this.getDocumentApi(s);a.appendChild(o);break;case"query":o=this.getQueryApi(s);a.appendChild(o)}return r},s.prototype.changeSubApiDom=function(e,t,r,n){switch(TerminusClient.FrameHelper.removeChildren(n),e){case"database":var i=this.getDatabaseDom(t,n);break;case"schema":case"document":i=this.getShowApiDom(t,n);break;case"query":i=this.getQueryApiDom(t,n);break;default:console.log("Invalid Api Config")}r.appendChild(i)},s.prototype.subNavOnSelect=function(e,t,r,n,i){this.setSelectedSubMenu(r),this.changeSubApiDom(e,t.action,n,i)},s.prototype.createSubNavs=function(e,t,r,n,i){if("getClassFrames"!=t.action){var a=document.createElement("a");a.setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer"),t.defaultSelected&&a.classList.add("terminus-submenu-selected");var s=this;a.addEventListener("click",(function(){s.subNavOnSelect(e,t,this,r,n)}));var o=document.createElement("i");o.setAttribute("class","terminus-menu-icon fa fa-"+t.icon),a.appendChild(o);var u=document.createTextNode(t.navText);a.appendChild(u),i.appendChild(a)}},s.prototype.getConnectExplorer=function(e){var t=document.createElement("BR");e.appendChild(t);var r=this.getSignature("connect");e.appendChild(r),e.appendChild(i.getHeaderDom("Parameters"));t=document.createElement("BR");return e.appendChild(t),this.getForm("",e,!0,"connect","URL : server_url"),e},s.prototype.getDatabaseExplorer=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var n in r.setAttribute("class","terminus-ul-horizontal"),a.subNav.database)a.subNav.database.hasOwnProperty(n)&&this.createSubNavs("database",a.subNav.database[n],e,t,r);e.appendChild(r);var i=this.getDatabaseDom(a.subNav.database.createDatabase.action,t);return e.appendChild(i),e},s.prototype.getSchemaApi=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var n in r.setAttribute("class","terminus-ul-horizontal"),a.subNav.schema)a.subNav.schema.hasOwnProperty(n)&&this.createSubNavs("schema",a.subNav.schema[n],e,t,r);e.appendChild(r);var i=this.getShowApiDom(a.subNav.schema.getSchema.action,t);return e.appendChild(i),e},s.prototype.getDocumentApi=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var n in r.setAttribute("class","terminus-ul-horizontal"),a.subNav.document)a.subNav.document.hasOwnProperty(n)&&this.createSubNavs("document",a.subNav.document[n],e,t,r);e.appendChild(r);var i=this.getShowApiDom(a.subNav.document.viewDocument.action,t);return e.appendChild(i),e},s.prototype.getQueryApi=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var n in r.setAttribute("class","terminus-ul-horizontal"),a.subNav.query)a.subNav.query.hasOwnProperty(n)&&this.createSubNavs("query",a.subNav.query[n],e,t,r);e.appendChild(r);var i=this.getQueryApiDom(a.subNav.query.select.action,t);return e.appendChild(i),e},s.prototype.getDatabaseDom=function(e,t){var r=document.createElement("BR");t.appendChild(r);var n=this.getSignature(e);t.appendChild(n),t.appendChild(i.getHeaderDom("Parameters"));r=document.createElement("BR");return t.appendChild(r),"create"==e?this.getForm(null,t,!1,e,"URL : server/database_id"):this.getForm(null,t,!0,e,"URL : server/database_id"),t},s.prototype.getServerForm=function(){var e=document.createElement("form");e.setAttribute("class","terminus-form-horizontal row-fluid"),(r=document.createElement("div")).setAttribute("class","terminus-control-group"),e.appendChild(r);var t=document.createElement("label");t.setAttribute("class","terminus-control-label"),t.setAttribute("for","basicinput"),t.innerHTML="Url:",r.appendChild(t),(a=document.createElement("div")).setAttribute("class","terminus-controls"),r.appendChild(a);var r,n=document.createElement("input");n.setAttribute("type","text"),n.setAttribute("id","basicinput"),n.setAttribute("class","terminus-input-text"),n.setAttribute("placeholder","URL : server_url"),this.val&&(n.value=this.val),a.appendChild(n),(r=document.createElement("div")).setAttribute("class","terminus-control-group"),e.appendChild(r);var a,s=document.createElement("label");s.setAttribute("class","terminus-control-label"),s.setAttribute("for","basicinput"),s.innerHTML="Key:",r.appendChild(s),(a=document.createElement("div")).setAttribute("class","terminus-controls"),r.appendChild(a);var o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("id","basicinput"),o.setAttribute("class","span8 terminus-input-text"),o.setAttribute("placeholder","Key : key"),this.val&&(o.value=this.val),a.appendChild(o);var u=document.createElement("button");u.setAttribute("class","terminus-btn terminus-send-api-btn"),u.setAttribute("type","button"),u.innerHTML="Send Api";var l=document.createElement("div");e.appendChild(u),e.appendChild(l);var c=this;return u.addEventListener("click",(function(){var e=function(){var e={};return e.url=n.value,e.key=o.value,e}();c.client.connect(e.url,e.key).then((function(e){TerminusClient.FrameHelper.removeChildren(l);i.showHttpResult(e,"connect",l,c.ui)}))})),e},s.prototype.getDatabaseExplorer=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var n in r.setAttribute("class","terminus-ul-horizontal"),a.subNav.database)a.subNav.database.hasOwnProperty(n)&&this.createSubNavs("database",a.subNav.database[n],e,t,r);e.appendChild(r);var i=this.getDatabaseDom(a.subNav.database.createDatabase.action,t);return e.appendChild(i),e},s.prototype.getShowApiDom=function(e,t){var r=document.createElement("BR");t.appendChild(r);var n=this.getSignature(e);t.appendChild(n),t.appendChild(i.getHeaderDom("Parameters"));r=document.createElement("BR");switch(t.appendChild(r),e){case"getSchema":this.getForm("schema",t,!0,e,"URL : server/database_id");break;case"getClassFrames":this.getForm("getClassFrames",t,!0,e,"URL : server/database_id");break;case"updateSchema":this.getForm("schema",t,!1,e,"URL : server/database_id");break;case"viewDocument":case"deleteDocument":this.getForm("document",t,!0,e,"URL : server/database_id/document/document_id");break;case"createDocument":case"updateDocument":this.getForm("document",t,!1,e,"URL : server/database_id/document/document_id");break;default:console.log("Invalid Api Call on form")}return t},s.prototype.getQueryApiDom=function(e,t){var r=document.createElement("BR");t.appendChild(r);var n=this.getSignature(e);t.appendChild(n),t.appendChild(i.getHeaderDom("Parameters"));r=document.createElement("BR");return t.appendChild(r),this.getForm("query",t,!1,e,"URL : server/database_id"),t},s.prototype.getForm=function(e,t,r,n,a){var s=document.createElement("form");s.setAttribute("class","terminus-form-horizontal row-fluid"),(h=document.createElement("div")).setAttribute("class","terminus-control-group"),s.appendChild(h);var o=document.createElement("label");o.setAttribute("class","terminus-control-label"),o.setAttribute("for","basicinput"),o.innerHTML="Url:",h.appendChild(o),(m=document.createElement("div")).setAttribute("class","terminus-controls"),h.appendChild(m);var u=document.createElement("input");switch(u.setAttribute("type","text"),u.setAttribute("id","basicinput"),u.setAttribute("class","span8 terminus-input-text"),u.setAttribute("placeholder",a),m.appendChild(u),e){case"getClassFrames":(h=document.createElement("div")).setAttribute("class","terminus-control-group"),s.appendChild(h);var l=document.createElement("label");l.setAttribute("class","terminus-control-label"),l.setAttribute("for","basicinput"),l.innerHTML="Url/ ID:",h.appendChild(l),(m=document.createElement("div")).setAttribute("class","terminus-controls"),h.appendChild(m);var c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("id","basicinput"),c.setAttribute("class","span8 terminus-input-text"),c.setAttribute("placeholder","Url or ID of document class"),m.appendChild(c)}(h=document.createElement("div")).setAttribute("class","terminus-control-group"),s.appendChild(h);var d=document.createElement("label");d.setAttribute("class","terminus-control-label"),d.setAttribute("for","basicinput"),d.innerHTML="Key:",h.appendChild(d),(m=document.createElement("div")).setAttribute("class","terminus-controls"),h.appendChild(m);var p=document.createElement("input");if(p.setAttribute("type","text"),p.setAttribute("id","basicinput"),p.setAttribute("class","span8 terminus-input-text"),p.setAttribute("placeholder","Key"),m.appendChild(p),!r){var h;(h=document.createElement("div")).setAttribute("class","terminus-control-group"),s.appendChild(h);var m,f=document.createElement("label");f.setAttribute("class","terminus-control-label"),f.setAttribute("for","basicinput"),"query"==e&&(f.innerHTML="Query:"),f.innerHTML="Document:",h.appendChild(f),(m=document.createElement("div")).setAttribute("class","terminus-controls"),h.appendChild(m);var g=document.createElement("textarea");m.appendChild(g),g.setAttribute("class","terminus-api-explorer-text-area"),i.stylizeEditor(this.ui,g,"api-doc","javascript")}t.appendChild(s);var v={};v.url=u,v.key=p,"getClassFrames"==e&&(v.docUrl=c),r||(v.doc=g);var y=this.getApiSendButton(n,v);t.appendChild(y)},s.prototype.getApiForm=function(e,t){var r=document.createElement("form");r.setAttribute("class","terminus-form-horizontal row-fluid");var n=document.createElement("button");n.setAttribute("class","terminus-btn terminus-send-api-btn"),n.setAttribute("type","button"),n.innerHTML="Send Api",r.appendChild(n);var a=document.createElement("div");r.appendChild(a);var s=this;switch(e){case"getSchema":n.addEventListener("click",(function(){var e={};e["terminus:encoding"]=t.enc.value,e["terminus:user_key"]=t.key.value;var r=t.url.value;s.client.getSchema(r,e).then((function(e){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(e,"getSchema",a,s.ui)}))}));break;case"updateSchema":n.addEventListener("click",(function(){var e=this;opts={},opts["terminus:encoding"]=t.enc.value,opts["terminus:user_key"]=t.key.value;var r=t.url.value;s.client.connectionConfig.connected_mode=!1,s.client.updateSchema(r,t.doc.value,opts).then((function(t){var r=document.createElement("textarea");r.setAttribute("readonly",!0),r.innerHTML=t,e.parentNode.appendChild(r),i.stylizeEditor(this.ui,txtar,"schema","turtle")}))}));break;case"viewDocument":n.addEventListener("click",(function(){var r=t.value,n={format:"turtle"};s.client.getDocument(r,n).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"deleteDocument":n.addEventListener("click",(function(){var r=t.value;s.client.deleteDocument(r,{}).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"createDocument":n.addEventListener("click",(function(){var r=t.schemaUrlDom.value,n=t.htmlEditor.getValue();opts={},s.client.createDocument(r,n,opts).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"updateDocument":n.addEventListener("click",(function(){var r=t.schemaUrlDom.value,n=t.htmlEditor.getValue();opts={},opts.editmode="replace",opts.format="json",s.client.updateDocument(r,n,opts).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}))}var o=document.createElement("BR");r.appendChild(o);o=document.createElement("BR");return r.appendChild(o),r},s.prototype.getApiSendButton=function(e,t){var r=document.createElement("form");r.setAttribute("class","terminus-form-horizontal row-fluid");var n=document.createElement("button");n.setAttribute("class","terminus-btn terminus-send-api-btn"),n.setAttribute("type","button"),n.innerHTML="Send Api",r.appendChild(n);var a=document.createElement("div");r.appendChild(a);var s=this;switch(e){case"connect":n.addEventListener("click",(function(){console.log("input",t.url.value),s.client.connect(t.url.value,t.key.value).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"create":n.addEventListener("click",(function(r){s.client.createDatabase(t.url.value,JSON.parse(t.doc.value),t.key.value).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"delete":n.addEventListener("click",(function(){s.client.deleteDatabase(t.url.value,t.key.value).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"getSchema":n.addEventListener("click",(function(){var r={"terminus:encoding":"turtle"};r["terminus:user_key"]=t.key.value;var n=t.url.value;s.client.getSchema(n,r).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"updateSchema":n.addEventListener("click",(function(){opts={},opts["terminus:encoding"]="turtle",opts["terminus:user_key"]=t.key.value;t.doc.value;var r=t.url.value;s.client.connectionConfig.connected_mode=!1,s.client.updateSchema(r,t.doc.value,opts).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"getClassFrames":n.addEventListener("click",(function(r){t.url.value;opts={},opts.explorer=!0,s.client.getClassFrame(t.url,JSON.parse(t.docUrl.value),opts).then((function(t){var r=buttonSelf.parentNode;i.showHttpResult(t,e,r,s.ui)}))}));break;case"viewDocument":n.addEventListener("click",(function(){var r=t.url.value,n={"terminus:encoding":"terminus:frame"};n["terminus:user_key"]=t.key.value,s.client.getDocument(r,n).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"deleteDocument":n.addEventListener("click",(function(){var r=t.url.value,n={};n.key=t.key.value,s.client.deleteDocument(r,n).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"createDocument":n.addEventListener("click",(function(){var r=t.url.value,n=t.doc.value;opts={},opts["terminus:encoding"]="jsonld",opts["terminus:user_key"]=t.key.value,s.client.createDocument(r,JSON.parse(n),opts).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"updateDocument":n.addEventListener("click",(function(){var r=t.url.value,n=t.doc.value;opts={},opts["terminus:encoding"]="jsonld",opts["terminus:user_key"]=t.key.value,s.client.updateDocument(r,JSON.parse(n),opts).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"select":n.addEventListener("click",(function(){var r={};r.key=t.key.value;var n=JSON.parse(t.doc.value);s.client.select(t.url.value,n,r).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;case"update":n.addEventListener("click",(function(){var r={};r.key=t.key.value;var n=JSON.parse(t.doc.value);s.client.update(t.url.value,n,r).then((function(t){TerminusClient.FrameHelper.removeChildren(a);i.showHttpResult(t,e,a,s.ui)}))}));break;default:console.log("Invalid Api call on button")}var o=document.createElement("BR");r.appendChild(o);o=document.createElement("BR");return r.appendChild(o),r},s.prototype.getSignature=function(e){var t=document.createElement("div"),r=document.createElement("button");r.appendChild(document.createTextNode("Click to read API Signature")),r.setAttribute("class","terminus-collapsible"),ic=document.createElement("i"),ic.setAttribute("class","terminus-cheveron-float fa fa-chevron-down"),r.appendChild(ic),t.appendChild(r);var n=document.createElement("BR");t.appendChild(n);var a=document.createElement("div");a.setAttribute("class","terminus-collapsible-content content");var s=i.getFunctionSignature(e),o=document.createTextNode(s.spec),u=document.createElement("pre");u.setAttribute("class","terminus-api-signature-pre"),u.appendChild(o);o=document.createTextNode(s.descr);u.appendChild(o);n=document.createElement("BR");u.appendChild(n);n=document.createElement("BR");u.appendChild(n);o=document.createTextNode(s.result);u.appendChild(o),a.appendChild(u),t.appendChild(a);n=document.createElement("BR");return t.appendChild(n),r.addEventListener("click",(function(){i.tolggleContent(ic,a)})),t},e.exports=s},function(e,t){function r(e,t,r){this.textdom=e,this.mode=t,this.darkMode=r.darkMode,this.jsonldCheck(t)&&(this.mode="javascript")}r.prototype.colorizeTextArea=function(e){var t=CodeMirror.fromTextArea(this.textdom,{mode:this.mode,firstLineNumber:1,lineNumbers:!0,styleActiveLine:!0,lineWrapping:!0,smartIndent:!0,indentWithTabs:!0,newlineAndIndent:!0,autoCloseBrackets:!0,matchBrackets:{afterCursor:!0},extraKeys:{"Ctrl-F":"find",Tab:"autocomplete"},refresh:!0});return this.setCodemirrorSize(t,e),t.defaultCharWidth("20px"),this.darkMode?t.setOption("theme","erlang-dark"):t.setOption("theme","neo"),t},r.prototype.setCodemirrorSize=function(e,t){switch(t){case"query":e.setSize("800","400");break;case"schema":e.setSize("1200","1550");break;case"document":e.setSize("765","500");break;case"api-doc":e.setSize("800","500")}},r.prototype.updateTextArea=function(e){e.save(),setTimeout((function(){e.refresh()}),1),e.on("change",(function(){e.save()}))},r.prototype.colorizePre=function(){if(CodeMirror.runMode(this.textdom.innerText,this.mode,this.textdom),this.darkMode)var e="cm-s-erlang-dark";else e="cm-s-neo";return this.textdom.setAttribute("class","CodeMirror CodeMirror-wrap "+e+" terminus-wrap-text terminus-wrapper-height "),this.textdom},r.prototype.jsonldCheck=function(e){if("jsonld"==e)return!0},e.exports=r},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r(3);var i=r(43),a=r(9),s=r(13);r(14);function o(e,t,r){this.predicate=e,this.parent=t,this.cframe=this.parent.objframe.getPropertyClassFrame(this.predicate),this.originalValues=!1,this.changed=!1,this.values=[],this.renderer_type="property",this.options=this.setOptions(r)}function u(e,t,r){this.objframe=e,this.parent=t,this.properties={},this.originalProperties=!1,this.newProperties=[],this.renderer_type="object",this.options=this.setOptions(r)}o.prototype.setOptions=function(e){return TerminusDashboard.RenderingMap.decorateRenderer(e,this)},o.prototype.getOptionsForChild=function(){var e={};return this.options.features&&(e.features=this.options.features),this.options.controls&&(e.controls=this.options.controls),this.options},o.prototype.getOptionsForValue=function(e,t){return this.getOptionsForChild()},o.prototype.getOptionsForObject=function(e){return this.getOptionsForChild()},o.prototype.render=function(e){if(this.buildValueRenderers(),this.cframe&&this.cframe.property){this.viewer=e||this.getViewerForProperty();for(var t=0;t<this.values.length;t++){var r=this.values[t].render();r&&this.showFeature("body")&&this.viewer.addRenderedValue(r)}return this.viewer.render()}},o.prototype.buildValueRenderers=function(){var e=!1===this.originalValues;if(this.cframe=this.parent.objframe.getPropertyClassFrame(this.predicate),!this.cframe)return console.error("No frame for "+this.property()+" id: "+this.subject()),!1;if(this.cframe&&this.cframe.isData()){var t=this.getDataFramesToRender();0==t.length&&alert(this.predicate);for(var r=[],n=this.values.length;n<t.length;n++){var a=new i(t[n],n,this,this.getOptionsForValue(t[n],n));this.values.push(a),r.push(a.value())}e&&(this.originalValues=r)}else{e&&(this.originalValues=[]);var s=this.getChildrenToRender();if(s&&s.length)for(n=this.values.length;n<s.length;n++){var o=new u(s[n],this,this.getOptionsForObject(s[n]));e&&this.originalValues.push(o.subject()),this.values.push(o)}}},o.prototype.getDataFramesToRender=function(e){return this.parent.objframe.getDataFrames(this.property())},o.prototype.getChildrenToRender=function(e){if(TerminusClient.FrameHelper.viewIncludesChildren(this.view,"property"))var t=this.parent.objframe.getChildren(this.property());else t=[];return t},o.prototype.redraw=function(){this.viewer.clear(),this.render(this.viewer,"x")},o.prototype.extract=function(){for(var e=[],t=0;t<this.values.length;t++){var r=this.values[t].extract();""!==r&&!1!==r&&void 0!==r&&e.push(r)}return this.cframe.isData(),e},o.prototype.currentViewer=function(){return this.viewerType},o.prototype.property=function(){return this.predicate},o.prototype.subject=function(){return!!this.parent&&this.parent.subject()},o.prototype.depth=function(){return!!this.parent&&this.parent.depth()},o.prototype.subjectClass=function(){return!!this.parent&&this.parent.subjectClass()},o.prototype.updated=function(){return!!this.parent&&this.parent.childUpdated()},o.prototype.range=function(){return this.cframe?this.cframe.range:""},o.prototype.getLabel=function(){return this.cframe?this.cframe.getLabel():""},o.prototype.getComment=function(){return!!this.cframe&&this.cframe.getComment()},o.prototype.load=function(e){return!!this.parent&&this.parent.load(e)},o.prototype.hasCardinalityRestriction=function(){return!!this.cframe&&this.cframe.hasRestriction()},o.prototype.getRestriction=function(){return!!this.cframe&&this.cframe.restriction},o.prototype.isClassChoice=function(){return!!this.cframe&&this.cframe.isClassChoice()},o.prototype.currentFacet=function(){return this.facet},o.prototype.save=function(){return!!this.parent&&this.parent.save()},o.prototype.cancel=function(){this.reset(),this.setMode("view")},o.prototype.getAvailableClassChoices=function(){if(this.cframe){var e=this.cframe.getClassChoices();if(this.parent){for(var t=[],r=0;r<e.length;r++){var n=this.parent.getClassMeta(e[r]),i=n&&n.Label&&n.Label["@value"]?n.Label["@value"]:TerminusClient.FrameHelper.labelFromURL(e[r]);t.push({value:e[r],label:i})}return t}return e}return!1},o.prototype.delete=function(){var e=this.predicate;e&&(this.reset(),this.parent.deleteProperty(e),this.parent.redraw())},o.prototype.add=function(e){this.parent.addProperty(this.property(),e),this.updated(),e&&(this.values[this.values.length-1].setMode(e),this.values[this.values.length-1].setNew()),this.redraw()},o.prototype.goToValue=function(e){this.viewer.goTo(this.subject(),this.property(),e)},o.prototype.addClass=function(e){this.parent.addPropertyClass(this.property(),e),this.updated();var t=this.values[this.values.length-1];t&&(t.setNew(),t.setMode("edit")),this.redraw(),t&&this.viewer.goTo(t.subject())},o.prototype.reset=function(){if(this.parent.objframe.reset(this.predicate),this.cframe&&this.cframe.isData()){for(var e=0;e<this.values.length;e++)this.values[e].reset();this.values=[]}else{var t=[];for(e=0;e<this.originalValues.length;e++)for(var r=0;r<this.values.length;r++)this.values[r].reset(),this.values[r].subject()==this.originalValues[e]&&t.push(this.values[r]);this.values=t}this.redraw(),this.parent.childUpdated()},o.prototype.deletePropertyValue=function(e,t){this.parent.objframe.removePropertyValue(this.property(),e,t);for(var r=[],n=0;n<this.values.length;n++)void 0===t?this.values[n].subject()==e?this.values[n].reset():r.push(this.values[n]):n!=t?(this.values[n].index=r.length,r.push(this.values[n])):this.values[n].reset();this.values=r,this.parent.childUpdated(),this.parent.redraw()},o.prototype.addPropertyValue=function(e){return this.updated(),this.parent.objframe.addPropertyValue(this.property(),e)},o.prototype.cardControlAllows=function(e){if(this.cframe.hasRestriction()){var t=this.cframe.restriction,r=this.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min)return!1}return!0},o.prototype.isNew=function(){return!!this.new_property||this.parent.isNew()},o.prototype.setNew=function(){this.new_property=!0},o.prototype.isUpdated=function(){if(this.values.length!=this.originalValues.length)return!0;for(var e=0;e<this.values.length;e++)if(this.cframe&&this.cframe.isData()){if(this.values[e].value()!=this.originalValues[e])return!0}else{if(this.values[e].subject()!=this.originalValues[e])return!0;if(this.values[e].isUpdated())return!0}return!1},o.prototype.childUpdated=function(){this.viewer.redrawHeader(),this.parent&&this.parent.childUpdated()},o.prototype.setMode=function(e){this.mode=e;for(var t=0;t<this.values.length;t++)this.values[t].setMode(e);this.redraw()},o.prototype.getViewableValues=function(){var e=[];if(this.cframe&&this.cframe.isData())for(var t=0;t<this.values.length;t++){var r=this.values[t].getSummary().long;e.push({label:r,value:t})}return e},o.prototype.hideDisabledControls=function(){return this.hide_disabled_controls},o.prototype.setFacet=function(e,t){if(this.facet=e,!t)for(var r=0;r<this.values.length;r++)this.values[r].parentFacetChange(e);this.redraw()},o.prototype.parentFacetChange=function(e){"page"==e&&"page"!=this.facet&&"multiline"!=this.facet&&this.setFacet("multiline"),"line"==e&&this.setFacet("label")},o.prototype.getDefaultFacets=function(){return{page:{label:"Full Page",value:"page",features:["facet","label","comment","id","control","type","cardinality","body","status","facet","view","viewer"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},multiline:{label:"Multiple Lines",value:"multiline",features:["facet","label","comment","id","control","type","cardinality","body","status","facet","view","viewer"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},line:{label:"Single Line",value:"line",features:["facet","label","comment","id","control","type","cardinality","body","status","facet","viewer"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},summary:{label:"Summary",value:"summary",features:["facet","satus","label","type","cardinality","body","status","facet","viewer"],controls:[]},label:{label:"Label",value:"label",features:["facet","status","label","summary"],controls:[]},icon:{label:"Snippet",value:"icon",features:["facet","summary"],controls:[]}}},o.prototype.getAvailableFacets=function(){return Object.values(this.facets)},o.prototype.getContentOrientation=function(e){return"page"==this.currentFacet()||this.containsPage()?"page":"line"==this.currentFacet()||"multiline"==this.currentFacet()||"summary"==this.currentFacet()?"line":"label"},o.prototype.getDefaultFacet=function(){return this.cframe&&this.cframe.isObject()?"page":"multiline"},o.prototype.hide=function(){this.setView("hidden")},o.prototype.show=function(){this.setView("full")},o.prototype.setView=function(e){this.view=e,this.redraw()},o.prototype.getAvailableViewers=function(){return"view"==this.mode?TerminusDashboard.RenderingMap.getAvailablePropertyViewers(this):TerminusDashboard.RenderingMap.getAvailablePropertyEditors(this)},o.prototype.nukeViewer=function(){this.viewer.remove()},o.prototype.containsPage=function(){if("icon"==this.currentFacet()||"label"==this.currentFacet())return!1;for(var e=0;e<this.values.length;e++)if("page"==this.values[e].facet)return!0;return!1},o.prototype.getViewerForProperty=function(e){return this.mode,new s.HTMLPropertyViewer(this)},o.prototype.getPropertyHeaderViewer=function(){return new s.HTMLPropertyHeaderViewer},o.prototype.getSummary=function(){var e="ok";this.isNew()?e="new":this.isUpdated()&&(e="updated");var t={status:e,valcount:this.values.length};t.long=1!=t.valcount?"("+t.valcount+") ":"";for(var r=0;r<this.values.length;r++)vsum=this.values[r].getSummary(),t.long+=vsum.long,r<this.values.length-1&&(t.long+=", ");return t},o.prototype.getFeaturesForFacet=function(e){return this.facets[e].features.concat(this.facets[e].controls)},o.prototype.showFeature=function(e){if(-1==this.features.indexOf(e)&&-1==this.controls.indexOf(e))return!1;if(-1!=["delete","clone","add"].indexOf(e)&&!this.cardControlAllows(e))return!1;return!(this.hideDisabledControls()&&-1!=["update","reset"].indexOf(e)&&!this.isUpdated())&&(("hide"!=e||"hidden"!=this.view)&&(("show"!=e||"hidden"==this.view)&&-1!=this.getFeaturesForFacet(this.facet).indexOf(e)))},u.prototype.setOptions=function(e){return TerminusDashboard.RenderingMap.decorateRenderer(e,this)},u.prototype.getOptionsForProperty=function(e){return this.options},u.prototype.render=function(e){for(var t in this.buildPropertyRenderers(),this.viewer=e||this.getViewerForObject(),this.properties){var r=this.properties[t].render();r&&this.showFeature("body")&&this.viewer.addRenderedProperty(t,r)}return this.viewer.render(this.view)},u.prototype.buildPropertyRenderers=function(){var e=this.getPropertiesToRender();!1===this.originalProperties&&(this.originalProperties=e);for(var t={},r=0;r<e.length;r++)void 0===this.properties[e[r]]?t[e[r]]=new o(e[r],this,this.getOptionsForProperty(e[r])):t[e[r]]=this.properties[e[r]],-1!=this.newProperties.indexOf(e[r])&&(t[e[r]].setNew(),t[e[r]].mode="edit");this.properties=t},u.prototype.subject=function(){return!!this.objframe&&this.objframe.subjid},u.prototype.subjectClass=function(){return!!this.objframe&&this.objframe.cls},u.prototype.getAvailableViewers=function(){return["html","json"]},u.prototype.depth=function(){return this.parent?this.parent.depth()+1:0},u.prototype.property=function(){return!!this.parent&&this.parent.property()},u.prototype.parentObject=function(){return!!(this.parent&&this.parent.parent&&this.parent.parent.objframe)&&this.parent.parent.objframe},u.prototype.root=function(){return!this.parent},u.prototype.load=function(e){this.controller?this.controller.ui.showDocument(e):this.parent&&this.parent.load(e)},u.prototype.copy=function(e){return new u(e=e||this.objframe,this.parent,this.options)},u.prototype.clone=function(){if(this.root())this.objframe=this.objframe.clone("_:"),this.objframe.newDoc=!0,this.setMode("edit");else{var e=this.objframe.clone(TerminusClient.FrameHelper.genBNID()),t=this.parentObject(),r=this.property();if(t&&r){void 0===t.children[r]&&(t.children[r]=[]),t.children[r].push(e);var n=this.copy(e);this.parent.values.push(n)}this.parent.redraw()}},u.prototype.cancel=function(){this.reset(),this.setMode("view")},u.prototype.save=function(){if(this.controller)if(this.isNewDocument()){var e=this.inputID();"_:"==e&&(e=""),this.controller.createDocument(e)}else this.controller.updateDocument();else this.parent&&this.parent.save()},u.prototype.delete=function(){var e=this.subject();this.controller&&this.root()?(this.isNewDocument()||this.controller.deleteDocument(e),this.nukeViewer()):this.parent&&(this.parent.deletePropertyValue(e),this.parent.redraw())},u.prototype.reset=function(){this.objframe.reset();for(var e={},t=0;t<this.originalProperties.length;t++){var r=this.originalProperties[t];"object"==n(this.properties[r])&&(this.properties[r].reset(),e[r]=this.properties[r])}this.properties=e,this.redraw()},u.prototype.deleteProperty=function(e){this.objframe.removeProperty(e),delete this.properties[e],this.updated()},u.prototype.addProperty=function(e){this.objframe.addProperty(e),this.updated(),this.redraw()},u.prototype.addNewProperty=function(e){this.objframe.addProperty(e),this.updated(),this.newProperties.push(e),this.redraw(),this.goToProperty(e)},u.prototype.addPropertyClass=function(e,t){this.objframe.addProperty(e,t),this.updated()},u.prototype.changeClass=function(e){this.parent&&(this.parent.addClass(e),this.parent.deletePropertyValue(this.subject()))},u.prototype.getClassMeta=function(e){var t=this.getController();return!!(t&&t.classmeta&&t.classmeta[e])&&t.classmeta[e]},u.prototype.getController=function(){return this.controller?this.controller:!(!this.parent||!this.parent.parent)&&this.parent.parent.getController()},u.prototype.getClient=function(){return this.controller?this.controller.getClient():!(!this.parent||!this.parent.parent)&&this.parent.parent.getClient()},u.prototype.inputID=function(){return!!this.idDOM&&this.idDOM.value},u.prototype.isNew=function(){return!!this.new_object||(!!this.isPartOfNewDocument()||!!this.parent&&this.parent.isNew())},u.prototype.setNew=function(){this.new_object=!0},u.prototype.isUpdated=function(){var e=0;for(var t in this.properties){if(this.originalProperties[e]!=t)return!0;if(this.properties[t].isUpdated())return!0;e++}return e!=this.originalProperties.length},u.prototype.childUpdated=function(){this.viewer.redrawHeader(),this.parent&&this.parent.childUpdated()},u.prototype.updated=u.prototype.childUpdated,u.prototype.isNewDocument=function(){return!(!this.root()||!this.objframe.isnew())},u.prototype.isPartOfNewDocument=function(){return!!this.isNewDocument()||!(!this.parent||!this.parent.parent)&&this.parent.parent.isPartOfNewDocument()},u.prototype.setFacet=function(e,t){if(this.facet=e,!t)for(var r in this.properties)this.properties[r].parentFacetChange(e);this.parent?this.parent.redraw():this.redraw()},u.prototype.getDefaultFacets=function(){return{page:{label:"Full Page",value:"page",features:["facet","label","comment","id","control","type","body","status","facet","view","viewer"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},line:{label:"Single Line",value:"line",features:["facet","label","comment","id","type","body","status","facet"],controls:[]},summary:{label:"Summary",value:"summary",features:["facet","satus","label","type","summary","status","facet"],controls:[]},label:{label:"Label",value:"label",features:["facet","status","label"],controls:[]}}},u.prototype.getAvailableFacets=function(){return Object.keys(this.facets)},u.prototype.currentFacet=function(){return this.facet},u.prototype.getDefaultFacet=function(){if(!this.parent)return"page";var e=this.parent.currentFacet();return"page"==e?"page":"multiline"==e?"line":"line"==e?"summary":"label"},u.prototype.parentFacetChange=function(e){"page"==e&&this.setFacet("page"),"multiline"==e&&this.setFacet("summary"),"line"==e&&this.setFacet("summary"),"summary"==e&&this.setFacet("summary")},u.prototype.getContentOrientation=function(){return"page"==this.currentFacet()?"page":"line"==this.currentFacet()?"line":"label"},u.prototype.getLabel=function(){for(var e in this.properties)if("rdfs:label"==TerminusClient.FrameHelper.getShorthand(e)||"rdfs:label"==e){var t=this.properties[e].values[0];if(t){var r=t.getSummary();if("empty"!=r.long)return r.long}}var n=this.subject();if(n&&"_:"==n.substring(0,2)){var i=this.subjectClass(),a=TerminusClient.FrameHelper.getShorthand(i);a||(a=i);var s=a.split(":");return s.length>1?"New "+s[1]:"New Object"}return!1},u.prototype.getSummary=function(){var e={status:"ok"};for(var t in this.isUpdated()&&(e.status="updated"),this.isNew()&&(e.status="new"),e.propcount=0,this.properties)e.propcount++;return e.long=e.propcount+" properties",e},u.prototype.getObjectHeaderViewer=function(){return this.header_viewer},u.prototype.getViewerForObject=function(e){return"json"==e?new a.JSONObjectViewer(this):new a.HTMLObjectViewer(this)},u.prototype.getFeaturesForFacet=function(e){return this.facets[e].features.concat(this.facets[e].controls)},u.prototype.hideDisabledControls=function(){return this.hide_disabled_controls},u.prototype.showFeature=function(e){if(-1==this.features.indexOf(e)&&-1==this.controls.indexOf(e))return!1;if(-1!=["delete","clone","add"].indexOf(e)&&!this.cardControlAllows(e))return!1;return!(this.hideDisabledControls()&&-1!=["update","reset"].indexOf(e)&&!this.isUpdated())&&((!this.isNewDocument()||"clone"!=e)&&(("hide"!=e||"hidden"!=this.view)&&(("show"!=e||"hidden"==this.view)&&-1!=this.getFeaturesForFacet(this.facet).indexOf(e))))},u.prototype.cardControlAllows=function(e){if(!this.parent)return!0;if(this.parent.cframe.hasRestriction()){var t=this.parent.cframe.restriction,r=this.parent.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min&&r<=t.min)return!1}return!0},u.prototype.goToProperty=function(e){this.viewer.goTo(this.subject(),e)},u.prototype.setMode=function(e){for(var t in this.mode=e,this.properties)this.properties[t].setMode(e);this.viewer.redraw()},u.prototype.currentViewer=function(){return this.viewerType},u.prototype.setViewer=function(e){var t=this.getViewerForObject(e);t&&(this.viewerType=e,this.viewer=t,this.viewer.redraw())},u.prototype.setView=function(e){this.view=e,this.viewer.redraw()},u.prototype.hide=function(){this.setView("hidden")},u.prototype.show=function(){this.setView("full")},u.prototype.nukeViewer=function(){this.viewer.remove()},u.prototype.getViewableProperties=function(){return this.objframe.getFilledPropertyList()},u.prototype.getAddableProperties=function(){return this.objframe.getMissingPropertyList()},u.prototype.getPropertiesToRender=function(e){var t=this.standardSort;return e&&e.map&&e.map.patterns,t(this.objframe,(function(){return!0}))},u.prototype.standardSort=function(e,t){var r=[],n=TerminusClient.FrameHelper.getStdURL("rdfs","label");e.dataframes[n]&&t(e,n,e.dataframes[n])&&r.push(n);var i=TerminusClient.FrameHelper.getStdURL("rdfs","comment");for(var a in e.dataframes[i]&&r.push(i),e.dataframes)-1==r.indexOf(a)&&r.push(a);for(var a in e.children)-1==r.indexOf(a)&&r.push(a);return r},u.prototype.redraw=function(){this.viewer.clear(),this.render(this.viewer)},u.prototype.extractLDO=function(e){e["rdf:type"]=this.objframe.cls;var t={};return t[this.subject()]=e,t},u.prototype.extractJSONLD=function(e){return e["@type"]=this.objframe.cls,"_:"!=this.subject()&&(e["@id"]=this.subject()),this.objframe.jsonld_context&&(e["@context"]=this.objframe.jsonld_context),e},u.prototype.extract=function(){var e={};for(var t in this.properties){var r=this.properties[t].extract();TerminusClient.FrameHelper.empty(r)||(e[t]=r)}return(!TerminusClient.FrameHelper.empty(e)||!this.parent)&&this.extractJSONLD(e)},e.exports={ObjectRenderer:u,PropertyRenderer:o}},function(e,t){function r(e){this.css=e&&e.css?"terminus-literal-value "+e.css:"terminus-literal-value",this.options=e}r.prototype.getDOM=function(e,t){var r=TerminusClient.FrameHelper.getShorthand(e.frame.getType());r=r||e.frame.getType();var n=e.value();if(this.options&&void 0!==this.options.big?this.options.big:this.isBigType(r,n)){var i=document.createElement("textarea");this.css+=" terminus-literal-big-value"}else{var a=this.options&&void 0!==this.options.size?this.options.size:this.getTypeSize(r,n);(i=document.createElement("input")).setAttribute("type","text"),i.setAttribute("size",a)}i.setAttribute("class",this.css),i.value=n;return i.addEventListener("input",(function(){e.set(this.value)})),i},r.prototype.isBigType=function(e,t){if(t&&t.length&&t.length>100)return!0;return-1!=["xdd:coordinatePolyline","xdd:coordinatePolygon","xsd:base64Binary","xdd:html","xdd:json","rdf:XMLLiteral"].indexOf(e)},r.prototype.getTypeSize=function(e,t){if(t&&t.length&&t.length>40)return 80;return-1!=["xdd:url","xdd:coordinate","xsd:anyURI"].indexOf(e)?80:-1!=["xsd:gYearMonth","xdd:gYearRange","xsd:decimal","xsd:float","xsd:time","xsd:date","xsd:dateTimeStamp","xsd:gYearMonth","xsd:gMonthDay","xsd:duration","xsd:yearMonthDuration","xsd:dayTimeDuration","xsd:nonNegativeInteger","xsd:positiveInteger","xsd:negativeInteger","xsd:nonPositiveInteger","xsd:integer","xsd:unsignedInt"].indexOf(e)?16:-1!=["xsd:boolean","xsd:gYear","xsd:gMonth","xsd:gDay","xsd:byte","xsd:short","xsd:unsignedByte","xsd:language"].indexOf(e)?8:32},e.exports={HTMLStringEditor:r}},function(e,t){function r(e){this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:"")}r.prototype.getDOM=function(e,t){var r=e.value(),n=document.createElement("span");if(n.setAttribute("class",this.css),r){var i=document.createTextNode(r);n.appendChild(i)}return n},e.exports={HTMLBooleanViewer:r}},function(e,t){function r(e){this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:"")}r.prototype.getDOM=function(e,t){var r=e.value(),n=document.createElement("input");return n.setAttribute("type","checkbox"),r&&n.setAttribute("checked","checked"),n.addEventListener("change",(function(){r?e.set(""):e.set("true")})),n},e.exports={HTMLBooleanEditor:r}},function(e,t){function r(e){}r.prototype.getDOM=function(e,t){var r=e.value(),n=document.createElement("span");if(n.setAttribute("class","terminus-literal-value terminus-choice-value"),n.setAttribute("data-value",r),r)for(var i=e.frame.frame.elements,a=0;a<i.length;a++)if(i[a].class!=r);else{if(i[a].label&&i[a].label["@value"])var s=i[a].label["@value"];else s=TerminusClient.FrameHelper.labelFromURL(r);n.appendChild(document.createTextNode(s))}return n},e.exports={HTMLChoiceViewer:r}},function(e,t,r){var n=r(4);function i(e){}i.prototype.getDOM=function(e,t){var r=e.value();document.createElement("select").setAttribute("class","terminus-choice-picker");var i=e.frame.getChoiceOptions();i.unshift({value:"",label:"Not Specified"});return n.getSelectionControl("select-choice",i,r,(function(t){e.set(t)}))},e.exports={HTMLChoiceEditor:i}},function(e,t){function r(e){this.inputs=[]}r.prototype.getDOM=function(e,t){var r=TerminusClient.FrameHelper.getShorthand(e.frame.getType());r=r||e.frame.getType();var n=e.value(),i=document.createElement("span");i.setAttribute("class","terminus-literal-value terminus-literal-coordinate"),i.setAttribute("data-value",n);try{var a=!!n&&JSON.parse(n)}catch(t){e.badData(r+" failed to parse as json",t.toString());a=!1;n=!1}if(n){"xdd:coordinate"==r&&(a=[a]);for(var s=0;s<a.length;s++){var o=document.createElement("span");o.setAttribute("class","latlong"),o.appendChild(document.createTextNode("Latitude: ")),o.appendChild(document.createTextNode(a[s][0]+"  ")),o.appendChild(document.createTextNode("Longitude: ")),o.appendChild(document.createTextNode(a[s][1]+" ")),i.appendChild(o)}}return i},e.exports={HTMLCoordinateViewer:r}},function(e,t){function r(e){this.inputs=[]}r.prototype.getInputDOMs=function(e,t,r){var n=document.createElement("input");n.setAttribute("type","text"),n.value=e;var i=document.createElement("input");return i.setAttribute("type","text"),i.value=t,n.addEventListener("change",r),i.addEventListener("change",r),[n,i]},r.prototype.getLatLongDOM=function(e,t,r,n,i){var a=document.createElement("span");a.setAttribute("class","terminus-lat-long");var s=document.createElement("span");if(s.setAttribute("class","terminus-lat-long-col"),a.appendChild(s),n>2||"xdd:coordinatePolyline"==r&&n>1){var o=document.createElement("button");o.setAttribute("class","delete-coordinate"),o.appendChild(document.createTextNode("Remove")),o.addEventListener("click",(function(){t.value="",e.value="",i.removeChild(a)})),s.appendChild(o)}return a.appendChild(document.createTextNode("Latitude: ")),a.appendChild(e),a.appendChild(document.createTextNode("  ")),a.appendChild(document.createTextNode("  Longitude: ")),a.appendChild(t),a.appendChild(document.createTextNode("  ")),a},r.prototype.getDOM=function(e,t){var r=e.frame.getTypeShorthand(),n=e.value(),i=document.createElement("span");i.setAttribute("class","terminus-literal-value terminus-literal-coordinate"),i.setAttribute("data-value",n);try{var a=!!n&&JSON.parse(n)}catch(t){e.badData(r+" failed to parse as json",t.toString());a=!1;n=!1}var s=this,o=function(){for(var t=[],n=0;n<s.inputs.length;n++)if(s.inputs[n][0].value&&s.inputs[n][1].value){var i="["+s.inputs[n][0].value+","+s.inputs[n][1].value+"]";t.push(i)}if(0==t.length)e.set("");else if("xdd:coordinate"==r)e.set(t[0]);else{var a="[";for(n=0;n<t.length;n++)a+=t[n],n+1<t.length&&(a+=",");a+="]",e.set(a)}};a||("xdd:coordinate"==r?a=["",""]:(a=[["",""],["",""]],"xdd:coordinatePolygon"==r&&a.push(["",""]))),"xdd:coordinate"==r&&(a=[a]);for(var u=0;u<a.length;u++)this.inputs.push(this.getInputDOMs(a[u][0],a[u][1],o));var l=document.createElement("span");for(u=0;u<this.inputs.length;u++){var c=this.getLatLongDOM(this.inputs[u][0],this.inputs[u][1],r,u,l);l.appendChild(c)}i.appendChild(l);s=this;if("xdd:coordinate"!=r){var d=document.createElement("span");d.setAttribute("class","terminus-add-coordinate");var p=document.createElement("button");p.setAttribute("class","terminus-add-coordinate"),p.appendChild(document.createTextNode("Add")),p.addEventListener("click",(function(){var e=s.getInputDOMs("","",o),t=s.getLatLongDOM(e[0],e[1],r,s.inputs.length,l);l.appendChild(t),s.inputs.push(e)})),d.appendChild(p),i.appendChild(d)}return i},e.exports={HTMLCoordinateEditor:r}},function(e,t,r){var n=r(11);function i(e){this.max=!(!e||!e.max)&&e.max,this.min=!(!e||!e.min)&&e.min,this.allowbce=!(!e||!e.allowbce)&&e.allowbce,this.date_spacer="/",this.time_spacer=":",this.datetime_separator=", ",this.helper=new n.HTMLDateHelper}i.prototype.getDOM=function(e,t){var r=TerminusClient.FrameHelper.getShorthand(e.frame.getType());r=r||e.frame.getType();var n=e.value(),i=document.createElement("span");if(i.setAttribute("class","terminus-literal-value terminus-literal-date"),i.setAttribute("data-value",n),n){var a=TerminusClient.FrameHelper.parseDate(r,n),s=this.getDateComponentDOM(a),o=this.getTimeComponentDOM(a);o&&i.appendChild(o),o&&s&&i.appendChild(document.createTextNode(this.datetime_separator)),s&&i.appendChild(s)}return i},i.prototype.getTimeComponentDOM=function(e,t){var r=!!e.hour&&document.createElement("span");r&&(r.setAttribute("class","terminus-time-hour"),r.appendChild(document.createTextNode(e.hour)));var n=void 0!==e.minute&&document.createElement("span");if(n){n.setAttribute("class","terminus-time-minute");var i=(e.minute,e.minute);n.appendChild(document.createTextNode(i))}var a=void 0!==e.second&&document.createElement("span");if(a){a.setAttribute("class","terminus-time-second");var s=(e.second,e.second);a.appendChild(document.createTextNode(s))}var o=!!e.timezone&&document.createElement("span");if(o&&(a.setAttribute("class","terminus-time-timezone"),a.appendChild(document.createTextNode(e.timezone))),r||n||a||o){var u=document.createElement("span");return u.setAttribute("class","terminus-time-components time-"+t),r&&u.appendChild(r),n&&(r&&u.appendChild(document.createTextNode(this.time_spacer)),u.appendChild(n)),a&&((n||r)&&u.appendChild(document.createTextNode(this.time_spacer)),u.appendChild(a)),o&&(u.appendChild(document.createTextNode(" (Timezone: ")),u.appendChild(a),u.appendChild(document.createTextNode(")"))),u}return!1},i.prototype.getDateComponentDOM=function(e,t){var r=!!e.year&&document.createElement("span");r&&(r.setAttribute("class","terminus-date-year"),r.appendChild(document.createTextNode(e.year)));var n=!!e.month&&document.createElement("span");n&&(n.setAttribute("class","terminus-date-month"),n.appendChild(document.createTextNode(this.helper.getMonthName(e.month))));var i=!!e.day&&document.createElement("span");if(i&&(i.setAttribute("class","terminus-date-day"),i.appendChild(document.createTextNode(e.day))),r||n||i){var a=document.createElement("span");return i&&a.appendChild(i),n&&(i&&a.appendChild(document.createTextNode(this.date_spacer)),a.appendChild(n)),r&&((n||i)&&a.appendChild(document.createTextNode(this.date_spacer)),a.appendChild(r)),a}return!1},e.exports={HTMLDateViewer:i}},function(e,t,r){var n=r(11);function i(e){this.max=!(!e||!e.max)&&e.max,this.min=!(!e||!e.min)&&e.min,this.allowbce=!(!e||!e.allowbce)&&e.allowbce,this.date_spacer="/",this.time_spacer=":",this.datetime_separator=", ",this.helper=new n.HTMLDateHelper}i.prototype.getDOM=function(e,t){var r=TerminusClient.FrameHelper.getShorthand(e.frame.getType());r=r||e.frame.getType();var n=e.value(),i=document.createElement("span");i.setAttribute("class","terminus-literal-value terminus-literal-date"),i.setAttribute("data-value",n),this.parsed=n?TerminusClient.FrameHelper.parseDate(r,n):{};var a=this.getDateComponentDOM(this.parsed,r,e),s=this.getTimeComponentDOM(this.parsed,r,e);return s&&i.appendChild(s),s&&a&&i.appendChild(document.createTextNode(this.datetime_separator)),a&&i.appendChild(a),i},i.prototype.set=function(e,t,r,n){this.parsed[e]=t;var i=TerminusClient.FrameHelper.xsdFromParsed(this.parsed,n);i&&r.set(i)},i.prototype.getTimeComponentDOM=function(e,t,r){if(-1==["xsd:dateTime","xsd:dateTimeStamp","xsd:time"].indexOf(t))return!1;var n=this,i=document.createElement("input");i.setAttribute("class","terminus-hour-input terminus-hour-"+t),i.setAttribute("size",2),i.setAttribute("placeholder","HH"),i.value=e.hour?e.hour:"",i.addEventListener("input",(function(){n.set("hour",this.value,r,t)}));var a=document.createElement("input");a.setAttribute("class","terminus-minute-input terminus-minute-"+t),a.setAttribute("size",2),a.setAttribute("placeholder","MM"),a.value=e.minute?e.minute:"",a.addEventListener("input",(function(){n.set("minute",this.value,r,t)}));var s=document.createElement("input");s.setAttribute("class","terminus-second-input terminus-second-"+t),s.setAttribute("size",8),s.setAttribute("placeholder","SS.sss..."),s.value=e.second?e.second:"",s.addEventListener("input",(function(){n.set("second",this.value,r,t)}));var o=document.createElement("span");return o.appendChild(i),o.appendChild(document.createTextNode(this.time_spacer)),o.appendChild(a),o.appendChild(document.createTextNode(this.time_spacer)),o.appendChild(s),o},i.prototype.getDateComponentDOM=function(e,t,r){var n=this;if(-1!=["xsd:date","xsd:dateTime","xsd:gYear","xsd:gYearMonth","xsd:dateTimeStamp"].indexOf(t)){var i=document.createElement("input");i.setAttribute("class","terminus-year-input terminus-year-"+t),i.setAttribute("size",6),i.setAttribute("placeholder","YYYY"),i.value=e.year?e.year:"",i.addEventListener("input",(function(){n.set("year",this.value,r,t)}))}if(-1!=["xsd:date","xsd:dateTime","xsd:gYearMonth","xsd:dateTimeStamp","xsd:gMonth","xsd:gMonthDay"].indexOf(t)){var a=document.createElement("select");a.setAttribute("class","terminus-month-input terminus-month-"+t);for(var s=0;s<this.helper.months.length;s++){var o=document.createElement("option");o.value=s+1,o.appendChild(document.createTextNode(this.helper.months[s])),e.month&&e.month==s+1&&(o.selected=!0),a.appendChild(o)}a.addEventListener("change",(function(){n.set("month",this.value,r,t)}))}if(-1!=["xsd:date","xsd:dateTime","xsd:dateTimeStamp","xsd:gDay","xsd:gMonthDay"].indexOf(t)){var u=document.createElement("input");u.setAttribute("class","terminus-day-input terminus-day-"+t),u.setAttribute("size",2),u.setAttribute("placeholder","DD"),u.value=e.day?e.day:"",u.addEventListener("input",(function(){n.set("day",this.value,r,t)}))}if(i||a||u){var l=document.createElement("span");return u&&l.appendChild(u),a&&(u&&l.appendChild(document.createTextNode(this.date_spacer)),l.appendChild(a)),i&&((a||u)&&l.appendChild(document.createTextNode(this.date_spacer)),l.appendChild(i)),l}return!1},e.exports={HTMLDateEditor:i}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){}n.prototype.getDOM=function(e,t){var r=e.value(),n=(r=TerminusClient.FrameHelper.unshorten(r),document.createElement("span"));n.setAttribute("class","terminus-literal-value terminus-entity-reference-value");if(this.holder)return this.holder;if(r){var i=this.getEntityViewHTML(r,e,t);n.appendChild(i)}return n},n.prototype.getEntityViewHTML=function(e,t,r){var n=document.createElement("span"),i=this;return n.setAttribute("class","terminus-internal-link"),n.appendChild(r.internalLink(e)),(controller=t.getController())&&controller.getInstanceMeta(e).then((function(t){var a=i.getEntityLabel(e,t,r);a&&(TerminusClient.FrameHelper.removeChildren(n),n.appendChild(a))})),n},n.prototype.getEntityLabel=function(e,t,n){var i=document.createElement("span");if(t&&"object"==r(t.InstanceLabel)&&t.InstanceLabel["@value"]){i.appendChild(n.internalLink(e,t.InstanceLabel["@value"]));var a=e+" Type: "+t.InstanceType;return"object"==r(t.InstanceComment)&&t.InstanceComment["@value"]&&(a+=" "+t.InstanceComment["@value"]),i.setAttribute("title",a),i}return!1},e.exports={HTMLEntityViewer:n}},function(e,t){function r(e){}r.prototype.getDOM=function(e,t){var r=e.value(),n=document.createElement("input");n.setAttribute("class","terminus-literal-value terminus-entity-reference-value"),n.setAttribute("type","text"),n.setAttribute("size",80),n.value=r;return n.addEventListener("change",(function(){var t=this.value;-1==t.indexOf("/")&&-1==t.indexOf(":")&&(t="doc:"+t),e.set(t)})),n},e.exports={HTMLEntityEditor:r}},function(e,t){function r(e){}r.prototype.getDOM=function(e,t){var r=e.value(),n=TerminusClient.FrameHelper.getShorthand(e.frame.getType());n=n||e.frame.getType();var i=document.createElement("span");if(i.setAttribute("class","terminus-literal-value terminus-literal-image-value"),i.setAttribute("data-value",r),r){var a=document.createElement("a");a.setAttribute("src",r),i.appendChild(a)}return i},e.exports={HTMLImageViewer:r}},function(e,t){function r(e){}r.prototype.getDOM=function(e,t){var r=e.value(),n=TerminusClient.FrameHelper.getShorthand(e.frame.getType());if("xsd:base64Binary"==(n=n||e.frame.getType())){var i=document.createElement("textarea");return i.setAttribute("class","terminus-literal-value terminus-literal-b64image-value"),i.value=r,i.addEventListener("change",(function(){e.set(this.value)})),i}return!1},e.exports={HTMLImageEditor:r}},function(e,t){function r(e){this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:"")}r.prototype.getDOM=function(e,t){var r=e.value(),n=document.createElement("span");if(n.setAttribute("class",this.css),n.setAttribute("size",80),n.setAttribute("data-value",r),r){var i=document.createElement("a");i.setAttribute("href",r),i.appendChild(document.createTextNode(r)),n.appendChild(i)}return n},e.exports={HTMLLinkViewer:r}},function(e,t){function r(e){this.commas=!e||!e.commas||e.commas}r.prototype.getDOM=function(e,t){var r=e.value();0===r&&(r="0");var n=document.createElement("span");return n.setAttribute("class","terminus-number-value terminus-literal-value"),n.setAttribute("data-value",r),r=this.commas?TerminusClient.FrameHelper.numberWithCommas(r):r,n.appendChild(document.createTextNode(r)),n},e.exports={HTMLNumberViewer:r}},function(e,t){function r(e){this.commas=!e||!e.commas||e.commas,this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:""),this.delimiter=!(!e||!e.delimiter)&&e.delimiter}r.prototype.getDOM=function(e,t){var r=e.value(),n=TerminusClient.FrameHelper.parseRangeValue(r,this.delimiter),i=document.createElement("span");i.setAttribute("class",this.css);var a=document.createElement("span");a.setAttribute("class","terminus-range-value-left");var s=document.createElement("span");s.setAttribute("class","terminus-range-value-right");var o=this.useCommas(e)?TerminusClient.FrameHelper.numberWithCommas(n[0]):n[0],u=document.createTextNode(o);if(a.appendChild(u),i.appendChild(a),2==n.length){i.appendChild(function(){var e=document.createElement("span");return e.setAttribute("class","terminus-range-indicator"),e.setAttribute("title","The value is uncertain, it lies somewhere in this range"),e.appendChild(document.createTextNode(" ... ")),e}());var l=this.useCommas(e)?TerminusClient.FrameHelper.numberWithCommas(n[1]):n[1],c=document.createTextNode(l);s.appendChild(c),i.appendChild(s)}return i},r.prototype.useCommas=function(e){return-1==["xdd:gYearRange","xdd:dateRange"].indexOf(e.frame.getTypeShorthand())&&this.commas},e.exports={HTMLRangeViewer:r}},function(e,t){function r(e){this.commas=!e||!e.commas||e.commas,this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:""),this.delimiter=!(!e||!e.delimiter)&&e.delimiter}function n(){var e=document.createElement("span");return e.setAttribute("class","terminus-range-indicator"),e.setAttribute("title","The value is uncertain, it lies somewhere in this range"),e.appendChild(document.createTextNode(" ... ")),e}r.prototype.getDOM=function(e,t){var r=e.value(),i=TerminusClient.FrameHelper.parseRangeValue(r,this.delimiter),a=document.createElement("span");a.setAttribute("class",this.css);var s=document.createElement("span"),o=document.createElement("span"),u=i.length>0?i[0]:"",l=i.length>1?i[1]:"",c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("size",16),u&&(c.value=u);var d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("size",16),l&&(this.showing_range=!0,d.value=l),s.appendChild(c),a.appendChild(s),this.showing_range&&(o.appendChild(n()),o.appendChild(d)),a.appendChild(o);var p=document.createElement("button");p.setAttribute("class","terminus-change-range");var h=this.showing_range?"Change to Simple Value":"Change to Uncertain Range";p.appendChild(document.createTextNode(h)),a.appendChild(p);var m=this;p.addEventListener("click",(function(){m.showing_range?(m.showing_range=!1,d.value="",TerminusClient.FrameHelper.removeChildren(o)):(m.showing_range=!0,d.value="",o.appendChild(n()),o.appendChild(d));var e=m.showing_range?"Change to Simple Value":"Change to Uncertain Range";p.innerText=e,f()}));var f=function(){m.showing_range&&d.value?c.value?e.set("["+c.value+","+d.value+"]"):e.set(d.value):e.set(c.value)};return c.addEventListener("change",f),d.addEventListener("change",f),a},e.exports={HTMLRangeEditor:r}},function(e,t){function r(e){this.css=e&&e.css?"literal-value "+e.css:"literal-value"}r.prototype.getDOM=function(e,t){var r=e.value(),n=document.createElement("span");return n.setAttribute("class",this.css),n.setAttribute("data-value",r),n.innerHTML=r,n},e.exports={SantizedHTMLViewer:r}},function(e,t,r){var n=r(12);function i(e){}i.prototype.getDOM=function(e,t){var r=e.value(),i=TerminusClient.FrameHelper.getShorthand(e.frame.getType());i=i||e.frame.getType();var a=document.createElement("div");a.setAttribute("class","gmap-window gmap-editor");var s=new n,o=s.initMap(a,e,r,i);return"xdd:coordinate"==i?google.maps.event.addListener(o,"click",(function(t){var r=t.latLng,n="["+r.lat()+","+r.lng()+"]";e.set(n),s.clearMarkers();var i={position:r,map:o},a=new google.maps.Marker(i);s.markers.push(a)})):google.maps.event.addListener(o,"click",(function(t){var r=s.polyline.getPath();r.push(t.latLng);var n=t.latLng;s.addMarker(n,o,e,"#"+r.getLength(),i)})),a},e.exports={GoogleMapEditor:i}},function(e,t,r){var n=r(12);function i(e){}i.prototype.getDOM=function(e,t){var r=e.value(),i=TerminusClient.FrameHelper.getShorthand(e.frame.getType());i=i||e.frame.getType();var a=document.createElement("div");a.setAttribute("class","gmap-window gmap-viewer");return(new n).initMap(a,e,r,i),a},e.exports={GoogleMapViewer:i}},function(e,t){function r(e){}r.prototype.getDOM=function(e,t){var r=e.value(),n=TerminusClient.FrameHelper.getShorthand(e.frame.getType());n=n||e.frame.getType();var i=document.createElement("div");i.setAttribute("class","html-wysiwyg");var a=document.createElement("span");if(a.setAttribute("class","html-literal literal-value"),a.innerHTML=r,i.appendChild(a),"undefined"!=typeof Quill){var s=new Quill(a,{theme:"snow"});s.on("text-change",(function(){e.set(s.root.innerHTML)}))}return i},e.exports={HTMLMarkupEditor:r}},function(e,t){function r(e){}r.prototype.getDOM=function(e,t){var r=e.value(),n=e.frame.range,i=(e.set,e.getController()),a=new TerminusDocumentChooser(i.ui,n,r);return a.change=function(t){e.set(t)},a.view="label",a.getAsDOM()},e.exports={S2EntityEditor:r}},function(e,t,r){r(13),r(3);var n=r(14);function i(e,t,r,n){this.frame=e,this.index=t,this.parent=r,this.originalValue=this.value(),this.renderer_type="value",this.options=this.setOptions(n)}i.prototype.depth=function(){return!!this.parent&&this.parent.depth()},i.prototype.property=function(){return!!this.parent&&this.parent.property()},i.prototype.subject=function(){return!!this.parent&&this.parent.subject()},i.prototype.subjectClass=function(){return!!this.parent&&this.parent.subjectClass()},i.prototype.type=function(){return!!this.frame&&this.frame.range},i.prototype.range=function(){return!!this.frame&&this.frame.range},i.prototype.value=function(){return!!this.frame&&this.frame.get()},i.prototype.isDocument=function(){return!!this.frame&&this.frame.isDocument()},i.prototype.currentViewer=function(){return this.viewerType},i.prototype.copy=function(e){var t=new i(e,!1,this.parent,this.options);return t.mode=this.mode,t.view=this.view,t},i.prototype.setFacet=function(e){this.facet=e,this.parent.redraw()},i.prototype.parentFacetChange=function(e){"page"==e&&this.setFacet("page"),"multiline"==e&&this.setFacet("line"),"line"==e&&this.setFacet("inline"),"summary"==e&&this.setFacet("icon")},i.prototype.getDefaultFacet=function(){return"page"==this.parent.currentFacet()||"multiline"==this.parent.currentFacet()?"line":"inline"},i.prototype.getAvailableFacets=function(){return Object.values(this.facets)},i.prototype.getDefaultFacets=function(){return{page:{label:"Full Page",value:"page",features:["facet","type","cardinality","body","status","facet","viewer","control"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},line:{label:"Single Line",value:"line",features:["facet","type","cardinality","body","status","facet","viewer","control"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},inline:{label:"Inline",value:"inline",features:["facet","type","cardinality","body","status","facet","viewer","control"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},label:{label:"Label",value:"label",features:["facet","status","body"],controls:[]},icon:{label:"Snippet",value:"icon",features:["facet","summary"],controls:[]}}},i.prototype.currentFacet=function(){return this.facet},i.prototype.setOptions=function(e){return TerminusDashboard.RenderingMap.decorateRenderer(e,this)},i.prototype.hideDisabledControls=function(){return this.hide_disabled_controls},i.prototype.setMode=function(e){this.mode=e,this.options.mode=e,this.viewerType=!1,this.redraw()},i.prototype.setView=function(e){this.view=e,this.options.view=e,this.redraw()},i.prototype.getAPIURL=function(e,t){if(this.parent&&this.parent.parent&&(client=this.parent.parent.getClient()))return client.dbURL()+e+"/"+t;return!1},i.prototype.getClient=function(){return!(!this.parent||!this.parent.parent)&&this.parent.parent.getClient()},i.prototype.getController=function(){return!(!this.parent||!this.parent.parent)&&this.parent.parent.getController()},i.prototype.DBURL=function(){return!!(this.parent&&this.parent.parent&&(client=this.parent.parent.getClient()))&&client.dbURL()},i.prototype.getEntityReference=function(e,t,r,n){if(this.parent&&this.parent.parent&&(client=this.parent.parent.getClient()))return client.getEntityReference(e,t,r,n)},i.prototype.badData=function(e){alert("bad data "+e)},i.prototype.setNew=function(){this.new_value=!0},i.prototype.isNew=function(){return!!this.new_value||this.parent.isNew()},i.prototype.isUpdated=function(){return this.frame.get()!=this.originalValue},i.prototype.getSummary=function(){var e={status:"ok"};this.isNew()?e.status="new":this.isUpdated()&&(e.status="updated");var t=this.frame.get();return t?t.length&&t.length>this.text_summary_length?e.long=t.substring(0,this.text_summary_length)+"... ("+t.length+" characters)":e.long=t:e.long="empty",e},i.prototype.cardControlAllows=function(e){if(this.parent.cframe.hasRestriction()){var t=this.parent.cframe.restriction,r=this.parent.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min&&r<=t.min)return!1}return!0},i.prototype.set=function(e){this.frame.set(e),this.viewer.redrawHeader(),this.parent.childUpdated()},i.prototype.delete=function(){this.parent.deletePropertyValue(this.value(),this.index),this.parent.parent.redraw()},i.prototype.load=function(e){this.parent.load(e)},i.prototype.hide=function(){this.setView("hidden")},i.prototype.show=function(){this.setView("full")},i.prototype.cancel=function(){this.reset(),this.setMode("view")},i.prototype.save=function(){this.parent&&this.parent.save()},i.prototype.reset=function(){this.set(this.originalValue),this.redraw()},i.prototype.clone=function(){var e=this.parent.addPropertyValue(this.value()),t=this.copy(e);t.setNew(),t.mode="edit",t.index=this.parent.values.length,this.parent.values.push(t),this.parent.childUpdated(),this.parent.redraw(),this.parent.goToValue(this.parent.values.length-1)},i.prototype.getViewerForValue=function(){return new n.HTMLDataViewer(this)},i.prototype.getFeaturesForFacet=function(e){return this.facets[e].features.concat(this.facets[e].controls)},i.prototype.showFeature=function(e){if(-1==this.features.indexOf(e)&&-1==this.controls.indexOf(e))return!1;if(-1!=["delete","clone","add"].indexOf(e)&&!this.cardControlAllows(e))return!1;return!(this.hideDisabledControls()&&-1!=["update","reset"].indexOf(e)&&!this.isUpdated())&&(("hide"!=e||"hidden"!=this.view)&&(("show"!=e||"hidden"==this.view)&&-1!=this.getFeaturesForFacet(this.facet).indexOf(e)))},i.prototype.render=function(e){return this.viewer=e||this.getViewerForValue(),this.viewer.render()},i.prototype.extract=function(){var e=this.value();if(""===e||!1===e)return e;if(this.frame.isDatatypeProperty()){var t={"@value":this.value()};return this.frame.isString()?t["@language"]=this.frame.lang():t["@type"]=this.type(),t}return this.frame.isChoice()||this.frame.isDocument()?{"@id":e}:void 0},i.prototype.getValueHeaderViewer=function(){return new n.HTMLDataHeaderViewer},i.prototype.getDataValueViewer=function(){return this.viewerType||(this.viewerType=this.getViewerForDataValue()),TerminusDashboard.RenderingMap.getViewer(this.viewerType,this.viewerOptions)},i.prototype.getAvailableViewers=function(){var e=this.frame.getTypeShorthand(),t=this.frame.ftype();return"view"==this.mode?TerminusDashboard.RenderingMap.getAvailableDataViewers(e,t):TerminusDashboard.RenderingMap.getAvailableDataEditors(e,t)},i.prototype.setViewer=function(e){this.viewerType=e,this.redraw()},i.prototype.getViewerForDataValue=function(){var e=this.frame.getTypeShorthand(),t=this.frame.ftype();return"edit"==this.mode?TerminusDashboard.RenderingMap.getEditorForDataFrame(e,t):TerminusDashboard.RenderingMap.getViewerForDataFrame(e,t)},i.prototype.redraw=function(){this.viewer.clear(),this.render(this.viewer)},e.exports=i},function(e,t,r){var n=r(6),i=r(5),a=r(15),s=r(1),o=r(0);function u(e){this.ui=e}function l(e){this.ui=e,this.wquery=new s(e.client,this.options,e)}function c(e){this.ui=e}u.prototype.getAsDOM=function(){var e=this,t=document.createElement("div");if(t.setAttribute("class","terminus-db-controller"),this.ui&&this.ui.db()){var r=document.createElement("div");r.setAttribute("class","terminus-field terminus-db-connection");var n=document.createElement("span");n.setAttribute("class","terminus-label terminus-db-label terminus-control-panel-label"),n.appendChild(document.createTextNode("DB "));var i=document.createElement("span");i.setAttribute("class","terminus-value terminus-db-value terminus-control-panel-value");var a=this.ui.client.connection.getDBRecord(),s=a&&a["rdfs:label"]&&a["rdfs:label"]["@value"]?a["rdfs:label"]["@value"]:this.ui.db();i.appendChild(document.createTextNode(s)),r.appendChild(n),r.appendChild(i);var u=document.createElement("div");u.setAttribute("class","span3"),t.appendChild(u);var l=document.createElement("ul");l.setAttribute("class","terminus-ul"),u.appendChild(l),(d=document.createElement("a")).setAttribute("class","terminus-dashboard-info terminus-list-group-a terminus-nav-width");var c,d,p="Database: "+s;if(d.appendChild(document.createTextNode(p)),l.appendChild(d),this.ui.showControl("db"))(c=this.getControlHTML("Database Home","fa-home")).classList.add("terminus-selected"),c.addEventListener("click",(function(){o.activateSelectedNav(this,e),e.ui.showDBMainPage()})),l.appendChild(c);if(this.ui.showControl("delete_database"))(c=this.getControlHTML("Delete Database","fa-trash-alt")).addEventListener("click",(function(){o.activateSelectedNav(this,e),e.ui.deleteDatabase()})),l.appendChild(c);if(this.ui.showControl("woql_select"))(c=this.getControlHTML("Query","fa-search")).addEventListener("click",(function(){o.activateSelectedNav(this,e),e.ui.showQueryPage()})),l.appendChild(c);if(this.ui.showControl("woql_update"))(c=this.getControlHTML("Mapping","fa-file-import")).addEventListener("click",(function(){o.activateSelectedNav(this,e),e.ui.showMappingPage()})),l.appendChild(c);if(this.ui.showControl("get_schema"))(c=this.getControlHTML("Schema","fa-cog")).addEventListener("click",(function(){o.activateSelectedNav(this,e),e.ui.showSchemaPage()})),l.appendChild(c);if(this.ui.showControl("get_document")||this.ui.showControl("create_document"))(c=this.getControlHTML("Document","fa-book")).addEventListener("click",(function(){o.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),e.displayDocumentSubMenus()})),l.appendChild(c);if(this.ui.showControl("get_document"))(d=document.createElement("a")).setAttribute("class","terminus-hide terminus-get-doc"),d.appendChild(e.getDocumentChooserDOM()),d.classList.add(),l.appendChild(d);if(this.ui.showControl("create_document"))(d=document.createElement("a")).setAttribute("class","terminus-hide terminus-create-doc"),d.appendChild(e.getDocumentCreatorDOM()),l.appendChild(d)}return t},u.prototype.getControlHTML=function(e,t,r){var n=document.createElement("a");n.setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var i=document.createElement("i");i.setAttribute("class","terminus-menu-icon fa "+t),n.appendChild(i);var a=document.createTextNode(e);return n.appendChild(a),n},u.prototype.showSubMenus=function(e){e.classList.remove("terminus-hide"),e.classList.add("terminus-display")},u.prototype.displayDocumentSubMenus=function(){if(this.ui.showControl("get_document")){var e=document.getElementsByClassName("terminus-get-doc");this.showSubMenus(e[0])}if(this.ui.showControl("create_document")){var t=document.getElementsByClassName("terminus-create-doc");this.showSubMenus(t[0])}},u.prototype.getDocumentChooserDOM=function(){var e=this,t=document.createElement("span");t.setAttribute("class","terminus-document-chooser terminus-form-horizontal terminus-control-group terminus-choose-by-id");var r=document.createElement("span");r.setAttribute("class","terminus-document-chooser-label terminus-control-label terminus-control-label-padding");var n=document.createElement("input");n.setAttribute("class","terminus-form-doc-value terminus-document-chooser terminus-doc-input-text"),n.setAttribute("placeholder","Enter Document ID");var i=document.createElement("button");if(i.setAttribute("class","terminus-control-button terminus-document-button terminus-doc-btn"),i.appendChild(document.createTextNode("View")),i.addEventListener("click",(function(){n.value&&e.ui.showDocument(n.value)})),this.ui.client.connectionConfig.platformEndpoint()&&this.ui.pluginAvailable("select2")){var s=TerminusClient.FrameHelper.unshorten("tcs:Document"),o=new a(this.ui,s);o.change=function(t){e.ui.showDocument(t)},o.view="label";var u=o.getAsDOM("terminus-class-select");jQuery(n).hide(),jQuery(i).hide();var l=document.createElement("a");l.setAttribute("href","#"),l.setAttribute("class","terminus-document-which-chooser"),l.appendChild(document.createTextNode("Choose by ID"));var c="label";jQuery(l).click((function(){"label"==c?(c="id",jQuery(n).show(),jQuery(i).show(),jQuery(u).hide(),jQuery(l).text("Choose by Label")):(c="label",jQuery(n).hide(),jQuery(i).hide(),jQuery(u).show(),jQuery(l).text("Choose by ID"))})),t.appendChild(u),t.prepend(l)}var d=document.createElement("span");return d.setAttribute("class","terminus-control-buttons terminus-document-chooser-buttons"),d.appendChild(i),t.appendChild(r),t.appendChild(n),t.appendChild(d),t},u.prototype.getDocumentCreatorDOM=function(){var e=this,t=document.createElement("div");t.setAttribute("class","terminus-document-creator terminus-form-horizontal terminus-control-group terminus-choose-by-id");var r=document.createElement("input");r.setAttribute("class","terminus-form-doc-value terminus-document-creator terminus-doc-input-text"),r.setAttribute("placeholder","Enter Document Type");var n=document.createElement("button");document.createElement("span").setAttribute("class","document-creator-label terminus-control-label terminus-control-label-padding"),n.setAttribute("class","terminus-control-button create-document-button terminus-doc-btn"),n.appendChild(document.createTextNode("Create")),n.addEventListener("click",(function(){r.value&&e.ui.showCreateDocument(r.value)})),document.createElement("div").setAttribute("class","terminus-control-buttons terminus-document-creator-buttons");var a=new s(this.ui.client,{},this.ui).getConcreteDocumentClassPattern("v:Element"),u=new i(this.ui,a);u.empty_choice="Create Document of Type";e=this;u.change=function(t){t&&(e.ui.showCreateDocument(t),u.choice=!1)};var l=u.getAsDOM("terminus-class-select"),c=document.createElement("div");c.setAttribute("class","terminus-doc-btn-group");var d=document.createElement("button");d.setAttribute("class","terminus-doc-btn-selected terminus-doc-toggle-btn"),d.appendChild(document.createTextNode("D"));var p=document.createElement("span");p.setAttribute("class","terminus-tooltiptext"),p.appendChild(document.createTextNode("Dropdown List")),d.appendChild(p);var h=document.createElement("button");h.setAttribute("class","terminus-doc-toggle-btn"),h.appendChild(document.createTextNode("T"));var m=document.createElement("span");m.setAttribute("class","terminus-tooltiptext"),m.appendChild(document.createTextNode("Text Input")),h.appendChild(m),c.appendChild(h),c.appendChild(d);var f=document.createElement("div");f.setAttribute("class","terminus-doc-btn-gp-align"),f.appendChild(c),t.appendChild(f);var g=document.createElement("span");f.appendChild(g),g.setAttribute("class","create-document-list"),g.appendChild(l);return h.addEventListener("click",(function(){TerminusClient.FrameHelper.removeChildren(g),o.removeSelectedNavClass("terminus-doc-btn-selected"),this.classList.add("terminus-doc-btn-selected"),g.appendChild(r),g.appendChild(n)})),d.addEventListener("click",(function(){TerminusClient.FrameHelper.removeChildren(g),o.removeSelectedNavClass("terminus-doc-btn-selected"),this.classList.add("terminus-doc-btn-selected"),g.appendChild(l)})),t},l.prototype.getAsDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-db-home-page");var r=document.createElement("div"),n=document.createElement("div");n.setAttribute("class","terminus-banner");var i=document.createElement("span");i.setAttribute("class","terminus-home-heading"),i.appendChild(document.createTextNode("DB Home Page - ")),r.appendChild(i);var a=document.createElement("span");a.setAttribute("class","terminus-db-details");var s=document.createElement("span");s.setAttribute("class","terminus-db-details-value ");var u=this.ui.getDBRecord();if(u){var l=u["rdfs:label"]&&u["rdfs:label"]["@value"]?u["rdfs:label"]["@value"]:this.db;s.appendChild(document.createTextNode(l)),s.setAttribute("class","terminus-home-heading")}return a.appendChild(s),r.appendChild(a),n.appendChild(r),this.getDeleteOnHomePage(t),t.appendChild(t.appendChild(o.getHeaderDom("List of Documents"))),this.getClassesDOM(t),t},l.prototype.getDbInfoBox=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-db-info-box");var n=document.createElement("div");n.appendChild(document.createTextNode(t.charAt(0).toUpperCase()+t.slice(1))),n.setAttribute("class","terminus-db-info"),r.appendChild(n);var i=document.createElement("i");switch(t){case"size":i.setAttribute("class","terminus-icon fa fa-balance-scale");var a=document.createTextNode("2 Gb");break;case"created":i.setAttribute("class","terminus-icon fa fa-calendar");a=document.createTextNode("16 July 2015");break;case"modified":i.setAttribute("class","terminus-icon fa fa-clock");a=document.createTextNode("22 Dec 2019")}r.appendChild(i),a&&r.appendChild(a),e.appendChild(r)},l.prototype.getDeleteOnHomePage=function(e){if("terminus"!=this.ui.db()){var t=document.createElement("button");t.setAttribute("class","terminus-btn terminus-btn-float-right terminus-home-del"),t.setAttribute("type","button"),t.innerHTML="Delete Database";var r=this.ui.getDBRecord();if(r)r["rdfs:label"]&&r["rdfs:label"]["@value"]?r["rdfs:label"]["@value"]:this.ui.db();var n=this,i=this.ui.db();t.addEventListener("click",(function(){1==confirm("Do you want to delete ".concat(i," Database?"))&&n.ui.deleteDatabase(i)})),e.appendChild(t)}},l.prototype.getDBSummary=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-db-info-box-display"),e.appendChild(t),this.getDbInfoBox(t,"size"),this.getDbInfoBox(t,"created"),this.getDbInfoBox(t,"modified")},l.prototype.getClassesDOM=function(e){var t=this.wquery.getClassesQuery(),r=this;return this.wquery.execute(t).then((function(t){if(r.result=new n.WOQLResultsViewer(r.ui,t,r.wquery,{},{},!1),r.result){var i=r.result.getAsDOM(e,!1);i?i.setAttribute("class","terminus-margin-box"):(nor=document.createElement("div"),nor.setAttribute("class","terminus-no-res-alert"),nor.appendChild(document.createTextNode("No results available, create new ones to view them here...")),e.appendChild(nor))}})).catch((function(e){console.error(e),r.ui.showError(e)})),e},c.prototype.getAsDOM=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-db-creator");var r=document.createElement("h3");r.setAttribute("class","terminus-db-creator-title terminus-module-head"),r.appendChild(document.createTextNode("Create New Database")),t.appendChild(r);var n=document.createElement("div");n.setAttribute("class","terminus-form-border"),t.appendChild(n),(o=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-id-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("ID")),o.appendChild(u);var i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("class","terminus-form-value terminus-input-text"),i.setAttribute("placeholder","No spaces or special characters allowed in IDs"),o.appendChild(i),n.appendChild(o),(o=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-title-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("Title"));var a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("placeholder","A brief title for the Database"),a.setAttribute("class","terminus-form-value terminus-input-text"),o.appendChild(u),o.appendChild(a),n.appendChild(o),(o=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-title-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("Description")),o.appendChild(u);var s=document.createElement("textarea");s.setAttribute("class","terminus-textarea terminus-db-description terminus-textarea "),s.setAttribute("placeholder","A short text describing the database and its purpose"),o.appendChild(s),n.appendChild(o),(o=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-schema-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("Import Schema")),o.appendChild(u);var o,u,l=document.createElement("input");l.setAttribute("placeholder","Terminus DB URL"),l.setAttribute("type","text"),l.setAttribute("class","terminus-form-value terminus-form-url terminus-input-text"),o.appendChild(l),n.appendChild(o),(o=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-data-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("Import Data")),o.appendChild(u);var c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("placeholder","Terminus DB URL"),c.setAttribute("class","terminus-form-value terminus-form-url terminus-input-text"),o.appendChild(c);var d=document.createElement("div");d.setAttribute("class","terminus-control-buttons");var p=document.createElement("button");p.setAttribute("class","terminus-control-button terminus-cancel-db-button terminus-btn"),p.appendChild(document.createTextNode("Cancel"));var h=document.createElement("button");h.setAttribute("class","terminus-control-button terminus-create-db-button terminus-btn"),h.appendChild(document.createTextNode("Create"));var m=this;return h.addEventListener("click",(function(){var e=function(){var e={};return e.id=i.value,e.title=a.value,e.description=s.value,e.schema=l.value,e.data=c.value,e}();m.ui.createDatabase(e)})),p.addEventListener("click",(function(){m.ui.showServerMainPage()})),d.appendChild(p),d.appendChild(h),n.appendChild(d),t},e.exports={TerminusDBViewer:l,TerminusDBController:u,TerminusDBCreator:c}},function(e,t){function r(e,t){this.ui=t,this.vios=[];for(var r=[],i=0;i<e.length;i++){for(var a=0;a<r.length;a++)JSON.stringify(e[i]),JSON.stringify(r[a]);r.push(e[i])}for(i=0;i<r.length;i++)this.vios.push(new n(r[i],this.ui))}function n(e,t){this.ui=t,this.vio=e}r.prototype.getAsDOM=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-violations terminus-show-msg-vio");var r=document.createElement("div");r.setAttribute("class","terminus-violations-heading"),t.appendChild(r);var n=this.vios.length+(this.vios.length>1?" Violations Detected":" Violation Detected");e&&(n+=" "+e),r.appendChild(document.createTextNode(n));for(var i=0;i<this.vios.length;i++)t.appendChild(this.vios[i].getAsDOM());return t},n.prototype.getAsDOM=function(){var e=document.createElement("div");if(e.setAttribute("class","terminus-violation"),this.vio["@type"]){var t=this.vio["vio:message"]||{"@value":""};e.appendChild(this.getPropertyAsDOM(this.vio["@type"],t))}for(var r in this.vio)"vio:message"!=r&&"@type"!=r&&e.appendChild(this.getPropertyAsDOM(r,this.vio[r]));return e},n.prototype.getPropertyAsDOM=function(e,t){var r=document.createElement("div");r.setAttribute("class","terminus-violation-property");var n=document.createElement("span");n.setAttribute("class","terminus-label terminus-violation-property-label"),n.appendChild(document.createTextNode(e));var i=document.createElement("span");return i.setAttribute("class","terminus-violation-property-value"),i.appendChild(document.createTextNode(t["@value"])),r.appendChild(n),r.appendChild(i),r},e.exports=r},function(e,t,r){var n=r(1),i=r(6),a=r(47),s=r(2);function o(e,t){this.ui=e,this.options=t,this.meta={},this.init(),this.generator=!1,this.result=!1,this.wquery=new n(e.client,this.options,this.ui),this.pman=new s,this.gentype=t&&t.generator?t.generator:"textbox",this.generators={textbox:{label:"Simple Text Box",value:"textbox"}},this.loadGenerator()}o.prototype.hasGeneratorOptions=function(){return!1},o.prototype.changeGenerator=function(e){this.gentype!=e&&(this.gentype=e,this.loadGenerator(),this.redrawGenerator())},o.prototype.redrawGenerator=function(e){TerminusClient.FrameHelper.removeChildren(this.inputDOM),this.inputDOM.appendChild(this.getQueryButtonsDOM(e))},o.prototype.loadGenerator=function(){var e=this;"textbox"==this.gentype&&(this.generator=new a((function(t,r){e.query(t,r)}),this,this.ui))},o.prototype.init=function(){var e=new n(this.ui.client,this.options,this.ui),t=e.getElementMetaDataQuery(),r=this;r.meta={},e.execute(t).then((function(e){if(new i.WOQLResult(e,null,null,r.ui).hasBindings(e))for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t].Element;n&&void 0===r.meta[n]&&(r.meta[n]=e.bindings[t])}})).catch((function(e){console.error(e)}))},o.prototype.query=function(e,t,r){var n=this;TerminusClient.FrameHelper.removeChildren(this.resultDOM),this.wquery.execute(e).then((function(e){n.result=new i.WOQLResultsViewer(n.ui,e,n.wquery,n.options,t,!0);var r=n.result.getAsDOM(n.resultDOM,!0);r&&n.resultDOM.appendChild(r)})).catch((function(e){n.ui.showError(e)}))},o.prototype.getResultViewDom=function(){this.resultDOM=document.createElement("div"),this.resultDOM.setAttribute("class","terminus-query-results")},o.prototype.getAsDOM=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-query-page"),this.hasGeneratorOptions()&&t.appendChild(this.getQueryCreatorChoiceDOM(e)),this.resultDOM=document.createElement("div"),this.resultDOM.setAttribute("class","terminus-query-results terminus-query-section");var r=document.createElement("span");return r.setAttribute("style","display: flex;"),this.qTextBox=this.getQueryTextAreaDOM(e,r),this.buttonsDOM=document.createElement("span"),this.buttonsDOM.setAttribute("class","terminus-query-input"),this.buttonsDOM.appendChild(this.getQueryButtonsDOM(e,this.qTextBox)),r.appendChild(this.buttonsDOM),t.appendChild(r),t.appendChild(this.resultDOM),t},o.prototype.getQueryCreatorChoiceDOM=function(){var e=document.createElement("select");for(var t in e.setAttribute("class","terminus-query-generator-selector"),this.generators){var r=this.generators[t],n=document.createElement("option");n.value=r.value?r.value:t;var i=r.label?r.label:t;n.appendChild(document.createTextNode(i)),e.appendChild(n)}var a=this;return e.addEventListener("change",(function(){a.changeGenerator(this.value)})),e},o.prototype.getQueryButtonsDOM=function(e,t){return this.generator.getAsDOM(e,t)},o.prototype.getQueryTextAreaDOM=function(e,t){return this.generator.getQueryTextAreaDOM(e,t)},e.exports=o},function(e,t,r){var n=r(5),i=r(48),a=r(15),s=r(0);function o(e,t,r){this.query=e,this.wquery=t.wquery,this.ui=r,this.datatable={},this.datatable.pageLength=20,this.datatable.start=0}o.prototype.gatherDatatableSettings=function(e,t){this.datatable.qTextDom=e,this.datatable.query=t,this.datatable.chosenValue=null},o.prototype.getQueryButtonGroups=function(e){var t=document.createElement("div");return t.setAttribute("class","terminus-query-group-row"),e.appendChild(t),t},o.prototype.qGroupQueries=function(e,t,r){var n=document.createElement("button"),i=this;n.addEventListener("click",(function(e){if(i.ui.clearMessages(),"Data Queries"==t){(r=e.target||e.srcElement).textContent||r.innerText;if("SELECT"==r.nodeName)return}else if("Document Queries"==t){var r;(r=e.target||e.srcElement).textContent||r.innerText;if("INPUT"==r.nodeName)return}for(var n=0;n<this.children.length;n++)s.toggleVisibility(this.children[n]);var a=document.getElementsByClassName("query-example-buttons");for(n=0;n<a.length;n++)if(this!=a[n])for(var o=0;o<a[n].children.length;o++)a[n].children[o].classList.contains("terminus-display")&&(a[n].children[o].classList.remove("terminus-display"),a[n].children[o].classList.add("terminus-hide"))})),n.setAttribute("class","terminus-group-box terminus-pointer query-example-buttons");var a=document.createElement("div");a.setAttribute("class","terminus-group"),n.appendChild(a);var o=document.createElement("div");o.setAttribute("class","terminus-group-header"),a.appendChild(o);var u=document.createElement("div");u.setAttribute("class","terminus-query-block-headers"),u.appendChild(document.createTextNode(t)),o.appendChild(u),ic=document.createElement("i"),ic.setAttribute("class","terminus-hand-pointer-float fa fa-hand-pointer"),u.appendChild(ic);var l=document.createElement("h5");return l.setAttribute("class","terminus-group-sub-title terminus-hide"),l.appendChild(document.createTextNode(r)),n.appendChild(l),e.appendChild(n),n},o.prototype.setDatatableSettings=function(e){e.limit&&(this.datatable.pageLength=e.limit[0],this.datatable.start=e.limit[1].start[0])},o.prototype.getQueryTextAreaDOM=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-query-textbox-input terminus-query-section");var n=document.createElement("H3");n.appendChild(document.createTextNode("Enter Query")),n.setAttribute("class","terminus-full-css-margin-top terminus-module-head"),r.appendChild(n);var i=document.createElement("textarea");i.setAttribute("class","terminus-query-box"),i.setAttribute("placeholder","Enter new query or load queries from example buttons provided below ..."),i.setAttribute("style","min-width: 400px; min-height: 60px;"),e&&(i.value=JSON.stringify(e,void 0,2)),r.appendChild(i),s.stylizeEditor(this.ui,i,"query","javascript");var a=this,o=document.createElement("button");return o.setAttribute("class","terminus-control-button terminus-btn"),o.appendChild(document.createTextNode("Send Query")),o.addEventListener("click",(function(){a.ui.clearMessages();try{var e=JSON.parse(i.value);a.ui.pluginAvailable("datatables")?(a.gatherDatatableSettings(i,a.datatable.query),a.setDatatableSettings(e),a.query(e,a.datatable)):a.query(e)}catch(e){alert("Failed to parse Query "+e.toString())}})),r.appendChild(o),t.appendChild(r),i},o.prototype.getAsDOM=function(e,t){var r=document.createElement("div");r.setAttribute("class","terminus-query-textbox-input");var o=document.createElement("div");o.setAttribute("class","terminus-control-buttons"),r.appendChild(o);var u=document.createElement("div");u.setAttribute("class","terminus-query-examples terminus-db-list-title");var l=document.createElement("H3");l.appendChild(document.createTextNode("Saved Queries")),l.setAttribute("class","terminus-full-css-margin-top terminus-module-head"),u.appendChild(l);var c=this.getQueryButtonGroups(u);u.appendChild(c);var d=this.qGroupQueries(c,"Schema Queries",""),p=document.createElement("button");p.appendChild(document.createTextNode("Show All Classes")),p.setAttribute("class","terminus-control-button terminus-q-btn"),p.addEventListener("click",(function(){f.ui.clearMessages(),s.deleteStylizedEditor(f.ui,t);var e=f.wquery.getClassMetaDataQuery(null,f.datatable.pageLength,f.datatable.start);t.value=JSON.stringify(e,void 0,2),s.stylizeEditor(f.ui,t,"query","javascript"),f.ui.pluginAvailable("datatables")?(f.gatherDatatableSettings(t,"Show_All_Classes"),f.query(e,f.datatable)):f.query(e)}));var h=document.createElement("button");h.appendChild(document.createTextNode("Show Document Classes")),h.setAttribute("class","terminus-control-button terminus-q-btn"),h.addEventListener("click",(function(){f.ui.clearMessages(),s.deleteStylizedEditor(f.ui,t);var e=f.wquery.getClassMetaDataQuery(f.wquery.getConcreteDocumentClassPattern("v:Element"),f.datatable.pageLength,f.datatable.start);t.value=JSON.stringify(e,void 0,2),s.stylizeEditor(f.ui,t,"query","javascript"),f.ui.pluginAvailable("datatables")?(f.gatherDatatableSettings(t,"Show_Document_Classes"),f.query(e,f.datatable)):f.query(e)}));var m=document.createElement("button");m.appendChild(document.createTextNode("Show All Schema Elements")),m.setAttribute("class","terminus-control-button terminus-q-btn");var f=this;m.addEventListener("click",(function(){f.ui.clearMessages(),s.deleteStylizedEditor(f.ui,t);var e=f.wquery.getElementMetaDataQuery(null,f.datatable.pageLength,f.datatable.start);t.value=JSON.stringify(e,void 0,2),s.stylizeEditor(f.ui,t,"query","javascript"),f.ui.pluginAvailable("datatables")?(f.gatherDatatableSettings(t,"Show_All_Schema_Elements"),f.query(e,f.datatable)):f.query(e)}));var g=document.createElement("button");g.appendChild(document.createTextNode("Show All Documents")),g.setAttribute("class","terminus-control-button terminus-q-btn"),g.addEventListener("click",(function(){f.ui.clearMessages(),s.deleteStylizedEditor(f.ui,t);var e=f.wquery.getAllDocumentQuery(null,f.datatable.pageLength,f.datatable.start);t.value=JSON.stringify(e,void 0,2),s.stylizeEditor(f.ui,t,"query","javascript"),f.ui.pluginAvailable("datatables")?(f.gatherDatatableSettings(t,"Show_All_Documents"),f.query(e,f.datatable)):f.query(e)}));var v=document.createElement("button");v.appendChild(document.createTextNode("Show All Data")),v.setAttribute("class","terminus-control-button terminus-q-btn"),v.addEventListener("click",(function(){f.ui.clearMessages(),s.deleteStylizedEditor(f.ui,t);var e=f.wquery.getEverythingQuery(null,f.datatable.pageLength,f.datatable.start);t.value=JSON.stringify(e,void 0,2),s.stylizeEditor(f.ui,t,"query","javascript"),f.ui.pluginAvailable("datatables")?(f.gatherDatatableSettings(t,"Show_All_Data"),f.query(e,f.datatable)):f.query(e)}));var y=document.createElement("button");y.appendChild(document.createTextNode("Show All Properties")),y.setAttribute("class","terminus-control-button terminus-q-btn"),y.addEventListener("click",(function(){f.ui.clearMessages(),s.deleteStylizedEditor(f.ui,t);var e=f.wquery.getPropertyListQuery(null,f.datatable.pageLength,f.datatable.start);t.value=JSON.stringify(e,void 0,2),s.stylizeEditor(f.ui,t,"query","javascript"),f.ui.pluginAvailable("datatables")?(f.gatherDatatableSettings(t,"Show_All_Properties"),f.query(e,f.datatable)):f.query(e)}));var b=this.qGroupQueries(c,"Data Queries",""),C=new n(this.ui);C.empty_choice="Show data of type";f=this;C.change=function(e){if(f.ui.clearMessages(),e){s.deleteStylizedEditor(f.ui,t);var r=f.wquery.getDataOfChosenClassQuery(e,f.datatable.pageLength,f.datatable.start);t.value=JSON.stringify(r,void 0,2),s.stylizeEditor(f.ui,t,"query","javascript"),f.ui.pluginAvailable("datatables")?(f.gatherDatatableSettings(t,"Show_Data_Class"),f.datatable.chosenValue=e,f.query(r,f.datatable)):f.query(r)}};var w=C.getAsDOM("terminus-query-select"),D=new i(this.ui);D.empty_choice="Show property data";f=this;D.change=function(e){if(e){s.deleteStylizedEditor(f.ui,t);var r=f.wquery.getDataOfChosenPropertyQuery(e,f.datatable.pageLength,f.datatable.start);t.value=JSON.stringify(r,void 0,2),s.stylizeEditor(f.ui,t,"query","javascript"),f.ui.pluginAvailable("datatables")?(f.gatherDatatableSettings(t,"Show_Property_Class"),f.datatable.chosenValue=e,f.query(r,f.datatable)):f.query(r)}};var x=this.qGroupQueries(c,"Document Queries",""),E=D.getAsDOM(),A=new a(this.ui);A.change=function(e){f.ui.clearMessages(),s.deleteStylizedEditor(f.ui,t);var r=f.wquery.getDocumentQuery(e,f.datatable.pageLength,f.datatable.start);t.value=JSON.stringify(r,void 0,2),s.stylizeEditor(f.ui,t,"query","javascript"),f.ui.pluginAvailable("datatables")?(f.gatherDatatableSettings(t,"Show_Document_Info_by_Id"),f.datatable.chosenValue=e,f.query(r,f.datatable)):f.query(r)};var T=A.getAsDOM("terminus-query-select"),M=new a(this.ui,TerminusClient.FrameHelper.unshorten("tcs:Document"));M.view="label",M.change=A.change;var O=M.getAsDOM("terminus-query-select");document.createElement("p").appendChild(O);var S=document.createElement("div");S.setAttribute("class","terminus-hide "),S.appendChild(m);var L=document.createElement("BR");S.appendChild(L),S.appendChild(p);L=document.createElement("BR");S.appendChild(L),S.appendChild(h);L=document.createElement("BR");S.appendChild(L),S.appendChild(y);L=document.createElement("BR");S.appendChild(L),d.appendChild(S),r.appendChild(u);var F=document.createElement("div");F.setAttribute("class","terminus-hide"),F.appendChild(w),F.appendChild(E);L=document.createElement("BR");F.appendChild(L),F.appendChild(v),b.appendChild(F);var _=document.createElement("div");return _.setAttribute("class","terminus-hide"),_.appendChild(T),_.appendChild(g),x.appendChild(_),r},e.exports=o},function(e,t,r){var n=r(1);TerminusPropertyChooser=function(e,t){this.ui=e,this.choice=!1,this.filter=t},TerminusPropertyChooser.prototype.setRoot=function(e){this.root=e},TerminusPropertyChooser.prototype.setFilter=function(e){this.filter=e},TerminusPropertyChooser.prototype.change=function(e){alert("Need to specify Property chooser function ("+e+")")},TerminusPropertyChooser.prototype.getAsDOM=function(){var e=document.createElement("span");e.setAttribute("Class","terminus-Class-chooser");var t=document.createElement("select");t.setAttribute("Class"," terminus-type-select terminus-query-select");var r=this;t.addEventListener("change",(function(){this.value!=this.choice&&(this.choice=this.value,r.change(this.value))})),e.appendChild(t);var i=new n(this.ui.client,!1,this.ui),a=i.getPropertyListQuery(this.filter);r=this;return i.execute(a).then((function(e){for(var n=r.getResultsAsOptions(e),i=0;i<n.length;i++)t.appendChild(n[i])})),e},TerminusPropertyChooser.prototype.getResultsAsOptions=function(e){var t=[];if(this.empty_choice){var r=document.createElement("option");r.setAttribute("Class","terminus-class-choice terminus-empty-choice"),r.value="",r.appendChild(document.createTextNode(this.empty_choice)),t.push(r)}var n=document.createElement("option");n.setAttribute("Class","terminus-class-choice"),n.value="rdfs:label",n.appendChild(document.createTextNode("Label")),t.push(n);var i=document.createElement("option");if(i.setAttribute("Class","terminus-class-choice"),i.value="rdfs:comment",i.appendChild(document.createTextNode("Comment")),t.push(i),e.bindings)for(var a=[],s=0;s<e.bindings.length;s++){var o=this.getVariableValueFromBinding("Property",e.bindings[s]);if(o&&-1==a.indexOf(o)){a.push(o);var u=document.createElement("option");u.setAttribute("Class","terminus-class-choice"),u.value=o;var l=this.getVariableValueFromBinding("Label",e.bindings[s]);l&&"unknown"!=l||(l=TerminusClient.FrameHelper.labelFromURL(o)),l["@value"]&&(l=l["@value"]),u.appendChild(document.createTextNode(l)),t.push(u)}}return t},TerminusPropertyChooser.prototype.getVariableValueFromBinding=function(e,t){for(var r in t){if(r.substring(r.lastIndexOf("/")+1)==e)return t[r]}return!1},e.exports=TerminusPropertyChooser},function(e,t){function r(e,t){this.ui=e,this.mode=t||"data"}r.prototype.getAsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-mapping-page terminus-page");var t=document.createElement("select"),r=document.createElement("option");r.value="data",r.appendChild(document.createTextNode("Data Map")),t.appendChild(r);var n=document.createElement("option");n.value="model",n.appendChild(document.createTextNode("Model Map")),t.appendChild(n);var i=this.getFormFieldDOM("Map Type");i.appendChild(t),e.appendChild(i);var a=this.getFormField(e,"Map Source"),s=this.getFormField(e,"Map Target"),o=this.getFormField(e,"Queries"),u=this.getFormField(e,"Options"),l=this.getFormFieldDOM("Existing Mapping"),c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("size",80),l.appendChild(c),e.appendChild(l);var d=document.createElement("button");d.setAttribute("class","terminus-btn terminus-control-button"),d.appendChild(document.createTextNode("Execute Mapping"));var p=this;return d.addEventListener("click",(function(){var e={map_source:JSON.parse(a.value)};"data"==t.value?e["rdf:type"]="dcogmodel:DataMap":e["rdf:type"]="dcogmodel:ModelMap",s.value&&(e.map_target=s.value),o.value&&(e.queries=o.value),u.value&&(e.options=u.value),c.value&&(e.mapping=c.value),p.ui.client.update(!1,e)})),e.appendChild(d),e},r.prototype.getFormFieldDOM=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-form-field terminus-mapping-field");var r=document.createElement("span");return r.setAttribute("class","terminus-form-label terminus-mapping-label"),r.appendChild(document.createTextNode(e)),t.appendChild(r),t},r.prototype.getFormField=function(e,t){var r=this.getFormFieldDOM(t),n=document.createElement("textarea");return n.setAttribute("class","terminus-form-value terminus-textarea"),r.appendChild(n),e.appendChild(r),n},e.exports=r},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(5),a=r(7),s=r(0);function o(e){this.ui=e,this.mode="view",this.format="turtle",this.confirm_before_update=!1}o.prototype.getAsDOM=function(){return this.holder=document.createElement("div"),this.controldom=document.createElement("div"),this.controldom.setAttribute("class","terminus-schema-controls"),this.pagedom=document.createElement("div"),this.pagedom.setAttribute("class","terminus-schema-viewer"),this.loadSchema(),this.holder.appendChild(this.controldom),this.holder.appendChild(this.pagedom),this.holder},o.prototype.loadSchema=function(e,t){var r=this;this.ui.showBusy("Fetching Database Schema"),this.ui.client.getSchema(!1,{"terminus:encoding":"terminus:"+this.format}).then((function(n){r.ui.clearBusy(),r.schema=n,r.refreshPage(e,t)})).catch((function(e){r.ui.clearBusy(),r.ui.showError(e)}))},o.prototype.resetControlDOM=function(){TerminusClient.FrameHelper.removeChildren(this.controldom),"edit"==this.mode?this.controldom.appendChild(this.getSchemaSaveButtons()):"import"==this.mode?this.controldom.appendChild(this.getSchemaImportActionButtons()):"class_frame"==this.mode?(this.ui.showControl("get_schema")&&this.controldom.appendChild(this.getShowSchemaButton()),this.ui.showControl("class_frame")&&this.controldom.appendChild(this.getClassFrameChooser())):"view"==this.mode&&(this.ui.showControl("update_schema")&&this.controldom.appendChild(this.getSchemaEditButton()),this.ui.showControl("import_schema")&&this.controldom.appendChild(this.getImportButton()),this.ui.showControl("schema_format")&&this.controldom.appendChild(this.getFormatChoices()),this.ui.showControl("class_frame")&&this.controldom.appendChild(this.getClassFrameChooser()))},o.prototype.getFormatChoices=function(){var e=document.createElement("select");e.setAttribute("class","terminus-form-select terminus-schema-format terminus-type-select");var t=document.createElement("option");t.setAttribute("class","terminus-schema-turtle"),t.value="turtle",t.appendChild(document.createTextNode("Turtle")),"turtle"==this.format&&(t.selected=!0),e.appendChild(t);var r=document.createElement("option");r.setAttribute("class","terminus-schema-jsonld"),r.value="jsonld",r.appendChild(document.createTextNode("Json LD")),"jsonld"==this.format&&(r.selected=!0),e.appendChild(r);var n=this;return e.addEventListener("change",(function(e){n.format=this.value,n.loadSchema()})),e},o.prototype.refreshPage=function(e,t){this.controldom&&this.resetControlDOM(),this.pagedom&&this.refreshMainPage(e,t)},o.prototype.refreshMainPage=function(e,t){TerminusClient.FrameHelper.removeChildren(this.pagedom),"view"==this.mode?this.pagedom.appendChild(this.getSchemaViewDOM()):"edit"==this.mode?this.pagedom.appendChild(this.getSchemaEditDOM()):"import"==this.mode?this.pagedom.appendChild(this.getSchemaImportDOM()):"class_frame"==this.mode&&this.pagedom.appendChild(this.getClassFrameDOM()),e&&this.ui.showMessage(e,t)},o.prototype.getSchemaSaveButtons=function(){var e=document.createElement("span");return e.setAttribute("class","terminus-schema-save-buttons"),e.appendChild(this.getCancelButton()),e.appendChild(this.getSaveButton()),e},o.prototype.getSchemaImportActionButtons=function(){var e=document.createElement("span");return e.setAttribute("class","terminus-schema-import-buttons"),e.appendChild(this.getCancelButton(!0)),e.appendChild(this.getImportSaveButton()),e},o.prototype.getShowSchemaButton=function(){var e=this;return this.getSchemaButton("View Schema","get_schema",(function(){e.ui.clearMessages(),e.mode="view",e.refreshPage()}))},o.prototype.getImportPreviewButton=function(){var e=this;return this.getSchemaButton("Preview","preview",(function(){e.ui.clearMessages(),e.mode="preview",e.refreshPage()}))},o.prototype.getCancelButton=function(e){var t=this;return this.getSchemaButton("Cancel","cancel_update",(function(){t.ui.clearMessages(),t.mode="view",e?t.ui.redraw():t.refreshPage()}))},o.prototype.getImportSaveButton=function(){var e=this;return this.getSchemaButton("Import","import_schema",(function(){e.ui.clearMessages(),"function"==typeof e.doImport&&e.doImport()}))},o.prototype.getSaveButton=function(){var e=this;return this.getSchemaButton("Save","update_schema",(function(){e.ui.clearMessages();var t=e.schema_edit_dom.value;return"object"==n(e.schema)&&(t=JSON.parse(t)),e.updateSchema(t,{"terminus:encoding":"terminus:"+e.format})}))},o.prototype.getSchemaEditButton=function(){var e=this;return this.getSchemaButton("Edit","update_schema",(function(){e.mode="edit",e.refreshPage()}))},o.prototype.getImportButton=function(){var e=this;return this.getSchemaButton("Import New Schema","import_schema",(function(){e.ui.clearMessages(),e.mode="import",e.refreshPage()}))},o.prototype.getSchemaButton=function(e,t,r){var n=document.createElement("button");return n.appendChild(document.createTextNode(e)),n.setAttribute("class","terminus-btn terminus-control-button terminus-schema-"+t),n.addEventListener("click",r),n},o.prototype.updateSchema=function(e,t){this.ui.showBusy("Updating Database Schema");var r=this;return this.ui.client.updateSchema(!1,e,t).then((function(e){if(e["terminus:status"]&&"terminus:success"==e["terminus:status"])r.ui.showBusy("Retrieving updated schema"),r.mode="view",r.loadSchema("Successfully Updated Schema"),r.ui.redraw();else{if(!e["terminus:status"]||"terminus:failure"!=e["terminus:status"])throw new Error("Update Schema returned no terminus:status code");r.ui.clearBusy(),r.ui.showViolations(e["terminus:witnesses"],"schema")}})).catch((function(e){r.ui.clearBusy(),e.data&&e.data["terminus:witnesses"]?r.ui.showViolations(e.data["terminus:witnesses"],"schema"):r.ui.showError(e)}))},o.prototype.load=function(e,t,r){var n=this;r=r||"replace",this.ui.showBusy("Loading schema from "+e);var i=this.ui.client.connectionConfig.schemaURL();return this.ui.client.getSchema(e,{"terminus:user_key":t,"terminus:encoding":"terminus:"+this.format}).then((function(t){var a="append"==r?n.appendSchema(t):t;n.confirm_before_update?(n.ui.showResult("Schema retrieved - click save to deploy"),n.ui.client.connectionConfig.setSchemaURL(i),n.showConfirmPage(a)):(n.ui.showBusy("Updating schema"),n.ui.client.connectionConfig.setSchemaURL(i),n.updateSchema(a,{"terminus:encoding":"terminus:"+n.format}).then((function(t){return n.mode="view",n.ui.clearBusy(),n.ui.redraw(),n.ui.showResult("Successfully deployed new schema from "+e),t})))})).catch((function(e){n.ui.clearBusy(),n.ui.showError(e)}))},o.prototype.appendSchema=function(e){var t=this.schema;if("turtle"==this.format)t=this.schema+e;else if("jsonld"==this.format)for(var r in e)t[r]=e[r];return t},o.prototype.getClassFrameChooser=function(){var e=document.createElement("span");e.setAttribute("class","terminus-class frame-chooser");var t=new i(this.ui);t.empty_choice="View Individual Class Frames";var r=this;t.change=function(e){e&&(r.cls=e,"class_frame"!=r.mode?(r.mode="class_frame",r.refreshPage()):r.refreshMainPage())};var n=t.getAsDOM();return e.appendChild(n),e},o.prototype.getClassFrameDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-schema-page terminus-schema-classframe-page");var t=new a(this.ui,"model");return t.loadCreateDocument(this.cls),t.page_config="model",e.appendChild(t.getAsDOM()),e},o.prototype.showConfirmPage=function(e){this.schema=e,this.confirm_before_update=!1,this.mode="edit",this.refreshPage("Confirm new schema")},o.prototype.getSchemaEditDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-schema-page terminus-schema-edit-page");var t=document.createElement("textarea");return t.setAttribute("class","terminus-schema-edit terminus-schema-textarea"),t.setAttribute("width","100%"),t.setAttribute("style","min-width: 400px; min-height: 400px;"),"string"==typeof this.schema?t.innerHTML=this.schema:"object"==n(this.schema)&&(t.innerHTML=JSON.stringify(this.schema,0,4)),this.schema_edit_dom=t,e.appendChild(t),s.stylizeEditor(this.ui,t,"schema","turtle"),e},o.prototype.getSchemaViewDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-schema-page terminus-schema-view-page");var t=document.createElement("pre");if(t.setAttribute("class","terminus-schema-view terminus-scheme-pre"),"string"==typeof this.schema){var r=this.schema.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");t.innerHTML=r}else"object"==n(this.schema)&&(t.innerHTML=JSON.stringify(this.schema,0,4));return s.stylizeCodeDisplay(this.ui,t,e,"turtle")||e.appendChild(t),e},o.prototype.getSchemaImportDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-form-border terminus-schema-page terminus-schema-import-page"),(a=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group");var t=document.createElement("span");t.setAttribute("class","terminus-url-loader-input terminus-form-label terminus-control-label"),t.appendChild(document.createTextNode("URL")),a.appendChild(t);var r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("class","terminus-form-value terminus-input-text terminus-form-url terminus-url-connect"),r.setAttribute("placeholder","Enter URL of DB to import from"),a.appendChild(r),e.appendChild(a),(a=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(s=document.createElement("span")).setAttribute("class","terminus-url-loader-input terminus-form-label  terminus-control-label terminus-import_mode-input"),s.appendChild(document.createTextNode("Import Mode")),a.appendChild(s);var n=document.createElement("select");n.setAttribute("class","terminus-form-select");var i=document.createElement("option");i.value="replace",i.appendChild(document.createTextNode("Replace Mode")),n.appendChild(i);var a,s,o=document.createElement("option");o.value="append",o.appendChild(document.createTextNode("Append Mode")),n.appendChild(o),n.setAttribute("class","terminus-form-select terminus-import-mode"),a.appendChild(s),a.appendChild(n),e.appendChild(a),(a=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(s=document.createElement("span")).setAttribute("class","terminus-form-label terminus-url-key-input terminus-control-label"),s.appendChild(document.createTextNode("Key"));var u=document.createElement("input");u.setAttribute("type","text"),u.setAttribute("class","terminus-form-value terminus-input-text terminus-url-key"),a.appendChild(s),a.appendChild(u),e.appendChild(a);var l=this;return this.doImport=function(){r.value&&l.load(r.value,u.value,n.value)},e},e.exports=o},function(e,t,r){var n=r(8),i=r(0);function a(e){this.ui=e}function s(e){this.ui=e,this.server=this.ui.server(),this.max_cell_size=500,this.max_word_size=40}a.prototype.getAsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-server-controller");var t=this;if(this.ui&&this.ui.server()){document.createElement("div").setAttribute("class","terminus-server-connectiAlso, the title / hover stuff should include the full entry when it is shortened (for urls / comments) so when I hover over it I should see the full texton");var r=document.createElement("div");r.setAttribute("class","span3");var n=document.createElement("ul");n.setAttribute("class","terminus-ul"),r.appendChild(n),e.appendChild(r),(s=document.createElement("a")).setAttribute("class","terminus-dashboard-info terminus-list-group-a terminus-nav-width");var a="Server: "+this.ui.server();if(s.appendChild(document.createTextNode(a)),n.appendChild(s),this.ui.showControl("change-server")){(s=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");t=this;s.addEventListener("click",(function(){i.activateSelectedNav(this,t),t.ui.showLoadURLPage()})),(o=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-link"),s.appendChild(o);a=document.createTextNode("Change Server");s.appendChild(a),n.appendChild(s)}if(this.ui.showControl("db")){(s=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");t=this;s.addEventListener("click",(function(){i.activateSelectedNav(this,t),t.ui.db(),t.ui.showServerMainPage()})),(o=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-eye"),s.appendChild(o);a=document.createTextNode("View Databases");s.appendChild(a),n.appendChild(s)}if(this.ui.showControl("create_database")){var s;(s=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var o;t=this;s.addEventListener("click",(function(){i.activateSelectedNav(this,t),t.ui.db(),t.ui.showCreateDBPage()})),(o=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-plus"),s.appendChild(o);a=document.createTextNode("Create New Database");s.appendChild(a),n.appendChild(s)}}return e},a.prototype.getServerLabelDOM=function(){var e=this.ui.client.connection.getServerRecord(),t=e&&e["rdfs:label"]&&e["rdfs:label"]["@value"]?e["rdfs:label"]["@value"]:this.ui.server(),r=e&&e["rdfs:comment"]&&e["rdfs:comment"]["@value"]?e["rdfs:comment"]["@value"]:"";r+=" Server URL: "+this.ui.server();var n=document.createElement("span");return n.setAttribute("class","terminus-server-value"),n.setAttribute("title",r),n.appendChild(document.createTextNode(t)),n=document.createElement("div")},s.prototype.getAsDOM=function(e){var t=this,r=document.createElement("span");if(r.setAttribute("class","terminus-server-home-page"),this.ui.server()){var n=document.createElement("span");if(n.setAttribute("class","terminus-server-home"),this.ui.showView("server"),this.ui.showView("change-server")){var i=document.createElement("button");i.setAttribute("class","terminus-control-button terminus-change-server-button terminus-btn"),i.appendChild(document.createTextNode("Disconnect")),i.addEventListener("click",(function(){t.ui.showLoadURLPage()}))}if(this.ui.showView("create_database")){var a=document.createElement("button");a.setAttribute("class","terminus-control-button terminus-create-db-button terminus-btn"),a.appendChild(document.createTextNode("Create New Database")),a.addEventListener("click",(function(){t.ui.db(),t.ui.clearMessages(),t.ui.showCreateDBPage()}))}this.ui.showView("db")&&n.appendChild(this.getDBListDOM()),r.appendChild(n)}else t.ui.showLoadURLPage();return r},s.prototype.getServerDetailsDOM=function(){var e=document.createElement("span");e.setAttribute("class","terminus-server-details terminus-server-banner");var t=document.createElement("span");t.setAttribute("class","terminus-label terminus-server-info"),t.appendChild(document.createTextNode("Connected to Server - "));var r=document.createElement("span");return r.setAttribute("class","terminus-value terminus-server-info"),r.appendChild(document.createTextNode(this.ui.server())),e.appendChild(t),e.appendChild(r),e},s.prototype.wrapTableLinkCell=function(e,t,r){var n=this,i=document.createElement("p");i.setAttribute("class","terminus-table-content"),r.length>this.max_cell_size&&(i.setAttribute("title",r),r=r.substring(0,this.max_cell_size)+"...");for(var a={},s=r.split(" "),o=0;o<s.length;o++){var u=s[o];if(u.length>this.max_word_size){i.setAttribute("title",r);var l=u.substring(0,this.max_word_size)+"...";a[u]=l}}for(var c in a)r=r.replace(c,a[c]);return i.appendChild(document.createTextNode(r)),e.addEventListener("click",(function(){n.ui.connectToDB(t),n.ui.showDBMainPage()})),i},s.prototype.getDBListDOM=function(){var e=this,t=document.createElement("div"),r=document.createElement("h3");r.setAttribute("class","terminus-db-list-title terminus-module-head"),r.appendChild(document.createTextNode("Available Databases")),t.appendChild(r);var i=document.createElement("table");i.setAttribute("class","terminus-db-list terminus-db-size terminus-hover-table");var a=document.createElement("thead"),s=document.createElement("tr"),o=document.createElement("th");o.appendChild(document.createTextNode("ID")),o.setAttribute("class","terminus-db-id terminus-table-header-full-css");var u=document.createElement("th");u.appendChild(document.createTextNode("Title")),u.setAttribute("class","terminus-db-title terminus-table-header-full-css");var l=document.createElement("th");l.appendChild(document.createTextNode("Description")),l.setAttribute("class","terminus-db-description terminus-table-header-full-css");var c=document.createElement("th");c.setAttribute("class","terminus-db-size terminus-table-header-full-css"),c.appendChild(document.createTextNode("Size"));var d=document.createElement("th");d.setAttribute("class","terminus-db-created terminus-table-header-full-css"),d.appendChild(document.createTextNode("Created"));var p=document.createElement("th");p.appendChild(document.createTextNode("Delete")),p.setAttribute("class","terminus-db-delete terminus-table-header-full-css"),s.appendChild(o),s.appendChild(u),s.appendChild(l),s.appendChild(p),a.appendChild(s),i.appendChild(a);var h=document.createElement("tbody"),m=this.ui.client.connection.getServerDBRecords();for(var f in m){var g=m[f],v=f.split(":")[1],y=document.createElement("tr"),b=document.createElement("td");b.appendChild(this.wrapTableLinkCell(b,v,v)),b.setAttribute("class","terminus-db-id terminus-db-pointer");var C=document.createElement("td");C.setAttribute("class","terminus-db-title terminus-db-pointer");var w=g&&g["rdfs:label"]&&g["rdfs:label"]["@value"]?g["rdfs:label"]["@value"]:"";C.appendChild(this.wrapTableLinkCell(C,v,w));var D=document.createElement("td");D.setAttribute("class","terminus-db-description terminus-db-pointer");w=g&&g["rdfs:comment"]&&g["rdfs:comment"]["@value"]?g["rdfs:comment"]["@value"]:"";D.appendChild(this.wrapTableLinkCell(D,v,w));var x=document.createElement("td");x.setAttribute("class","terminus-db-size terminus-db-pointer");w=g&&g["terminus:size"]&&g["terminus:size"]["@value"]?g["terminus:size"]["@value"]:"";x.appendChild(this.wrapTableLinkCell(x,v,w));var E=document.createElement("td");E.setAttribute("class","terminus-db-created terminus-db-pointer");w=g&&g["terminus:last_updated"]&&g["terminus:last_updated"]["@value"]?g["terminus:last_updated"]["@value"]:"";E.appendChild(this.wrapTableLinkCell(E,v,w));var A=document.createElement("td");if(A.setAttribute("class","db-delete"),this.deleteDBPermitted(v)){var T;if(this.ui.pluginAvailable("font-awesome"))(T=document.createElement("i")).setAttribute("class","terminus-db-list-del-icon fa fa-times-circle");else(T=document.createElement("button")).appendChild(document.createTextNode("Delete")),T.setAttribute("class","terminus-control-button terminus-delete-db-button");T.addEventListener("click",function(t){return function(){1==confirm("Do you want to delete ".concat(t," Database?"))&&e.ui.deleteDatabase(t)}}(v)),A.appendChild(T)}y.appendChild(b),y.appendChild(C),y.appendChild(D),y.appendChild(A),h.appendChild(y)}if(i.appendChild(h),t.appendChild(i),this.ui.pluginAvailable("datatables"))new n.CspDatatables(this.ui).draw(i);return t},s.prototype.deleteDBPermitted=function(e){return"terminus"!=e&&!!this.ui.client.connection.capabilitiesPermit("delete_database",e)},e.exports={TerminusServerViewer:s,TerminusServerController:a}},function(e,t){function r(e,t){this.ui=e,this.val=t,this.url_input=!1,this.key_input=!1}r.prototype.getLabelDOM=function(){return document.createTextNode("Connect")},r.prototype.getFormFieldDOM=function(e,t,r,n){var i=document.createElement("div");i.setAttribute("class","terminus-form-horizontal terminus-control-group terminus-form-field-spacing terminus-form-field terminus-field-"+t);var a=document.createElement("span");return a.setAttribute("class","terminus-control-label terminus-form-label terminus-form-field-label terminus-label-"+t),a.appendChild(document.createTextNode(r)),e.setAttribute("type","text"),e.setAttribute("placeholder",n),i.appendChild(a),i.appendChild(e),i},r.prototype.getAsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-form terminus-url-loader");var t=document.createElement("h3");t.setAttribute("class","terminus-form-header terminus-connect-header terminus-module-head"),t.appendChild(document.createTextNode("Connect To Terminus Server")),e.appendChild(t);var r=document.createElement("div");r.setAttribute("class","terminus-form-border"),e.appendChild(r),this.url_input=document.createElement("input"),this.url_input.setAttribute("class","terminus-form-value terminus-form-url terminus-form-field-input terminus-input-text"),this.val&&(this.url_input.value=this.val),r.appendChild(this.getFormFieldDOM(this.url_input,"connect","URL","Terminus DB URL")),this.key_input=document.createElement("input"),this.key_input.setAttribute("class","terminus-form-value terminus-value terminus-input-text"),r.appendChild(this.getFormFieldDOM(this.key_input,"connect","Key","Server API Key"));var n=document.createElement("div");n.setAttribute("class","terminus-control-buttons");var i=document.createElement("button");i.setAttribute("class","terminus-control-button terminus-url-load terminus-btn"),i.appendChild(document.createTextNode("Connect"));var a=this;return i.addEventListener("click",(function(){a.url_input.value&&a.ui.load(a.url_input.value,a.key_input.value)})),n.appendChild(i),r.appendChild(n),e},e.exports=r}]);
//# sourceMappingURL=terminus-dashboard.min.js.map