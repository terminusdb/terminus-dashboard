var TerminusDB_SDK=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=14)}([function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={standard_urls:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",owl:"http://www.w3.org/2002/07/owl#",dcogbox:"https://datachemist.net/ontology/dcogbox#",dcog:"https://datachemist.net/ontology/dcog#",xdd:"https://datachemist.net/ontology/xdd#",terminus:"https://datachemist.net/ontology/terminus#",vio:"https://datachemist.net/ontology/vio#",docu:"https://datachemist.net/ontology/documentation#"},addURLPrefix:function(e,t){this.standard_urls[e]=t},removeChildren:function(e){if(e)for(;e.hasChildNodes();)e.removeChild(e.childNodes[0])},empty:function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},genBNID:function(e){return"_:"+Math.random().toString(36).substring(7)+(new Date).getTime()},getShorthand:function(e){if(e&&"string"==typeof e)for(var t in this.standard_urls){var r=this.standard_urls[t];if(e.substring(0,r.length)==r)return t+":"+e.substring(r.length)}return!1},compareIDs:function(e,t){if(e==t)return!0;if(this.unshorten(e)==t)return!0;if(this.unshorten(e)==this.unshorten(t))return!0;var r=this.getShorthand(e),i=this.getShorthand(t);return!(!r||r!=t&&r!=i)||!(!i||i!=e)},unshorten:function(e){if(this.validURL(e))return e;if(!e)return e;var t=e.split(":");return t[1]&&this.standard_urls[t[0]]?this.standard_urls[t[0]]+t[1]:e},validURL:function(e){return!!new RegExp("^(https?:\\/\\/)?localhost|((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},labelFromURL:function(e){var t=this.urlFragment(e);return(t=t||e.substring(e.lastIndexOf("/")+1)).charAt(0).toUpperCase()+t.slice(1)},urlFragment:function(e){return e="string"!=typeof e?window.location.href:e,bits=e.split("#"),bits.length<=1&&(bits=e.split(":")),bits.length>=1&&(e=(e=bits[1]).split("?")[0]),e},isStringType:function(e){return"http://www.w3.org/2001/XMLSchema#string"==e||"xsd:string"==e},lastURLBit:function(e){return e=(e=(e=(e=void 0===e?window.location.href:e).split("#")[0]).split("?")[0]).substring(e.lastIndexOf("/")+1)},getStdURL:function(e,t,r){if(this.standard_urls[e]){if(!r)return this.standard_urls[e]+t;if(r==this.standard_urls[e]+t)return r}return!1},viewIncludesProperties:function(e,t){return"full"==e||"production"==e||"terse"==e},viewIncludesChildren:function(e,t){return this.viewIncludesProperties(e,t)},viewIncludesValue:function(e,t){return this.viewIncludesProperties(e,t)},numberWithCommas:function(e){if(e>=1e3||e<=-1e3){var t=e.toString().split(".");e<=-1e3&&(t[0]=t[0].substring(1)),t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e=e<=-1e3?"-"+t.join("."):t.join(".")}return e},datatypes:["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon","xdd:dateRange","xdd:gYearRange","xdd:integerRange","xdd:decimalRange","xdd:cc","xdd:email","xdd:html","xdd:url","xsd:anySimpleType","xsd:string","xsd:boolean","xsd:decimal","xsd:double","xsd:float","xsd:time","xsd:date","xsd:dateTime","xsd:dateTimeStamp","xsd:gYear","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:duration","xsd:yearMonthDuration","xsd:dayTimeDuration","xsd:byte","xsd:short","xsd:integer","xsd:long","xsd:unsignedByte","xsd:unsignedInt","xsd:unsignedLong","xsd:nonNegativeInteger","xsd:positiveInteger","xsd:negativeInteger","xsd:nonPositiveInteger","xsd:base64Binary","xsd:anyURI","xsd:language","xsd:normalizedString","xsd:token","xsd:NMTOKEN","xsd:Name","xsd:NCName","xsd:NOTATION","xsd:QName","xsd:ID","xsd:IDREF","xsd:ENTITY","rdf:XMLLiteral","rdf:PlainLiteral","rdfs:Literal","xdd:json"],parseDate:function(e,t){if("xsd:date"==e)var r=this.parseXsdDate(t);else if("xsd:dateTime"==e)r=this.parseXsdDateTime(t);else if("xsd:gYear"==e)r={year:t};else if("xsd:gYearRange"==e)r={year:t};else if("xsd:gMonth"==e)r={month:t};else if("xsd:gDay"==e)r={day:t};else if("xsd:gYearMonth"==e){for(var i=t.split("-");i.length<2;)i.push("");r={year:i[0],month:i[1]}}else if("xsd:gMonthDay"==e){for(i=t.split("-");i.length<2;)i.push("");r={month:i[0],day:i[1]}}else if("xsd:dateTimeStamp"==e){for(i=t.split("-");i.length<2;)i.push("");r={month:i[0],day:i[1]}}return r},parseXsdDate:function(e){var t=this.extractXsdTimezone(e);if(t&&(e=e.substring(0,e.length-t.length)),"-"==e.substring(0,1))var r=e.substring(0,5);else r=e.substring(0,4);if(r&&Math.abs(r)<1e4){var i=e.substring(r.length+1,r.length+3);if(!i)return!1;i=i.toNumber();var n=e.substring(r.length+4);if(!n)return!1;var s={year:r,month:i,day:n=n.toNumber(),timezone:t}}return s},addXsdPadding:function(e){var t={};return void 0!==e.year&&!1!==e.year&&e.year<1e3?Math.abs(e.year)<10?t.year=e.year<0?"-000"+Math.abs(e.year):"000"+e.year:Math.abs(e.year)<100?t.year=e.year<0?"-00"+Math.abs(e.year):"00"+e.year:t.year=e.year<0?"-0"+Math.abs(e.year):"0"+e.year:e.year&&(t.year=e.year),void 0!==e.month&&!1!==e.month&&e.month<10?t.month="0"+e.month:e.month&&(t.month=e.month),void 0!==e.day&&!1!==e.day&&e.day<10?t.day="0"+e.day:e.day&&(t.day=e.day),void 0!==e.hour&&!1!==e.hour&&e.hour<10?t.hour="0"+e.hour:e.hour&&(t.hour=e.hour),void 0!==e.minute&&!1!==e.minute&&e.minute<10?t.minute="0"+e.minute:e.minute&&(t.minute=e.minute),void 0!==e.second&&!1!==e.second&&e.second<10?t.second="0"+e.second:e.second&&(t.second=e.second),t},xsdFromParsed:function(e,t){var r=this.addXsdPadding(e);if("xsd:gYear"==t)var i=!!r.year&&r.year;else{if("xsd:date"==t)return!!(r.year&&r.month&&r.day)&&r.year+"-"+r.month+"-"+r.day;if("xsd:dateTime"==t||"xsd:dateTimeStamp"==t)(i=!!(r.year&&r.month&&r.day)&&r.year+"-"+r.month+"-"+r.day+"T")&&(i+=(r.hour?r.hour:"12")+":"+(r.minute?r.minute:"00")+":"+(r.second?r.second:"00"));else if("xsd:gMonth"==t)i=!!r.month&&"--"+r.month;else if("xsd:gDay"==t)i=!!r.day&&"---"+r.day;else if("xsd:gYearMonth"==t)i=!(!r.year||!r.month)&&r.year+"-"+r.month;else if("xsd:gMonthDay"==t)i=!(!r.day||!r.month)&&"--"+r.month+"-"+r.day}return r.timezone&&(i+=r.timezone),i},parseXsdTime:function(e){if(!e)return{};var t=this.extractXsdTimezone(e);return t&&(e=e.substring(0,e.length-t.length)),{hour:e.substring(0,2),minute:e.substring(3,5),second:e.substring(6),timezone:t}},convertTimestampToXsd:function(e){var t=new Date(1e3*e);return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()}},parseXsdDateTime:function(e){if(!e)return{};if("number"==typeof e)return this.convertTimestampToXsd(e);var t=this.extractXsdTimezone(e);t&&(e=e.substring(0,e.length-t.length));var r=this.parseXsdDate(e),i=this.paseXsdTime(e.substring(e.indexOf("T")));for(var n in i)r[n]=i[n];return r.timezone=t,r},extractXsdTimezone:function(e){return e&&"Z"==e.charAt(e.length-1)?"Z":((e&&"+"==e.charAt(e.length-6)||"-"==e.charAt(e.length-6))&&e.substring(e.length-6),!1)},parseRangeValue:function(e,t){t=t||",";var i=[];return"object"==r(e)&&e.length?i=e:e&&("string"!=typeof e&&(e=""+e),e.length&&"["==e.charAt(0)&&"]"==e.charAt(e.length-1)?(i.push(e.substring(1,e.indexOf(t))),i.push(e.substring(e.indexOf(t)+1,e.length-1))):i.push(e)),i},loadDynamicScript:function(e,t,r){var i=document.getElementById(e);if(!i){var n=document.createElement("script");n.src=t,document.body.appendChild(n),n.onload=function(){n.id=e,r&&r(e)}}i&&r&&r(e)},loadDynamicCSS:function(e,t,r){var i=document.getElementById(e);if(!i){var n=document.createElement("link");n.href=t,n.id=e,n.rel="stylesheet",document.body.appendChild(n),n.onload=function(){r&&r(e)}}i&&r&&r(e)}};e.exports=i},function(e,t,r){var i=r(0),n=r(4);function s(e,t){if(this.client=e,this.options=t,this.default_limit=1e3,this.prefixes={},e.connectionConfig.platformEndpoint()){var r=e.connectionConfig.server.substring(0,e.connectionConfig.server.lastIndexOf("platform"));this.sid=r;var n=e.connectionConfig.server.substring(0,e.connectionConfig.server.lastIndexOf("platform"))+e.connectionConfig.dbid;this.prefixes.s=n+"/ontology/main#",this.prefixes.g=r,this.prefixes.db=n+"/",this.prefixes.doc=n+"/candidate/",this.prefixes.dg=n+"/graph/main/"}else this.sid=e.connectionConfig.serverURL(),this.prefixes.s=e.connectionConfig.schemaURL()+"#",this.prefixes.dg=e.connectionConfig.dbURL()+"/schema",this.prefixes.doc=e.connectionConfig.docURL(),this.prefixes.db=e.connectionConfig.dbURL()+"/",this.prefixes.g=e.connectionConfig.serverURL();for(var s in i.standard_urls)this.prefixes[s]=i.standard_urls[s]}s.prototype.shorten=function(e){for(var t in this.prefixes)if(this.prefixes[t]==e.substring(0,this.prefixes[t].length))return t+"/"+e.substring(this.prefixes[t].length);return e},s.prototype.execute=function(e){var t=this.wrap(e),r=this;return this.client.select(!1,t).then((function(e){return new n(e,r,r.options)}))},s.prototype.wrap=function(e){var t="prefixes([ ",r=0;for(var i in this.prefixes)r++>0&&(t+=","),t+=i+"='"+this.prefixes[i]+"'";return t+="], from(g/'"+this.client.connectionConfig.dbid+"',"+e+"))"},s.prototype.getAbstractQueryPattern=function(e){return"t(v('"+e+"'), dcog/tag, dcog/abstract, schema)"},s.prototype.getSubclassQueryPattern=function(e,t){return"(v('"+e+"') << ("+t+"))"},s.prototype.getAllDocumentQuery=function(e,t,r){var i="limit( "+(t=t||this.default_limit)+", start("+(r=r||0)+",";return i+="select([v('Document'), v('Type')],(t(v('Document'), rdf/type, v('Type'))",i+=", (v('Type') << (dcog/'Document'))",e&&(i+=", "+e),i+="))))"},s.prototype.getEverythingQuery=function(e,t,r){var i="limit( "+(t=t||this.default_limit)+", start("+(r=r||0)+",";return i+="select([v('Subject'), v('Predicate'), v('Object')],(t(v('Subject'), v('Predicate'), v('Object'))",e&&(i+=", "+e),i+="))))"},s.prototype.getPropertyListQuery=function(e){var t=[];t.push("t(v('Property'), rdf/type, v('Type'), schema)"),t.push("t(v('Property'), rdfs/label, v('Label'), schema)"),t.push("t(v('Property'), rdfs/comment, v('Comment'), schema)"),t.push("t(v('Property'), rdfs/domain, v('Domain'), schema)");var r="select([v('Property'), v('Label'), v('Comment'), v('Domain'), v('Type'), v('Range')],(t(v('Property'), rdfs/range, v('Range'), schema)";e&&(r+=", "+e);for(var i=0;i<t.length;i++)r+=", opt("+t[i]+")";return r+="))"},s.prototype.getElementMetaDataQuery=function(e,t,r){t=t||this.default_limit,r=r||0;var i=[];i.push("t(v('Element'), rdfs/label, v('Label'), schema)"),i.push("t(v('Element'), rdfs/comment, v('Comment'), schema)"),i.push("t(v('Element'), dcog/tag, v('Abstract'), schema)"),i.push("t(v('Element'), rdfs/domain, v('Domain'), schema)"),i.push("t(v('Element'), rdfs/range, v('Range'), schema)");var n="limit( "+t+", start("+r+",";n+="select([v('Element'), v('Type'), v('Label'), v('Comment'), v('Domain'), v('Range'), v('Abstract')],(t(v('Element'), rdf/type, v('Type'), schema)",e&&(n+=", "+e);for(var s=0;s<i.length;s++)n+=", opt("+i[s]+")";return n+="))))"},s.prototype.getClassListMetaDataQuery=function(e){var t=[];t.push("t(v('Class'), rdfs/label, v('Label'), schema)"),t.push("t(v('Class'), rdfs/comment, v('Comment'), schema)"),t.push("t(v('Class'), dcog/tag, v('Abstract'), schema)");var r="select([v('Class'), v('Label'), v('Comment'), v('Abstract')],(t(v('Class'), rdf/type, owl/'Class', schema)";e&&(r+=", "+e);for(var i=0;i<t.length;i++)r+=", opt("+t[i]+")";return r+="))"},s.prototype.getClassMetaDataQuery=function(e,t,r){t=t||this.default_limit,r=r||0;var i=[];i.push("t(v('Class'), rdfs/label, v('Label'), schema)"),i.push("t(v('Class'), rdfs/comment, v('Comment'), schema)"),i.push("t(v('Class'), dcog/tag, v('Abstract'), schema)");var n="limit( "+t+", start("+r+",";n+="select([v('Class'), v('Label'), v('Comment'), v('Abstract')],(t(v('Class'), rdf/type, owl/'Class', schema)",e&&(n+=", "+e);for(var s=0;s<i.length;s++)n+=", opt("+i[s]+")";return n+="))))"},s.prototype.getDataOfChosenClassQuery=function(e,t,r){var i="limit( "+(t=t||this.default_limit)+", start("+(r=r||0)+",";return i+="select([v('Document'), v('Property'), v('Value')],("+("t(v('Document'), rdf/type, "+("'"+e+"'")+")")+",",i+="t(v('Document'),  v('Property'), v('Value'))",i+="))))"},s.prototype.getDataOfChosenPropertyQuery=function(e,t,r){var i="limit( "+(t=t||this.default_limit)+", start("+(r=r||0)+",";return i+="select([v('Document'), v('Label'), v('Value')],("+("t(v('Document'), "+("'"+e+"'")+", v('Value')),")+"opt(t(v('Document'), rdfs/label, v('Label')))",i+="))))"},s.prototype.getInstanceMeta=function(e){var t="'"+e+"'",r="t("+t+", rdfs/label, v('InstanceLabel'))";r+=", t("+t+", rdf/type, v('InstanceType'))";var i=[];i.push("t("+t+", rdfs/comment, v('InstanceComment'))"),i.push("t(v('InstanceType'), rdfs/label, v('ClassLabel'), schema)");for(var n="select([v('InstanceLabel'), v('InstanceType'), v('InstanceComment'), v('ClassLabel')],("+r,s=0;s<i.length;s++)n+=", opt("+i[s]+")";return n+="))"},s.prototype.getDocumentQuery=function(e,t,r){t=t||this.default_limit,r=r||0;var i="t(doc/"+("'"+e+"'")+", v('Property'), v('Property Value'))",n=[];n.push("t(v('Property'), rdfs/label, v('Property Label'), schema)"),n.push("t(v('Property'), rdf/type, v('Property Type'), schema)");var s="limit( "+t+", start("+r+",";s+="select([v('Property Label'), v('Property'), v('Property Value'), v('Property Type')],("+i;for(var a=0;a<n.length;a++)s+=", opt("+n[a]+")";return s+="))))"},s.prototype.getClassesQuery=function(){var e=[];e.push("t(v('ID'), rdfs/label, v('Label'))"),e.push("t(v('ID'), rdfs/comment, v('Comment'))"),e.push("t(v('Class'), rdfs/label, v('Type'),schema)");var t="select([v('Label'),v('Comment'),v('ID'),v('Type'),v('Class')],(t(v('ID'), rdf/type, v('Class'))";t+=", (v('Class') << (dcog/'Document'))";for(var r=0;r<e.length;r++)t+=", opt("+e[r]+")";return t+="))"},e.exports=s},function(e,t,r){function i(e,t){return function(e){if(Array.isArray(e))return e}
/**
 * @file Javascript Api explorer tool
 * @author Kitty Jose
 * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more
 *
 * @summary Set of functions used across scripts
 */(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],i=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){n=!0,s=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw s}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var n=r(17);function s(e,t,r,i){var s=e.pluginAvailable("codemirror");if(!s)return!1;var a=new n(t,i,s).colorizePre();return r.appendChild(a),!0}function a(e){for(var t=document.getElementsByClassName(e),r=0;r<t.length;r++)t[r].classList.remove(e)}e.exports={tolggleContent:function(e,t){"block"===t.style.display?(a("fa-chevron-up"),e.classList.add("fa-chevron-down"),t.style.display="none"):(a("fa-chevron-down"),e.classList.add("fa-chevron-up"),t.style.display="block")},removeSelectedNavClass:a,stylizeCodeDisplay:s,stylizeEditor:function(e,t,r,i){var s=e.pluginAvailable("codemirror");if(s){var a=new n(t,i,s),o=a.colorizeTextArea(r);a.updateTextArea(o)}},deleteStylizedEditor:function(e,t){if(e.pluginAvailable("codemirror")){var r=t.nextElementSibling;r.setAttribute("class","terminus-hide"),FrameHelper.removeChildren(r)}},showHttpResult:function(e,t,r,n){var a=document.createElement("BR");r.appendChild(a),a=document.createElement("BR"),r.appendChild(a),r.appendChild(UTILS.getHeaderDom("HTTP Header")),a=document.createElement("BR"),r.appendChild(a);var o="",u=!0,l=!1,c=void 0;try{for(var d,p=e.headers[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var h=i(d.value,2),m=h[0],f=h[1];o=o+"".concat(m," = ").concat(f)+"\n"}}catch(e){l=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}var g=document.createElement("pre");g.setAttribute("class","terminus-api-signature-pre");var v=document.createTextNode(o);return g.appendChild(v),s(n,g,r,"message/http")||r.appendChild(g),e.json().then((function(e){!function(e,t,r,i){var n=document.createElement("div");n.appendChild(UTILS.getHeaderDom("Result"));var a=document.createElement("BR");n.appendChild(a);var o=JSON.stringify(r,0,4),u=document.createElement("pre");u.setAttribute("class","terminus-api-view terminus-scheme-pre"),u.innerHTML=o,s(i,u,n,"javascript")||n.appendChild(u),a=document.createElement("BR"),n.appendChild(a),e.appendChild(n)}(r,0,e,n)}))},getHeaderDom:function(e){var t=document.createElement("div");t.setAttribute("class","terminus-module-head");var r=document.createElement("h3");return r.innerHTML=e,t.appendChild(r),t},getInfoAlertDom:function(e,t,r){var i=document.createElement("div");"info"==e?i.setAttribute("class","terminus-alert terminus-alert-success"):i.setAttribute("class","alert");var n=document.createElement("STRONG");n.innerHTML=t,i.appendChild(n);var s=document.createTextNode(r);return i.appendChild(s),i},getFunctionSignature:function(e){var t={connect:{spec:"WOQLClient.connect(server_url, key)",descr:"\n\nConnect to a Terminus server at the given URI with an API keyStores the terminus:ServerCapability document returned in the connection registerwhich stores, the url, key, capabilities, and database meta-data for the connected serverIf the curl argument is false or null, the this.server will be used if present, or the promise will be rejected.",result:"HTTP 200 on success, 409 for already existing database, otherwise error code",args:{server_url:"url",key:"Api key"},options:{title:"",description:""}},create:{spec:"WOQLClient.createDatabase(database_url, details, key)",descr:"\n\nCreate a Terminus Database by posting a terminus:The dburl argument can be \n1) a valid URL of a terminus database or \n2) a valid Terminus database id or \n3) can be omitted\nin case 2) the current server will be used, \nin case 3) the database id will be set from the @id field of the terminuse:Database document.\nThe second (details) argument contains a \nterminus:Database document with a mandatory \nrdfs:label field and an optional rdfs:comment field.\nThe third (key) argument contains an optional API key ",result:"HTTP 200 on success, 409 for already existing database, otherwise error code",args:{database_url:"url",details:"",key:" Api key"},options:{title:"",description:""}},delete:{spec:"WOQLClient.deleteDatabase(database_url, options)",descr:"\n\nDeletes a Database\nThe first (dburl) argument can \n1) a valid URL of a terminus database or \n2) a valid database id or \n3) ommitted in case \n2) the current server will be used, and in case \n3) the current server and database will be used. \nThe second argument (opts) is an options json - no options are currently supported for this function",result:"HTTP 200 on success, otherwise error code"},getSchema:{spec:"WOQLClient.getSchema(schema_url, options)",descr:"\n\nGets the schema of a database. \nThe first (schurl) argument can be \n1) a valid URL of a terminus database or \n2) a valid database id or \n3) omitted, \nin case 2) the current server will be used, and \nin case 3) the current server anddatabase will be used the second argument (opts) is an options json - \nopts.format is optional and defines which format is requested (*json / turtle)\nopts.key is an optional API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",options:{format:"turtle"}},getClassFrames:{spec:"WOQLClient.getClassFrame = function(cfurl, cls, opts)",descr:"\n\nRetrieves a WOQL query on the specified database which updates the state and returns the results\nThe first (cfurl) argument can be\n1) a valid URL of a terminus database or\n2) omitted - the current database will be used\nthe second argument (cls) is the URL / ID of a document class that exists in the database schema\nthe third argument (opts) is an options json - opts.key is an optional API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",options:{format:"turtle"}},updateSchema:{spec:"WOQLClient.updateSchema(schema_url, docs, options)",descr:"\n\nUpdates the Schema of the specified database\nThe first (schurl) argument can be \n1) a valid URL of a terminus database or \n2) a valid database id or \n3) omitted, \nin case 2) the current server will be used, and \nin case 3) the current server and database will be used\nThe second argument (doc) is a valid owl ontology in json-ld or turtle format\nthe third argument (opts) is an options json - opts.format is used to specify which format is being used (*json / turtle)opts.key is an optional API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",args:{document:"doc"},options:{format:"turtle",editmode:"replace"}},createDocument:{spec:"WOQLClient.createDocument(document_url, document, options)",descr:"\n\nCreates a new document in the specified database\nThe first (docurl) argument can be\n1) a valid URL of a terminus database (an id will be randomly assigned) or\n2) a valid URL or of a terminus document (the document will be given the passed URL) or\n3) a valid terminus document id (the current server and database will be used)\n4) can be ommitted (the URL will be taken from the document if present)\nThe second argument (doc) is a valid document in json-ld\nthe third argument (opts) is an options json - opts.key is an optional API key",result:"Created Document on success (HTTP 200), Violation Report Otherwise (HTTP 400+)",args:{document_url:"url",document:"doc"},options:{format:"turtle",fail_on_id_denied:!1}},viewDocument:{spec:"WOQLClient.getDocument(document_url, options)",descr:"\n\nRetrieves a document from the specified database\nThe first (docurl) argument can be\n1) a valid URL of a terminus document or\n2) a valid ID of a terminus document in the current database\nthe second argument (opts) is an options json - \nopts.key is an optional API key\nopts.shape is frame | *document ",result:"Document (HTTP 200), Violation Report Otherwise (HTTP 400+)",args:{document_url:"url"},options:{format:"turtle"}},updateDocument:{spec:"WOQLClient.updateDocument(document_url, document, options)",descr:"\n\nUpdates a document in the specified database with a new version\nThe first (docurl) argument can be\n1) a valid URL of a terminus document or \n2) a valid ID of a terminus document in the current database or\n3) ommitted in which case the id will be taken from the document @id field\nthe second argument (doc) is a document in json-ld format\nthe third argument (opts) is an options json - opts.key is an optional API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",args:{document_url:"url",document:"doc"},options:{format:"turtle",editmode:"replace"}},deleteDocument:{spec:"WOQLClient.deleteDocument(document_url, options)",descr:"\n\nDeletes a document from the specified database\nThe first (docurl) argument can be\n1) a valid URL of a terminus document or\n2) a valid ID of a terminus document in the current database\n3) omitted - the current document will be used\nthe second argument (opts) is an options json - opts.key is an optional API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",args:{document_url:"url"}},select:{spec:"WOQLClient.select(database_url, woql, options)",descr:"\n\nExecutes a read-only WOQL query on the specified database and returns the results\nThe first (qurl) argument can be \n1) a valid URL of a terminus database or \n2) omitted - the current database will be used \nthe second argument (woql) is a woql select statement encoded as a string\nthe third argument (opts) is an options json - opts.key is an optional API key",result:"WOQL Result (HTTP 200), otherwise error code",args:{woql:"woql"}},update:{spec:"WOQLClient.update(database_url, woql, options)",descr:"\n\nExecutes a WOQL query on the specified database which updates the state and returns the results\nThe first (qurl) argument can be \n1) a valid URL of a terminus database or \n2) omitted - the current database will be used \nthe second argument (woql) is a woql select statement encoded as a string\nthe third argument (opts) is an options json - opts.key is an optional API key",result:"WOQL Result (HTTP 200), otherwise error code",args:{woql:"woql"}},lookup:{spec:"WOQLClient.lookup(database_url, woql, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url",term:"string"}},map:{spec:"WOQLClient.lookup(source, target, woql, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{source:"json",target:"json",woql:"json"}},getClassFrame:{spec:"WOQLClient.getClassFrame(class, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url"}},getPropertyFrame:{spec:"WOQLClient.getPropertyFrame(class, property, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url",property:"url"}},getFilledPropertyFrame:{spec:"WOQLClient.getPropertyFrame(document_url, property, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{document_url:"url",property:"url"}},getSubClasses:{spec:"WOQLClient.getSubClasses(class, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url"}}};return t[e]}}},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0);function s(){this.preloaded=[],this.loaded=[],this.loading=[],this.precluded=[],this.plugins={},this.plugins["font-awesome"]={label:"Font Awesome",css:["https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0-11/css/all.css"]},this.plugins.quill={label:"Quill",js:["https://cdn.quilljs.com/1.3.6/quill.min.js"],css:["https://cdn.quilljs.com/1.3.6/quill.snow.css"],plugin:"quill.terminus.js"},this.plugins.codemirror={label:"Code Mirror",js:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/xml/xml.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/css/css.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/turtle/turtle.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/javascript/javascript.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/anyword-hint.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/runmode/runmode.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/http/http.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/closebrackets.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/matchbrackets.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/display/placeholder.js"],css:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/neo.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/erlang-dark.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/eclipse.css"]},this.plugins.jquery={label:"jQuery",js:["https://code.jquery.com/jquery-2.2.4.min.js"]},this.plugins.jqueryui={label:"jQuery UI",css:["https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css"],js:["https://code.jquery.com/ui/1.12.0/jquery-ui.js"],requires:["jquery"]},this.plugins.datatables={label:"Data Tables",js:["https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"],css:["https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css"],requires:["jquery"]},this.plugins.gmaps={label:"Google Maps",js:["https://maps.googleapis.com/maps/api/js"],plugin:"gmaps.terminus.js"},this.plugins.d3={label:"d3",js:["https://code.jquery.com/jquery-2.2.4.min.js"],requires:["jquery"]},this.plugins.select2={label:"Select 2",js:["https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"],css:["https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css"],plugin:"select2.terminus.js",requires:["jquery"]},this.plugins.jsoneditor={label:"JSON Editor",js:["plugins/libs/jsoneditor.min.js"],css:["plugins/libs/jsoneditor.min.css"],plugin:"jsoneditor.terminus.js"}}s.prototype.setPluginOptions=function(e){for(var t in e)if(this.plugins[t])for(var r in e[t])this.plugins[t][r]=e[t][r]},s.prototype.init=function(e,t){e&&this.setPluginOptions(e),this.calculatePreloaded();var r=this.calculateRequiredInitPlugins(e);if(r&&r[0].length)if(r[1].length){var i=this;this.loadPlugins(r[0],(function(){i.loadPlugins(r[1],t)}))}else this.loadPlugins(r[0],t);else t&&t()},s.prototype.calculateRequiredInitPlugins=function(e){if(e){var t=[];for(var r in e)e[r]&&-1==t.indexOf(r)&&("object"!=i(e[r])&&e[r]?t.push(r):"object"==i(e[r])&&(void 0===e[r].loaded||e[r].loaded)&&t.push(r))}else t=this.getDefaultPlugins();for(var n=[],s=0;s<t.length;s++)-1==this.loaded.indexOf(t[s])&&-1==this.preloaded.indexOf(t[s])&&n.push(t[s]);var a=[[],[]];for(s=0;s<n.length;s++)this.plugins[n[s]].requires&&this.plugins[n[s]].requires.length?a[1].push(n[s]):a[0].push(n[s]);return a},s.prototype.getAvailablePlugins=function(){return this.plugins},s.prototype.calculatePreloaded=function(){for(var e in this.plugins)this.pluginAvailable(e)&&this.preloaded.push(e)},s.prototype.pluginAvailable=function(e,t){if("object"==i(this.plugins[e])){var r=this.plugins[e];if(r.requires&&r.requires.length)for(var n=0;n<r.requires.length;n++)if(!this.pluginAvailable(r.requires[n],t))return!1;!!r.version&&r.version;switch(e){case"jquery":return"undefined"!=typeof jQuery;case"jqueryui":return!("undefined"==typeof jQuery||!jQuery.isFunction(jQuery.fn.slider));case"quill":return"undefined"!=typeof Quill;case"jsoneditor":return"undefined"!=typeof JSONEditor;case"codemirror":return"undefined"!=typeof CodeMirror&&this.plugins[e];case"font-awesome":return this.fontAwesomeCheck();case"datatables":return!("undefined"==typeof jQuery||!jQuery.isFunction(jQuery.fn.dataTable));case"select2":return!("undefined"==typeof jQuery||!jQuery.isFunction(jQuery.fn.select2));case"gmaps":return"undefined"!=typeof google&&void 0!==google.maps;case"openlayers":return"undefined"!=typeof ol&&void 0!==ol.Map;case"d3":return"undefined"!=typeof d3}}else console.log(new Error(e+" is not a supported plugin ID"));return!1},s.prototype.fontAwesomeCheck=function(){var e=document.createElement("span");e.className="fa",e.style.display="none",document.body.insertBefore(e,document.body.firstChild);var t,r,i=!1;return"Font Awesome 5 Free"==(t=e,r="font-family",window.getComputedStyle(t,null).getPropertyValue(r)).replace(/"/g,"")&&(i=!0),document.body.removeChild(e),i},s.prototype.getDefaultPlugins=function(){return["font-awesome"]},s.prototype.loadPlugins=function(e,t){for(var r=e.length,i=function(){--r<=1&&t&&t()},n=0;n<e.length;n++)this.loadPlugin(e[n],i)},s.prototype.loadPlugin=function(e,t){var r=this.plugins[e];if(r.css)for(var i=0;i<r.css.length;i++){var s=e+"_css_"+i;n.loadDynamicCSS(s,r.css[i])}var a=r.js?r.js:[];if("gmaps"==e&&r.key&&(a[0]+="?key="+r.key),r.plugin&&a.push("plugins/"+r.plugin),"codemirror"==e){var o=a[0],u=e+"_js_"+(a.length-1);a.splice(0,1);var l=this;n.loadDynamicScript(u,o,(function(){l.loadPluginScripts(e,a,t)}))}else this.loadPluginScripts(e,a,t)},s.prototype.loadPluginScripts=function(e,t,r){var i=t.length-1,s=this,a=function(){0==i&&(-1==s.loaded.indexOf(e)&&s.loaded.push(e),-1!=s.loading.indexOf(e)&&s.loading.splice(s.loading.indexOf(e),1),r()),i--};0==t.length?this.loaded.push(e):this.loading.push(e);for(var o=0;o<t.length;o++){var u=e+"_js_"+o;n.loadDynamicScript(u,t[o],a)}},s.prototype.loadPageCSS=function(e){cssfid="terminus_client_css";var t=document.getElementById(cssfid);t&&t.parentNode.removeChild(t),e&&(cssurl="css/"+e+".css",n.loadDynamicCSS(cssfid,cssurl))},s.prototype.pluginLoadable=function(e){return-1!==this.precluded.indexOf(e)||this.pluginLoadedOrLoading(e)},s.prototype.pluginLoadedOrLoading=function(e){return-1!=this.loaded.indexOf(e)||(-1!=this.preloaded.indexOf(e)||-1!=this.loading.indexOf(e))},s.prototype.disabled=function(e,t){if(-1!=this.precluded.indexOf(e))return!0;if(t.requires)for(var r=0;r<t.requires.length;r++)if(!this.pluginLoadedOrLoading(t.requires[r]))return!0;return!1},s.prototype.getPluginDOM=function(e,t,r){var i=document.createElement("a"),n=document.createElement("span");i.appendChild(n),n.setAttribute("class","terminus-plugin-control");var s=document.createElement("input");s.id="terminus-plugin-control-"+e,s.type="checkbox",-1!=this.preloaded.indexOf(e)?(s.checked=!0,s.disabled=!0):-1!=this.loaded.indexOf(e)?s.checked=!0:-1!=this.loading.indexOf(e)?s.checked=!0:this.disabled(e,t)&&(s.disabled=!0);var a=document.createElement("label");a.setAttribute("class","terminus-plugin-label terminus-pointer"),a.setAttribute("for",s.id),a.appendChild(document.createTextNode(t.label)),n.appendChild(a),n.appendChild(s);var o=this;return s.addEventListener("change",(function(){o.togglePlugin(e,r)})),i},s.prototype.togglePlugin=function(e,t){if(-1==this.loaded.indexOf(e)){this.loadPlugin(e,(function(){t.redraw()}))}else this.unloadPlugin(e);n.removeChildren(t.plugins),t.drawPlugins()},s.prototype.unloadPlugin=function(e){if(!this.plugins[e]||-1==this.loaded.indexOf(e))return console.log(new Error(e+" plugin unload request when it is not loaded")),!1;var t=this.plugins[e],r=t.js?t.js.length:0;t.plugin&&r++;for(var i=0;i<r;i++){var n=e+"_js_"+i;(s=document.getElementById(n))&&s.parentNode.removeChild(s)}r=t.css?t.css.length:0;for(i=0;i<r;i++){var s;n=e+"_css_"+i;(s=document.getElementById(n))&&s.parentNode.removeChild(s)}this.loaded.splice(this.loaded.indexOf(e),1)},s.prototype.getAsDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-plugin-manager");var r=document.createElement("span");r.setAttribute("class","terminus-plugin-control-header terminus-plugin-nav terminus-pointer"),r.appendChild(document.createTextNode("Plugins")),t.appendChild(r);var i=document.createElement("a");return this.showPlugins(i,e),r.appendChild(i),i.style.display="none",r.addEventListener("click",(function(){"none"==i.style.display?i.style.display="block":i.style.display="none"})),t},s.prototype.showPlugins=function(e,t){for(var r in e.setAttribute("style","background-color: #111;"),this.plugins)e.appendChild(this.getPluginDOM(r,this.plugins[r],t))},e.exports=s},function(e,t){function r(e,t,r){this.query=t,this.bindings=e&&e.bindings?e.bindings:[]}r.prototype.count=function(){return this.bindings.length},r.prototype.shorten=function(e){return this.query.shorten(e)},r.prototype.hasBindings=function(e){return e?e.bindings&&e.bindings.length:this.bindings&&this.bindings.length},e.exports=r},function(module,exports,__webpack_require__){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var FrameHelper=__webpack_require__(0),HTMLPropertyViewer=__webpack_require__(10),ObjectViewer=__webpack_require__(21),RenderingMap={registeredDataViewers:{},registeredDataEditors:{},registeredPropertyViewers:{},registeredPropertyEditors:{},registeredObjectViewers:{},registeredObjectEditors:{},getValidDataViewerList:function(e,t){var r=["HTMLStringViewer"];return t&&void 0!==this.registeredDataViewers[t]&&(r=r.concat(this.registeredDataViewers[t])),void 0!==this.registeredDataViewers[e]&&(r=r.concat(this.registeredDataViewers[e])),r},getValidDataEditorList:function(e,t){var r=["HTMLStringEditor"];if(t&&void 0!==this.registeredDataEditors[t]){var i=this.registeredDataEditors[t];if(i)for(var n=0;n<i.length;n++)-1==r.indexOf(i[n])&&r.push(i[n])}return void 0!==this.registeredDataEditors[e]&&(r=r.concat(this.registeredDataEditors[e])),r},getValidPropertyViewerList:function(e,t,r,i){var n=["HTMLPropertyViewer"];return e&&void 0!==this.registeredPropertyViewers[e]&&(n=n.concat(this.registeredPropertyViewers[e])),r&&void 0!==this.registeredPropertyViewers[r]&&(n=n.concat(this.registeredPropertyViewers[r])),i&&void 0!==this.registeredPropertyViewers[i]&&(n=n.concat(this.registeredPropertyViewers[i])),t&&void 0!==this.registeredPropertyViewers[t]&&(n=n.concat(this.registeredPropertyViewers[t])),n},getValidPropertyEditorList:function(e,t,r,i){var n=["HTMLPropertyViewer"];return e&&void 0!==this.registeredPropertyEditors[e]&&(n=n.concat(this.registeredPropertyEditors[e])),r&&void 0!==this.registeredPropertyEditors[r]&&(n=n.concat(this.registeredPropertyEditors[r])),i&&void 0!==this.registeredPropertyEditors[i]&&(n=n.concat(this.registeredPropertyEditors[i])),t&&void 0!==this.registeredPropertyEditors[t]&&(n=n.concat(this.registeredPropertyEditors[t])),n},getViewer:function getViewer(type,options){var vi=this.renderers[type];options=options||{};try{var viewer=eval("new "+type+"("+JSON.stringify(options)+")");return viewer}catch(e){alert(e.toString())}},getAvailablePropertyViewers:function(e,t){for(var r=[],i=[],n=this.getValidPropertyViewerList(e),s=0;s<n.length;s++)-1==i.indexOf(n[s])&&i.push(n[s]);for(s=0;s<i.length;s++)if(this.renderers[i[s]]){var a=this.renderers[i[s]];r.push({value:i[s],label:a.label})}return r},getAvailablePropertyEditors:function(e,t){for(var r=[],i=[],n=this.getValidPropertyEditorList(),s=0;s<n.length;s++)-1==i.indexOf(n[s])&&i.push(n[s]);for(s=0;s<i.length;s++)if(this.renderers[i[s]]){var a=this.renderers[i[s]];r.push({value:i[s],label:a.label})}return r},getAvailableDataViewers:function(e,t){for(var r=[],i=[],n=this.getValidDataViewerList(e,t),s=0;s<n.length;s++)-1==i.indexOf(n[s])&&i.push(n[s]);for(s=0;s<i.length;s++)if(this.renderers[i[s]]){var a=this.renderers[i[s]];r.push({value:i[s],label:a.label})}return r},getAvailableDataEditors:function(e,t){for(var r=[],i=[],n=this.getValidDataEditorList(e,t),s=0;s<n.length;s++)-1==i.indexOf(n[s])&&i.push(n[s]);for(s=0;s<i.length;s++)if(this.renderers[i[s]]){var a=this.renderers[i[s]];r.push({value:i[s],label:a.label})}return r},getViewerForDataFrame:function(e,t){var r=this.getValidDataViewerList(e,t);return r[r.length-1]},getEditorForDataFrame:function(e,t){var r=this.getValidDataEditorList(e,t);return r[r.length-1]},registerViewerForTypes:function(e,t,r){for(var i=0;i<r.length;i++)void 0===this.registeredDataViewers[r[i]]&&(this.registeredDataViewers[r[i]]=[]),-1==this.registeredDataViewers[r[i]].indexOf(e)&&(this.registeredDataViewers[r[i]].push(e),this.renderers[e]={label:t})},registerEditorForTypes:function(e,t,r){for(var i=0;i<r.length;i++)void 0===this.registeredDataEditors[r[i]]&&(this.registeredDataEditors[r[i]]=[]),-1==this.registeredDataEditors[r[i]].indexOf(e)&&(this.registeredDataEditors[r[i]].push(e),this.renderers[e]={label:t})},registerEditorForFrameType:function(e,t,r){this.renderers[e]={label:t},void 0===this.registeredDataEditors[r]&&(this.registeredDataEditors[r]=[]),-1==this.registeredDataEditors[r].indexOf(e)&&this.registeredDataEditors[r].push(e)},registerViewerForFrameType:function(e,t,r){this.renderers[e]={label:t},void 0===this.registeredDataViewers[r]&&(this.registeredDataViewers[r]=[]),-1==this.registeredDataViewers[r].indexOf(e)&&this.registeredDataViewers[r].push(e)},registerViewerForProperties:function(e,t,r){for(var i=0;i<r.length;i++)void 0===this.registeredPropertyViewers[r[i]]&&(this.registeredPropertyViewers[r[i]]=[]),-1==this.registeredPropertyViewers[r[i]].indexOf(e)&&(this.registeredPropertyViewers[r[i]].push(e),this.renderers[e]={label:t})},registerEditorForProperties:function(e,t,r){for(var i=0;i<r.length;i++)void 0===this.registeredPropertyEditors[r[i]]&&(this.registeredPropertyEditors[r[i]]=[]),-1==this.registeredPropertyEditors[r[i]].indexOf(e)&&(this.registeredPropertyEditors[r].push(e),this.renderers[e]={label:t})},renderers:{HTMLStringViewer:{label:"String Viewer"},HTMLStringEditor:{label:"String Editor"},HTMLPropertyViewer:{label:"HTML Property Viewer"}},patternMatchesRenderer:function(e,t){if("object"==_typeof(e)&&e.length){for(var r=0;r<e.length;r++){if(!new FramePattern(e[r]).checkRenderer(t))return!1}return!0}return new FramePattern(e).checkRenderer(t)},getViewerForProperty:function(e,t){return new HTMLPropertyViewer(t)},getEditorForProperty:function(e,t){return new HTMLPropertyViewer(t)},getViewerForObject:function(e,t){return"json"==e?new JSONObjectViewer(t):new ObjectViewer.HTMLObjectViewer(t)}};RenderingMap.getEditorForObject=RenderingMap.getViewerForObject,RenderingMap.getAvailableObjectViewers=function(e){return["html","json"]},RenderingMap.decorateRenderer=function(e,t){var r=this.compileOptions(e,t);if(r&&r.mode?t.mode=r.mode:t.parent&&t.parent.mode?t.mode=t.parent.mode:t.mode="view",r&&r.view?t.view=r.view:t.parent&&t.parent.view?t.view=t.parent.view:t.view="full",r&&r.facets?t.facets=r.facets:t.facets=t.getDefaultFacets(),r&&r.facet&&"object"==_typeof(t.facets[r.facet]))t.facet=r.facet;else{var i=t.getDefaultFacet();"object"==_typeof(t.facets[i])?t.facet=i:t.facet=key(t.facets)}return r&&r.hide_disabled_buttons?t.hide_disabled_buttons=r.hide_disabled_buttons:t.parent?t.hide_disabled_buttons=parent.hide_disabled_buttons:t.hide_disabled_buttons=!0,r&&"object"==_typeof(r.features)?t.features=r.features:t.features=t.facets[t.facet].features,r&&"object"==_typeof(r.controls)?t.controls=r.controls:t.controls=t.facets[t.facet].controls,r&&void 0!==r.viewerType&&(t.viewerType=r.viewerType,r.viewerOptions&&(t.viewerOptions=r.viewerOptions)),r&&void 0!==r.header||(t.header_viewer=new ObjectViewer.HTMLObjectHeaderViewer),r&&r.filter,r&&r.sort,e},RenderingMap.compileOptions=function(e,t){var r={};for(var i in e)"rules"!=i&&(r[i]=e[i]);if(e.rules)for(var n=0;n<e.rules.length;n++){if((!e.rules[n].pattern||this.patternMatchesRenderer(e.rules[n].pattern,t))&&e.rules[n].output)for(var s in e.rules[n].output)r[s]=e.rules[n].output[s]}return r},FramePattern=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){if(this.renderer=!!e.renderer&&e.renderer,this.label=!!e.value&&e.value,this.frame_type=!!e.frame_type&&e.frame_type,this.subject=!!e.subject&&e.subject,this.subjectClass=!!e.subjectClass&&e.subjectClass,this.range=!!e.range&&e.range,this.property=!!e.property&&e.property,this.value=!!e.value&&e.value,this.parent=!!e.parent&&new FramePattern(e.parent),this.children=[],e.children)for(var t=0;t<e.children.length;t++)this.children.push(new FramePattern(e.children[t]));this.depth=void 0!==e.depth&&e.depth,this.index=!!e.index&&e.index,this.status=!!e.status&&e.status})),FramePattern.prototype.checkRenderer=function(e){var t=this.getRendererType(e);return!!t&&((!this.renderer||this.renderer==t)&&(!this.illegalRuleType(t)&&(!(this.frame_type&&!this.checkFrameType(t,e))&&(!(this.label&&!this.checkLabel(t,e))&&(!(this.subject&&!this.checkSubject(t,e))&&(!(this.subjectClass&&!this.checkSubjectClass(t,e))&&(!(this.property&&!this.checkProperty(t,e))&&(!(!1!==this.depth&&!this.checkDepth(t,e))&&(!(this.range&&!this.checkRange(t,e))&&(!(this.value&&!this.checkValue(t,e))&&(!(this.parent&&!this.checkParent(t,e))&&(!(this.children&&this.children.length&&!this.checkChildren(t,e))&&(!(this.index&&!this.checkIndex(t,e))&&!(this.status&&!this.checkStatus(t,e)))))))))))))))},FramePattern.prototype.illegalRuleType=function(e){return!("value"!=e||!this.children.length&&!this.label)||!("object"!=e||!this.range)},FramePattern.prototype.checkSubject=function(e,t){"object"==_typeof(this.subject)&&this.subject.length||(this.subject=[this.subject]);for(var r=t.subject(),i=0;i<this.subject.length;i++)if(this.IDsMatch(e[i],r))return!0;return!1},FramePattern.prototype.checkChildren=function(e,t){for(var r=0;r<this.children.length;r++){var i=!1;if("object"==e)for(var n in t.properties)this.children[r].checkRenderer(t.properties[n])&&(i=!0);else if("property"==e)for(var s=0;s<=t.values.length;s++)this.children[s].checkRenderer(t.values[s])&&(i=!0);if(!i)return!1}return!0},FramePattern.prototype.checkStatus=function(e,t){"object"==_typeof(this.status)&&0!=this.status.length||(this.status=[this.status]);for(var r=0;r<this.status.length;r++){if("updated"==this.status[r]&&!t.isUpdated())return!1;if("new"==this.status[r]&&!t.isNew())return!1;if("unchanged"==this.status[r]&&t.isUpdated())return!1}return!0},FramePattern.prototype.checkDepth=function(e,t){return this.numberMatch(this.depth,t.depth())},FramePattern.prototype.checkParent=function(e,t){return this.parent.checkRenderer(t.parent)},FramePattern.prototype.checkIndex=function(e,t){return"value"==e&&this.index==t.index},FramePattern.prototype.checkProperty=function(e,t){"object"==_typeof(this.property)&&this.property.length||(this.property=[this.property]);for(var r=0;r<this.property.length;r++)if(this.propertyIDsMatch(t.property(),this.property[r]))return!0;return!1},FramePattern.prototype.checkValue=function(e,t){"object"==_typeof(this.value)&&this.value.length||(this.value=[this.value]);for(var r=0;r<this.value.length;r++)if("value"==e){if(this.valuesMatch(t.value(),this.value[r]))return!0}else if("property"==e){for(var i=0;i<=t.values.length;i++)if("value"==this.getRendererType(t.values[r])&&this.valuesMatch(t.values[r].value(),this.value[r]))return!0}else if("object"==e)for(var n in t.properties)if(this.checkValue(this.getRendererType(t.properties[n]),t.properties[n]))return!0;return!1},FramePattern.prototype.checkRange=function(e,t){"object"==_typeof(this.range)&&this.range.length||(this.range=[this.range]);for(var r=0;r<this.range.length;r++)if(this.rangeIDsMatch(t.range(),this.range[r]))return!0;return!1},FramePattern.prototype.checkSubjectClass=function(e,t){"object"==_typeof(this.subjectClass)&&this.subjectClass.length||(this.subjectClass=[this.subjectClass]);for(var r=t.subjectClass(),i=0;i<this.subjectClass.length;i++)if(this.classIDsMatch(this.subjectClass[i],r))return!0;return!1},FramePattern.prototype.checkFrameType=function(e,t){if("object"==e)return"object"==this.frame_type;if("value"==e){if(t.frame)return this.frame_type==t.frame.ftype();alert(JSON.stringify(t)),alert("No frame")}return"property"!=e&&void 0},FramePattern.prototype.checkLabel=function(e,t){return"function"!=typeof renderder.getLabel?(console.log(new Error("Rule passed to check label with broken renderer object - no getLabel")),!1):this.stringMatch(this.label,t.getLabel())},FramePattern.prototype.IDsMatch=function(e,t){return FrameHelper.compareIDs(e,t)},FramePattern.prototype.classIDsMatch=function(e,t){return this.IDsMatch(e,t)},FramePattern.prototype.propertyIDsMatch=function(e,t){return this.IDsMatch(e,t)},FramePattern.prototype.rangeIDsMatch=function(e,t){return this.IDsMatch(e,t)},FramePattern.prototype.valuesMatch=function(e,t){return e==t},FramePattern.prototype.numberMatch=function(vala,valb){if("string"==typeof vala)try{return eval(valb+vala)}catch(e){return!1}return vala===valb},FramePattern.prototype.stringMatch=function(e,t){return new RegExp(e).test(t)},FramePattern.prototype.getRendererType=function(e){return"ValueRenderer"==e.constructor.name?"value":"PropertyRenderer"==e.constructor.name?"property":"ObjectRenderer"==e.constructor.name?"object":(console.log(new Error("frame configuration passed non-renderer type: "+e.constructor.name)),!1)},module.exports=RenderingMap},function(e,t,r){var i=r(0),n=r(1);TerminusClassChooser=function(e,t,r){this.ui=e,this.choice=r||!1,this.filter=t,this.show_single=!0},TerminusClassChooser.prototype.setRoot=function(e){this.root=e},TerminusClassChooser.prototype.setFilter=function(e){this.filter=e},TerminusClassChooser.prototype.change=function(e){alert("Need to specify class chooser function ("+e+")")},TerminusClassChooser.prototype.getAsDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-class-chooser");var r=document.createElement("select");r.setAttribute("class",e+" terminus-type-select");var i=this;r.addEventListener("change",(function(){this.value!=this.choice&&(this.choice=this.value,i.change(this.value))})),t.appendChild(r);var s=new n(this.ui.client),a=s.getClassListMetaDataQuery(this.filter);i=this;return s.execute(a).then((function(e){var n=i.getResultsAsOptions(e);if(n){for(var s=0;s<n.length;s++)r.appendChild(n[s]);i.options=n}else t.removeChild(r)})),t},TerminusClassChooser.prototype.getResultsAsOptions=function(e){var t=[];if(e.bindings){if(0==this.show_single&&e.bindings.length<2)return!1;if(this.empty_choice){var r=document.createElement("option");r.setAttribute("class","terminus-class-choice terminus-empty-choice"),r.value="",r.appendChild(document.createTextNode(this.empty_choice)),t.push(r)}for(var n=[],s=0;s<e.bindings.length;s++)if(e.bindings[s].Class&&-1==n.indexOf(e.bindings[s].Class)){n.push(e.bindings[s].Class);var a=document.createElement("option");a.setAttribute("class","terminus-class-choice"),a.value=e.bindings[s].Class,a.value==this.choice&&(a.selected=!0);var o=e.bindings[s].Label;o&&"unknown"!=o||(o=i.labelFromURL(e.bindings[s].Class)),o["@value"]&&(o=o["@value"]),a.appendChild(document.createTextNode(o)),t.push(a)}}return t},e.exports=TerminusClassChooser},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r(4);var n=r(3),s=r(12);function a(e,t,r,i){this.ui=e,this.result=t,this.options=r,this.pman=new n,this.settings=i}a.prototype.showTable=function(){return!this.options||void 0===this.options.show_table||this.options.show_table},a.prototype.orderColumns=function(e){var t=[];for(var r in e)-1==t.indexOf(r)&&t.unshift(r);return t},a.prototype.getAsDOM=function(e){var t=document.createElement("div"),r=document.createElement("div");if(r.setAttribute("class","terminus-margin-top-bottom terminus-module-head"),r.appendChild(document.createTextNode("Results")),t.appendChild(r),this.result&&this.result.hasBindings()&&this.showTable())return this.getTableDOM(this.result.bindings,t),t;console.log("no bindings for query")},a.prototype.getTableDOM=function(e,t){var r=this.getTable(e);if(this.pman.pluginAvailable("datatables")){r=(new s).draw(!0,r,this.settings,this.ui,t);return t.setAttribute("class","terminus-expandable"),r}t.appendChild(r)},a.prototype.getTable=function(e){var t=document.createElement("table");t.setAttribute("class","terminus-query-results-table");for(var r=document.createElement("thead"),n=document.createElement("tr"),s=this.orderColumns(e[0]),a=0;a<s.length;a++){var o=document.createElement("th");o.setAttribute("class","terminus-table-header-full-css"),o.appendChild(document.createTextNode(s[a])),n.appendChild(o)}r.appendChild(n),t.appendChild(r);var u=document.createElement("tbody");for(a=0;a<e.length;a++){for(var l=document.createElement("tr"),c=0;c<s.length;c++){var d=document.createElement("td");if("object"==i(e[a][s[c]])){var p=e[a][s[c]]["@value"]?e[a][s[c]]["@value"]:"Object?";d.appendChild(document.createTextNode(p))}else if("string"==typeof e[a][s[c]]){"unknown"==(p=this.result.shorten(e[a][s[c]]))&&(p=""),d.appendChild(document.createTextNode(p))}l.appendChild(d)}u.appendChild(l)}return t.appendChild(u),t},e.exports=a},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0),s=r(18),a=r(1),o=r(9);function u(e,t,r){this.ui=e,this.server=this.ui.server(),this.db=this.ui.db(),this.init(),this.mode=r&&r.mode?r.mode:"view",this.editor=!(!r||!r.editor)&&r.editor,this.load_schema=!r||!r.load_schema||r.load_schema,this.config_options=this.getBuiltInViewerOptions(),this.options=r||this.config_options[t],this.action=t,this.document=!1}u.prototype.init=function(){var e=new a(this.ui.client,this.options),t=e.getClassMetaDataQuery(),r=this;r.classmeta={},r.instancemeta={},e.execute(t).then((function(e){if(e&&e.hasBindings()){for(var t=0;t<e.bindings.length;t++){var i=e.bindings[t].Class;i&&void 0===r.classmeta[i]&&(r.classmeta[i]=e.bindings[t])}r.refreshPage()}})).catch((function(e){console.log(e)}))},u.prototype.getInstanceMeta=function(e){if(this.instancemeta&&void 0!==this.instancemeta[e])return this.instancemeta[e];var t=new a(this.ui.client,this.options),r=t.getInstanceMeta(e);return t.execute(r).then((function(e){return!(!e||!e.hasBindings())&&e.bindings[0]})).catch((function(e){console.log(e)}))},u.prototype.getClassMeta=function(e){return!!i(this.classmeta[e])&&this.classmeta[e]},u.prototype.loadCreateDocument=function(e){if(e){this.ui.showBusy("Fetching frame for document class "+e);var t=this;return this.mode="edit",this.page_config="create",-1==e.indexOf("/")&&-1==e.indexOf(":")&&(e="schema:"+e),this.loadDocumentSchema(e).then((function(e){t.ui.clearBusy(),t.setLabel()})).catch((function(e){console.error(e),t.ui.clearBusy(),t.ui.showError(e)}))}},u.prototype.loadDocument=function(e,t){if(!e)return!1;var r=this;return"doc:"==e.substring(0,4)&&(e=e.substring(4)),this.page_config="view",e=e.replace("/candidate","/platform/document"),this.ui.showBusy("Loading Document from "+e),this.ui.client.getDocument(e,{"terminus:encoding":"terminus:frame"}).then((function(e){return r.ui.clearBusy(),r.loadDataFrames(e),r.setLabel(),r.refreshPage(),r.load_schema?r.loadDocumentSchema(r.document.cls).then((function(){r.refreshPage()})).catch((function(e){console.error(e)})):e})).catch((function(e){console.error(e),r.ui.clearBusy(),r.ui.showError(e)}))},u.prototype.loadDocumentSchema=function(e){var t=this;return this.ui.client.getClassFrame(!1,e).then((function(r){t.loadSchemaFrames(r,e),t.refreshPage()}))},u.prototype.deleteDocument=function(e){this.document=!1;var t=this;return this.ui.showBusy("Deleting Document "+e),this.ui.client.deleteDocument(e).then((function(e){t.ui.clearBusy()})).catch((function(e){t.ui.clearBusy(),t.ui.showError(e)}))},u.prototype.createDocument=function(e){var t=this,r=this.renderer.extract();return this.ui.showBusy("Creating document"),this.ui.client.createDocument(e,r,{"terminus:encoding":"jsonld"}).then((function(r){t.ui.clearBusy(),t.ui.showDocument(e)})).catch((function(e){t.ui.clearBusy(),t.ui.showError(e)}))},u.prototype.updateDocument=function(){var e=this.document.subjid,t=this.renderer.extract(),r=this;return this.ui.showBusy("Updating document "+e),this.ui.client.updateDocument(e,t,{"terminus:encoding":"jsonld"}).then((function(t){r.ui.clearBusy(),r.ui.showDocument(e)})).catch((function(e){r.ui.clearBusy(),r.ui.showError(e)}))},u.prototype.loadDataFrames=function(e,t){t||(this.document?t=this.document.cls:e&&e.length&&e[0]&&e[0].domain&&(t=e[0].domain)),t?this.document?this.document.loadDataFrames(e):this.document=new s(t,e):alert("Missing Class Failed to add dataframes due to missing class")},u.prototype.loadSchemaFrames=function(e,t){t||e&&e.length&&e[0]&&e[0].domain&&(t=e[0].domain),t?(this.document||(this.document=new s(t)),e&&(this.document.loadClassFrames(e),this.document.subjid||(this.document.newDoc=!0,this.document.fillFromSchema("_:")))):this.error("Missing Class","Failed to add class frames due to missing class")},u.prototype.render=function(){if(!this.renderer&&this.document&&(this.page_config&&(this.options=this.getOptionsFromPageConfig(this.page_config)),this.renderer=new o(this.document,!1,this.options),this.renderer.mode=this.mode,this.renderer.controller=this),this.renderer)return this.renderer.render()},u.prototype.getBuiltInViewerOptions=function(){return FrameConfig},u.prototype.getOptionsFromPageConfig=function(e){return"object"==i(this.config_options[e])?this.config_options[e]:this.options},u.prototype.getClient=function(){return this.ui.client},u.prototype.extract=function(e){return this.renderer.extract()},u.prototype.getLabel=function(){var e=!!this.cls&&this.cls;return e||(e=this.docid?this.docid:"Void"),e},u.prototype.setLabel=function(){if(this.document&&this.labdom){n.removeChildren(this.labdom);for(var e=this.document.getDataFrames(n.getStdURL("rdfs","label")),t=0;t<e.length;t++){var r=e[t].get();r&&this.labdom.appendChild(document.createTextNode(r))}}},u.prototype.refreshPage=function(){if(this.pagedom){n.removeChildren(this.pagedom);var e=this.render();e&&this.pagedom.appendChild(e)}},u.prototype.getAsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-document-holder"),this.controldom=document.createElement("div"),this.controldom.setAttribute("class","terminus-document-controller"),this.controldom.appendChild(this.getDocumentPageControls()),this.pagedom=document.createElement("div"),this.pagedom.setAttribute("class","terminus-document-page");var t=this.render();return t&&this.pagedom.appendChild(t),e.appendChild(this.controldom),e.appendChild(this.pagedom),e},u.prototype.getDocumentPageControls=function(){var e=document.createElement("select");for(var t in e.setAttribute("class","terminus-form-select terminus-document-config"),this.config_options){var r=document.createElement("option");r.value=t,this.page_config==t&&(r.selected=!0),r.appendChild(document.createTextNode(this.config_options[t].label)),e.appendChild(r)}var i=this;return e.addEventListener("change",(function(){i.page_config=this.value,i.renderer=!1,i.refreshPage()})),e},e.exports=u},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(19),s=r(5);function a(e,t,r){this.objframe=e,this.parent=t,this.options=this.setOptions(r),this.properties={},this.originalProperties=!1,this.newProperties=[]}a.prototype.setOptions=function(e){return s.decorateRenderer(e,this)},a.prototype.getOptionsForProperty=function(e){return this.options},a.prototype.render=function(e){for(var t in this.buildPropertyRenderers(),this.viewer=e||this.getViewerForObject(),this.properties){var r=this.properties[t].render();r&&this.showFeature("body")&&this.viewer.addRenderedProperty(t,r)}return this.viewer.render(this.view)},a.prototype.buildPropertyRenderers=function(){var e=this.getPropertiesToRender();!1===this.originalProperties&&(this.originalProperties=e);for(var t={},r=0;r<e.length;r++)void 0===this.properties[e[r]]?t[e[r]]=new n(e[r],this,this.getOptionsForProperty(e[r])):t[e[r]]=this.properties[e[r]],-1!=this.newProperties.indexOf(e[r])&&(t[e[r]].setNew(),t[e[r]].mode="edit");this.properties=t},a.prototype.subject=function(){return!!this.objframe&&this.objframe.subjid},a.prototype.subjectClass=function(){return!!this.objframe&&this.objframe.cls},a.prototype.getAvailableViewers=function(){return["html","json"]},a.prototype.depth=function(){return this.parent?this.parent.depth()+1:0},a.prototype.property=function(){return!!this.parent&&this.parent.property()},a.prototype.parentObject=function(){return!!(this.parent&&this.parent.parent&&this.parent.parent.objframe)&&this.parent.parent.objframe},a.prototype.root=function(){return!this.parent},a.prototype.load=function(e){this.controller?this.controller.ui.showDocument(e):this.parent&&this.parent.load(e)},a.prototype.copy=function(e){return new a(e=e||this.objframe,this.parent,this.options)},a.prototype.clone=function(){if(this.root())this.objframe=this.objframe.clone("_:"),this.objframe.newDoc=!0,this.setMode("edit");else{var e=this.objframe.clone(FrameHelper.genBNID()),t=this.parentObject(),r=this.property();if(t&&r){void 0===t.children[r]&&(t.children[r]=[]),t.children[r].push(e);var i=this.copy(e);this.parent.values.push(i)}this.parent.redraw()}},a.prototype.cancel=function(){this.reset(),this.setMode("view")},a.prototype.save=function(){if(this.controller)if(this.isNewDocument()){var e=this.inputID();"_:"==e&&(e=""),this.controller.createDocument(e)}else this.controller.updateDocument();else this.parent&&this.parent.save()},a.prototype.delete=function(){var e=this.subject();this.controller&&this.root()?(this.isNewDocument()||this.controller.deleteDocument(e),this.nukeViewer()):this.parent&&(this.parent.deletePropertyValue(e),this.parent.redraw())},a.prototype.reset=function(){this.objframe.reset();for(var e={},t=0;t<this.originalProperties.length;t++){var r=this.originalProperties[t];"object"==i(this.properties[r])&&(this.properties[r].reset(),e[r]=this.properties[r])}this.properties=e,this.redraw()},a.prototype.deleteProperty=function(e){this.objframe.removeProperty(e),delete this.properties[e],this.updated()},a.prototype.addProperty=function(e){this.objframe.addProperty(e),this.updated(),this.redraw()},a.prototype.addNewProperty=function(e){this.objframe.addProperty(e),this.updated(),this.newProperties.push(e),this.redraw(),this.goToProperty(e)},a.prototype.addPropertyClass=function(e,t){this.objframe.addProperty(e,t),this.updated()},a.prototype.changeClass=function(e){this.parent&&(this.parent.addClass(e),this.parent.deletePropertyValue(this.subject()))},a.prototype.getClassMeta=function(e){var t=this.getController();return!!(t&&t.classmeta&&t.classmeta[e])&&t.classmeta[e]},a.prototype.getController=function(){return this.controller?this.controller:!(!this.parent||!this.parent.parent)&&this.parent.parent.getController()},a.prototype.getClient=function(){return this.controller?this.controller.getClient():!(!this.parent||!this.parent.parent)&&this.parent.parent.getClient()},a.prototype.inputID=function(){return!!this.idDOM&&this.idDOM.value},a.prototype.isNew=function(){return!!this.new_object||(!!this.isPartOfNewDocument()||!!this.parent&&this.parent.isNew())},a.prototype.setNew=function(){this.new_object=!0},a.prototype.isUpdated=function(){var e=0;for(var t in this.properties){if(this.originalProperties[e]!=t)return!0;if(this.properties[t].isUpdated())return!0;e++}return e!=this.originalProperties.length},a.prototype.childUpdated=function(){this.viewer.redrawHeader(),this.parent&&this.parent.childUpdated()},a.prototype.updated=a.prototype.childUpdated,a.prototype.isNewDocument=function(){return!(!this.root()||!this.objframe.isnew())},a.prototype.isPartOfNewDocument=function(){return!!this.isNewDocument()||!(!this.parent||!this.parent.parent)&&this.parent.parent.isPartOfNewDocument()},a.prototype.setFacet=function(e,t){if(this.facet=e,!t)for(var r in this.properties)this.properties[r].parentFacetChange(e);this.parent?this.parent.redraw():this.redraw()},a.prototype.getDefaultFacets=function(){return{page:{label:"Full Page",value:"page",features:["facet","label","comment","id","control","type","body","status","facet","view","viewer"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},line:{label:"Single Line",value:"line",features:["facet","label","comment","id","type","body","status","facet"],controls:[]},summary:{label:"Summary",value:"summary",features:["facet","satus","label","type","summary","status","facet"],controls:[]},label:{label:"Label",value:"label",features:["facet","status","label"],controls:[]}}},a.prototype.getAvailableFacets=function(){return Object.keys(this.facets)},a.prototype.currentFacet=function(){return this.facet},a.prototype.getDefaultFacet=function(){if(!this.parent)return"page";var e=this.parent.currentFacet();return"page"==e?"page":"multiline"==e?"line":"line"==e?"summary":"label"},a.prototype.parentFacetChange=function(e){"page"==e&&this.setFacet("page"),"multiline"==e&&this.setFacet("summary"),"line"==e&&this.setFacet("summary"),"summary"==e&&this.setFacet("summary")},a.prototype.getContentOrientation=function(){return"page"==this.currentFacet()?"page":"line"==this.currentFacet()?"line":"label"},a.prototype.getLabel=function(){for(var e in this.properties)if("rdfs:label"==FrameHelper.getShorthand(e)){var t=this.properties[e].values[0];if(t){var r=t.getSummary();if("empty"!=r.long)return r.long}}var i=this.subject();if(i&&"_:"==i.substring(0,2)){var n=this.subjectClass(),s=FrameHelper.getShorthand(n);if(s){var a=s.split(":");if(a.length>1)return"New "+a[1]}return"New Object"}return!1},a.prototype.getSummary=function(){var e={status:"ok"};for(var t in this.isUpdated()&&(e.status="updated"),this.isNew()&&(e.status="new"),e.propcount=0,this.properties)e.propcount++;return e.long=e.propcount+" properties",e},a.prototype.getObjectHeaderViewer=function(){return this.header_viewer},a.prototype.getViewerForObject=function(e){return s.getViewerForObject(e,this)},a.prototype.getFeaturesForFacet=function(e){return this.facets[e].features.concat(this.facets[e].controls)},a.prototype.hideDisabledControls=function(){return this.hide_disabled_controls},a.prototype.showFeature=function(e){if(-1==this.features.indexOf(e)&&-1==this.controls.indexOf(e))return!1;if(-1!=["delete","clone","add"].indexOf(e)&&!this.cardControlAllows(e))return!1;return!(this.hideDisabledControls()&&-1!=["update","reset"].indexOf(e)&&!this.isUpdated())&&((!this.isNewDocument()||"clone"!=e)&&(("hide"!=e||"hidden"!=this.view)&&(("show"!=e||"hidden"==this.view)&&-1!=this.getFeaturesForFacet(this.facet).indexOf(e))))},a.prototype.cardControlAllows=function(e){if(!this.parent)return!0;if(this.parent.cframe.hasRestriction()){var t=this.parent.cframe.restriction,r=this.parent.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min&&r<=t.min)return!1}return!0},a.prototype.goToProperty=function(e){this.viewer.goTo(this.subject(),e)},a.prototype.setMode=function(e){for(var t in this.mode=e,this.properties)this.properties[t].setMode(e);this.viewer.redraw()},a.prototype.currentViewer=function(){return this.viewerType},a.prototype.setViewer=function(e){var t=this.getViewerForObject(e);t&&(this.viewerType=e,this.viewer=t,this.viewer.redraw())},a.prototype.setView=function(e){this.view=e,this.viewer.redraw()},a.prototype.hide=function(){this.setView("hidden")},a.prototype.show=function(){this.setView("full")},a.prototype.nukeViewer=function(){this.viewer.remove()},a.prototype.getViewableProperties=function(){return this.objframe.getFilledPropertyList()},a.prototype.getAddableProperties=function(){return this.objframe.getMissingPropertyList()},a.prototype.getPropertiesToRender=function(e){var t=this.standardSort,r=function(){return!0};if(e&&e.map&&e.map.patterns)for(var i=0;i<e.map.patterns.length;i++)this.objframe.matchesPattern({property:this.property(),action:"sort"},e.map.patterns[i])&&(t=e.map.patterns[i].sort),this.objframe.matchesPattern({property:this.property(),action:"filter"},e.map.patterns[i])&&(r=e.map.patterns[i].filter);return t(this.objframe,r)},a.prototype.standardSort=function(e,t){var r=[],i=FrameHelper.getStdURL("rdfs","label");e.dataframes[i]&&t(e,i,e.dataframes[i])&&r.push(i);var n=FrameHelper.getStdURL("rdfs","comment");for(var s in e.dataframes[n]&&r.push(n),e.dataframes)-1==r.indexOf(s)&&r.push(s);for(var s in e.children)-1==r.indexOf(s)&&r.push(s);return r},a.prototype.redraw=function(){this.viewer.clear(),this.render(this.viewer)},a.prototype.extractLDO=function(e){e["rdf:type"]=this.objframe.cls;var t={};return t[this.subject()]=e,t},a.prototype.extractJSONLD=function(e){return e["@type"]=this.objframe.cls,"_:"!=this.subject()&&(e["@id"]=this.subject()),this.objframe.jsonld_context&&(e["@context"]=this.objframe.jsonld_context),e},a.prototype.extract=function(){var e={};for(var t in this.properties){var r=this.properties[t].extract();FrameHelper.empty(r)||(e[t]=r)}return(!FrameHelper.empty(e)||!this.parent)&&this.extractJSONLD(e)},e.exports=a},function(e,t,r){var i=r(0),n=r(11);function s(e){this.renderer=e,this.values=[],this.headerViewer=e.getPropertyHeaderViewer()}function a(){}s.prototype.render=function(){var e=document.createElement("div");e.setAttribute("style","display: flex; margin: 10px 10px 0px 0px;");var t=document.createElement("br");if(e.appendChild(t),this.propDOM){var r=this.getPropertyDOM();e.appendChild(r),this.propDOM.replaceWith(r),this.propDOM=e}else e.appendChild(this.getPropertyDOM()),this.propDOM=e;return this.propDOM.appendChild(this.getPropertyIDMarker(this.renderer)),this.headerViewer&&(this.header=this.headerViewer.getAsDOM(this.renderer),this.header&&this.propDOM.appendChild(this.header)),this.body=this.getPropertyBodyDOM(),this.body&&this.propDOM.appendChild(this.body),this.propDOM},s.prototype.getPropertyDOM=function(){var e=this.renderer.getContentOrientation(),t=" terminus-property-frame-display terminus-property-frame-"+e;if("label"==e)var r=document.createElement("span");else r=document.createElement("div");return r.setAttribute("class","WHATER terminus-property-frame "+r+" terminus-property-frame-"+this.renderer.mode+" "+t),r.setAttribute("data-property",this.renderer.property()),r},s.prototype.getPropertyBodyDOM=function(){var e=this.renderer.getContentOrientation(),t="terminus-property-values-"+e;if("page"==e)var r=document.createElement("div");else r=document.createElement("span");r.setAttribute("class","terminus-property-values "+t+" terminus-property-values-align");for(var i=0;i<this.values.length;i++)r.appendChild(this.values[i]);return r},s.prototype.addRenderedValue=function(e){this.values.push(e)},s.prototype.clear=function(){i.removeChildren(this.propDOM),this.values=[]},s.prototype.remove=function(){this.propDOM.parentNode.removeChild(this.propDOM)},s.prototype.redraw=function(){var e=this.getPropertyDOM();this.propDOM.replaceWith(e),this.propDOM=e,this.values=[],this.renderer.render(this)},s.prototype.redrawHeader=function(){if(this.headerViewer&&this.header){var e=this.headerViewer.getAsDOM(this.renderer);this.header.replaceWith(e),this.header=e}},s.prototype.redrawBody=function(){if(this.body){var e=this.getPropertyBodyDOM();this.body.replaceWith(e),this.body=e}},s.prototype.getPropertyIDMarker=function(e){var t=document.createElement("a");t.setAttribute("class","terminus-property-idmarker");var r=i.getShorthand(e.subject());r||(r=e.subject()),(n=r.split(":")).length>1&&(r=n[1]);var n,s=i.getShorthand(e.property());return s||(s=e.property()),(n=s.split(":")).length>1&&(s=n[1]),t.setAttribute("name",r+"_"+s),t},s.prototype.goTo=function(e,t,r){n.goToName(e,t,r)},a.prototype.getAsDOM=function(e){var t=e.getContentOrientation(),r="terminus-property-header-"+t;if("page"==t)var i=document.createElement("div");else i=document.createElement("span");i.setAttribute("class","terminus-text terminus-property-header "+r);var n=document.createElement("span");if(n.setAttribute("class","terminus-property-header-wrapper"),e.showFeature("control")){var s=this.getPropertyControlsDOM(e);s&&n.appendChild(s)}if(e.showFeature("label")){var a=this.getPropertyLabelDOM(e);if(e.showFeature("status"))(o=this.getPropertyStatusDOM(e))&&a.prepend(o);a&&n.appendChild(a)}else if(e.showFeature("status")){var o;(o=this.getPropertyStatusDOM(e))&&n.appendChild(o)}e.showFeature("summary")&&((a=this.getPropertySummaryDOM(e))&&n.appendChild(a));var u=document.createElement("span");if(u.setAttribute("class","terminus-property-header-info terminus-property-header-info-"+e.currentFacet()),e.showFeature("facet")){var l=this.getPropertyFacetDOM(e);l&&u.appendChild(l)}if(e.showFeature("view")){var c=this.getViewValueDOM(e);c&&u.appendChild(c)}if(e.showFeature("id")){var d=this.getPropertyIDDOM(e);d&&u.appendChild(d)}if(e.showFeature("type")){var p=this.getPropertyRangeDOM(e);p&&u.appendChild(p)}if(e.showFeature("cardinality")&&e.hasCardinalityRestriction()){var h=this.getPropertyCardinalityDOM(e);h&&u.appendChild(h)}e.showFeature("comment")&&((a=this.getPropertyCommentDOM(e))&&u.appendChild(a));return n.appendChild(u),i.appendChild(n),i},a.prototype.getPropertyFacetDOM=function(e){var t=e.getAvailableFacets();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-facet");var i=n.getSelectionControl("property-facet",t,e.currentFacet(),(function(t){t&&e.setFacet(t)}));return r.appendChild(i),r}return!1},a.prototype.getPropertyIDDOM=function(e){return n.getInfoboxDOM("property-id","Property",e.property(),"This property is identified by this unique URL: "+e.property())},a.prototype.getPropertyRangeDOM=function(e){return n.getInfoboxDOM("property-type","Type",e.range(),"The type of arguments that this property accepts")},a.prototype.getPropertySummaryDOM=function(e){var t=e.getSummary();return n.getInfoboxDOM("property-summary",!1,t.long,t.status)},a.prototype.getPropertyStatusDOM=function(e){var t=e.getSummary();return n.getInfoboxDOM("status-"+t.status,!1,t.status,t.status)},a.prototype.getPropertyLabelDOM=function(e){var t=e.getLabel();return n.getInfoboxDOM("property-label",!1,t)},a.prototype.getPropertyCommentDOM=function(e){var t=e.getComment();return n.getInfoboxDOM("property-comment",!1,t)},a.prototype.getPropertyCardinalityDOM=function(e){var t=e.getRestriction();if(t.min&&t.max)if(t.min==t.max)var r=t.min,i="Cardinality: "+t.min;else{r=t.min+"-"+t.max,i="Minimum Cardinality: "+t.min;i+=", Maximum Cardinality: "+t.max}else if(t.min)r=">"+(t.min-1),i="Minimum Cardinality: "+t.min;else{if(!t.max)return!1;r="<"+(t.max+1),i="Maximum Cardinality: "+t.max}return n.getInfoboxDOM("property-cardinality","Cardinality",r,i)},a.prototype.getActionControlDOM=function(e,t){if(t.showFeature("mode")){var r=n.getModeSelectorDOM("property",t);r&&e.appendChild(r)}if(t.showFeature("delete")){var i=this.getPropertyDeleteDOM(t);i&&e.appendChild(i)}var s,a;t.showFeature("add")&&!t.isClassChoice()&&((a=this.getAddValueDOM(t))&&e.appendChild(a));if(t.showFeature("reset")){var o=this.getPropertyResetDOM(t);o&&e.appendChild(o)}if(t.showFeature("update")){var u=this.getPropertyUpdateDOM(t);u&&e.appendChild(u)}if(t.showFeature("show")){var l=this.getPropertyShowDOM(t);l&&e.appendChild(l)}t.showFeature("hide")&&((s=this.getPropertyHideDOM(t))&&e.appendChild(s));t.showFeature("viewer")&&((s=this.getViewerSelectorDOM(t))&&e.appendChild(s));t.showFeature("add")&&t.isClassChoice()&&((a=this.getAddValueDOM(t))&&e.appendChild(a))},a.prototype.getSettingsControlDOM=function(e,t){var r=document.createElement("div"),i=n.getSettingsControl(),s=document.createElement("div");s.setAttribute("class","terminus-hide terminus-popup"),s.appendChild(document.createTextNode("blah blah")),i.appendChild(s),i.addEventListener("click",(function(){this.children[0].style.display,this.children[0].style.display="block"})),r.appendChild(i),e.appendChild(r),this.getActionControlDOM(s,t)},a.prototype.getPropertyControlsDOM=function(e){var t=document.createElement("span");return t.setAttribute("class","terminus-property-controls"),this.getSettingsControlDOM(t,e),t},a.prototype.getAddValueDOM=function(e){if(!e.isClassChoice()){s=function(){e.add("edit")};var t=!e.cardControlAllows("add")&&"Cardinality Rules Forbid Add";return n.getActionControl("property","add","Add",s,t)}var r=e.getAvailableClassChoices();if(r&&r.length){var i=document.createElement("span");i.setAttribute("class","terminus-property-add-class"),r.unshift({value:"",label:"Add Type"});var s=function(t){t&&e.addClass(t)},a=n.getSelectionControl("add-property",r,"",s);return i.appendChild(a),i}return!1},a.prototype.getViewValueDOM=function(e){var t=e.getViewableValues();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-view-value"),t.unshift({value:"",label:"View Value"});var i=n.getSelectionControl("view-values",t,"",(function(t){e.goToValue(t)}));return r.appendChild(i),r}return!1},a.prototype.getPropertyDeleteDOM=function(e){var t=!e.cardControlAllows("delete")&&"Cardinality Rules Forbid Delete";return n.getActionControl("property","delete","Delete",(function(){e.delete()}),t)},a.prototype.getPropertyHideDOM=function(e){return n.getActionControl("property","hide","Hide",(function(){e.hide()}))},a.prototype.getPropertyResetDOM=function(e){var t=!e.isUpdated()&&"Nothing to reset";return n.getActionControl("property","reset","Reset",(function(){e.reset()}),t)},a.prototype.getPropertyShowDOM=function(e){return n.getActionControl("property","show","Show",(function(){e.show()}))},a.prototype.getPropertyUpdateDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-property-update");var r=!e.isUpdated()&&"No Change";return t.appendChild(n.getActionControl("property","save","Save",(function(){e.save()}),r)),t},a.prototype.getViewerSelectorDOM=function(e){var t=e.getAvailableViewers();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-viewer");var i=e.currentViewer(),s=n.getSelectionControl("property-viewers",t,i,(function(t){t&&e.setViewer(t)}));return r.appendChild(s),r}return!1},a.prototype.showValue=function(e,t){var r=e.subject()+"->"+e.property()+"_"+t;window.location=(""+window.location).replace(/#[A-Za-z0-9_]*$/,"")+"#"+r},e.exports={HTMLPropertyViewer:s,HTMLPropertyHeaderViewer:a}},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0),s=r(3),a={getActionControl:function(e,t,r,i,n){new s;var a=document.createElement("span");if(a.setAttribute("class","terminus-action-control "+e+"-"+t),(new s).pluginAvailable("font-awesome")){var o=document.createElement("icon"),u=this.getControlIcon(t);n?(o.setAttribute("class","terminus-frame-control frame-control-action action-disabled fa fa"+u+" "+e+"-"+t+"-disabled terminus-font-align"),o.setAttribute("title",n)):(o.setAttribute("class","terminus-frame-control frame-control-action frame-control-action fa fa"+u+" "+e+"-"+t+" terminus-font-align"),o.addEventListener("click",(function(){i(t)}))),a.appendChild(o)}else{var l=document.createElement("button");l.appendChild(document.createTextNode(r)),n?(l.setAttribute("class","terminus-frame-control terminus-btn frame-control-action action-disabled "+e+"-"+t+"-disabled"),l.setAttribute("title",n)):(l.setAttribute("class","terminus-frame-control terminus-btn frame-control-action "+e+"-"+t),l.addEventListener("click",(function(){i(t)}))),a.appendChild(l)}return a},getSettingsControl:function(){if((new s).pluginAvailable("font-awesome")){var e=document.createElement("icon");return e.setAttribute("class","fa fa-bars"),e}var t=document.createElement("button");return t.appendChild(document.createTextNode("Settings")),t},getControlIcon:function(e){var t;switch(e){case"delete":t="-alt-delete";break;case"add":t="-plus";break;case"reset":t="-undo";break;case"save":t="-save";break;case"hide":t="-eye-slash"}return t},getSelectionControl:function(e,t,r,s){var a=document.createElement("select");a.setAttribute("class","terminus-frame-selector frame-control-selection "+e);for(var o=0;o<t.length;o++){var u=document.createElement("option");if("object"==i(t[o])){u.value=t[o].value;var l=t[o].label?document.createTextNode(t[o].label):document.createTextNode(n.labelFromURL(t[o].value));u.appendChild(l)}else u.value=t[o],l=n.labelFromURL(u.value),u.appendChild(document.createTextNode(l));r==u.value&&u.setAttribute("selected","selected"),a.appendChild(u)}return a.addEventListener("change",(function(){s(this.value)})),a},getModeSelectorDOM:function(e,t){var r=document.createElement("span");if(r.setAttribute("class","terminus-mode terminus-"+e+"-mode"),"view"==t.mode){var i=function(){t.setMode("edit")};r.appendChild(a.getActionControl("terminus-mode terminus-"+e+"-mode","edit"," Edit ",i))}else{if(t.isNew())return!1;i=function(){t.cancel()};r.appendChild(a.getActionControl(e,"cancel","Cancel",i))}return r},goToName:function(e,t,r){var i=window.location.href;if(i){var s=i.split("#")[0],a=n.getShorthand(e);a||(a=e),(u=a.split(":")).length>1&&(a=u[1]);var o=a;if(t){var u,l=n.getShorthand(t);l||(l=t),(u=l.split(":")).length>1&&(l=u[1]),o+="_"+l,r&&(o+="_"+r)}window.location=s+"#"+o}},getInfoboxDOM:function(e,t,r,i,s){var a=document.createElement("span");if(a.setAttribute("class","terminus-frame-infobox-box terminus-"+e),i&&a.setAttribute("title",i),t){var o=document.createElement("span");o.setAttribute("class","terminus-frame-infobox-label terminus-"+e+"-label"),o.appendChild(document.createTextNode(t)),a.appendChild(o)}var u=document.createElement("span");u.setAttribute("class","terminus-frame-infobox-spacer terminus-"+e+"-spacer"),u.appendChild(document.createTextNode(" ")),a.appendChild(u);var l=document.createElement("span");if(l.setAttribute("class","terminus-frame-infobox-value terminus-"+e+"-value terminus-property-label-align"),s)s.value=r,l.appendChild(s);else if(r){var c=n.getShorthand(r);if(c){var d=c.split(":");c=d[1],l.setAttribute("title",r),l.appendChild(document.createTextNode(c))}else l.appendChild(document.createTextNode(r))}return a.appendChild(l),a}};e.exports=a},function(e,t,r){var i=r(0),n=r(1),s=(r(4),r(7)),a=r(2);function o(){}o.prototype.convertToDatatable=function(e){jQuery(e).DataTable({searching:!1,pageLength:25,lengthMenu:[10,25,50,75,100],paging:!0,select:!0,columnDefs:[{targets:"_all",className:"truncate"}],createdRow:function(e){var t=$(e).find(".truncate");t.attr("title",t.html())},dom:"lrtip"});return e.setAttribute("class","stripe dataTable terminus-db-size terminus-db-border"),e.setAttribute("cellpadding","1"),e.setAttribute("cellspacing","1"),e.setAttribute("border","0"),e},o.prototype.executeQuery=function(e,t,r,i,n,a){var o=this;e.wquery.execute(i).then((function(e){o.result=new s(t,e,null,n);var r=o.result.getTable(e.bindings);r&&o.getDataFromServer(r,n,t,a)})).catch((function(e){console.error(e),o.ui.showError(e)}))},o.prototype.getQueryOnPagination=function(e,t){switch(t.query){case"Show_All_Documents":return e.getAllDocumentQuery(null,t.pageLength,t.start);case"Show_All_Data":return e.getEverythingQuery(null,t.pageLength,t.start);case"Show_All_Schema_Elements":return e.getElementMetaDataQuery(null,t.pageLength,t.start);case"Show_Document_Classes":return e.getClassMetaDataQuery(e.getSubclassQueryPattern("Class","dcog/'Document'")+", not("+e.getAbstractQueryPattern("Class")+")",t.pageLength,t.start);case"Show_All_Properties":return e.getPropertyListQuery(null,t.pageLength,t.start);case"Show_All_Classes":return e.getClassMetaDataQuery(null,t.pageLength,t.start);case"Show_Data_Class":return e.getDataOfChosenClassQuery(t.chosenValue,t.pageLength,t.start);case"Show_Property_Class":return e.getDataOfChosenPropertyQuery(t.chosenValue,t.pageLength,t.start);case"Show_Document_Info_by_Id":return e.getDocumentQuery(t.chosenValue,t.pageLength,t.start);default:console.log("Invalid woql option passed")}},o.prototype.generateNewQueryOnPageChange=function(e,t,r,i){e.wquery=new n(t.client,null),a.deleteStylizedEditor(t,i.qTextDom);var s=r.getQueryOnPagination(e.wquery,i);return i.qTextDom.value=s,a.stylizeEditor(t,i.qTextDom,"query","javascript"),s},o.prototype.getCallbackSettings=function(e,t){var r={};return r.pageLength=t,r.start=0,r.qTextDom=e.qTextDom,r.query=e.query,r.chosenValue=e.chosenValue,r},o.prototype.setUp=function(e,t,r){i.removeChildren(this.dtdom),this.dtdom=document.createElement("div"),this.dtdom.appendChild(e),r.appendChild(this.dtdom),this.qTextDom=t.qTextDom,this.query=t.query,this.chosenValue=t.chosenValue},o.prototype.getDataFromServer=function(e,t,r,i){var n=this;this.setUp(e,t,i);jQuery(e).DataTable({searching:!1,pageLength:t.pageLength,lengthMenu:[5,10,25,50,75,100],paging:!0,select:!0,columnDefs:[{targets:"_all",className:"truncate"}],createdRow:function(e){var t=$(e).find(".truncate");t.attr("title",t.html())},dom:"lrtip",drawCallback:function(e){$(this).on("length.dt",(function(e,t,s){var a=n.getCallbackSettings(n,s),o=n.generateNewQueryOnPageChange(this,r,n,a);return n.executeQuery(this,r,n,o,a,i)}))}});return e.setAttribute("class","stripe dataTable"),e.setAttribute("cellpadding","1"),e.setAttribute("cellspacing","1"),e.setAttribute("border","0"),e},o.prototype.draw=function(e,t,r,i,n){return e?this.getDataFromServer(t,r,i,n):this.convertToDatatable(t)},e.exports=o},function(e,t,r){r(0);var i=r(1),n=r(6);TerminusDocumentChooser=function(e,t,r,i){this.ui=e,this.root=t,this.choice=r,this.view=i||"id",this.show_button=!0},TerminusDocumentChooser.prototype.setRoot=function(e){this.root=e},TerminusDocumentChooser.prototype.setFilter=function(e){this.filter=e},TerminusDocumentChooser.prototype.change=function(e){alert("Need to specify doc chooser function ("+e+")")},TerminusDocumentChooser.prototype.getAsDOM=function(e){return"label"==this.view&&this.ui.client.connectionConfig.platformEndpoint()&&this.ui.pluginAvailable("select2")?this.getS2DOM(e):this.getIDDOM()},TerminusDocumentChooser.prototype.getS2DOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-document-chooser terminus-doc-holder");var r=new i(this.ui.client,{}).getSubclassQueryPattern("Class","'"+this.root+"'"),s=new n(this.ui,r);s.empty_choice="Filter by Type",s.show_single=!1;var a=this;s.change=function(e){e&&(a.filter=e)},tdom=s.getAsDOM(e),tdom&&t.appendChild(tdom);var o=document.createElement("span");o.setAttribute("class","terminus-entity-reference-value");var u=document.createElement("select");u.setAttribute("class","terminus-entity-class-input"),o.appendChild(u);document.createElement("option");var l={ajax:{url:this.ui.client.dbURL()+"/search",dataType:"json",data:function(e){return e.class=a.filter,JSON.stringify(e)},type:"POST",contentType:"application/json; charset=utf-8",delay:250,cache:!0},placeholder:"Enter Document Name",width:200};return jQuery(u).select2(l).change((function(){callback(this.value)})),t.appendChild(o),t},TerminusDocumentChooser.prototype.getIDDOM=function(){var e=document.createElement("span");e.setAttribute("class","terminus-document-chooser terminus-doc-holder");var t=document.createElement("input");if(t.setAttribute("class","terminus-document-chooser terminus-query-text"),t.setAttribute("placeholder","Enter Document ID"),t.addEventListener("keypress",(function(e){13===(e.which||e.keyCode)&&t.value&&(i.choice=t.value,i.change(t.value))})),e.appendChild(t),this.show_button){var r=document.createElement("button");r.setAttribute("class","terminus-control-button terminus-query-go-btn");var i=this;r.addEventListener("click",(function(){t.value&&(i.choice=t.value,i.change(t.value))})),r.appendChild(document.createTextNode("Go")),e.appendChild(r)}return e},TerminusDocumentChooser.prototype.toggleView=function(){"id"==this.view?this.view="label":this.view="id"},TerminusDocumentChooser.prototype.getChangeViewText=function(){return"id"==this.view?"Document Lookup":"Load Document ID"},e.exports=TerminusDocumentChooser},function(e,t,r){var i=r(15),n=r(0),s=r(5),a=new i(TerminusConfig),o={};o.buttons={client:document.getElementById("terminus-client-btn"),explorer:document.getElementById("terminus-explorer-btn")},o.controller=document.getElementById("terminus-control-panel"),o.messages=document.getElementById("terminus-user-messages"),o.plugins=document.getElementById("terminus-plugin-loader"),o.explorer=document.getElementById("terminus-explorer"),o.viewer=document.getElementById("terminus-content-viewer");var u=!(!TerminusConfig||!TerminusConfig.location)&&TerminusConfig.location;a.draw(o,u),e.exports={TerminusUI:i,FrameHelper:n,RenderingMap:s}},function(e,t,r){var i=r(0),n=r(16),s=r(8),a=r(22),o=r(23),u=r(28),l=r(29),c=r(30),d=r(31),p=r(3);function h(e){this.client=new TerminusDB.WOQLClient,this.controls=[],this.setOptions(e)}h.prototype.connect=function(e){var t=this;this.client.connectionConfig.server=!1;var r=!(!e||!e.key)&&e.key;return this.showBusy("Connecting to server at "+e.server),this.client.connect(e.server,r).then((function(r){t.clearBusy(),e&&e.db&&t.getDBRecord(e.db)?(t.connectToDB(e.db),e.document&&t.showView("get_document")?t.showDocument(e.document):e.schema&&t.showView("get_schema")?t.showSchemaPage(e.schema):e.query&&t.showView("woql_select")?t.showQueryPage(e.query):e.explorer&&t.showView("api_explorer")?t.showExplorer(e.explorer):t.showDBMainPage()):t.showServerMainPage(),t.redraw()})).catch((function(e){t.clearBusy(),t.showError(e)}))},h.prototype.createDatabase=function(e){var t=this;if(!e.id||!e.title)return Promise.reject(new Error(t.getBadArguments("createDatabase","ID and title are mandatory fields")));var r=e.id,i=this.client.connectionConfig.server;t.showBusy("Creating Database "+e.title+" with id "+r);var n=this.generateNewDatabaseDocument(e);return this.client.createDatabase(r,n).then((function(n){if(e.schema){t.showBusy("Fetching imported schema from "+e.schema);var s=e.key?{key:e.key}:{};return t.client.getSchema(e.schema,s).then((function(e){return t.showBusy("Updating database with new schema"),t.client.connectionConfig.server=i,t.client.connectionConfig.dbid=r,t.client.updateSchema(!1,e)})).then((function(e){return t.clearBusy(),e}))}return t.clearBusy(),n})).then((function(e){return t.refreshDBList().then((function(e){if(!(crec=t.client.connection.getDBRecord(r)))return Promise.reject(new Error(t.getCrashString("createDatabase","Failed to retrieve record of created database "+r)));t.client.connectionConfig.dbid=r,t.showDBMainPage(),t.showMessage("Successfully Created Database "+r,"success")}))})).catch((function(e){t.clearBusy(),t.showError(e)}))},h.prototype.deleteDatabase=function(e){var t=this,r=this.client.connection.getDBRecord(),i=e||this.db(),n=r&&r["rdfs:label"]&&r["rdfs:label"]["@value"]?r["rdfs:label"]["@value"]+" (id: "+i+")":i;return this.showBusy("Deleting database "+n),this.client.deleteDatabase(e).then((function(r){return t.clearBusy(),t.client.connectionConfig.dbid=!1,t.removeDB(e),t.showServerMainPage(),t.showMessage("Successfully Deleted Database "+n,"success"),t.refreshDBList(),r})).catch((function(e){t.clearBusy(),t.showError(e)}))},h.prototype.generateNewDatabaseDocument=function(e){var t={"@context":{rdfs:"http://www.w3.org/2000/01/rdf-schema#",terminus:"https://datachemist.net/ontology/terminus#"},"@type":"terminus:Database"};return e.title&&(t["rdfs:label"]={"@language":"en","@value":e.title}),e.description&&(t["rdfs:comment"]={"@language":"en","@value":e.description}),t["terminus:allow_origin"]={"@type":"xsd:string","@value":"*"},t},h.prototype.getBadArguments=function(e,t){return"Bad arguments to "+e+": "+t},h.prototype.getCrashString=function(e,t){return"Results from "+e+" indicate the possibility of a system failure "+t},h.prototype.load=function(e,t){var r={};return e&&-1!=e.indexOf("/document/")?(e=e.substring(0,e.indexOf("/document/")),r.document=e.substring(e.indexOf("/document/")+10)):e&&-1!=e.indexOf("/schema")?(e=e.substring(0,e.indexOf("/schema")),r.schema={}):e&&-1!=e.indexOf("/woql")&&(e=e.substring(0,e.indexOf("/query")),r.query=e.substring(e.indexOf("/query")+7)),r.server=e,t&&(r.key=t),this.connect(r)},h.prototype.getConnectionEndpoint=function(e){return e&&-1!=e.lastIndexOf("/schema")?e.substring(0,e.lastIndexOf("/schema")):e&&-1!=e.lastIndexOf("/document")?e.substring(0,e.lastIndexOf("/document")):e&&-1!=e.lastIndexOf("/frame")?e.substring(0,e.lastIndexOf("/frame")):e&&-1!=e.lastIndexOf("/woql")?e.substring(0,e.lastIndexOf("/woql")):e},h.prototype.server=function(){return this.client.connectionConfig.server},h.prototype.db=function(){return this.client.connectionConfig.dbid},h.prototype.clearServer=function(){this.client.connectionConfig.server=!1},h.prototype.connectToDB=function(e){this.client.connectionConfig.dbid=e,i.standard_urls.doc=this.client.connectionConfig.dbURL()+"/document/"},h.prototype.clearDB=function(){this.client.connectionConfig.dbid=!1},h.prototype.removeDB=function(e,t){this.client.connection.removeDBFromConnection(e,t)},h.prototype.getDBRecord=function(e,t){return this.client.connection.getDBRecord(e,t)},h.prototype.refreshDBList=function(){return this.client.connect()},h.prototype.showServerMainPage=function(){this.viewer=new c.TerminusServerViewer(this),this.redrawMainPage()},h.prototype.showLoadURLPage=function(e){this.viewer=new d(this,e),this.redrawMainPage()},h.prototype.showDBMainPage=function(){this.viewer=new a.TerminusDBViewer(this),this.redraw()},h.prototype.showCreateDBPage=function(){this.viewer=new a.TerminusDBCreator(this),this.redrawMainPage()},h.prototype.showSchemaPage=function(e){this.viewer=new l(this),this.redrawMainPage()},h.prototype.showQueryPage=function(e){this.viewer=new o(this,e,this.options),this.redrawMainPage()},h.prototype.showMappingPage=function(e){this.viewer=new u(this,e,this.options),this.redrawMainPage()},h.prototype.showDocument=function(e){this.viewer=new s(this,"view",this.getDocViewerOptions()),this.viewer.loadDocument(e),this.redrawMainPage()},h.prototype.showCreateDocument=function(e){this.viewer=new s(this,"create",this.getDocCreatorOptions()),this.viewer.loadCreateDocument(e),this.redrawMainPage()},h.prototype.redrawMainPage=function(){i.removeChildren(this.main),this.viewer&&this.main.appendChild(this.viewer.getAsDOM())},h.prototype.showResult=function(e){this.showMessage(e,"success")},h.prototype.showError=function(e){this.showMessage(e,"error")},h.prototype.clearMessages=function(e){this.messages&&i.removeChildren(this.messages)},h.prototype.clearMainPage=function(){this.main&&i.removeChildren(this.main)},h.prototype.setMessageDOM=function(e){this.messages=e},h.prototype.setbuttonControls=function(e){this.buttons=e},h.prototype.setControllerDOM=function(e){this.controller=e},h.prototype.setExplorerDOM=function(e){this.explorer=e},h.prototype.setPluginsDOM=function(e){this.plugins=e},h.prototype.setViewerDOM=function(e){this.main=e},h.prototype.draw=function(e,t){e&&e.buttons&&this.setbuttonControls(e.buttons),e&&e.messages&&this.setMessageDOM(e.messages),e&&e.controller&&this.setControllerDOM(e.controller),e&&e.explorer&&this.setExplorerDOM(e.explorer),e&&e.viewer&&this.setViewerDOM(e.viewer),e&&e.plugins&&this.setPluginsDOM(e.plugins),this.buttons&&this.toggleControl(),this.controller&&this.drawControls(),this.plugins&&this.drawPlugins(),t&&t.server?void 0===this.client.connection.connection[t.server]&&this.connect(t).catch((function(e){this.showLoadURLPage(),this.showError(e)})):this.showLoadURLPage()},h.prototype.redraw=function(e){this.clearMessages(),this.controller&&(i.removeChildren(this.controller),this.drawControls()),this.explorer&&i.removeChildren(this.explorer),this.viewer&&this.redrawMainPage(),e&&this.showMessage(e)},h.prototype.toggleControl=function(){var e=this;this.buttons.client.addEventListener("click",(function(){i.removeChildren(e.controller),i.removeChildren(e.explorer),e.drawControls(),e.showServerMainPage()})),this.buttons.explorer.addEventListener("click",(function(){i.removeChildren(e.controller),i.removeChildren(e.explorer),e.drawExplorer()}))},h.prototype.drawControls=function(){this.controls=[],this.loadControls();for(var e=0;e<this.controls.length;e++){var t=this.controls[e];t&&(nd=t.getAsDOM())&&this.controller.appendChild(nd)}},h.prototype.drawExplorer=function(){if(this.explorer&&this.showControl("api_explorer")){var e=new n(this);ae=e.getAsDOM(),this.explorer.appendChild(ae),this.explorer.style.display="block"}},h.prototype.loadControls=function(){var e;this.showControl("server")&&((e=new c.TerminusServerController(this))&&this.controls.push(e),this.db()&&this.showControl("db")&&(e=new a.TerminusDBController(this))&&this.controls.push(e))},h.prototype.showControl=function(e){return-1!=this.show_controls.indexOf(e)&&(!!this.pseudoCapability(e)||!!this.client.connection.capabilitiesPermit(e))},h.prototype.showView=function(e){return-1!=this.show_views.indexOf(e)&&(!!this.pseudoCapability(e)||!!this.client.connection.capabilitiesPermit(e))},h.prototype.clearBusy=function(e){this.clearMessages(),this.viewer&&"function"==typeof this.viewer.busy&&this.viewer.busy(!1)},h.prototype.showMessage=function(e,t){if(this.messages){i.removeChildren(this.messages);var r=document.createElement("div"),n="terminus-show-msg";t&&(n+="terminus-msg-"+t),r.setAttribute("class",n),r.appendChild(document.createTextNode(e)),this.messages.appendChild(r)}},h.prototype.showViolations=function(e,t){var r=new TerminusViolations(e,this);if(this.messages){var n="schema"==t?" in Schema":" in Document";i.removeChildren(this.messages),this.messages.appendChild(r.getAsDOM(n))}},h.prototype.showBusy=function(e){this.showMessage(e,"busy"),this.viewer&&"function"==typeof this.viewer.busy&&this.viewer.busy(e)},h.prototype.pseudoCapability=function(e){return-1!=["server","db","change-server","api_explorer","import_schema","schema_format"].indexOf(e)},h.prototype.setOptions=function(e){this.show_controls=e&&e.controls?e.controls:["server","db","change-server","schema_format","import_schema","class_frame","create_database","create_document","get_document","update_schema","get_schema","woql_select"],this.show_views=e&&e.views?e.views:this.show_controls,e.document&&(this.document_options=e.document),e.schema&&(this.schema_options=e.schema),this.piman=new p;var t=this;this.piman.init(e.plugins,(function(){t.redraw()})),e.css&&this.piman&&this.piman.loadPageCSS(e.css),this.loadControls()},h.prototype.pluginAvailable=function(e){return this.piman.pluginAvailable(e)},h.prototype.drawPlugins=function(){if(!this.piman)return console.log(new Error("No plugin manager initialised in UI object")),!1;this.plugins.appendChild(this.piman.getAsDOM(this))},h.prototype.getDocViewerOptions=function(){return!(!this.document_options||!this.document_options.view)&&this.document_options.view},h.prototype.getDocCreatorOptions=function(){return!(!this.document_options||!this.document_options.view)&&this.document_options.view},h.prototype.getClassFrameOptions=function(){return this.viewdoc_options},e.exports=h},function(e,t,r){
/**
 * @file Javascript Api explorer tool
 * @author Kitty Jose
 * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more
 *
 * @summary Displays a demo and description of api calls from WOQLCLient and what happens under the hood of api calls
 */
var i=r(0),n=r(3),s=r(2);function a(e){this.ui=e,this.viewer=e.main,this.client=new TerminusDB.WOQLClient,this.client.use_fetch=!0,this.client.return_full_response=!0,this.pman=new n}a.prototype.getAsDOM=function(){var e=document.createElement("div");return e.setAttribute("class","terminus-db-controller"),this.ui&&this.getApiNav(e,this.viewer),e},a.prototype.getApiNav=function(e,t){var r=document.createElement("div");e.appendChild(r);var i=document.createElement("ul");i.setAttribute("class","terminus-ul"),r.appendChild(i),(o=document.createElement("a")).setAttribute("class","terminus-selected terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var n=this;o.addEventListener("click",(function(){s.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),n.getApiExplorerDom("connect",t)})),(u=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-link"),o.appendChild(u);var a=document.createTextNode("Connect Server Api");o.appendChild(a),i.appendChild(o),(o=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");n=this;o.addEventListener("click",(function(){s.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),n.getApiExplorerDom("create",t)})),(u=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-database"),o.appendChild(u);a=document.createTextNode("Database Api");o.appendChild(a),i.appendChild(o),(o=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");n=this;o.addEventListener("click",(function(){s.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),n.getApiExplorerDom("schema",t)})),(u=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-cog"),o.appendChild(u);a=document.createTextNode("Schema Api");o.appendChild(a),i.appendChild(o),(o=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");n=this;o.addEventListener("click",(function(){s.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),n.getApiExplorerDom("document",t)})),(u=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-file"),o.appendChild(u);var o;a=document.createTextNode("Document Api");o.appendChild(a),i.appendChild(o),(o=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var u;n=this;o.addEventListener("click",(function(){s.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),n.getApiExplorerDom("query",t)})),(u=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-search"),o.appendChild(u);a=document.createTextNode("Query Api");return o.appendChild(a),i.appendChild(o),this.getApiExplorerDom("connect",t),e},a.prototype.getApiExplorerDom=function(e,t){i.removeChildren(t);var r=document.createElement("div");t.appendChild(r),(l=document.createElement("div")).setAttribute("class","container-fluid"),r.appendChild(l);var n=document.createElement("div");n.setAttribute("class","row-fluid"),l.appendChild(n);var a=document.createElement("div");a.setAttribute("class","terminus-module-body"),n.appendChild(a);var o=document.createElement("div");o.setAttribute("class","terminus-module-body span9 terminus-module-body-white-bg terminus-module-body-width"),a.appendChild(o);var u=s.getInfoAlertDom("info","Info: ","API Explorer helps to understand api calls in depth. User can perform actions and view what happens in the background.");o.appendChild(u),o.appendChild(s.getHeaderDom("Api Explorer"));var l=document.createElement("div");switch(e){case"connect":var c=this.getConnectExplorer(l);o.appendChild(c);break;case"create":c=this.getDatabaseExplorer(l);o.appendChild(c);break;case"schema":c=this.getSchemaApi(l);o.appendChild(c);break;case"document":c=this.getDocumentApi(l);o.appendChild(c);break;case"query":c=this.getQueryApi(l);o.appendChild(c)}return r},a.prototype.setSelectedNavMenu=function(e){s.removeSelectedNavClass("terminus-selected"),e.classList.add("terminus-selected")},a.prototype.setSelectedSubMenu=function(e){s.removeSelectedNavClass("terminus-submenu-selected"),e.classList.add("terminus-submenu-selected")},a.prototype.changeApiDom=function(e,t,r){i.removeChildren(r);var n=this.getShowApiDom(e,r);t.appendChild(n)},a.prototype.getDocumentApi=function(e){var t=document.createElement("div"),r=document.createElement("ul");r.setAttribute("class","terminus-ul-horizontal"),(s=document.createElement("a")).setAttribute("class","terminus-a terminus-submenu-selected terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var i=this;s.addEventListener("click",(function(){i.setSelectedNavMenu(this),i.changeApiDom("viewDocument",e,t)})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-eye"),s.appendChild(a);var n=document.createTextNode("View Document");s.appendChild(n),r.appendChild(s),(s=document.createElement("a")).setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");i=this;s.addEventListener("click",(function(){i.setSelectedNavMenu(this),i.changeApiDom("createDocument",e,t)})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-plus"),s.appendChild(a);n=document.createTextNode("Create Document");s.appendChild(n),r.appendChild(s),(s=document.createElement("a")).setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");i=this;s.addEventListener("click",(function(){i.setSelectedNavMenu(this),i.changeApiDom("updateDocument",e,t)})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-arrow-up"),s.appendChild(a);var s;n=document.createTextNode("Update Document");s.appendChild(n),r.appendChild(s),(s=document.createElement("a")).setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var a;i=this;s.addEventListener("click",(function(){i.setSelectedNavMenu(this),i.changeApiDom("deleteDocument",e,t)})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-trash-alt"),s.appendChild(a);n=document.createTextNode("Delete Document");s.appendChild(n),r.appendChild(s),e.appendChild(r);var o=i.getShowApiDom("viewDocument",t);return e.appendChild(o),e},a.prototype.getQueryApi=function(e){var t=document.createElement("div"),r=document.createElement("ul");r.setAttribute("class","terminus-ul-horizontal"),(a=document.createElement("a")).setAttribute("class","terminus-submenu-selected terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var n=this;a.addEventListener("click",(function(){n.setSelectedSubMenu(this),i.removeChildren(t);n.getQueryApiDom("select",t)})),(o=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-mouse-pointer"),a.appendChild(o);var s=document.createTextNode("Select");a.appendChild(s),r.appendChild(a),(a=document.createElement("a")).setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");n=this;a.addEventListener("click",(function(){n.setSelectedSubMenu(this),i.removeChildren(t);var r=n.getQueryApiDom("update",t);e.appendChild(r)})),(o=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-arrow-up"),a.appendChild(o);var a;s=document.createTextNode("Update");a.appendChild(s),r.appendChild(a),(a=document.createElement("a")).setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var o;n=this;a.addEventListener("click",(function(){n.setSelectedSubMenu(this),i.removeChildren(t);var r=n.getQueryApiDom("lookup",t);e.appendChild(r)})),(o=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-random"),a.appendChild(o);s=document.createTextNode("Look up");a.appendChild(s),r.appendChild(a),e.appendChild(r);var u=n.getQueryApiDom("select",t);return e.appendChild(u),e},a.prototype.getSchemaApi=function(e){var t=document.createElement("div");(r=document.createElement("ul")).setAttribute("class","terminus-ul-horizontal");var r;t=document.createElement("div");(r=document.createElement("ul")).setAttribute("class","terminus-ul-horizontal"),(s=document.createElement("a")).setAttribute("class","terminus-a terminus-submenu-selected terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var i=this;s.addEventListener("click",(function(){i.setSelectedSubMenu(this),i.changeApiDom("getSchema",e,t)})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-eye"),s.appendChild(a);var n=document.createTextNode("View Schema");s.appendChild(n),r.appendChild(s),(s=document.createElement("a")).setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");i=this;s.addEventListener("click",(function(){i.setSelectedSubMenu(this),i.changeApiDom("updateSchema",e,t)})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-arrow-up"),s.appendChild(a);var s;n=document.createTextNode("Update Schema");s.appendChild(n),r.appendChild(s),(s=document.createElement("a")).setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var a;i=this;s.addEventListener("click",(function(){i.setSelectedSubMenu(this),i.changeApiDom("getClassFrames",e,t)})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-share-alt"),s.appendChild(a);n=document.createTextNode("Get Class Frames");s.appendChild(n),r.appendChild(s),e.appendChild(r);var o=i.getShowApiDom("getSchema",t);return e.appendChild(o),e},a.prototype.getConnectExplorer=function(e){var t=document.createElement("BR");e.appendChild(t);var r=this.getSignature("connect");e.appendChild(r),e.appendChild(s.getHeaderDom("Parameters"));t=document.createElement("BR");e.appendChild(t);var i=this.getServerForm();return e.appendChild(i),e},a.prototype.getServerForm=function(){var e=document.createElement("form");e.setAttribute("class","terminus-form-horizontal row-fluid"),(n=document.createElement("div")).setAttribute("class","terminus-control-group"),e.appendChild(n);var t=document.createElement("label");t.setAttribute("class","terminus-control-label"),t.setAttribute("for","basicinput"),t.innerHTML="Url:",n.appendChild(t),(o=document.createElement("div")).setAttribute("class","terminus-controls"),n.appendChild(o);var r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("id","basicinput"),r.setAttribute("class","span8 terminus-input-text"),r.setAttribute("placeholder","URL : server_url"),this.val&&(r.value=this.val),o.appendChild(r);var n,a=document.createElement("i");a.setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),o.appendChild(a),(n=document.createElement("div")).setAttribute("class","terminus-control-group"),e.appendChild(n);var o,u=document.createElement("label");u.setAttribute("class","terminus-control-label"),u.setAttribute("for","basicinput"),u.innerHTML="Key:",n.appendChild(u),(o=document.createElement("div")).setAttribute("class","terminus-controls"),n.appendChild(o);var l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("id","basicinput"),l.setAttribute("class","span8 terminus-input-text"),l.setAttribute("placeholder","Key : key"),this.val&&(l.value=this.val),o.appendChild(l);var c=document.createElement("button");c.setAttribute("class","terminus-btn terminus-send-api-btn"),c.setAttribute("type","button"),c.innerHTML="Send Api";var d=document.createElement("div");e.appendChild(c),e.appendChild(d);var p=this;return c.addEventListener("click",(function(){opts={};var e=function(){var e={};return e.url=r.value,e.key=l.value,e}();p.client.connect(e.url,e.key).then((function(e){i.removeChildren(d);s.showHttpResult(e,"connect",d,p.ui)}))})),e},a.prototype.getDatabaseExplorer=function(e){var t=document.createElement("div"),r=document.createElement("ul");r.setAttribute("class","terminus-ul-horizontal"),(s=document.createElement("a")).setAttribute("class","terminus-a terminus-submenu-selected terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var n=this;s.addEventListener("click",(function(){n.setSelectedSubMenu(this),i.removeChildren(t);var r=n.getDatabaseDom("create",t);e.appendChild(r)})),(o=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-plus"),s.appendChild(o);var s,a=document.createTextNode("Create database");s.appendChild(a),r.appendChild(s),(s=document.createElement("a")).setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var o;n=this;s.addEventListener("click",(function(){n.setSelectedSubMenu(this),i.removeChildren(t);var r=n.getDatabaseDom("delete",t);e.appendChild(r)})),(o=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-trash-alt"),s.appendChild(o);a=document.createTextNode("Delete database");s.appendChild(a),r.appendChild(s),e.appendChild(r);var u=n.getDatabaseDom("create",t);return e.appendChild(u),e},a.prototype.getDatabaseDom=function(e,t){var r=document.createElement("BR");t.appendChild(r);var i=this.getSignature(e);t.appendChild(i),t.appendChild(s.getHeaderDom("Parameters"));r=document.createElement("BR");if(t.appendChild(r),"create"==e)var n=this.getDBForm(e);else n=this.getDBForm(e);return t.appendChild(n),t},a.prototype.getDBForm=function(e){var t=document.createElement("form");t.setAttribute("class","terminus-form-horizontal row-fluid"),(i=document.createElement("div")).setAttribute("class","terminus-control-group"),t.appendChild(i),(n=document.createElement("label")).setAttribute("class","terminus-control-label"),n.setAttribute("for","basicinput"),n.innerHTML="Url:",i.appendChild(n),(u=document.createElement("div")).setAttribute("class","terminus-controls"),i.appendChild(u);var r=document.createElement("input");if(r.setAttribute("type","text"),r.setAttribute("id","basicinput"),r.setAttribute("class","span8 terminus-input-text"),r.setAttribute("placeholder","URL : server/database_id"),this.val&&(r.value=this.val),u.appendChild(r),(a=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),u.appendChild(a),"create"==e){var i,n;(i=document.createElement("div")).setAttribute("class","terminus-control-group"),t.appendChild(i),(n=document.createElement("label")).setAttribute("class","terminus-control-label"),n.setAttribute("for","basicinput"),n.innerHTML="Document:",i.appendChild(n),(u=document.createElement("div")).setAttribute("class","terminus-controls"),i.appendChild(u);var a,o=document.createElement("textarea");o.setAttribute("type","text"),o.setAttribute("class","terminus-input-text"),o.setAttribute("placeholder","Enter document to create database"),u.appendChild(o),s.stylizeEditor(this.ui,o,"document","javascript"),(a=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),u.appendChild(a)}(i=document.createElement("div")).setAttribute("class","terminus-control-group"),t.appendChild(i);var u,l=document.createElement("label");l.setAttribute("class","terminus-control-label"),l.setAttribute("for","basicinput"),l.innerHTML="Key:",i.appendChild(l),(u=document.createElement("div")).setAttribute("class","terminus-controls"),i.appendChild(u);var c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("id","basicinput"),c.setAttribute("class","terminus-input-text"),c.setAttribute("placeholder","key"),u.appendChild(c);var d=document.createElement("button");d.setAttribute("class","terminus-btn terminus-send-api-btn"),d.setAttribute("type","button"),d.innerHTML="Send Api";var p=this;return"create"==e?d.addEventListener("click",(function(e){var t=function(){var e={};return e.id=r.value,e.doc=JSON.parse(o.value),e.key=c.value,e}(),i=this;p.client.createDatabase(t.id,t.doc,t.key).then((function(e){var t=i.parentNode;s.showHttpResult(e,"create",t,p.ui)}))})):d.addEventListener("click",(function(){var e=this;opts={},p.client.deleteDatabase(r.value,opts).then((function(t){var r=e.parentNode;s.showHttpResult(t,"delete",r,p.ui)}))})),t.appendChild(d),t},a.prototype.getQueryApiDom=function(e,t){var r=document.createElement("BR");t.appendChild(r);var i=this.getSignature(e);t.appendChild(i),t.appendChild(s.getHeaderDom("Parameters"));r=document.createElement("BR");t.appendChild(r);var n=document.createElement("form");n.setAttribute("class","terminus-form-horizontal row-fluid"),(o=document.createElement("div")).setAttribute("class","terminus-control-group"),n.appendChild(o),(u=document.createElement("label")).setAttribute("class","terminus-control-label"),u.setAttribute("for","basicinput"),u.innerHTML="Url:",o.appendChild(u),(l=document.createElement("div")).setAttribute("class","terminus-controls"),o.appendChild(l);var a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("id","basicinput"),a.setAttribute("class","span8 terminus-input-text"),a.setAttribute("placeholder","URL : server/database_id"),this.value&&(a.value=this.val),l.appendChild(a);var o,u,l,c=document.createElement("i");c.setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),l.appendChild(c),o.appendChild(l),(o=document.createElement("div")).setAttribute("class","terminus-control-group"),n.appendChild(o),(u=document.createElement("label")).setAttribute("class","terminus-control-label"),u.setAttribute("for","basicinput"),u.innerHTML="Query:",o.appendChild(u),(l=document.createElement("div")).setAttribute("class","terminus-controls"),o.appendChild(l);var d=document.createElement("textarea");this.value&&(d.value=this.val),l.appendChild(d),d.setAttribute("class","terminus-api-explorer-text-area"),l.appendChild(d),o.appendChild(l),s.stylizeEditor(this.ui,d,"query","javascript");r=document.createElement("BR");o.appendChild(r);var p=document.createElement("button");p.setAttribute("class","terminus-btn terminus-send-api-btn"),p.setAttribute("type","button"),p.innerHTML="Send Api";var h=this;return p.addEventListener("click",(function(){var e=this;h.client.select(a.value,d.value,{}).then((function(t){var r=e.parentNode;s.showHttpResult(t,"select",r,h.ui)}))})),o.appendChild(p),t.appendChild(n),t},a.prototype.getClassFramesForm=function(){var e=document.createElement("form");e.setAttribute("class","terminus-form-horizontal row-fluid"),(n=document.createElement("div")).setAttribute("class","terminus-control-group"),e.appendChild(n),(t=document.createElement("label")).setAttribute("class","terminus-control-label"),t.setAttribute("for","basicinput"),t.innerHTML="Url:",n.appendChild(t),(o=document.createElement("div")).setAttribute("class","terminus-controls"),n.appendChild(o);var t,r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("id","basicinput"),r.setAttribute("class","span8 terminus-input-text"),r.setAttribute("placeholder","URL : database_url"),this.val&&(r.value=this.val),o.appendChild(r),(i=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),o.appendChild(i),(n=document.createElement("div")).setAttribute("class","terminus-control-group"),e.appendChild(n),(t=document.createElement("label")).setAttribute("class","terminus-control-label"),t.setAttribute("for","basicinput"),t.innerHTML="Url/ ID:",n.appendChild(t),(o=document.createElement("div")).setAttribute("class","terminus-controls"),n.appendChild(o);var i,n,a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("id","basicinput"),a.setAttribute("class","span8 terminus-input-text"),a.setAttribute("placeholder","Url or ID of document class"),o.appendChild(a),(i=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),o.appendChild(i),(n=document.createElement("div")).setAttribute("class","terminus-control-group"),e.appendChild(n);var o,u=document.createElement("label");u.setAttribute("class","terminus-control-label"),u.setAttribute("for","basicinput"),u.innerHTML="Options:",n.appendChild(u),(o=document.createElement("div")).setAttribute("class","terminus-controls"),n.appendChild(o);var l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("id","basicinput"),l.setAttribute("class","span8 terminus-input-text"),l.setAttribute("placeholder","options"),o.appendChild(l);var c=document.createElement("button");c.setAttribute("class","terminus-btn terminus-send-api-btn"),c.setAttribute("type","button"),c.innerHTML="Send Api";var d=this;return c.addEventListener("click",(function(e){var t=function(){var e={};return e.url=r.value,e.docUrl=a.value,e.options=l.value,e}(),i=this;opts={},opts.explorer=!0,d.client.getClassFrame(t.url,t.docUrl,opts).then((function(e){var t=i.parentNode;s.showHttpResult(e,"getClassFrames",t,d.ui)}))})),e.appendChild(c),e},a.prototype.getShowApiDom=function(e,t){var r=document.createElement("BR");t.appendChild(r);var i=this.getSignature(e);t.appendChild(i),t.appendChild(s.getHeaderDom("Parameters"));r=document.createElement("BR");switch(t.appendChild(r),e){case"getSchema":(v=document.createElement("form")).setAttribute("class","terminus-form-horizontal row-fluid"),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y),(b=document.createElement("label")).setAttribute("class","terminus-control-label"),b.setAttribute("for","basicinput"),b.innerHTML="Url:",y.appendChild(b),(C=document.createElement("div")).setAttribute("class","terminus-controls"),y.appendChild(C),(f=document.createElement("input")).setAttribute("type","text"),f.setAttribute("id","basicinput"),f.setAttribute("class","span8 terminus-input-text"),f.setAttribute("placeholder","URL : server/database_id"),C.appendChild(f),(g=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),C.appendChild(g),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y),(a=document.createElement("label")).setAttribute("class","terminus-control-label"),a.setAttribute("for","basicinput"),a.innerHTML="Encoding:",y.appendChild(a),(C=document.createElement("div")).setAttribute("class","terminus-controls"),y.appendChild(C),(o=document.createElement("select")).setAttribute("type","text"),o.setAttribute("placeholder","turtle"),(u=document.createElement("option")).setAttribute("value","terminus:turtle"),u.appendChild(document.createTextNode("turtle")),o.appendChild(u),(l=document.createElement("option")).setAttribute("value","terminus:jsonld"),l.appendChild(document.createTextNode("jsonLD")),o.appendChild(l),C.appendChild(o),(g=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),C.appendChild(g),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y),(d=document.createElement("label")).setAttribute("class","terminus-control-label"),d.setAttribute("for","basicinput"),d.innerHTML="Key:",y.appendChild(d),(C=document.createElement("div")).setAttribute("class","terminus-controls"),y.appendChild(C),(p=document.createElement("input")).setAttribute("type","text"),p.setAttribute("id","basicinput"),p.setAttribute("class","terminus-input-text"),p.setAttribute("placeholder","Key"),C.appendChild(p),(g=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),C.appendChild(g),(w={}).url=f,w.enc=o,w.key=p,t.appendChild(v);var n=this.getApiForm(e,w);t.appendChild(n);break;case"getClassFrames":n=this.getClassFramesForm();t.appendChild(n);break;case"updateSchema":var a,o,u,l;(v=document.createElement("form")).setAttribute("class","terminus-form-horizontal row-fluid"),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y),(b=document.createElement("label")).setAttribute("class","terminus-control-label"),b.setAttribute("for","basicinput"),b.innerHTML="Url:",y.appendChild(b),(C=document.createElement("div")).setAttribute("class","terminus-controls"),y.appendChild(C),(f=document.createElement("input")).setAttribute("type","text"),f.setAttribute("id","basicinput"),f.setAttribute("class","span8 terminus-input-text"),f.setAttribute("placeholder","URL : server/database_id"),C.appendChild(f),(g=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),C.appendChild(g),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y),(a=document.createElement("label")).setAttribute("class","terminus-control-label"),a.setAttribute("for","basicinput"),a.innerHTML="Encoding:",y.appendChild(a),(C=document.createElement("div")).setAttribute("class","terminus-controls"),y.appendChild(C),(o=document.createElement("select")).setAttribute("type","text"),o.setAttribute("placeholder","turtle"),(u=document.createElement("option")).setAttribute("value","terminus:turtle"),u.appendChild(document.createTextNode("turtle")),o.appendChild(u),(l=document.createElement("option")).setAttribute("value","terminus:jsonld"),l.appendChild(document.createTextNode("jsonLD")),o.appendChild(l),C.appendChild(o),(g=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),C.appendChild(g),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y);var c=document.createElement("label");c.setAttribute("class","terminus-control-label"),c.setAttribute("for","basicinput"),c.innerHTML="Schema:",y.appendChild(c),(C=document.createElement("div")).setAttribute("class","terminus-controls"),y.appendChild(C);var d,p,h=document.createElement("textarea");C.appendChild(h),h.setAttribute("class","terminus-api-explorer-text-area"),stylizeEditor(this.ui,h,"schema","turtle"),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y),(d=document.createElement("label")).setAttribute("class","terminus-control-label"),d.setAttribute("for","basicinput"),d.innerHTML="Key:",y.appendChild(d),(C=document.createElement("div")).setAttribute("class","terminus-controls"),y.appendChild(C),(p=document.createElement("input")).setAttribute("type","text"),p.setAttribute("id","basicinput"),p.setAttribute("class","terminus-input-text"),p.setAttribute("placeholder","Key"),C.appendChild(p),(g=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),C.appendChild(g),(w={}).url=f,w.enc=o,w.key=p,w.doc=h;n=this.getApiForm(e,w);t.appendChild(v),t.appendChild(n);break;case"viewDocument":case"deleteDocument":(v=document.createElement("form")).setAttribute("class","terminus-form-horizontal row-fluid"),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y),(b=document.createElement("label")).setAttribute("class","terminus-control-label"),b.setAttribute("for","basicinput"),b.innerHTML="Url:",y.appendChild(b),(C=document.createElement("div")).setAttribute("class","terminus-controls"),y.appendChild(C),(f=document.createElement("input")).setAttribute("type","text"),f.setAttribute("id","basicinput"),f.setAttribute("class","span8 terminus-input-text"),f.setAttribute("placeholder","URL : server/database_id/document/document_id"),C.appendChild(f),(g=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),C.appendChild(g),t.appendChild(v);n=this.getApiForm(e,f);t.appendChild(n);break;case"createDocument":(v=document.createElement("form")).setAttribute("class","terminus-form-horizontal row-fluid"),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y),(b=document.createElement("label")).setAttribute("class","terminus-control-label"),b.setAttribute("for","basicinput"),b.innerHTML="Url:",y.appendChild(b),(C=document.createElement("div")).setAttribute("class","terminus-controls"),y.appendChild(C),(f=document.createElement("input")).setAttribute("type","text"),f.setAttribute("id","basicinput"),f.setAttribute("class","span8 terminus-input-text"),f.setAttribute("placeholder","URL : server/database_id/document/document_id"),C.appendChild(f),(g=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),C.appendChild(g),t.appendChild(v);r=document.createElement("BR");t.appendChild(r),(v=document.createElement("form")).setAttribute("class","terminus-form-horizontal row-fluid"),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y),(b=document.createElement("label")).setAttribute("class","terminus-control-label"),b.setAttribute("for","basicinput"),b.innerHTML="Document:",y.appendChild(b),(C=document.createElement("div")).setAttribute("class","terminus-controls"),y.appendChild(C);var m=document.createElement("textarea");C.appendChild(m),m.setAttribute("class","terminus-api-explorer-text-area"),s.stylizeEditor(this.ui,m,"document","javascript"),t.appendChild(v);r=document.createElement("BR");t.appendChild(r),(w={}).schemaUrlDom=f,w.schemaTextDom=m,w.htmlEditor=editor;n=this.getApiForm(e,w);t.appendChild(n);break;case"updateDocument":var f,g;(v=document.createElement("form")).setAttribute("class","terminus-form-horizontal row-fluid"),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y),(b=document.createElement("label")).setAttribute("class","terminus-control-label"),b.setAttribute("for","basicinput"),b.innerHTML="Url:",y.appendChild(b),(C=document.createElement("div")).setAttribute("class","terminus-controls"),y.appendChild(C),(f=document.createElement("input")).setAttribute("type","text"),f.setAttribute("id","basicinput"),f.setAttribute("class","span8 terminus-input-text"),f.setAttribute("placeholder","URL : server/database_id/document/document_id"),C.appendChild(f),(g=document.createElement("i")).setAttribute("class","fa fa-asterisk terminus-mandatory-icon"),C.appendChild(g),t.appendChild(v);var v,y,b,C;r=document.createElement("BR");t.appendChild(r),(v=document.createElement("form")).setAttribute("class","terminus-form-horizontal row-fluid"),(y=document.createElement("div")).setAttribute("class","terminus-control-group"),v.appendChild(y),(b=document.createElement("label")).setAttribute("class","terminus-control-label"),b.setAttribute("for","basicinput"),b.innerHTML="Document:",y.appendChild(b),(C=document.createElement("div")).setAttribute("class","terminus-controls"),y.appendChild(C);m=document.createElement("textarea");C.appendChild(m),m.setAttribute("class","terminus-api-explorer-text-area"),s.stylizeEditor(this.ui,m,"document","turtle"),t.appendChild(v);var w;r=document.createElement("BR");t.appendChild(r),(w={}).schemaUrlDom=f,w.schemaTextDom=m,w.htmlEditor=editor;n=this.getApiForm(e,w);t.appendChild(n)}return t},a.prototype.getApiForm=function(e,t){var r=document.createElement("form");r.setAttribute("class","terminus-form-horizontal row-fluid");var n=document.createElement("button");n.setAttribute("class","terminus-btn terminus-send-api-btn"),n.setAttribute("type","button"),n.innerHTML="Send Api",r.appendChild(n);var a=document.createElement("div");r.appendChild(a);var o=this;switch(e){case"getSchema":n.addEventListener("click",(function(){var e={};e["terminus:encoding"]=t.enc.value,e["terminus:user_key"]=t.key.value;var r=t.url.value;o.client.getSchema(r,e).then((function(e){i.removeChildren(a);s.showHttpResult(e,"getSchema",a,o.ui)}))}));break;case"updateSchema":n.addEventListener("click",(function(){var e=this;opts={},opts["terminus:encoding"]=t.enc.value,opts["terminus:user_key"]=t.key.value;var r=t.url.value;console.log("opts",opts),o.client.connectionConfig.connected_mode=!1,o.client.updateSchema(r,t.doc.value,opts).then((function(t){var r=document.createElement("textarea");r.setAttribute("readonly",!0),r.innerHTML=t,e.parentNode.appendChild(r),s.stylizeEditor(this.ui,txtar,"schema","turtle")}))}));break;case"viewDocument":n.addEventListener("click",(function(){var r=t.value,n={format:"turtle"};o.client.getDocument(r,n).then((function(t){i.removeChildren(a);s.showHttpResult(t,e,a,o.ui)}))}));break;case"deleteDocument":n.addEventListener("click",(function(){var r=t.value;o.client.deleteDocument(r,{}).then((function(t){i.removeChildren(a);s.showHttpResult(t,e,a,o.ui)}))}));break;case"createDocument":n.addEventListener("click",(function(){var r=t.schemaUrlDom.value,n=t.htmlEditor.getValue();opts={},o.client.createDocument(r,n,opts).then((function(t){i.removeChildren(a);s.showHttpResult(t,e,a,o.ui)}))}));break;case"updateDocument":n.addEventListener("click",(function(){var r=t.schemaUrlDom.value,n=t.htmlEditor.getValue();opts={},opts.editmode="replace",opts.format="json",o.client.updateDocument(r,n,opts).then((function(t){i.removeChildren(a);s.showHttpResult(t,e,a,o.ui)}))}))}var u=document.createElement("BR");r.appendChild(u);u=document.createElement("BR");return r.appendChild(u),r},a.prototype.getSignature=function(e){var t=document.createElement("div"),r=document.createElement("button");r.appendChild(document.createTextNode("Click to read Api Signature")),r.setAttribute("class","terminus-collapsible"),ic=document.createElement("i"),ic.setAttribute("class","terminus-cheveron-float fa fa-chevron-down"),r.appendChild(ic),t.appendChild(r);var i=document.createElement("BR");t.appendChild(i);var n=document.createElement("div");n.setAttribute("class","terminus-collapsible-content content");var a=s.getFunctionSignature(e),o=document.createTextNode(a.spec),u=document.createElement("pre");u.setAttribute("class","terminus-api-signature-pre"),u.appendChild(o);o=document.createTextNode(a.descr);u.appendChild(o);i=document.createElement("BR");u.appendChild(i);i=document.createElement("BR");u.appendChild(i);o=document.createTextNode(a.result);u.appendChild(o),n.appendChild(u),t.appendChild(n);i=document.createElement("BR");return t.appendChild(i),r.addEventListener("click",(function(){s.tolggleContent(ic,n)})),t},e.exports=a},function(e,t){function r(e,t,r){this.textdom=e,this.mode=t,this.darkMode=r.darkMode,this.jsonldCheck(t)&&(this.mode="javascript")}r.prototype.colorizeTextArea=function(e){var t=CodeMirror.fromTextArea(this.textdom,{mode:this.mode,firstLineNumber:1,lineNumbers:!0,styleActiveLine:!0,lineWrapping:!0,smartIndent:!0,indentWithTabs:!0,newlineAndIndent:!0,autoCloseBrackets:!0,matchBrackets:{afterCursor:!0},extraKeys:{"Ctrl-F":"find",Tab:"autocomplete"},refresh:!0});return this.setCodemirrorSize(t,e),t.defaultCharWidth("20px"),this.darkMode?t.setOption("theme","erlang-dark"):t.setOption("theme","neo"),t},r.prototype.setCodemirrorSize=function(e,t){switch(t){case"query":e.setSize("","300");break;case"schema":e.setSize("1200","1550");break;case"document":e.setSize("800","auto")}},r.prototype.updateTextArea=function(e){e.save(),setTimeout((function(){e.refresh()}),1),e.on("change",(function(){e.save()}))},r.prototype.colorizePre=function(){if(CodeMirror.runMode(this.textdom.innerText,this.mode,this.textdom),this.darkMode)var e="cm-s-erlang-dark";else e="cm-s-neo";return this.textdom.setAttribute("class","CodeMirror CodeMirror-wrap "+e+" terminus-wrap-text terminus-wrapper-height "),this.textdom},r.prototype.jsonldCheck=function(e){if("jsonld"==e)return!0},e.exports=r},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0);function s(e,t,r,n,s){this.empty(),this.cls=e,r&&"object"==i(r)&&this.loadClassFrames(r),t&&"object"==i(t)?(this.originalFrames=t,this.loadDataFrames(t)):this.originalFrames=!1,this.parent=n,this.parentframe=s,this.newDoc=!1}function a(e,t){this.err=!1,this.parent=t,this.subjid=!!t&&t.subjid,e&&this.load(e)}function o(e,t){this.err=!1,this.parent=t,this.children={},this.subjid=!!t&&t.subjid,e&&this.load(e)}function u(e){this.min=0,this.max=0,e&&this.loadRestriction(e)}s.prototype.getAsFrame=function(e,t){if(this.parentframe)return this.parentframe;var r={type:"objectProperty",property:e};for(var e in r.range=this.cls,r.domain=t.cls,r.domainValue=t.subjid,r.frame=[],this.dataframes)for(var i=0;i<this.dataframes[e].length;i++)r.frame.push(this.dataframes[e][i].getAsFrame());for(var e in this.children)for(i=0;i<this.children[e].length;i++)r.frame.push(this.children[e][i].getAsFrame(e,this));return r},s.prototype.isnew=function(){return this.newDoc},s.prototype.empty=function(){this.classframes={},this.dataframes={},this.restrictions={},this.children={},this.subjid=!1,this.cls=!1},s.prototype.reset=function(e){if(e){for(var t=[],r=0;r<this.originalFrames.length;r++)this.originalFrames[r].property==e&&t.push(this.originalFrames[r]);this.children[e]&&(this.children[e]=[]),this.dataframes[e]&&(this.dataframes[e]=[]),this.loadDataFrames(t)}else this.dataframes={},this.restrictions={},this.children={},this.loadDataFrames(this.originalFrames)},s.prototype.clear=function(){this.clearData();var e={};for(var t in this.children)for(var r=0;r<this.children[t].length;r++)void 0===e[t]&&(e[t]=[]),this.children[t][r].subjid=n.genBNID(),this.children[t][r].clear();return this},s.prototype.clearData=function(){for(var e in this.dataframes)for(var t=0;t<this.dataframes[e].length;t++)this.dataframes[e][t].clear();return this},s.prototype.loadClassFrames=function(e){for(var t=0;t<e.length;t++){e[t]["@context"]&&(this.jsonld_context=e[t]["@context"]);var r=new o(e[t]);if(r.isValid()&&(void 0===this.classframes[e[t].property]&&(this.classframes[e[t].property]=[]),this.classframes[e[t].property]=r,r.isObject()&&this.children[e[t].property]))for(var i=0;i<this.children[e[t].property].length;i++)this.children[e[t].property][i].loadClassFrames(e[t].frame)}return this},s.prototype.hasSchema=function(){return!n.empty(this.classframes)},s.prototype.loadDataFrames=function(e){if("object"==i(e)&&e.length){this.originalFrames||(this.originalFrames=e),!this.subjid&&e[0].domainValue&&(this.subjid=e[0].domainValue);for(var t=0;t<e.length;t++){e[t]["@context"]&&(this.jsonld_context=e[t]["@context"]);var r=this.getPropertyClassFrame(e[t].property,e[t]);if(r.isClassChoice()?(r=r.getChosenClassFrame(e[t].range))||alert("no choice frame "+e[t].range):r.isLogic()&&(r=r.getChosenFrame(e[t])),r&&r.isData()){var n=new a(e[t],this);void 0===this.dataframes[e[t].property]&&(this.dataframes[e[t].property]=[]),this.dataframes[e[t].property].push(n)}else if(r&&r.isObject()){var o=new s(r.range,r.frame,e[t].frame,this,e[t]);void 0===this.children[e[t].property]&&(this.children[e[t].property]=[]),this.children[e[t].property].push(o)}}return this}},s.prototype.matchesPattern=function(e,t){return e.action==t.action&&("value"==t.type&&e.value,"property"==t.type&&void 0===e.value&&e.property,"object"==t.type&&(void 0!==e.value||e.property),!1)},s.prototype.compare=function(e){if(e.domain&&e.domain!=this.cls)return!1},s.prototype.getPropertyClassFrame=function(e,t){if(this.classframes&&"object"==i(this.classframes)&&"object"==i(this.classframes[e]))return this.classframes[e];if(t)return new o(t);if(this.dataframes&&this.dataframes[e])return this.dataframes[e][0];if(this.children&&this.children[e]){var r=this.children[e][0].parentframe;if(r)return new o(r)}return!1},s.prototype.getMissingPropertyList=function(){var e=[];if(this.classframes&&"object"==i(this.classframes))for(var t in this.classframes)if(!this.dataframes[t]&&!this.children[t]){var r={label:this.getPropertyClassFrame(t).getLabel(),value:t};e.push(r)}return e},s.prototype.getFilledPropertyList=function(){var e=[];for(var t in this.dataframes){var r={label:this.getPropertyClassFrame(t).getLabel(),value:t};e.push(r)}for(var t in this.children){r={label:this.getPropertyClassFrame(t).getLabel(),value:t};e.push(r)}return e},s.prototype.fillFromSchema=function(e){e&&(this.subjid=e);var t={},r={};for(var i in this.classframes){var s=this.getPropertyClassFrame(i);if(s&&s.isData())if(s.hasRestriction()&&s.restriction.min){t[i]=[];for(var a=0;a<s.restriction.min;a++)t[i].push(s.createEmpty(e))}else t[i]=[s.createEmpty(e)];else if(s&&s.isObject()&&!s.isClassChoice())if(s.hasRestriction()&&s.restriction.min){r[i]=[];for(a=0;a<s.restriction.min;a++){var o=s.createEmpty(n.genBNID());r[i].push(o)}}else{o=s.createEmpty(n.genBNID());r[i]=[o]}else if(s.isClassChoice()){var u=s.getClassChoices();if(u&&u.length){o=s.createEmptyChoice(u[0],n.genBNID());r[i]=[o]}}}for(var i in this.dataframes=t,this.children=r,this.originalFrames=[],this.dataframes)for(a=0;a<this.dataframes[i].length;a++)this.originalFrames.push(this.dataframes[i][a].getAsFrame());for(var i in this.children)for(a=0;a<this.children[i].length;a++)this.originalFrames.push(this.children[i][a].getAsFrame(i,this));return this},s.prototype.clone=function(e){var t={},r={},a=new s(this.cls,!1,!1,this.parent);if(a.classframes=this.classframes,a.subjid=e,this.dataframes&&"object"==i(this.dataframes))for(var o in this.dataframes){if((c=this.getPropertyClassFrame(o)).isData()){t[o]=[];for(var u=0;u<this.dataframes[o].length;u++){var l=c.clone(e,this.dataframes[o][u]);t[o].push(l)}}}if(this.children&&"object"==i(this.children))for(o in this.children){var c=this.getPropertyClassFrame(o);for(u=0;u<this.children[o].length;u++){var d=this.children[o][u];void 0===r[o]&&(r[o]=[]);var p=d.clone(n.genBNID());r[o].push(p)}}return a.dataframes=t,a.children=r,a},s.prototype.getChildren=function(e){return!(!e||void 0===this.children[e])&&this.children[e]},s.prototype.getChild=function(e,t){if(t&&void 0!==this.children[t])for(var r=this.children[t],i=0;i<r.length;i++)if(r[i].subjid==e)return r[i];if(!t)for(var t in this.children)for(i=0;i<this.children[t].length;i++)if(this.children[t][i].subjid==e)return this.children[t][i];return!1},s.prototype.getDataFrames=function(e){return!(!e||void 0===this.dataframes[e])&&this.dataframes[e]},s.prototype.removeProperty=function(e){void 0!==this.dataframes[e]?delete this.dataframes[e]:void 0!==this.children[e]&&delete this.children[e]},s.prototype.addProperty=function(e,t){var r=this.getPropertyClassFrame(e);if(r.isData()){var i=r.copy();return i.set(""),void 0===this.dataframes[e]&&(this.dataframes[e]=[]),this.dataframes[e].push(i),i}if(r.isObject()){if(void 0===this.children[e]&&(this.children[e]=[]),!r.isClassChoice()){var s=r.createEmpty(n.genBNID());return this.children[e].push(s),s}if(t){s=r.createEmptyChoice(t,n.genBNID());return this.children[e].push(s),s}var a=r.getClassChoices();if(a&&a.length){s=r.createEmptyChoice(a[0],n.genBNID());return this.children[e].push(s),s}}return!1},s.prototype.addPropertyValue=function(e,t){var r=this.getPropertyClassFrame(e).createEmpty();return r.set(t),this.dataframes[e].push(r),r},s.prototype.removePropertyValue=function(e,t,r){if(void 0!==this.dataframes[e]){for(var i=[],n=0;n<this.dataframes[e].length;n++)void 0!==r&&r!=n?(this.dataframes[e][n].index=i.length,i.push(this.dataframes[e][n])):void 0===r&&this.dataframes[e][n].contents!=t&&(this.dataframes[e][n].index=i.length,i.push(this.dataframes[e][n]));i.length?this.dataframes[e]=i:delete this.dataframes[e]}else if(void 0!==this.children[e]){var s=this.children[e],a=[];for(n=0;n<s.length;n++)s[n].subjid!=t&&a.push(s[n]),a.length?this.children[e]=a:delete this.children[e]}else alert("No prop "+e)},s.prototype.error=function(e,t){alert(e)},s.prototype.isObject=function(){return!0},s.prototype.isData=function(){return!1},a.prototype.isValidType=function(e){return-1!=["datatypeProperty","objectProperty","restriction "].indexOf(e)},a.prototype.load=function(e){if("object"==i(e)){this.type=e.type,this.property=e.property,this.range=e.range,this.rangeValue=e.rangeValue,this.domain=e.domain,this.domainValue=e.domainValue,this.frame=e.frame,this.label=e.label,this.comment=e.comment;var t=e.restriction;t&&"object"==i(t)?this.restriction=new u(t):this.restriction=!1}else this.error("No frame passed to load")},a.prototype.getAsFrame=function(){var e={type:this.type,property:this.property};return this.range&&(e.range=this.range),this.rangeValue&&(e.rangeValue=this.rangeValue),this.domain&&(e.domain=this.domain),this.domainValue&&(e.domainValue=this.domainValue),this.frame&&(e.frame=this.frame),this.label&&(e.label=this.label),this.comment&&(e.comment=this.comment),e},a.prototype.hasRestriction=function(){return!!this.restriction&&this.restriction.hasCardRestriction()},a.prototype.copy=function(e){var t=new a(this,this.parent);return e&&(t.domainValue=e),t},a.prototype.getLabel=function(){var e="";return this.label&&"object"==i(this.label)&&(e=this.label["@value"]),this.label&&"string"==typeof this.label&&(e=this.label),!e&&this.property&&(e=n.labelFromURL(this.property)),e||(e=n.labelFromURL(this.cls)),e},a.prototype.getType=function(){return this.range?this.range:!(!this.rangeValue||!this.rangeValue.type)&&this.rangeValue.type},s.prototype.getLabel=a.prototype.getLabel,a.prototype.getComment=function(){var e="";return this.comment&&"object"==i(this.comment)&&(e=this.comment["@value"]),this.comment&&"string"==typeof this.comment&&(e=this.comment),e},s.prototype.getComment=a.prototype.getComment,a.prototype.error=function(e){return e&&(this.err=e),this.err},a.prototype.isValid=function(){return this.type&&this.isValidType(this.type)?this.property?this.domain?this.range?!(this.isObjectProperty()&&(!this.frame||"object"!=i(this.frame)))||(this.error("Missing Object Frame"),!1):(this.error("Missing Frame Range"),!1):(this.error("Missing Frame Domain"),!1):(this.error("Missing Frame Property"),!1):(this.error("Missing or Illegal Frame Type "+this.type),!1)},a.prototype.isObjectProperty=function(){return"objectProperty"==this.type},a.prototype.isDatatypeProperty=function(){return"datatypeProperty"==this.type},a.prototype.isLogic=function(){return"and"==this.type||"or"==this.type||"xor"==this.type},a.prototype.isRestriction=function(){return"restriction"==this.type},a.prototype.ftype=function(){return this.isDocument()?"document":this.isDatatypeProperty()?"data":this.isChoice()?"oneOf":this.isObject()?"object":this.isLogic()?"logic":this.isClassChoice()?"class_choice":void 0},a.prototype.isClassChoice=function(){return this.frame&&"class_choice"==this.frame.type},a.prototype.isString=function(){return this.range==n.getStdURL("xsd","string")},a.prototype.getChoiceOptions=function(){for(var e=[],t=0;t<this.frame.elements.length;t++){var r={};this.frame.elements[t].label?r.label=this.frame.elements[t].label["@value"]:r.label=n.labelFromURL(this.frame.elements[t].class),r.value=this.frame.elements[t].class,e.push(r)}return e},a.prototype.lang=function(){return"en"},a.prototype.isChoice=function(){return this.frame&&"oneOf"==this.frame.type},a.prototype.isDocument=function(){return this.frame&&"document"==this.frame.type},a.prototype.isData=function(){return this.isDocument()||this.isChoice()||this.isDatatypeProperty()},a.prototype.isObject=function(){return this.isObjectProperty()&&this.frame&&!(this.isChoice()||this.isDocument())},a.prototype.getTypeShorthand=function(){return this.isDocument()?"document":this.isChoice()?"choice":n.getShorthand(this.range)},a.prototype.get=function(e){return this.contents?this.contents:this.isDatatypeProperty()&&this.rangeValue&&void 0!==this.rangeValue["@value"]?this.rangeValue["@value"]:this.isChoice()||this.isDocument()?this.frame.domainValue:""},a.prototype.set=function(e,t){t&&(e=t(e,this)),this.contents=e,(this.isChoice()||this.isDocument())&&(this.frame.domainValue=e),this.isDatatypeProperty()&&this.rangeValue&&(this.rangeValue["@value"]=e)},a.prototype.clear=function(){(this.isDocument()||this.isChoice()||this.isDatatypeProperty())&&this.set("")},o.prototype=a.prototype,o.prototype.loadFromObjectFrame=function(e,t){this.type="objectProperty",this.property=e.property,this.range=e.range,this.rangeValue=t.subjid,this.domain=e.cls,this.domainValue=e.subjid,this.label=e.getLabel(),this.comment=e.getComment(),this.restriction=e.restriction},o.prototype.createEmptyChoice=function(e,t){var r=this.getChosenClassFrames(e),i=new s(e);return t&&(i.subjid=t),i.loadClassFrames(r),i.fillFromSchema()},o.prototype.getChosenClassFrames=function(e){for(var t=[],r=0;r<this.frame.operands.length;r++)for(var i=0;i<this.frame.operands[r].length;i++)e==this.frame.operands[r][i].domain&&(t=t.concat(this.frame.operands[r][i]));return t},o.prototype.createEmpty=function(e){if(this.isObject()){var t=new s(this.range);return e&&(t.subjid=e),t.loadClassFrames(this.frame),t.fillFromSchema()}if(this.isData()){var r=this.copy();return r.set(""),r}},o.prototype.cloneDataFrame=function(e,t){return t},o.prototype.clone=function(e,t){if(this.isObject())alert("cannot clone class frame");else if(this.isData())return this.cloneDataFrame(e,t)},o.prototype.getClassChoices=function(){for(var e=[],t=0;t<this.frame.operands.length;t++)for(var r=0;r<this.frame.operands[t].length;r++){var i=this.frame.operands[t][r].domain;i&&-1==e.indexOf(i)&&e.push(i)}return e},o.prototype.getChosenClassFrame=function(e){for(var t=0;t<this.frame.operands.length;t++){var r=this.frame.operands[t];if(r.length)for(var i=0;i<r.length;i++){if(r[i]&&e==r[i].domain)return new o(r)}else if(r.range&&e==r.range){return new o(r)}}return!1},o.prototype.getChosenFrame=function(e){return e},u.prototype.hasCardRestriction=function(){return 0!=this.min||0!=this.max},u.prototype.loadRestriction=function(e){if(void 0!==e.cardinality)this.max=e.cardinality,this.min=e.cardinality;else if(void 0!==e.maxCardinality)this.max=e.maxCardinality;else if(void 0!==e.minCardinality)this.min=e.minCardinality;else if(void 0!==e.type&&"and"==e.type&&"object"==i(e.operands))for(var t=0;t<e.operands.length;t++){var r=new u(e.operands[t]);0==this.max&&r.max>0?this.max=r.max:this.max>0&&r.max>0&&r.max<this.max&&(this.max=r.max),0==this.min&&r.min>0?this.min=r.min:this.min>0&&r.min>0&&r.min>this.min&&(this.min=r.min)}},e.exports=s},function(e,t,r){var i=r(0),n=r(9),s=r(20),a=r(5);function o(e,t,r){this.predicate=e,this.parent=t,this.cframe=this.parent.objframe.getPropertyClassFrame(this.predicate),this.options=this.setOptions(r),this.originalValues=!1,this.changed=!1,this.values=[]}o.prototype.setOptions=function(e){return a.decorateRenderer(e,this)},o.prototype.getOptionsForChild=function(){var e={};return this.options.features&&(e.features=this.options.features),this.options.controls&&(e.controls=this.options.controls),this.options},o.prototype.getOptionsForValue=function(e,t){return this.getOptionsForChild()},o.prototype.getOptionsForObject=function(e){return this.getOptionsForChild()},o.prototype.render=function(e){if(this.buildValueRenderers(),this.cframe&&this.cframe.property){this.viewer=e||this.getViewerForProperty();for(var t=0;t<this.values.length;t++){var r=this.values[t].render();r&&this.showFeature("body")&&this.viewer.addRenderedValue(r)}return this.viewer.render()}},o.prototype.buildValueRenderers=function(){var e=!1===this.originalValues;if(this.cframe=this.parent.objframe.getPropertyClassFrame(this.predicate),!this.cframe)return console.error("No frame for "+this.property()+" id: "+this.subject()),!1;if(this.cframe&&this.cframe.isData()){var t=this.getDataFramesToRender();0==t.length&&alert(this.predicate);for(var r=[],i=this.values.length;i<t.length;i++){var a=new s(t[i],i,this,this.getOptionsForValue(t[i],i));this.values.push(a),r.push(a.value())}e&&(this.originalValues=r)}else{e&&(this.originalValues=[]);var o=this.getChildrenToRender();if(o&&o.length)for(i=this.values.length;i<o.length;i++){var u=new n(o[i],this,this.getOptionsForObject(o[i]));e&&this.originalValues.push(u.subject()),this.values.push(u)}}},o.prototype.getDataFramesToRender=function(e){return this.parent.objframe.getDataFrames(this.property())},o.prototype.getChildrenToRender=function(e){if(i.viewIncludesChildren(this.view,"property"))var t=this.parent.objframe.getChildren(this.property());else t=[];return t},o.prototype.redraw=function(){this.viewer.clear(),this.render(this.viewer)},o.prototype.extract=function(){for(var e=[],t=0;t<this.values.length;t++){var r=this.values[t].extract();""!==r&&void 0!==r&&e.push(r)}if(this.cframe.isData())return e;var i={};for(t=0;t<e.length;t++)for(var n in e[t])i[n]=e[t][n];return i},o.prototype.currentViewer=function(){return this.viewerType},o.prototype.property=function(){return this.predicate},o.prototype.subject=function(){return!!this.parent&&this.parent.subject()},o.prototype.depth=function(){return!!this.parent&&this.parent.depth()},o.prototype.subjectClass=function(){return!!this.parent&&this.parent.subjectClass()},o.prototype.updated=function(){return!!this.parent&&this.parent.childUpdated()},o.prototype.range=function(){return this.cframe?this.cframe.range:""},o.prototype.getLabel=function(){return this.cframe?this.cframe.getLabel():""},o.prototype.getComment=function(){return!!this.cframe&&this.cframe.getComment()},o.prototype.load=function(e){return!!this.parent&&this.parent.load(e)},o.prototype.hasCardinalityRestriction=function(){return!!this.cframe&&this.cframe.hasRestriction()},o.prototype.getRestriction=function(){return!!this.cframe&&this.cframe.restriction},o.prototype.isClassChoice=function(){return!!this.cframe&&this.cframe.isClassChoice()},o.prototype.currentFacet=function(){return this.facet},o.prototype.save=function(){return!!this.parent&&this.parent.save()},o.prototype.cancel=function(){this.reset(),this.setMode("view")},o.prototype.getAvailableClassChoices=function(){if(this.cframe){var e=this.cframe.getClassChoices();if(this.parent){for(var t=[],r=0;r<e.length;r++){var n=this.parent.getClassMeta(e[r]),s=n&&n.Label&&n.Label["@value"]?n.Label["@value"]:i.labelFromURL(e[r]);t.push({value:e[r],label:s})}return t}return e}return!1},o.prototype.delete=function(){var e=this.predicate;e&&(this.reset(),this.parent.deleteProperty(e),this.parent.redraw())},o.prototype.add=function(e){this.parent.addProperty(this.property(),e),this.updated(),e&&(this.values[this.values.length-1].setMode(e),this.values[this.values.length-1].setNew()),this.redraw(),this.goToValue(this.values.length-1)},o.prototype.goToValue=function(e){this.viewer.goTo(this.subject(),this.property(),e)},o.prototype.addClass=function(e){this.parent.addPropertyClass(this.property(),e),this.updated();var t=this.values[this.values.length-1];t&&(t.setNew(),t.setMode("edit")),this.redraw(),t&&this.viewer.goTo(t.subject())},o.prototype.reset=function(){if(this.parent.objframe.reset(this.predicate),this.cframe&&this.cframe.isData()){for(var e=0;e<this.values.length;e++)this.values[e].reset();this.values=[]}else{var t=[];for(e=0;e<this.originalValues.length;e++)for(var r=0;r<this.values.length;r++)this.values[r].reset(),this.values[r].subject()==this.originalValues[e]&&t.push(this.values[r]);this.values=t}this.redraw(),this.parent.childUpdated()},o.prototype.deletePropertyValue=function(e,t){this.parent.objframe.removePropertyValue(this.property(),e,t);for(var r=[],i=0;i<this.values.length;i++)void 0===t?this.values[i].subject()==e?this.values[i].reset():r.push(this.values[i]):i!=t?(this.values[i].index=r.length,r.push(this.values[i])):this.values[i].reset();this.values=r,this.parent.childUpdated(),this.parent.redraw()},o.prototype.addPropertyValue=function(e){return this.updated(),this.parent.objframe.addPropertyValue(this.property(),e)},o.prototype.cardControlAllows=function(e){if(this.cframe.hasRestriction()){var t=this.cframe.restriction,r=this.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min)return!1}return!0},o.prototype.isNew=function(){return!!this.new_property||this.parent.isNew()},o.prototype.setNew=function(){this.new_property=!0},o.prototype.isUpdated=function(){if(this.values.length!=this.originalValues.length)return!0;for(var e=0;e<this.values.length;e++)if(this.cframe&&this.cframe.isData()){if(this.values[e].value()!=this.originalValues[e])return!0}else{if(this.values[e].subject()!=this.originalValues[e])return!0;if(this.values[e].isUpdated())return!0}return!1},o.prototype.childUpdated=function(){this.viewer.redrawHeader(),this.parent&&this.parent.childUpdated()},o.prototype.setMode=function(e){this.mode=e;for(var t=0;t<this.values.length;t++)this.values[t].setMode(e);this.redraw()},o.prototype.getViewableValues=function(){var e=[];if(this.cframe&&this.cframe.isData())for(var t=0;t<this.values.length;t++){var r=this.values[t].getSummary().long;e.push({label:r,value:t})}return e},o.prototype.hideDisabledControls=function(){return this.hide_disabled_controls},o.prototype.setFacet=function(e,t){if(this.facet=e,!t)for(var r=0;r<this.values.length;r++)this.values[r].parentFacetChange(e);this.redraw()},o.prototype.parentFacetChange=function(e){"page"==e&&"page"!=this.facet&&"multiline"!=this.facet&&this.setFacet("multiline"),"line"==e&&this.setFacet("label")},o.prototype.getDefaultFacets=function(){return{page:{label:"Full Page",value:"page",features:["facet","label","comment","id","control","type","cardinality","body","status","facet","view","viewer"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},multiline:{label:"Multiple Lines",value:"multiline",features:["facet","label","comment","id","control","type","cardinality","body","status","facet","view","viewer"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},line:{label:"Single Line",value:"line",features:["facet","label","comment","id","control","type","cardinality","body","status","facet","viewer"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},summary:{label:"Summary",value:"summary",features:["facet","satus","label","type","cardinality","body","status","facet","viewer"],controls:[]},label:{label:"Label",value:"label",features:["facet","status","label","summary"],controls:[]},icon:{label:"Snippet",value:"icon",features:["facet","summary"],controls:[]}}},o.prototype.getAvailableFacets=function(){return Object.values(this.facets)},o.prototype.getContentOrientation=function(e){return"page"==this.currentFacet()||this.containsPage()?"page":"line"==this.currentFacet()||"multiline"==this.currentFacet()||"summary"==this.currentFacet()?"line":"label"},o.prototype.getDefaultFacet=function(){return this.cframe&&this.cframe.isObject()?"page":"multiline"},o.prototype.hide=function(){this.setView("hidden")},o.prototype.show=function(){this.setView("full")},o.prototype.setView=function(e){this.view=e,this.redraw()},o.prototype.getAvailableViewers=function(){return"view"==this.mode?a.getAvailablePropertyViewers(this):a.getAvailablePropertyEditors(this)},o.prototype.getViewerForDataValue=function(){},o.prototype.setViewer=function(e){},o.prototype.nukeViewer=function(){this.viewer.remove()},o.prototype.containsPage=function(){if("icon"==this.currentFacet()||"label"==this.currentFacet())return!1;for(var e=0;e<this.values.length;e++)if("page"==this.values[e].facet)return!0;return!1},o.prototype.getViewerForProperty=function(e){return"edit"==this.mode?a.getEditorForProperty(e,this):a.getViewerForProperty(e,this)},o.prototype.getPropertyHeaderViewer=function(){return new HTMLPropertyHeaderViewer},o.prototype.getSummary=function(){var e="ok";this.isNew()?e="new":this.isUpdated()&&(e="updated");var t={status:e,valcount:this.values.length};t.long=1!=t.valcount?"("+t.valcount+") ":"";for(var r=0;r<this.values.length;r++)vsum=this.values[r].getSummary(),t.long+=vsum.long,r<this.values.length-1&&(t.long+=", ");return t},o.prototype.getFeaturesForFacet=function(e){return this.facets[e].features.concat(this.facets[e].controls)},o.prototype.showFeature=function(e){if(-1==this.features.indexOf(e)&&-1==this.controls.indexOf(e))return!1;if(-1!=["delete","clone","add"].indexOf(e)&&!this.cardControlAllows(e))return!1;return!(this.hideDisabledControls()&&-1!=["update","reset"].indexOf(e)&&!this.isUpdated())&&(("hide"!=e||"hidden"!=this.view)&&(("show"!=e||"hidden"==this.view)&&-1!=this.getFeaturesForFacet(this.facet).indexOf(e)))},e.exports=o},function(e,t,r){r(10);var i=r(5);function n(e,t,r,i){this.frame=e,this.index=t,this.parent=r,this.options=this.setOptions(i),this.originalValue=this.value()}n.prototype.depth=function(){return!!this.parent&&this.parent.depth()},n.prototype.property=function(){return!!this.parent&&this.parent.property()},n.prototype.subject=function(){return!!this.parent&&this.parent.subject()},n.prototype.subjectClass=function(){return!!this.parent&&this.parent.subjectClass()},n.prototype.type=function(){return!!this.frame&&this.frame.range},n.prototype.range=function(){return!!this.frame&&this.frame.range},n.prototype.value=function(){return!!this.frame&&this.frame.get()},n.prototype.isDocument=function(){return!!this.frame&&this.frame.isDocument()},n.prototype.currentViewer=function(){return this.viewerType},n.prototype.copy=function(e){var t=new n(e,!1,this.parent,this.options);return t.mode=this.mode,t.view=this.view,t},n.prototype.setFacet=function(e){this.facet=e,this.parent.redraw()},n.prototype.parentFacetChange=function(e){"page"==e&&this.setFacet("page"),"multiline"==e&&this.setFacet("line"),"line"==e&&this.setFacet("inline"),"summary"==e&&this.setFacet("icon")},n.prototype.getDefaultFacet=function(){return"page"==this.parent.currentFacet()||"multiline"==this.parent.currentFacet()?"line":"inline"},n.prototype.getAvailableFacets=function(){return Object.values(this.facets)},n.prototype.getDefaultFacets=function(){return{page:{label:"Full Page",value:"page",features:["facet","type","cardinality","body","status","facet","viewer","control"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},line:{label:"Single Line",value:"line",features:["facet","type","cardinality","body","status","facet","viewer","control"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},inline:{label:"Inline",value:"inline",features:["facet","type","cardinality","body","status","facet","viewer","control"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},label:{label:"Label",value:"label",features:["facet","status","body"],controls:[]},icon:{label:"Snippet",value:"icon",features:["facet","summary"],controls:[]}}},n.prototype.currentFacet=function(){return this.facet},n.prototype.setOptions=function(e){return i.decorateRenderer(e,this)},n.prototype.hideDisabledControls=function(){return this.hide_disabled_controls},n.prototype.setMode=function(e){this.mode=e,this.options.mode=e,this.viewerType=!1,this.redraw()},n.prototype.setView=function(e){this.view=e,this.options.view=e,this.redraw()},n.prototype.getAPIURL=function(e,t){if(this.parent&&this.parent.parent&&(client=this.parent.parent.getClient()))return client.dbURL()+e+"/"+t;return!1},n.prototype.getClient=function(){return!(!this.parent||!this.parent.parent)&&this.parent.parent.getClient()},n.prototype.getController=function(){return!(!this.parent||!this.parent.parent)&&this.parent.parent.getController()},n.prototype.DBURL=function(){return!!(this.parent&&this.parent.parent&&(client=this.parent.parent.getClient()))&&client.dbURL()},n.prototype.getEntityReference=function(e,t,r,i){if(this.parent&&this.parent.parent&&(client=this.parent.parent.getClient()))return client.getEntityReference(e,t,r,i)},n.prototype.badData=function(e){alert("bad data "+e)},n.prototype.setNew=function(){this.new_value=!0},n.prototype.isNew=function(){return!!this.new_value||this.parent.isNew()},n.prototype.isUpdated=function(){return this.frame.get()!=this.originalValue},n.prototype.getSummary=function(){var e={status:"ok"};this.isNew()?e.status="new":this.isUpdated()&&(e.status="updated");var t=this.frame.get();return t?t.length&&t.length>this.text_summary_length?e.long=t.substring(0,this.text_summary_length)+"... ("+t.length+" characters)":e.long=t:e.long="empty",e},n.prototype.cardControlAllows=function(e){if(this.parent.cframe.hasRestriction()){var t=this.parent.cframe.restriction,r=this.parent.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min&&r<=t.min)return!1}return!0},n.prototype.set=function(e){this.frame.set(e),this.viewer.redrawHeader(),this.parent.childUpdated()},n.prototype.delete=function(){this.parent.deletePropertyValue(this.value(),this.index),this.parent.parent.redraw()},n.prototype.load=function(e){this.parent.load(e)},n.prototype.hide=function(){this.setView("hidden")},n.prototype.show=function(){this.setView("full")},n.prototype.cancel=function(){this.reset(),this.setMode("view")},n.prototype.save=function(){this.parent&&this.parent.save()},n.prototype.reset=function(){this.set(this.originalValue),this.redraw()},n.prototype.clone=function(){var e=this.parent.addPropertyValue(this.value()),t=this.copy(e);t.setNew(),t.mode="edit",t.index=this.parent.values.length,this.parent.values.push(t),this.parent.childUpdated(),this.parent.redraw(),this.parent.goToValue(this.parent.values.length-1)},n.prototype.getViewerForValue=function(){return new HTMLDataViewer(this)},n.prototype.getFeaturesForFacet=function(e){return this.facets[e].features.concat(this.facets[e].controls)},n.prototype.showFeature=function(e){if(-1==this.features.indexOf(e)&&-1==this.controls.indexOf(e))return!1;if(-1!=["delete","clone","add"].indexOf(e)&&!this.cardControlAllows(e))return!1;return!(this.hideDisabledControls()&&-1!=["update","reset"].indexOf(e)&&!this.isUpdated())&&(("hide"!=e||"hidden"!=this.view)&&(("show"!=e||"hidden"==this.view)&&-1!=this.getFeaturesForFacet(this.facet).indexOf(e)))},n.prototype.render=function(e){return this.viewer=e||this.getViewerForValue(),this.viewer.render()},n.prototype.extract=function(){var e=this.value();if(""!==e&&!1!==e&&this.frame.isDatatypeProperty()){var t={"@value":this.value()};return this.frame.isString()?t["@language"]=this.frame.lang():t["@type"]=this.type(),t}return e},n.prototype.getValueHeaderViewer=function(){return new HTMLDataHeaderViewer},n.prototype.getDataValueViewer=function(){return this.viewerType||(this.viewerType=this.getViewerForDataValue()),i.getViewer(this.viewerType,this.viewerOptions)},n.prototype.getAvailableViewers=function(){var e=this.frame.getTypeShorthand();e||alert("here");var t=this.frame.ftype();return"view"==this.mode?i.getAvailableDataViewers(e,t):i.getAvailableDataEditors(e,t)},n.prototype.setViewer=function(e){this.viewerType=e,this.redraw()},n.prototype.getViewerForDataValue=function(){var e=this.frame.getTypeShorthand(),t=this.frame.ftype();return"edit"==this.mode?i.getEditorForDataFrame(e,t):i.getViewerForDataFrame(e,t)},n.prototype.redraw=function(){this.viewer.clear(),this.render(this.viewer)},e.exports=n},function(e,t,r){var i=r(11);function n(e){this.renderer=e,this.properties=[],this.headerViewer=e.getObjectHeaderViewer()}function s(){}n.prototype.render=function(){if(this.renderedDOM){var e=this.getObjectDOM();this.renderedDOM.replaceWith(e),this.renderedDOM=e}else this.renderedDOM=this.getObjectDOM();return this.renderedDOM.appendChild(this.getObjectIDMarker(this.renderer)),this.headerViewer&&(this.header=this.headerViewer.getAsDOM(this.renderer),this.header&&this.renderedDOM.appendChild(this.header)),this.body=this.getObjectBodyDOM(),this.body&&this.renderedDOM.appendChild(this.body),this.renderedDOM},n.prototype.getObjectDOM=function(){var e=this.renderer.getContentOrientation(),t="terminus-object-frame-"+e;if("page"==e)var r=document.createElement("div");else r=document.createElement("span");var i="terminus-object-frame "+t+(this.renderer.parent?"":" terminus-root-frame")+" terminus-object-frame-"+this.renderer.mode;return r.setAttribute("class",i),r.setAttribute("data-class",this.renderer.subjectClass()),r.setAttribute("data-id",this.renderer.subject()),r},n.prototype.getObjectBodyDOM=function(){var e=this.renderer.getContentOrientation(),t="terminus-object-properties-"+e;if("page"==e)var r=document.createElement("div");else r=document.createElement("span");for(var i in r.setAttribute("class","terminus-object-properties "+t),this.properties)this.properties[i]&&r.appendChild(this.properties[i]);return r},n.prototype.getFeatureDOM=function(e){if(this.hasFeatureViewer(e))return this.featureViewer[e](this.renderer,this)},n.prototype.redraw=function(){FrameHelper.removeChildren(this.renderedDOM),this.properties=[],this.renderer.render(this)},n.prototype.redrawHeader=function(){if(this.headerViewer&&this.header){var e=this.headerViewer.getAsDOM(this.renderer);this.header.replaceWith(e),this.header=e}},n.prototype.redrawBody=function(){if(this.body){var e=this.getObjectBodyDOM();this.body.replaceWith(e),this.body=e}},n.prototype.addRenderedProperty=function(e,t){this.properties[e]=t},n.prototype.clear=function(){FrameHelper.removeChildren(this.renderedDOM),this.properties={}},n.prototype.remove=function(){this.renderedDOM.parentNode.removeChild(this.renderedDOM)},n.prototype.goTo=function(e,t){i.goToName(e,t)},n.prototype.getObjectIDMarker=function(e){var t=document.createElement("a");t.setAttribute("class","terminus-object-idmarker");var r=FrameHelper.getShorthand(e.subject());if(r||(r=e.subject()),r){var i=r.split(":");i.length>1&&(r=i[1]),t.setAttribute("name",r)}return t},s.prototype.getAsDOM=function(e){var t,r,i=e.getContentOrientation(),n="terminus-object-frame-btn terminus-object-header-"+i;if("page"==i)var s=document.createElement("div");else s=document.createElement("span");if(s.setAttribute("class","terminus-object-header "+n),e.showFeature("facet")){var a=this.getObjectFacetDOM(e);a&&s.appendChild(a)}e.showFeature("label")&&((t=this.getObjectLabelDOM(e))&&s.appendChild(t));if(e.showFeature("id")){var o=this.getObjectIDDOM(e);o&&s.appendChild(o)}if(e.showFeature("type")){var u=this.getObjectTypeDOM(e);u&&s.appendChild(u)}e.showFeature("status")&&((t=this.getObjectStatusDOM(e))&&s.appendChild(t));if(e.showFeature("view")){var l=this.getViewPropertyDOM(e);l&&s.appendChild(l)}if(e.showFeature("viewer")){var c=this.getViewerSelectorDOM(e);c&&s.appendChild(c)}if(e.showFeature("add")){var d=this.getAddPropertyDOM(e);d&&s.appendChild(d)}e.showFeature("control")&&((r=this.getObjectControlsDOM(e))&&s.appendChild(r));e.showFeature("summary")&&((r=this.getObjectSummaryDOM(e))&&s.appendChild(r));return s.addEventListener("click",(function(){"block"==this.nextSibling.style.display||""==this.nextSibling.style.display?this.nextSibling.style.display="none":this.nextSibling.style.display="block"})),s},s.prototype.getObjectSummaryDOM=function(e){var t=e.getSummary();return i.getInfoboxDOM("object-summary",!1,t.long,t.status)},s.prototype.getObjectControlsDOM=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-object-controls"),e.showFeature("mode")){var r=i.getModeSelectorDOM("object",e);r&&t.appendChild(r)}if(e.showFeature("delete")){var n=this.getObjectDeleteDOM(e);n&&t.appendChild(n)}if(e.showFeature("clone")){var s=this.getObjectCloneDOM(e);s&&t.appendChild(s)}if(e.showFeature("reset")){var a=this.getObjectResetDOM(e);a&&t.appendChild(a)}if(e.showFeature("update")){var o=this.getObjectUpdateDOM(e);o&&t.appendChild(o)}if(e.showFeature("show")){var u=this.getObjectShowDOM(e);u&&t.appendChild(u)}if(e.showFeature("hide")){var l=this.getObjectHideDOM(e);l&&t.appendChild(l)}return t},s.prototype.getObjectFacetDOM=function(e){var t=e.getAvailableFacets();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-object-facet");var n=i.getSelectionControl("object-facet",t,e.currentFacet(),(function(t){t&&e.setFacet(t)}));return r.appendChild(n),r}return!1},s.prototype.getObjectLabelDOM=function(e){var t=e.getLabel();return!!t&&i.getInfoboxDOM("object-label",!1,t)},s.prototype.getObjectIDDOM=function(e){var t=e.subject(),r=!1;return"edit"==e.mode&&e.isNewDocument()?(e.idDOM&&(t=e.idDOM.value),(r=document.createElement("input")).setAttribute("class","terminus-object-id-input"),"_:"==t&&(t=""),e.idDOM=r):e.isNewDocument()&&"_:"==t&&(t="New Document"),i.getInfoboxDOM("object-id","ID",t,"Every fragment of data is identified by a unique URL",r)},s.prototype.getObjectTypeDOM=function(e){if("edit"==e.mode&&e.parent&&e.parent.isClassChoice()&&e.isNew()){var t=e.parent.getAvailableClassChoices();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-change-class");var n=document.createElement("span");n.setAttribute("class","terminus-property-change-label"),n.appendChild(document.createTextNode("Type")),r.appendChild(n);var s=i.getSelectionControl("change-class",t,e.subjectClass(),(function(t){t&&e.changeClass(t)}));return r.appendChild(s),r}}var a=e.getClassMeta(e.subjectClass()),o=e.subjectClass(),u="All objects have types, identified by a unique URL";return a&&(o=a.Label&&a.Label["@value"]?a.Label["@value"]:o,u=a.Comment&&a.Comment["@value"]?e.subjectClass()+" "+a.Comment["@value"]:u),i.getInfoboxDOM("object-type","Type",o,u)},s.prototype.getObjectStatusDOM=function(e){var t=e.getSummary();return i.getInfoboxDOM("status-"+t.status,!1,t.status,t.status)},s.prototype.getAddPropertyDOM=function(e){var t=e.getAddableProperties();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-object-add-property"),t.unshift({value:"",label:"Add New Property"});var n=!e.cardControlAllows("add")&&"Cardinality Rules Forbid Add",s=i.getSelectionControl("add-property",t,"",(function(t){t&&e.addNewProperty(t)}),n);return r.appendChild(s),r}return!1},s.prototype.getViewPropertyDOM=function(e){var t=e.getViewableProperties();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-object-view-property"),t.unshift({value:"",label:"View Property"});var n=i.getSelectionControl("view-property",t,"",(function(t){t&&e.goToProperty(t)}));return r.appendChild(n),r}return!1},s.prototype.getObjectDeleteDOM=function(e){var t=!e.cardControlAllows("delete")&&"Cardinality Rules Forbid Delete";return i.getActionControl("object","delete","Delete",(function(){e.delete()}),t)},s.prototype.getObjectCloneDOM=function(e){var t=!e.cardControlAllows("clone")&&"Cardinality Rules Forbid Clone";return i.getActionControl("object","clone","Clone",(function(){e.clone()}),t)},s.prototype.getObjectResetDOM=function(e){var t=!e.isUpdated()&&"Nothing to reset";return i.getActionControl("object","reset","Reset",(function(){e.reset()}),t)},s.prototype.getViewerSelectorDOM=function(e){var t=e.getAvailableViewers();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-object-viewer");var n=e.currentViewer(),s=i.getSelectionControl("object-viewer",t,n,(function(t){t&&e.setViewer(t)}));return r.appendChild(s),r}return!1},s.prototype.getObjectHideDOM=function(e){return i.getActionControl("object","hide","Hide",(function(){e.hide()}))},s.prototype.getObjectShowDOM=function(e){return i.getActionControl("object","show","Show",(function(){e.show()}))},s.prototype.getObjectUpdateDOM=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-object-update"),e.isNewDocument())var r=!1;else r=!e.isUpdated()&&"No changes";return t.appendChild(i.getActionControl("object","save","Save",(function(){e.save()}),r)),t},e.exports={HTMLObjectViewer:n,HTMLObjectHeaderViewer:s}},function(e,t,r){var i=r(0),n=r(7),s=r(6),a=r(13),o=r(1),u=r(2);function l(e){this.ui=e}function c(e){this.ui=e,this.wquery=new o(e.client,this.options)}function d(e){this.ui=e}l.prototype.getAsDOM=function(){var e=this,t=document.createElement("div");if(t.setAttribute("class","terminus-db-controller"),this.ui&&this.ui.db()){var r=document.createElement("div");r.setAttribute("class","terminus-field terminus-db-connection");var i=document.createElement("span");i.setAttribute("class","terminus-label terminus-db-label terminus-control-panel-label"),i.appendChild(document.createTextNode("DB "));var n=document.createElement("span");n.setAttribute("class","terminus-value terminus-db-value terminus-control-panel-value");var s=this.ui.client.connection.getDBRecord(),a=s&&s["rdfs:label"]&&s["rdfs:label"]["@value"]?s["rdfs:label"]["@value"]:this.ui.db();n.appendChild(document.createTextNode(a)),r.appendChild(i),r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","span3"),t.appendChild(o);var l,c,d=document.createElement("ul");if(d.setAttribute("class","terminus-ul"),o.appendChild(d),this.ui.showControl("db"))(l=this.getControlHTML("Database Home","fa-home")).classList.add("terminus-selected"),l.addEventListener("click",(function(){u.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),e.ui.showDBMainPage()})),d.appendChild(l);if(this.ui.showControl("delete_database"))(l=this.getControlHTML("Delete Database","fa-trash-alt")).addEventListener("click",(function(){e.ui.deleteDatabase()})),d.appendChild(l);if(this.ui.showControl("woql_select"))(l=this.getControlHTML("Query","fa-search")).addEventListener("click",(function(){u.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),e.ui.showQueryPage()})),d.appendChild(l);if(this.ui.showControl("woql_update"))(l=this.getControlHTML("Mapping","fa-file-import")).addEventListener("click",(function(){u.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),e.ui.showMappingPage()})),d.appendChild(l);if(this.ui.showControl("get_schema"))(l=this.getControlHTML("Schema","fa-cog")).addEventListener("click",(function(){u.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),e.ui.showSchemaPage()})),d.appendChild(l);if(this.ui.showControl("get_document")||this.ui.showControl("create_document"))(l=this.getControlHTML("Document","fa-book")).addEventListener("click",(function(){removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),e.showDocumentSubMenus()})),d.appendChild(l);if(this.ui.showControl("get_document"))(c=document.createElement("a")).setAttribute("class","terminus-nav-in-focus terminus-hide terminus-get-doc"),c.appendChild(e.getDocumentChooserDOM()),d.appendChild(c);if(this.ui.showControl("create_document"))(c=document.createElement("a")).setAttribute("class","terminus-nav-in-focus terminus-hide terminus-create-doc"),c.appendChild(e.getDocumentCreatorDOM()),d.appendChild(c)}return t},l.prototype.getControlHTML=function(e,t,r){var i=document.createElement("a");i.setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var n=document.createElement("i");n.setAttribute("class","terminus-menu-icon fa "+t),i.appendChild(n);var s=document.createTextNode(e);return i.appendChild(s),i},l.prototype.showDocumentSubMenus=function(){if(this.ui.showControl("get_document")){var e=document.getElementsByClassName("terminus-get-doc");e[0].classList.remove("terminus-hide"),e[0].classList.add("terminus-display")}if(this.ui.showControl("create_document")){var t=document.getElementsByClassName("terminus-create-doc");t[0].classList.remove("terminus-hide"),t[0].classList.add("terminus-display")}},l.prototype.getDocumentChooserDOM=function(){var e=this,t=document.createElement("div");t.setAttribute("class","terminus-document-chooser terminus-form-horizontal terminus-control-group terminus-choose-by-id");var r=document.createElement("span");r.setAttribute("class","terminus-document-chooser-label terminus-control-label terminus-control-label-padding");var n=document.createElement("input");n.setAttribute("class","terminus-form-value terminus-document-chooser terminus-doc-input-text"),n.setAttribute("placeholder","Enter Document ID");var s=document.createElement("button");if(s.setAttribute("class","terminus-control-button terminus-document-button terminus-doc-btn"),s.appendChild(document.createTextNode("View Document")),s.addEventListener("click",(function(){n.value&&e.ui.showDocument(n.value)})),this.ui.client.connectionConfig.platformEndpoint()&&this.ui.pluginAvailable("select2")){var o=i.unshorten("dcog:Document"),u=new a(this.ui,o);u.change=function(t){alert("changed to "+t),e.ui.showDocument(t)},u.view="label";var l=u.getAsDOM("terminus-class-select");jQuery(n).hide(),jQuery(s).hide();var c=document.createElement("a");c.setAttribute("href","#"),c.setAttribute("class","terminus-document-which-chooser"),c.appendChild(document.createTextNode("Choose by ID"));var d="label";jQuery(c).click((function(){"label"==d?(d="id",jQuery(n).show(),jQuery(s).show(),jQuery(l).hide(),jQuery(c).text("Choose by Label")):(d="label",jQuery(n).hide(),jQuery(s).hide(),jQuery(l).show(),jQuery(c).text("Choose by ID"))})),t.appendChild(l),t.prepend(c)}var p=document.createElement("div");return p.setAttribute("class","terminus-control-buttons terminus-document-chooser-buttons"),p.appendChild(s),t.appendChild(r),t.appendChild(n),t.appendChild(p),t},l.prototype.getDocumentCreatorDOM=function(){var e=this,t=document.createElement("div");t.setAttribute("class","terminus-document-creator terminus-form-horizontal terminus-control-group terminus-choose-by-id");var r=document.createElement("input");r.setAttribute("class","terminus-form-value terminus-document-creator terminus-doc-input-text"),r.setAttribute("placeholder","Enter Document Type");var n=document.createElement("button"),a=document.createElement("span");a.setAttribute("class","document-creator-label terminus-control-label terminus-control-label-padding"),n.setAttribute("class","terminus-control-button create-document-button terminus-doc-btn"),n.appendChild(document.createTextNode("Create Document")),n.addEventListener("click",(function(){r.value&&e.ui.showCreateDocument(r.value)})),document.createElement("div").setAttribute("class","terminus-control-buttons terminus-document-creator-buttons");var u=new o(this.ui.client,{}),l=u.getSubclassQueryPattern("Class","dcog/'Document'")+", not("+u.getAbstractQueryPattern("Class")+")",c=new s(this.ui,l);c.empty_choice="Create Document of Type",c.change=function(t){t&&(e.ui.showCreateDocument(t),c.choice=!1)};var d=c.getAsDOM("terminus-class-select"),p=document.createElement("a");p.setAttribute("href","#"),p.setAttribute("class","document-which-chooser document-chooser-a"),p.appendChild(document.createTextNode("Text Input"));var h=document.createElement("div");h.appendChild(p),t.appendChild(h);var m=document.createElement("span");m.setAttribute("class","create-document-list"),m.appendChild(d),t.appendChild(m);var f="select";return p.addEventListener("click",(function(){i.removeChildren(t),t.appendChild(h),"select"==f?(i.removeChildren(p),p.appendChild(document.createTextNode("Dropdown List")),t.appendChild(a),t.appendChild(r),t.appendChild(n),f="text"):(t.appendChild(m),i.removeChildren(p),p.appendChild(document.createTextNode("Text Input")),f="select")})),t},c.prototype.getAsDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-db-home-page");var r=document.createElement("div"),i=document.createElement("div");t.appendChild(i),i.setAttribute("class","terminus-banner");var n=document.createElement("span");n.setAttribute("class","terminus-home-heading"),n.appendChild(document.createTextNode("DB Home Page - ")),r.appendChild(n);var s=document.createElement("span");s.setAttribute("class","terminus-db-details");var a=document.createElement("span");a.setAttribute("class","terminus-db-details-value ");var o=this.ui.getDBRecord();if(o){var l=o["rdfs:label"]&&o["rdfs:label"]["@value"]?o["rdfs:label"]["@value"]:this.db;a.appendChild(document.createTextNode(l)),a.setAttribute("class","terminus-home-heading")}return s.appendChild(a),r.appendChild(s),i.appendChild(r),t.appendChild(u.getHeaderDom("Summary")),this.getDBSummary(t),t.appendChild(t.appendChild(u.getHeaderDom("List of Documents"))),this.getClassesDOM(t),t},c.prototype.getDbInfoBox=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-db-info-box");var i=document.createElement("div");i.appendChild(document.createTextNode(t.charAt(0).toUpperCase()+t.slice(1))),i.setAttribute("class","terminus-db-info"),r.appendChild(i);var n=document.createElement("i");switch(t){case"size":n.setAttribute("class","terminus-icon fa fa-balance-scale");var s=document.createTextNode("2 Gb");break;case"created":n.setAttribute("class","terminus-icon fa fa-calendar");s=document.createTextNode("16 July 2015");break;case"modified":n.setAttribute("class","terminus-icon fa fa-clock");s=document.createTextNode("22 Dec 2019")}r.appendChild(n),s&&r.appendChild(s),e.appendChild(r)},c.prototype.getDBSummary=function(e){var t=document.createElement("button");t.setAttribute("class","terminus-del-btn"),t.setAttribute("type","button"),t.innerHTML="Delete";var r=this.ui.getDBRecord();if(r)var i=r["rdfs:label"]&&r["rdfs:label"]["@value"]?r["rdfs:label"]["@value"]:this.db;var n=this;t.addEventListener("click",(function(){n.ui.deleteDatabase(i)})),e.appendChild(t);var s=document.createElement("span");s.setAttribute("class","terminus-db-info-box-display"),e.appendChild(s),this.getDbInfoBox(s,"size"),this.getDbInfoBox(s,"created"),this.getDbInfoBox(s,"modified")},c.prototype.getClassesDOM=function(e){var t=this.wquery.getClassesQuery(),r=this;return this.wquery.execute(t).then((function(t){if(r.result=new n(this.ui,t,{},{}),r.result){var i=r.result.getAsDOM();i?(i.setAttribute("class","terminus-margin-box"),e.appendChild(i)):e.appendChild(document.createTextNode("No results returned"))}})).catch((function(e){console.error(e),r.ui.showError(e)})),e},d.prototype.getAsDOM=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-db-creator");var r=document.createElement("h3");r.setAttribute("class","terminus-db-creator-title terminus-module-head"),r.appendChild(document.createTextNode("Create New Database")),t.appendChild(r);var i=document.createElement("div");i.setAttribute("class","terminus-form-border"),t.appendChild(i),(o=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-id-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("ID")),o.appendChild(u);var n=document.createElement("input");n.setAttribute("type","text"),n.setAttribute("class","terminus-form-value terminus-input-text"),n.setAttribute("placeholder","No spaces or special characters allowed in IDs"),o.appendChild(n),i.appendChild(o),(o=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-title-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("Title"));var s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("placeholder","A brief title for the Database"),s.setAttribute("class","terminus-form-value terminus-input-text"),o.appendChild(u),o.appendChild(s),i.appendChild(o),(o=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-title-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("Description")),o.appendChild(u);var a=document.createElement("textarea");a.setAttribute("class","terminus-textarea terminus-db-description terminus-textarea "),a.setAttribute("placeholder","A short text describing the database and its purpose"),o.appendChild(a),i.appendChild(o),(o=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-schema-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("Import Schema")),o.appendChild(u);var o,u,l=document.createElement("input");l.setAttribute("placeholder","Terminus DB URL"),l.setAttribute("type","text"),l.setAttribute("class","terminus-form-value terminus-form-url terminus-input-text"),o.appendChild(l),i.appendChild(o),(o=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-data-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("Import Data")),o.appendChild(u);var c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("placeholder","Terminus DB URL"),c.setAttribute("class","terminus-form-value terminus-form-url terminus-input-text"),o.appendChild(c),i.appendChild(o);var d=document.createElement("div");d.setAttribute("class","terminus-control-buttons");var p=document.createElement("button");p.setAttribute("class","terminus-control-button terminus-cancel-db-button terminus-btn"),p.appendChild(document.createTextNode("Cancel"));var h=document.createElement("button");h.setAttribute("class","terminus-control-button terminus-create-db-button terminus-btn"),h.appendChild(document.createTextNode("Create"));var m=this;return h.addEventListener("click",(function(){var e=function(){var e={};return e.id=n.value,e.title=s.value,e.description=a.value,e.schema=l.value,e.data=c.value,e}();m.ui.createDatabase(e)})),p.addEventListener("click",(function(){m.ui.showServerMainPage()})),d.appendChild(p),d.appendChild(h),i.appendChild(d),t},e.exports={TerminusDBViewer:c,TerminusDBController:l,TerminusDBCreator:d}},function(e,t,r){var i=r(0),n=r(1),s=r(4),a=r(7),o=r(24),u=r(26),l=r(3);function c(e,t){this.ui=e,this.options=t,this.meta={},this.init(),this.generator=!1,this.result=!1,this.wquery=new n(e.client,this.options),this.pman=new l,this.gentype=t&&t.generator?t.generator:"textbox",this.generators={textbox:{label:"Simple Text Box",value:"textbox"}},e.pluginAvailable("jqueryui")&&(this.generators.gbrowse={label:"Graph Browser",value:"gbrowse"}),this.loadGenerator()}c.prototype.hasGeneratorOptions=function(){return!1},c.prototype.changeGenerator=function(e){this.gentype!=e&&(this.gentype=e,this.loadGenerator(),this.redrawGenerator())},c.prototype.redrawGenerator=function(e){i.removeChildren(this.inputDOM),this.inputDOM.appendChild(this.getQueryButtonsDOM(e))},c.prototype.loadGenerator=function(){var e=this,t=function(t,r){e.query(t,r)};"textbox"==this.gentype?this.generator=new o(t,this,this.ui):"gbrowse"==this.gentype&&(this.generator=new u(t,this,this.ui))},c.prototype.init=function(){var e=new n(this.ui.client,this.options),t=e.getElementMetaDataQuery(),r=this;r.meta={},e.execute(t).then((function(e){if(new s(e,null,null).hasBindings(e))for(var t=0;t<e.bindings.length;t++){var i=e.bindings[t].Element;i&&void 0===r.meta[i]&&(r.meta[i]=e.bindings[t])}})).catch((function(e){console.error(e)}))},c.prototype.query=function(e,t,r){var n=this;i.removeChildren(this.resultDOM),this.wquery.execute(e).then((function(e){n.result=new a(n.ui,e,n.options,t);var r=n.result.getAsDOM(n.resultDOM);r&&n.resultDOM.appendChild(r)})).catch((function(e){console.error(e),n.ui.showError(e)}))},c.prototype.getResultViewDom=function(){this.resultDOM=document.createElement("div"),this.resultDOM.setAttribute("class","terminus-query-results")},c.prototype.getAsDOM=function(e){var t=document.createElement("div");return t.setAttribute("class","terminus-query-page"),this.hasGeneratorOptions()&&t.appendChild(this.getQueryCreatorChoiceDOM(e)),this.resultDOM=document.createElement("div"),this.resultDOM.setAttribute("class","terminus-query-results"),this.qTextBox=this.getQueryTextAreaDOM(e,t),this.buttonsDOM=document.createElement("div"),this.buttonsDOM.setAttribute("class","terminus-query-input"),this.buttonsDOM.appendChild(this.getQueryButtonsDOM(e,this.qTextBox)),t.appendChild(this.resultDOM),t.appendChild(this.buttonsDOM),t},c.prototype.getQueryCreatorChoiceDOM=function(){var e=document.createElement("select");for(var t in e.setAttribute("class","terminus-query-generator-selector"),this.generators){var r=this.generators[t],i=document.createElement("option");i.value=r.value?r.value:t;var n=r.label?r.label:t;i.appendChild(document.createTextNode(n)),e.appendChild(i)}var s=this;return e.addEventListener("change",(function(){s.changeGenerator(this.value)})),e},c.prototype.getQueryButtonsDOM=function(e,t){return this.generator.getAsDOM(e,t)},c.prototype.getQueryTextAreaDOM=function(e,t){return this.generator.getQueryTextAreaDOM(e,t)},e.exports=c},function(e,t,r){var i=r(0),n=r(6),s=r(25),a=r(13),o=r(2);function u(e,t,r){this.query=e,this.wquery=t.wquery,this.ui=r,this.datatable={},this.datatable.pageLength=5,this.datatable.start=0}u.prototype.gatherDatatableSettings=function(e,t){this.datatable.qTextDom=e,this.datatable.query=t,this.datatable.chosenValue=null},u.prototype.getQueryButtonGroups=function(e){var t=document.createElement("div");return t.setAttribute("class","terminus-query-group-row"),e.appendChild(t),t},u.prototype.qGroupQueries=function(e,t,r){var i=document.createElement("div");i.setAttribute("class","terminus-group-box");var n=document.createElement("div");n.setAttribute("class","terminus-group"),i.appendChild(n);var s=document.createElement("div");s.setAttribute("class","terminus-group-header"),n.appendChild(s);var a=document.createElement("h3");a.appendChild(document.createTextNode(t)),s.appendChild(a);var o=document.createElement("h5");return o.setAttribute("class","terminus-group-sub-title"),o.appendChild(document.createTextNode(r)),s.appendChild(o),e.appendChild(i),i},u.prototype.setDatatableSettings=function(e){var t=e.replace(/\s/g,"");if(-1!==t.indexOf("limit(")){var r=t.substring("limit(".length,t.length),i=r.substr(0,r.indexOf(","));this.datatable.pageLength=i,this.datatable.start=0}},u.prototype.getQueryTextAreaDOM=function(e,t){var r=document.createElement("div");r.setAttribute("class","terminus-query-textbox-input");var i=document.createElement("H3");i.appendChild(document.createTextNode("Enter Query")),i.setAttribute("class","terminus-full-css-margin-top terminus-module-head"),r.appendChild(i);var n=document.createElement("textarea");n.setAttribute("class","terminus-query-box"),n.setAttribute("placeholder","Enter new query or load queries from example buttons provided below ..."),n.setAttribute("style","min-width: 400px; min-height: 60px;"),e&&(n.value=e),r.appendChild(n),o.stylizeEditor(this.ui,n,"query","javascript");var s=this,a=document.createElement("button");return a.setAttribute("class","terminus-control-button terminus-query-btn"),a.appendChild(document.createTextNode("Send Query")),a.addEventListener("click",(function(){s.ui.pluginAvailable("datatables")?(s.gatherDatatableSettings(n,s.datatable.query),s.setDatatableSettings(n.value),s.query(n.value,s.datatable)):s.query(n.value)})),r.appendChild(a),t.appendChild(r),n},u.prototype.getAsDOM=function(e,t){var r=document.createElement("div");r.setAttribute("class","terminus-query-textbox-input");var u=document.createElement("div");u.setAttribute("class","terminus-control-buttons"),r.appendChild(u);var l=document.createElement("div");l.setAttribute("class","terminus-query-examples terminus-db-list-title ");var c=document.createElement("H3");c.appendChild(document.createTextNode("Load query from examples")),c.setAttribute("class","terminus-full-css-margin-top terminus-module-head"),l.appendChild(c);var d=this.getQueryButtonGroups(l);l.appendChild(d);var p=this.qGroupQueries(d,"Schema Queries","descr blah blah"),h=document.createElement("button");h.appendChild(document.createTextNode("Show All Classes")),h.setAttribute("class","terminus-control-button terminus-query-btn terminus-query-btn-size"),h.addEventListener("click",(function(){o.deleteStylizedEditor(g.ui,t),t.value=g.wquery.getClassMetaDataQuery(null,g.datatable.pageLength,g.datatable.start),o.stylizeEditor(g.ui,t,"query","javascript"),g.ui.pluginAvailable("datatables")?(g.gatherDatatableSettings(t,"Show_All_Classes"),g.query(t.value,g.datatable)):g.query(t.value)}));var m=document.createElement("button");m.appendChild(document.createTextNode("Show Document Classes")),m.setAttribute("class","terminus-control-button terminus-query-btn terminus-query-btn-size"),m.addEventListener("click",(function(){o.deleteStylizedEditor(g.ui,t),t.value=g.wquery.getClassMetaDataQuery(g.wquery.getSubclassQueryPattern("Class","dcog/'Document'")+", not("+g.wquery.getAbstractQueryPattern("Class")+")",g.datatable.pageLength,g.datatable.start),o.stylizeEditor(g.ui,t,"query","javascript"),g.ui.pluginAvailable("datatables")?(g.gatherDatatableSettings(t,"Show_Document_Classes"),g.query(t.value,g.datatable)):g.query(t.value)}));var f=document.createElement("button");f.appendChild(document.createTextNode("Show All Schema Elements")),f.setAttribute("class","terminus-control-button terminus-query-btn terminus-query-btn-size");var g=this;f.addEventListener("click",(function(){o.deleteStylizedEditor(g.ui,t),t.value=g.wquery.getElementMetaDataQuery(null,g.datatable.pageLength,g.datatable.start),o.stylizeEditor(g.ui,t,"query","javascript"),g.ui.pluginAvailable("datatables")?(g.gatherDatatableSettings(t,"Show_All_Schema_Elements"),g.query(t.value,g.datatable)):g.query(t.value)}));var v=document.createElement("button");v.appendChild(document.createTextNode("Show All Documents")),v.setAttribute("class","terminus-control-button terminus-query-btn terminus-query-btn-size"),v.addEventListener("click",(function(){o.deleteStylizedEditor(g.ui,t),t.value=g.wquery.getAllDocumentQuery(null,g.datatable.pageLength,g.datatable.start),o.stylizeEditor(g.ui,t,"query","javascript"),g.ui.pluginAvailable("datatables")?(g.gatherDatatableSettings(t,"Show_All_Documents"),g.query(t.value,g.datatable)):g.query(t.value)}));var y=document.createElement("button");y.appendChild(document.createTextNode("Show All Data")),y.setAttribute("class","terminus-control-button terminus-query-btn terminus-query-btn-size"),y.addEventListener("click",(function(){o.deleteStylizedEditor(g.ui,t),t.value=g.wquery.getEverythingQuery(null,g.datatable.pageLength,g.datatable.start),o.stylizeEditor(g.ui,t,"query","javascript"),g.ui.pluginAvailable("datatables")?(g.gatherDatatableSettings(t,"Show_All_Data"),g.query(t.value,g.datatable)):g.query(t.value)}));var b=document.createElement("button");b.appendChild(document.createTextNode("Show All Properties")),b.setAttribute("class","terminus-control-button terminus-query-btn terminus-query-btn-size"),b.addEventListener("click",(function(){o.deleteStylizedEditor(g.ui,t),t.value=g.wquery.getPropertyListQuery(null,g.datatable.pageLength,g.datatable.start),o.stylizeEditor(g.ui,t,"query","javascript"),g.ui.pluginAvailable("datatables")?(g.gatherDatatableSettings(t,"Show_All_Properties"),g.query(t.value,g.datatable)):g.query(t.value)}));var C=this.qGroupQueries(d,"Data Queries","descr blah blah"),w=new n(this.ui);w.empty_choice="View data of type...";g=this;w.change=function(e){e&&(o.deleteStylizedEditor(g.ui,t),t.value=g.wquery.getDataOfChosenClassQuery(e,g.datatable.pageLength,g.datatable.start),o.stylizeEditor(g.ui,t,"query","javascript"),g.ui.pluginAvailable("datatables")?(g.gatherDatatableSettings(t,"Show_Data_Class"),g.datatable.chosenValue=e,g.query(t.value,g.datatable)):g.query(t.value))};var D=w.getAsDOM("terminus-query-select"),A=new s(this.ui);A.empty_choice="Show data for property...";g=this;A.change=function(e){e&&(o.deleteStylizedEditor(g.ui,t),t.value=g.wquery.getDataOfChosenPropertyQuery(e,g.datatable.pageLength,g.datatable.start),o.stylizeEditor(g.ui,t,"query","javascript"),g.ui.pluginAvailable("datatables")?(g.gatherDatatableSettings(t,"Show_Property_Class"),g.datatable.chosenValue=e,g.query(t.value,g.datatable)):g.query(t.value))};var E=this.qGroupQueries(d,"Document Queries","descr blah blah"),x=A.getAsDOM(),O=new a(this.ui);O.change=function(e){o.deleteStylizedEditor(g.ui,t),t.value=g.wquery.getDocumentQuery(e,g.datatable.pageLength,g.datatable.start),o.stylizeEditor(g.ui,t,"query","javascript"),g.ui.pluginAvailable("datatables")?(g.gatherDatatableSettings(t,"Show_Document_Info_by_Id"),g.datatable.chosenValue=e,g.query(t.value,g.datatable)):g.query(t.value)};var M=O.getAsDOM("terminus-query-select"),T=new a(this.ui,i.unshorten("dcog:Document"));T.view="label";var S=T.getAsDOM("terminus-query-select"),j=document.createElement("p");j.appendChild(S),p.appendChild(f);var P=document.createElement("BR");p.appendChild(P),p.appendChild(h);P=document.createElement("BR");p.appendChild(P),p.appendChild(m);P=document.createElement("BR");p.appendChild(P),p.appendChild(b);P=document.createElement("BR");p.appendChild(P),r.appendChild(l),C.appendChild(D),C.appendChild(x);P=document.createElement("BR");return C.appendChild(P),C.appendChild(y),E.appendChild(M),E.appendChild(v),E.appendChild(j),r},e.exports=u},function(e,t,r){var i=r(0),n=r(1);TerminusPropertyChooser=function(e,t){this.ui=e,this.choice=!1,this.filter=t},TerminusPropertyChooser.prototype.setRoot=function(e){this.root=e},TerminusPropertyChooser.prototype.setFilter=function(e){this.filter=e},TerminusPropertyChooser.prototype.change=function(e){alert("Need to specify Property chooser function ("+e+")")},TerminusPropertyChooser.prototype.getAsDOM=function(){var e=document.createElement("span");e.setAttribute("Class","terminus-Class-chooser");var t=document.createElement("select");t.setAttribute("Class"," terminus-type-select terminus-query-select");var r=this;t.addEventListener("change",(function(){this.value!=this.choice&&(this.choice=this.value,r.change(this.value))})),e.appendChild(t);var i=new n(this.ui.client),s=i.getPropertyListQuery(this.filter);r=this;return i.execute(s).then((function(e){for(var i=r.getResultsAsOptions(e),n=0;n<i.length;n++)t.appendChild(i[n])})),e},TerminusPropertyChooser.prototype.getResultsAsOptions=function(e){var t=[];if(this.empty_choice){var r=document.createElement("option");r.setAttribute("Class","terminus-class-choice terminus-empty-choice"),r.value="",r.appendChild(document.createTextNode(this.empty_choice)),t.push(r)}if(e.bindings)for(var n=[],s=0;s<e.bindings.length;s++)if(e.bindings[s].Property&&-1==n.indexOf(e.bindings[s].Property)){n.push(e.bindings[s].Property);var a=document.createElement("option");a.setAttribute("Class","terminus-class-choice"),a.value=e.bindings[s].Property;var o=e.bindings[s].Label;o&&"unknown"!=o||(o=i.labelFromURL(e.bindings[s].Property)),o["@value"]&&(o=o["@value"]),a.appendChild(document.createTextNode(o)),t.push(a)}return t},e.exports=TerminusPropertyChooser},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r(1);var n=r(27);function s(e,t,r){this.query=e,this.wquery=t.wquery,this.slider=new n}function a(e,t,r){this.myowner=e,this.model=t,this.config=r,this.default_viewport=r&&r.view?r.view:"graph",this.current_viewport=!1,this.viewports={},this.viewportDOMs={},this.browserid=randomString(8),this.query_timeslice=!1,this.current_result=!1,this.focus_node=!1,this.show_filter=!1,this.entity_count=!1,this.config.default_display={icon:"fas fa-question",icon_unicode:"",color:[255,125,125],forward:"Unknown",backward:"Unknown",text:"Unknown"}}s.prototype.getAsDOM=function(e){var t=document.createElement("div");return t.setAttribute("class","terminus-query-textbox-input"),t.appendChild(document.createTextNode("afsdfa")),t.appendChild(this.slider.getSliderDOM()),t},a.prototype.init=function(){this.filter=new DCOGQueryFilter(this,this.config,this.model),this.slider=new DCOGTimePicker(this,this.config)},a.prototype.getViewportAsDOM=function(){var e=document.createElement("div");for(var t in e.setAttribute("class","dcog-viewport"),this.viewports)void 0===this.viewportDOMs[t]&&(this.viewportDOMs[t]=this.viewports[t].getAsDOM()),e.appendChild(this.viewportDOMs[t]);return e},a.prototype.newQuery=function(e,t,r){e=e||this.getQuery();var i=this,n=this.setBusy("Fetching Results from Data Chemist Server");this.untell(),this.model.client.query(e,(function(r){if(i.clearBusy(n),i.current_result=new DCOGQueryResult(r,e),i.current_result.containsData()){if(i.setViewportData(i.current_result),i.focus_node)var s=i.current_result.getNodeOrFringe(e.focus_node);else if(e.from_node)s=i.current_result.getNodeOrFringe(e.from_node);else i.entity_count=r.nodeCount,i.myowner.fillInfoBoxes();s&&i.nodeSelected(s),i.rebuildController()}else i.tellUser("No results returned","warning");"function"==typeof t&&t(i.current_result)}),(function(e){i.tellUser({title:"Results Overload",body:"Your query was terminated because it would have returned too many records - please reduce the depth of your search or add extra constraints and try again"},"error"),i.clearBusy(n)}))},a.prototype.moreResults=function(e,t){var r=this.setBusy("Fetching Results from Data Chemist Server");this.focus_node=e;var i=this;this.untell(),this.model.client.query(this.getQuery(),(function(e){i.clearBusy(r),i.current_result.addMoreResults(e,i.getQuery()),i.updateViewportData(i.current_result),i.rebuildController(),"function"==typeof t&&t(i.current_result)}),(function(e){i.tellUser({title:"Results Overload",body:"Your query was terminated because it would have returned too many records - please reduce the depth of your search or add extra constraints and try again"},"error"),i.clearBusy(r)}))},a.prototype.setBusy=function(e){var t=showBusyOverlay(this.myowner.insert_patterns.browser,e);return this.busy=t,t},a.prototype.getQuery=function(e){var t={};return this.focus_node?t.focus_node=this.focus_node:this.from_node&&this.to_node&&(t.source_node=this.from_node,t.target_node=this.to_node),this.filter&&this.filter.current_relationships&&(t.relationships=this.filter.current_relationships),this.filter&&this.filter.current_depth&&(t.max_path_length=this.filter.current_depth),this.filter&&this.filter.current_threshold&&this.filter.current_threshold>0&&-1!=t.relationships.indexOf("share")&&(t.filters={shareholding_threshold:this.filter.current_threshold}),this.slider&&this.slider.server_side&&this.slider.timeslice?this.query_timeslice=this.slider.timeslice:this.query_timeslice=!1,this.query_timeslice&&(t.date=this.query_timeslice),t},a.prototype.setView=function(e){if(e!=this.current_viewport)for(var t in this.current_viewport=e,this.viewports)t!=this.current_viewport?(this.viewports[t].hibernate,jQuery(this.viewportDOMs[t]).hide()):("function"==typeof this.viewports[t].wake&&this.viewports[t].wake(),jQuery(this.viewportDOMs[t]).show()),this.rebuildController()},a.prototype.initData=function(e){this.current_viewport=e||this.default_viewport;var t=this,r=this.getQuery();r?this.newQuery(r,(function(e){if(t.focus_node){var r=e.getNodeOrFringe(t.focus_node);r&&r.groupID&&t.nodeSelected(r)}for(var i in t.viewports)"function"==typeof t.viewports[i].initDOM&&t.viewports[i].initDOM(t.viewportDOMs[i]),i!=t.current_viewport?jQuery(t.viewportDOMs[i]).hide():"function"==typeof t.viewportDOMs[i].wake&&t.viewportDOMs[i].wake()})):alert("No query string - must set filter and focus node before initialisation")},a.prototype.setViewportData=function(e){for(var t in this.viewports)this.viewports[t].setData(e,t==this.current_viewport)},a.prototype.updateViewportData=function(e){for(var t in this.viewports)this.viewports[t].updateData(e,t==this.current_viewport)},a.prototype.setViewportFilter=function(e){for(var t in this.viewports)"function"==typeof this.viewports[t].setFilter?this.viewports[t].setFilter(e,t==this.current_viewport):alert(t+" does not implement set filter browser function")},a.prototype.nodeSelected=function(e){this.focus_node!=e.id&&(this.focus_node=e.id);var t=this.getNodeInfoSections(e);this.myowner.nodeSelected(e,t)},a.prototype.getNodeInfoSections=function(e){return[]},a.prototype.followNode=function(e,t){this.moreResults(e.id,t)},a.prototype.setFocusNode=function(e){this.focus_node=e,this.newQuery(this.getQuery())},a.prototype.setPathSearch=function(e,t){this.focus_node=!1,this.from_node=e,this.to_node=t,this.newQuery(this.getQuery())},a.prototype.changeTimeSlice=function(e,t,r){this.current_result&&(this.current_result.isTemporalSuperset(this.query_timeslice,e,t)?(this.current_result.setFilterTimeslice(e,t),this.setViewportFilter(this.current_result)):(this.current_result.setQueryTimeslice(e,t),this.query_timeslice=this.current_result.getTimeslice(),this.newQuery(this.getQuery())))},a.prototype.getControllerAsDOM=function(){var e=document.createElement("div");return e.setAttribute("class","dcog-browser-controller-wrapper"),e.appendChild(this.getControllerViewButtonsAsDOM()),e.appendChild(this.slider.getSliderDOM()),this.toolboxDOM=this.getUserToolboxDOM(),e.appendChild(this.toolboxDOM),this.rebuildController(),e.appendChild(this.filterDOM),e.appendChild(this.legendDOM),e},a.prototype.getControllerFilterAsDOM=function(){if(this.filterDOM)jQuery(this.filterDOM).empty();else{var e=document.createElement("div");e.setAttribute("class","dcog-browser-controller-filter"),this.filterDOM=e}var t=this.filter.getRelationshipFilterAsDOM(),r=this.filter.getQueryParameterDOM(),i=this.slider.getSliderTypeDOM();r.appendChild(i);var n=this,s=document.createElement("button");return s.setAttribute("class","dcog-filter-submit dcog-dashboard-button"),s.appendChild(document.createTextNode("Go")),s.addEventListener("click",(function(){n.newQuery()})),this.filterDOM.appendChild(t),this.filterDOM.appendChild(r),r.appendChild(s),this.show_filter||jQuery(this.filterDOM).hide(),this.filterDOM},a.prototype.toggleFilterVisibility=function(){this.show_filter?jQuery(this.filterDOM).hide():jQuery(this.filterDOM).show(),this.show_filter=!this.show_filter},a.prototype.rebuildController=function(){this.getControllerFilterAsDOM(),this.legendDOM=this.getLegendAsDOM()},a.prototype.untell=function(){jQuery(this.userMessageDOM).empty()},a.prototype.tellUser=function(e,t){if(void 0===e)jQuery(this.userMessageDOM).empty();else{t=t||"info";var r=document.createElement("span");r.setAttribute("class","dcog-browser-message dcog-message-"+t),"object"==i(e)&&(e="<b>"+e.title+"</b> "+e.body),r.innerHTML=e,jQuery(this.userMessageDOM).html(r)}},a.prototype.clearBusy=function(e){(e=e||this.busy)&&jQuery(e).remove()},a.prototype.getUserToolboxDOM=function(){var e=document.createElement("div");e.setAttribute("class","dcog-browser-toolbox");var t=document.createElement("span");t.setAttribute("class","dcog-browser-message-container"),this.userMessageDOM=t,e.appendChild(t);var r=document.createElement("span");r.setAttribute("class","dcog-browser-tools");var i=this,n=document.createElement("i");return n.setAttribute("class","fas fa-cog dcog-browser-tool-icon"),n.addEventListener("click",(function(){i.toggleFilterVisibility()})),r.appendChild(n),e.appendChild(r),e},a.prototype.getControllerViewButtonsAsDOM=function(){var e=this,t=[],r=document.createElement("div");for(var i in r.setAttribute("class","dcog-browser-view-buttons"),this.viewports){var n=document.createElement("button");n.appendChild(document.createTextNode(i));var s=document.createElement("i");"graph"==i?s.setAttribute("class","dcog-viewer-icon fas fa-code-branch"):"map"==i?s.setAttribute("class","dcog-viewer-icon fas fa-globe"):"table"==i?s.setAttribute("class","dcog-viewer-icon fas fa-list"):"api"==i&&s.setAttribute("class","dcog-viewer-icon fas fa-robot"),n.appendChild(s),n.setAttribute("id",this.browserid+i),i==this.current_viewport?n.setAttribute("class","selected"):n.setAttribute("class","not-selected"),n.addEventListener("click",(function(){for(var r=0;r<t.length;r++)t[r].setAttribute("class","not-selected");this.setAttribute("class","selected"),e.setView(this.id.substring(e.browserid.length))})),t.push(n),r.appendChild(n)}return r},a.prototype.getLegendAsDOM=function(){if(this.legendDOM?jQuery(this.legendDOM).empty():(this.legendDOM=document.createElement("div"),this.legendDOM.setAttribute("class","dcog-viewport-legend")),"function"==typeof this.viewports[this.current_viewport].legend){var e=this.viewports[this.current_viewport].legend();e?(this.legendDOM.appendChild(e),jQuery(this.legendDOM).show()):jQuery(this.legendDOM).hide()}return this.legendDOM},a.prototype.getNodeRelativeSize=function(e){var t=this.getNodeDisplaySettings(e);return t.size?t.size:1},a.prototype.getLineWidth=function(e){var t=this.getNodeDisplaySettings(e);return t.size?t.size:4},a.prototype.getModelElementDisplaySettings=function(e){return void 0!==this.config.modeldisplay[e]?jQuery.extend(!0,{},this.config.modeldisplay[e]):(alert(e),jQuery.extend(!0,{},this.config.default_display))},a.prototype.isBidirectional=function(e){if(e.typeID){var t=this.config.modeldisplay[e.typeID];if(t){if(t.forward&&t.backward){var r=this.current_result.getNodeOrFringe(e.source),i=this.current_result.getNodeOrFringe(e.target);if(i&&r&&i.groupID&&r.groupID&&-1==r.groupID.indexOf("Person")&&-1==i.groupID.indexOf("Person"))return!0}}else;}return!1},a.prototype.getRelationshipClass=function(e){return e},a.prototype.getGraphElementDisplaySettings=function(e){if(e){var t=this.getNodeDisplaySettings(e);return t||(t=this.getLinkDisplaySettings(e)),t}return!1},a.prototype.getNodeDisplaySettings=function(e){return void 0!==e.groupID&&this.getModelElementDisplaySettings(e.groupID)},a.prototype.getLinkDisplaySettings=function(e){return void 0!==e.typeID&&this.getModelElementDisplaySettings(e.typeID)},a.prototype.getElementIcon=function(e){var t=this.getGraphElementDisplaySettings(e);return t||(t=this.config.default_display),t.icon},a.prototype.getClassIcon=function(e){var t=this.getModelElementDisplaySettings(e);return t||(t=this.config.default_display),t.icon},a.prototype.getElementIconUnicode=function(e){var t=this.getGraphElementDisplaySettings(e);return t||(t=this.config.default_display),t.icon_unicode},a.prototype.getElementColour=function(e){var t=this.getGraphElementDisplaySettings(e);return t||(t=this.config.default_display),jQuery.extend(!0,[],t.color)},a.prototype.setUpIPGSpecials=function(){this.config.modeldisplay={};var e=[{icon:"fas fa-caret-right",icon_unicode:"",size:6,color:[125,125,255]},{icon:"fab fa-creative-commons-by",icon_unicode:"",size:5,color:[255,125,125]},{icon:"fas fa-handshake",color:[125,255,125],size:7,icon_unicode:""},{icon:"fas fa-creative-commons-nc-eu",icon_unicode:"",size:4,color:[50,50,50]},{icon:"fas fa-sitemap",icon_unicode:"",size:8,color:[125,255,255]}],t=[{icon:"fas fa-users",size:1,icon_unicode:"",color:[255,125,125]},{icon:"fas fa-industry",size:1.5,icon_unicode:"",color:[100,125,255]},{icon:"fas fa-user",size:.9,icon_unicode:"",color:[125,255,125]},{icon:"fas fa-building",icon_unicode:"",size:1.4,color:[125,125,225]},{icon:"fas fa-briefcase",icon_unicode:"",color:[125,125,200],size:1.2},{icon:"fas fa-user-astronaut",icon_unicode:"",size:.9,color:[125,220,125]}],r=0;for(var i in this.relationships){r>=e.length&&(r=0),(s=e[r]).forward=this.relationships[i].label,this.config.modeldisplay[i]=s,r++}for(var n in r=0,this.entities){var s;r>=e.length&&(r=0),(s=t[r]).text=this.entities[n].label,this.config.modeldisplay[n]=s,r++}},e.exports=s},function(e,t){WOQLTimePicker=function(e){this.type=e&&e.slidertype?e.slidertype:"range",this.timeslice=!1;this.change=e&&e.change?e.change:function(e,t,r){alert("changed to: (from) "+e+" ... (to) "+t+" ("+r+")")},this.years=e&&e.years?e.years:20,this.server_side=!1},WOQLTimePicker.prototype.toggleServerSideFiltering=function(e){this.server_side=!this.server_side},WOQLTimePicker.prototype.getSliderParameters=function(e){start=0,end=this.years;var t=this,r={min:start,max:end,value:e,slide:function(e,r){var i=t.tickToTime(r.value);t.changeTimeSlice(i)}},i={range:!0,min:start,max:end,values:e,slide:function(e,r){t.changeTimeSlice(t.tickToTime(r.values[0]),t.tickToTime(r.values[1]))}};return"range"==this.type?i:r},WOQLTimePicker.prototype.changeTimeSlice=function(e,t,r){"range"==this.type?(this.timeslice={},this.timeslice.from=e,this.timeslice.to=t,this.change(e,t,this.server_side)):(this.timeslice=e,this.change(e,!1,this.server_side)),r||this.showCurrentPick()},WOQLTimePicker.prototype.tickToTime=function(e){if(0==e)var t=0;else{var r=31622400*(this.years-e);t=(new Date).getTime()/1e3-r}return t},WOQLTimePicker.prototype.timeToTick=function(e){if(e){var t=new Date(1e3*e).getFullYear(),r=(new Date).getFullYear();return this.years-(r-t)}return 0},WOQLTimePicker.prototype.changeSliderType=function(e){var t,r;"point"==this.type&&"range"==e?this.timeslice&&(t=this.timeslice,r=this.timeslice):"range"==this.type&&"point"==e&&(this.timeslice?(t=(0!=this.timeslice.from||0!=this.timeslice.to)&&(0==this.timeslice.from?this.timeslice.to:0==this.timeslice.to?this.timeslice.from:(this.timeslice.from+this.timeslice.to)/2),r=!1):t=0),this.type=e,this.changeTimeSlice(t,r,!0),this.updateSliderDOM()},WOQLTimePicker.prototype.getSliderTypeDOM=function(){var e=document.createElement("span");e.setAttribute("class","terminus-parameter");var t=document.createElement("label");t.appendChild(document.createTextNode("Dates")),e.appendChild(t);var r=this,i=document.createElement("select"),n=document.createElement("option");n.value="",n.appendChild(document.createTextNode("None")),""==this.type&&n.setAttribute("selected","selected"),i.appendChild(n),(n=document.createElement("option")).value="point",n.appendChild(document.createTextNode("Point")),"point"==this.type&&n.setAttribute("selected","selected"),i.appendChild(n),(n=document.createElement("option")).value="range",n.appendChild(document.createTextNode("Range")),"range"==this.type&&n.setAttribute("selected","selected"),i.appendChild(n);r=this;i.addEventListener("change",(function(){this.value!=r.type&&r.changeSliderType(this.value)})),e.appendChild(i);var s=document.createElement("input");s.setAttribute("type","checkbox");var a=this.browserid+"-ssp";this.server_side&&s.setAttribute("checked",!0);r=this;s.addEventListener("change",(function(){r.toggleServerSideFiltering()}));var o=document.createElement("label");return o.setAttribute("for",a),o.appendChild(document.createTextNode("Server Side")),e.appendChild(o),e.appendChild(s),e},WOQLTimePicker.prototype.updateSliderDOM=function(){this.slideDOM=this.getSliderDOM()},WOQLTimePicker.prototype.getSliderDOM=function(e,t){if(this.slideDOM?jQuery(this.slideDOM).empty():(this.slideDOM=document.createElement("div"),this.slideDOM.setAttribute("class","terminus-controller-slider")),""==this.type)return this.changeTimeSlice(!1),this.slideDOM;var r=document.createElement("div");r.setAttribute("class","terminus-controller-slider-panel terminus-controller-slider-topaxis"),"point"==this.type?(this.curdate=document.createElement("span"),this.curdate.setAttribute("class","terminus-slider-current terminus-slider-current-date"),r.appendChild(this.curdate)):"range"==this.type&&(this.cursdate=document.createElement("span"),this.cursdate.setAttribute("class","terminus-slider-current terminus-slider-current-date-start"),r.appendChild(this.cursdate),this.curedate=document.createElement("span"),this.curedate.setAttribute("class","terminus-slider-current terminus-slider-current-date-end"),r.appendChild(this.curedate)),this.slideDOM.appendChild(r),this.showCurrentPick();var i=document.createElement("span");i.setAttribute("class","terminus-controller-slider-label terminus-controller-slider-startlabel"),this.slideDOM.appendChild(i);var n=document.createElement("div");n.setAttribute("class","terminus-controller-slider-payload"),this.slideDOM.appendChild(n);var s=document.createElement("span");s.setAttribute("class","terminus-controller-slider-label terminus-controller-slider-endlabel"),this.slideDOM.appendChild(s),s.appendChild(this.getSliderAxisDOM());var a=this.getSliderParameters(this.getTimesliceAsTicks());return jQuery(n).slider(a),this.slideDOM},WOQLTimePicker.prototype.getTimesliceAsTicks=function(){if(this.timeslice)if("range"==this.type){vtf=this.timeslice.from?this.timeToTick(this.timeslice.from):0,vtt=this.timeslice.to?this.timeToTick(this.timeslice.to):0;var e=[vtf,vtt]}else e=this.timeToTick(this.timeslice);else e="range"==this.type?[0,this.years]:0;return e},WOQLTimePicker.prototype.showCurrentPick=function(){if("range"==this.type){if(this.timeslice.from)e=new Date(1e3*this.timeslice.from).getFullYear();else var e=(new Date).getFullYear()-this.years;if(this.cursdate.innerHTML=e,this.adjustOffset(this.cursdate,this.timeslice.from),this.timeslice.to)t=new Date(1e3*this.timeslice.to).getFullYear();else var t=(new Date).getFullYear();t!=e?(this.curedate.innerHTML=t,this.adjustOffset(this.curedate,this.timeslice.to,!0)):this.curedate.innerHTML=""}else{if(this.timeslice)e=new Date(1e3*this.timeslice).getFullYear();else e="off";this.curdate.innerHTML=e,this.adjustOffset(this.curdate,this.timeslice)}},WOQLTimePicker.prototype.adjustOffset=function(e,t,r){var i=this.timeToTick(t),n=(50+(this.slideDOM.offsetWidth?this.slideDOM.offsetWidth:0))/(this.years+1);if(r){if(i)var s=(this.years-i)*n-25;else s=-25;e.setAttribute("style","margin-right: "+s+"px")}else{s=n*i-25;e.setAttribute("style","margin-left: "+s+"px")}},WOQLTimePicker.prototype.getSliderAxisDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-slider-axis-wrapper");for(var t=(new Date).getFullYear(),r=t%5,i=[],n=this.years;n>0;n-=5){var s=t-n-r+5;i.push(s)}for(n=0;n<i.length;n++){var a=document.createElement("label");a.setAttribute("class","terminus-axis-label"),a.innerHTML="<div class='terminus-tick'>|</div>"+i[n],e.appendChild(a)}return ndom=document.createElement("label"),ndom.setAttribute("class","terminus-axis-label terminus-axis-now-label"),e.appendChild(ndom),e},WOQLTimePicker.prototype.Y2Time=function(e){return new Date(e+"-12-31T12:00:00.000Z").getTime()/1e3},e.exports=WOQLTimePicker},function(e,t){function r(e,t){this.ui=e,this.mode=t||"data"}r.prototype.getAsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-mapping-page terminus-page");var t=document.createElement("select"),r=document.createElement("option");r.value="data",r.appendChild(document.createTextNode("Data Map")),t.appendChild(r);var i=document.createElement("option");i.value="model",i.appendChild(document.createTextNode("Model Map")),t.appendChild(i);var n=this.getFormFieldDOM("Map Type");n.appendChild(t),e.appendChild(n);var s=this.getFormField(e,"Map Source"),a=this.getFormField(e,"Map Target"),o=this.getFormField(e,"Queries"),u=this.getFormField(e,"Options"),l=this.getFormFieldDOM("Existing Mapping"),c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("size",80),l.appendChild(c),e.appendChild(l);var d=document.createElement("button");d.setAttribute("class","terminus-btn terminus-control-button"),d.appendChild(document.createTextNode("Execute Mapping"));var p=this;return d.addEventListener("click",(function(){var e={map_source:JSON.parse(s.value)};"data"==t.value?e["rdf:type"]="dcogmodel:DataMap":e["rdf:type"]="dcogmodel:ModelMap",a.value&&(e.map_target=a.value),o.value&&(e.queries=o.value),u.value&&(e.options=u.value),c.value&&(e.mapping=c.value),p.ui.client.update(!1,e)})),e.appendChild(d),e},r.prototype.getFormFieldDOM=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-form-field terminus-mapping-field");var r=document.createElement("span");return r.setAttribute("class","terminus-form-label terminus-mapping-label"),r.appendChild(document.createTextNode(e)),t.appendChild(r),t},r.prototype.getFormField=function(e,t){var r=this.getFormFieldDOM(t),i=document.createElement("textarea");return i.setAttribute("class","terminus-form-value terminus-textarea"),r.appendChild(i),e.appendChild(r),i},e.exports=r},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0),s=r(6),a=r(8),o=r(2);function u(e){this.ui=e,this.mode="view",this.format="turtle",this.confirm_before_update=!0}u.prototype.getAsDOM=function(){return this.holder=document.createElement("div"),this.controldom=document.createElement("div"),this.controldom.setAttribute("class","terminus-schema-controls"),this.pagedom=document.createElement("div"),this.pagedom.setAttribute("class","terminus-schema-viewer"),this.loadSchema(),this.holder.appendChild(this.controldom),this.holder.appendChild(this.pagedom),this.holder},u.prototype.loadSchema=function(e,t){var r=this;this.ui.showBusy("Fetching Database Schema"),this.ui.client.getSchema(!1,{"terminus:encoding":"terminus:"+this.format}).then((function(i){r.ui.clearBusy(),r.schema=i,r.refreshPage(e,t)})).catch((function(e){r.ui.clearBusy(),r.ui.showError(e)}))},u.prototype.resetControlDOM=function(){n.removeChildren(this.controldom),"edit"==this.mode?this.controldom.appendChild(this.getSchemaSaveButtons()):"import"==this.mode?this.controldom.appendChild(this.getSchemaImportActionButtons()):"class_frame"==this.mode?(this.ui.showControl("get_schema")&&this.controldom.appendChild(this.getShowSchemaButton()),this.ui.showControl("class_frame")&&this.controldom.appendChild(this.getClassFrameChooser())):"view"==this.mode&&(this.ui.showControl("import_schema")&&this.controldom.appendChild(this.getImportButton()),this.ui.showControl("update_schema")&&this.controldom.appendChild(this.getSchemaEditButton()),this.ui.showControl("schema_format")&&this.controldom.appendChild(this.getFormatChoices()),this.ui.showControl("class_frame")&&this.controldom.appendChild(this.getClassFrameChooser()))},u.prototype.getFormatChoices=function(){var e=document.createElement("select");e.setAttribute("class","terminus-form-select terminus-schema-format terminus-type-select");var t=document.createElement("option");t.setAttribute("class","terminus-schema-turtle"),t.value="turtle",t.appendChild(document.createTextNode("Turtle")),"turtle"==this.format&&(t.selected=!0),e.appendChild(t);var r=document.createElement("option");r.setAttribute("class","terminus-schema-jsonld"),r.value="jsonld",r.appendChild(document.createTextNode("Json LD")),"jsonld"==this.format&&(r.selected=!0),e.appendChild(r);var i=this;return e.addEventListener("change",(function(e){i.format=this.value,i.loadSchema()})),e},u.prototype.refreshPage=function(e,t){this.controldom&&this.resetControlDOM(),this.pagedom&&this.refreshMainPage(e,t)},u.prototype.refreshMainPage=function(e,t){n.removeChildren(this.pagedom),"view"==this.mode?this.pagedom.appendChild(this.getSchemaViewDOM()):"edit"==this.mode?this.pagedom.appendChild(this.getSchemaEditDOM()):"import"==this.mode?this.pagedom.appendChild(this.getSchemaImportDOM()):"class_frame"==this.mode&&this.pagedom.appendChild(this.getClassFrameDOM()),e&&this.ui.showMessage(e,t)},u.prototype.getSchemaSaveButtons=function(){var e=document.createElement("span");return e.setAttribute("class","terminus-schema-save-buttons"),e.appendChild(this.getCancelButton()),e.appendChild(this.getSaveButton()),e},u.prototype.getSchemaImportActionButtons=function(){var e=document.createElement("span");return e.setAttribute("class","terminus-schema-import-buttons"),e.appendChild(this.getCancelButton()),e.appendChild(this.getImportPreviewButton()),e.appendChild(this.getImportSaveButton()),e},u.prototype.getShowSchemaButton=function(){var e=this;return this.getSchemaButton("View Schema","get_schema",(function(){e.ui.clearMessages(),e.mode="view",e.refreshPage()}))},u.prototype.getImportPreviewButton=function(){var e=this;return this.getSchemaButton("Preview","preview",(function(){e.ui.clearMessages(),e.mode="preview",e.refreshPage()}))},u.prototype.getCancelButton=function(){var e=this;return this.getSchemaButton("Cancel","cancel_update",(function(){e.ui.clearMessages(),e.mode="view",e.refreshPage()}))},u.prototype.getImportSaveButton=function(){var e=this;return this.getSchemaButton("Import","import_schema",(function(){e.ui.clearMessages(),"function"==typeof e.doImport&&e.doImport()}))},u.prototype.getSaveButton=function(){var e=this;return this.getSchemaButton("Save","update_schema",(function(){e.ui.clearMessages();var t=e.schema_edit_dom.value;return"object"==i(e.schema)&&(t=JSON.parse(t)),e.updateSchema(t,{"terminus:encoding":"terminus:"+e.format})}))},u.prototype.getSchemaEditButton=function(){var e=this;return this.getSchemaButton("Edit","update_schema",(function(){e.mode="edit",e.refreshPage()}))},u.prototype.getImportButton=function(){var e=this;return this.getSchemaButton("Import Schema","import_schema",(function(){e.ui.clearMessages(),e.mode="import",e.refreshPage()}))},u.prototype.getSchemaButton=function(e,t,r){var i=document.createElement("button");return i.appendChild(document.createTextNode(e)),i.setAttribute("class","terminus-btn terminus-control-button terminus-schema-"+t),i.addEventListener("click",r),i},u.prototype.updateSchema=function(e,t){this.ui.showBusy("Updating Database Schema");var r=this;return this.ui.client.updateSchema(!1,e,t).then((function(e){if(e["terminus:status"]&&"terminus:success"==e["terminus:status"])r.ui.showBusy("Retrieving updated schema"),r.mode="view",r.loadSchema("Successfully Updated Schema");else{if(!e["terminus:status"]||"terminus:failure"!=e["terminus:status"])throw new Error("Update Schema returned no terminus:status code");r.ui.clearBusy(),r.ui.showViolations(e["terminus:witnesses"],"schema")}})).catch((function(e){r.ui.clearBusy(),r.ui.showError(e)}))},u.prototype.load=function(e,t,r){var i=this;return r=r||"replace",this.ui.showBusy("Loading schema from "+e),this.ui.client.getSchema(e,{key:t,format:this.format}).then((function(t){var n="append"==r?i.appendSchema(t):t;i.confirm_before_update?i.showConfirmPage(n):(i.ui.showBusy("Updating schema"),i.updateSchema(!1,n).then((function(t){return i.ui.clearBusy(),i.ui.showResult("Successfully deployed new schema from "+e),t})))})).catch((function(e){i.ui.clearBusy(),i.ui.showError(e)}))},u.prototype.appendSchema=function(e){var t=this.schema;if("turtle"==this.format)t=this.schema+e;else if("jsonld"==this.format)for(var r in e)t[r]=e[r];return t},u.prototype.getClassFrameChooser=function(){var e=document.createElement("span");e.setAttribute("class","terminus-classframe-chooser");var t=new s(this.ui);t.empty_choice="View Individual Class Frames";var r=this;t.change=function(e){e&&(r.cls=e,"class_frame"!=r.mode?(r.mode="class_frame",r.refreshPage()):r.refreshMainPage())};var i=t.getAsDOM();return e.appendChild(i),e},u.prototype.getClassFrameDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-schema-page terminus-schema-classframe-page");var t=new a(this.ui,"model");return t.loadCreateDocument(this.cls),t.page_config="model",e.appendChild(t.getAsDOM()),e},u.prototype.showConfirmPage=function(e){this.schema=e,this.confirm_before_update=!1,this.mode="edit",this.refreshPage("Confirm new schema")},u.prototype.getSchemaEditDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-schema-page terminus-schema-edit-page");var t=document.createElement("textarea");return t.setAttribute("class","terminus-schema-edit terminus-schema-textarea"),t.setAttribute("width","100%"),t.setAttribute("style","min-width: 400px; min-height: 400px;"),"string"==typeof this.schema?t.innerHTML=this.schema:"object"==i(this.schema)&&(t.innerHTML=JSON.stringify(this.schema,0,4)),this.schema_edit_dom=t,e.appendChild(t),o.stylizeEditor(this.ui,t,"schema","turtle"),e},u.prototype.getSchemaViewDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-schema-page terminus-schema-view-page");var t=document.createElement("pre");if(t.setAttribute("class","terminus-schema-view terminus-scheme-pre"),"string"==typeof this.schema){var r=this.schema.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");t.innerHTML=r}else"object"==i(this.schema)&&(t.innerHTML=JSON.stringify(this.schema,0,4));return o.stylizeCodeDisplay(this.ui,t,e,"turtle")||e.appendChild(t),e},u.prototype.getSchemaImportDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-schema-page terminus-schema-import-page"),(s=document.createElement("div")).setAttribute("class","terminus-form-field");var t=document.createElement("span");t.setAttribute("class","terminus-form-label terminus-url-loader-input"),t.appendChild(document.createTextNode("URL"));var r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("class","terminus-form-value terminus-form-url terminus-url-connect"),this.val&&(r.value=this.val),s.appendChild(t),s.appendChild(r),e.appendChild(s),(s=document.createElement("div")).setAttribute("class","terminus-form-field"),(a=document.createElement("span")).setAttribute("class","terminus-form-label terminus-import_mode-input"),a.appendChild(document.createTextNode("Import Mode"));var i=document.createElement("select");i.setAttribute("class","terminus-form-select");var n=document.createElement("option");n.value="replace",n.appendChild(document.createTextNode("Replace Mode")),i.appendChild(n);var s,a,o=document.createElement("option");o.value="append",o.appendChild(document.createTextNode("Append Mode")),i.appendChild(o),i.setAttribute("class","terminus-form-select terminus-import-mode"),s.appendChild(a),s.appendChild(i),e.appendChild(s),(s=document.createElement("div")).setAttribute("class","terminus-form-field"),(a=document.createElement("span")).setAttribute("class","terminus-form-label terminus-url-key-input"),a.appendChild(document.createTextNode("Key"));var u=document.createElement("input");u.setAttribute("type","text"),u.setAttribute("class","terminus-form-value terminus-url-key"),s.appendChild(a),s.appendChild(u),e.appendChild(s);var l=this;return this.doImport=function(){r.value&&l.load(r.value,u.value,i.value)},e},e.exports=u},function(e,t,r){var i=r(12),n=r(2);function s(e){this.ui=e}function a(e){this.ui=e,this.server=this.ui.server()}s.prototype.getAsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-server-controller");var t=this;if(this.ui&&this.ui.server()){document.createElement("div").setAttribute("class","terminus-server-connection");var r=document.createElement("div");r.setAttribute("class","span3");var i=document.createElement("ul");if(i.setAttribute("class","terminus-ul"),r.appendChild(i),e.appendChild(r),this.ui.showControl("change-server")){(a=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");t=this;a.addEventListener("click",(function(){n.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),t.ui.showLoadURLPage()})),(o=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-link"),a.appendChild(o);var s=document.createTextNode("Change Server");a.appendChild(s),i.appendChild(a)}if(this.ui.showControl("db")){(a=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");t=this;a.addEventListener("click",(function(){n.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),t.ui.db(),t.ui.showServerMainPage()})),(o=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-eye"),a.appendChild(o);s=document.createTextNode("View Databases");a.appendChild(s),i.appendChild(a)}if(this.ui.showControl("create_database")){var a;(a=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var o;t=this;a.addEventListener("click",(function(){n.removeSelectedNavClass("terminus-selected"),this.classList.add("terminus-selected"),t.ui.db(),t.ui.showCreateDBPage()})),(o=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-plus"),a.appendChild(o);s=document.createTextNode("Create New Database");a.appendChild(s),i.appendChild(a)}}return e},s.prototype.getServerLabelDOM=function(){var e=this.ui.client.connection.getServerRecord(),t=e&&e["rdfs:label"]&&e["rdfs:label"]["@value"]?e["rdfs:label"]["@value"]:this.ui.server(),r=e&&e["rdfs:comment"]&&e["rdfs:comment"]["@value"]?e["rdfs:comment"]["@value"]:"";r+=" Server URL: "+this.ui.server();var i=document.createElement("span");return i.setAttribute("class","terminus-server-value"),i.setAttribute("title",r),i.appendChild(document.createTextNode(t)),i=document.createElement("div")},a.prototype.getAsDOM=function(e){var t=this,r=document.createElement("span");if(r.setAttribute("class","terminus-server-home-page"),this.ui.server()){var i=document.createElement("span");if(i.setAttribute("class","terminus-server-home"),this.ui.showView("server"),this.ui.showView("change-server")){var n=document.createElement("button");n.setAttribute("class","terminus-control-button terminus-change-server-button terminus-btn"),n.appendChild(document.createTextNode("Disconnect")),n.addEventListener("click",(function(){t.ui.showLoadURLPage()}))}if(this.ui.showView("create_database")){var s=document.createElement("button");s.setAttribute("class","terminus-control-button terminus-create-db-button terminus-btn"),s.appendChild(document.createTextNode("Create New Database")),s.addEventListener("click",(function(){t.ui.db(),t.ui.clearMessages(),t.ui.showCreateDBPage()}))}this.ui.showView("db")&&i.appendChild(this.getDBListDOM()),r.appendChild(i)}else t.ui.showLoadURLPage();return r},a.prototype.getServerDetailsDOM=function(){var e=document.createElement("span");e.setAttribute("class","terminus-server-details terminus-server-banner");var t=document.createElement("span");t.setAttribute("class","terminus-label terminus-server-info"),t.appendChild(document.createTextNode("Connected to Server - "));var r=document.createElement("span");return r.setAttribute("class","terminus-value terminus-server-info"),r.appendChild(document.createTextNode(this.ui.server())),e.appendChild(t),e.appendChild(r),e},a.prototype.wrapTableLinkCell=function(e,t){var r=this,i=document.createElement("a");return i.setAttribute("href","#"),i.setAttribute("class","terminus-table-content"),i.appendChild(document.createTextNode(t)),i.addEventListener("click",(function(){r.ui.connectToDB(e),r.ui.showDBMainPage()})),i},a.prototype.getDBListDOM=function(){var e=this,t=document.createElement("div");t.setAttribute("class","terminus-db-list-section");var r=document.createElement("h3");r.setAttribute("class","terminus-db-list-title terminus-module-head"),r.appendChild(document.createTextNode("Available Databases")),t.appendChild(r);var n=document.createElement("table");n.setAttribute("class","terminus-db-list terminus-db-size terminus-db-border");var s=document.createElement("thead"),a=document.createElement("tr"),o=document.createElement("th");o.appendChild(document.createTextNode("ID")),o.setAttribute("class","terminus-db-id terminus-table-th");var u=document.createElement("th");u.appendChild(document.createTextNode("Title")),u.setAttribute("class","terminus-db-title terminus-table-th");var l=document.createElement("th");l.appendChild(document.createTextNode("Description")),l.setAttribute("class","terminus-db-description terminus-table-th");var c=document.createElement("th");c.setAttribute("class","terminus-db-size terminus-table-th"),c.appendChild(document.createTextNode("Size"));var d=document.createElement("th");d.setAttribute("class","terminus-db-created terminus-table-th"),d.appendChild(document.createTextNode("Created"));var p=document.createElement("th");p.appendChild(document.createTextNode("Delete")),p.setAttribute("class","terminus-db-delete terminus-table-th"),a.appendChild(o),a.appendChild(u),a.appendChild(l),a.appendChild(c),a.appendChild(d),a.appendChild(p),s.appendChild(a),n.appendChild(s);var h=document.createElement("tbody"),m=this.ui.client.connection.getServerDBRecords();for(var f in m){var g=m[f],v=f.split(":")[1],y=document.createElement("tr"),b=document.createElement("td");b.appendChild(this.wrapTableLinkCell(v,v)),b.setAttribute("class","terminus-db-id");var C=document.createElement("td");C.setAttribute("class","terminus-db-title");var w=g&&g["rdfs:label"]&&g["rdfs:label"]["@value"]?g["rdfs:label"]["@value"]:"";C.appendChild(this.wrapTableLinkCell(v,w));var D=document.createElement("td");D.setAttribute("class","terminus-db-description");w=g&&g["rdfs:comment"]&&g["rdfs:comment"]["@value"]?g["rdfs:comment"]["@value"]:"";D.appendChild(this.wrapTableLinkCell(v,w));var A=document.createElement("td");A.setAttribute("class","terminus-db-size");w=g&&g["terminus:size"]&&g["terminus:size"]["@value"]?g["terminus:size"]["@value"]:"";A.appendChild(this.wrapTableLinkCell(v,w));var E=document.createElement("td");E.setAttribute("class","terminus-db-created");w=g&&g["terminus:last_updated"]&&g["terminus:last_updated"]["@value"]?g["terminus:last_updated"]["@value"]:"";E.appendChild(this.wrapTableLinkCell(v,w));var x=document.createElement("td");if(x.setAttribute("class","db-delete"),this.deleteDBPermitted(v)){var O;if(this.ui.pluginAvailable("font-awesome"))(O=document.createElement("i")).setAttribute("class","terminus-db-list-del-icon fa fa-times-circle");else(O=document.createElement("button")).appendChild(document.createTextNode("Delete")),O.setAttribute("class","terminus-control-button terminus-delete-db-button");O.addEventListener("click",function(t){return function(){e.ui.deleteDatabase(t)}}(v)),x.appendChild(O)}y.appendChild(b),y.appendChild(C),y.appendChild(D),y.appendChild(A),y.appendChild(E),y.appendChild(x),h.appendChild(y)}if(n.appendChild(h),t.appendChild(n),this.ui.pluginAvailable("datatables"))(new i).draw(!1,n);return t},a.prototype.deleteDBPermitted=function(e){return!!this.ui.client.connection.capabilitiesPermit("delete_database",e)},e.exports={TerminusServerViewer:a,TerminusServerController:s}},function(e,t){function r(e,t){this.ui=e,this.val=t,this.url_input=!1,this.key_input=!1}r.prototype.getLabelDOM=function(){return document.createTextNode("Connect")},r.prototype.getFormFieldDOM=function(e,t,r,i){var n=document.createElement("div");n.setAttribute("class","terminus-form-horizontal terminus-control-group terminus-form-field-spacing terminus-form-field terminus-field-"+t);var s=document.createElement("span");return s.setAttribute("class","terminus-control-label terminus-form-label terminus-form-field-label terminus-label-"+t),s.appendChild(document.createTextNode(r)),e.setAttribute("type","text"),e.setAttribute("placeholder",i),n.appendChild(s),n.appendChild(e),n},r.prototype.getAsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-form terminus-url-loader");var t=document.createElement("h3");t.setAttribute("class","terminus-form-header terminus-connect-header terminus-module-head"),t.appendChild(document.createTextNode("Connect To Terminus Server")),e.appendChild(t);var r=document.createElement("div");r.setAttribute("class","terminus-form-border"),e.appendChild(r),this.url_input=document.createElement("input"),this.url_input.setAttribute("class","terminus-form-value terminus-form-url terminus-form-field-input terminus-input-text"),this.val&&(this.url_input.value=this.val),r.appendChild(this.getFormFieldDOM(this.url_input,"connect","URL","Terminus DB URL")),this.key_input=document.createElement("input"),this.key_input.setAttribute("class","terminus-form-value terminus-value terminus-input-text"),r.appendChild(this.getFormFieldDOM(this.key_input,"connect","Key","Server API Key"));var i=document.createElement("div");i.setAttribute("class","terminus-control-buttons");var n=document.createElement("button");n.setAttribute("class","terminus-control-button terminus-url-load terminus-btn"),n.appendChild(document.createTextNode("Connect"));var s=this;return n.addEventListener("click",(function(){s.url_input.value&&s.ui.load(s.url_input.value,s.key_input.value)})),i.appendChild(n),r.appendChild(i),e},e.exports=r}]);
//# sourceMappingURL=terminus-javascript-sdk.min.js.map