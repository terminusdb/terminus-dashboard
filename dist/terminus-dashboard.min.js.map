{"version":3,"sources":["webpack://TerminusDashboard/webpack/bootstrap","webpack://TerminusDashboard/./node_modules/@terminusdb/terminus-client/index.js","webpack://TerminusDashboard/./node_modules/axios/lib/utils.js","webpack://TerminusDashboard/./src/client/HTMLFrameHelper.js","webpack://TerminusDashboard/./src/Utils.js","webpack://TerminusDashboard/./src/query/WOQLQuery.js","webpack://TerminusDashboard/./src/plugins/TerminusPlugin.js","webpack://TerminusDashboard/./node_modules/@terminusdb/terminus-client/lib/errorMessage.js","webpack://TerminusDashboard/./src/client/RenderingMap.js","webpack://TerminusDashboard/./src/client/TerminusClassChooser.js","webpack://TerminusDashboard/./node_modules/@terminusdb/terminus-client/lib/const.js","webpack://TerminusDashboard/./node_modules/@terminusdb/terminus-client/lib/utils.js","webpack://TerminusDashboard/./src/query/WOQLResultsViewer.js","webpack://TerminusDashboard/./node_modules/axios/lib/helpers/bind.js","webpack://TerminusDashboard/./node_modules/axios/lib/helpers/buildURL.js","webpack://TerminusDashboard/./node_modules/axios/lib/cancel/isCancel.js","webpack://TerminusDashboard/./node_modules/axios/lib/defaults.js","webpack://TerminusDashboard/./node_modules/axios/lib/adapters/xhr.js","webpack://TerminusDashboard/./node_modules/axios/lib/core/createError.js","webpack://TerminusDashboard/./node_modules/axios/lib/core/mergeConfig.js","webpack://TerminusDashboard/./node_modules/axios/lib/cancel/Cancel.js","webpack://TerminusDashboard/./node_modules/@terminusdb/terminus-client/lib/connectionCapabilities.js","webpack://TerminusDashboard/./node_modules/@terminusdb/terminus-client/lib/connectionConfig.js","webpack://TerminusDashboard/./node_modules/@terminusdb/terminus-client/lib/terminusIDParser.js","webpack://TerminusDashboard/./node_modules/@terminusdb/terminus-client/lib/frameHelper.js","webpack://TerminusDashboard/./src/client/TerminusDocument.js","webpack://TerminusDashboard/./src/plugins/datatables.terminus.js","webpack://TerminusDashboard/./src/client/ObjectViewer.js","webpack://TerminusDashboard/./src/client/viewers/String.js","webpack://TerminusDashboard/./src/client/viewers/DateHelper.js","webpack://TerminusDashboard/./src/client/viewers/GoogleMapHelper.js","webpack://TerminusDashboard/./src/client/PropertyViewer.js","webpack://TerminusDashboard/./src/client/DataViewer.js","webpack://TerminusDashboard/./src/client/TerminusDocumentChooser.js","webpack://TerminusDashboard/./src/index.js","webpack://TerminusDashboard/./src/TerminusUI.js","webpack://TerminusDashboard/./src/ApiExplorer.js","webpack://TerminusDashboard/./node_modules/@terminusdb/terminus-client/lib/woqlClient.js","webpack://TerminusDashboard/./node_modules/@terminusdb/terminus-client/lib/dispatchRequest.js","webpack://TerminusDashboard/./node_modules/buffer/index.js","webpack://TerminusDashboard/(webpack)/buildin/global.js","webpack://TerminusDashboard/./node_modules/base64-js/index.js","webpack://TerminusDashboard/./node_modules/ieee754/index.js","webpack://TerminusDashboard/./node_modules/isarray/index.js","webpack://TerminusDashboard/./node_modules/axios/index.js","webpack://TerminusDashboard/./node_modules/axios/lib/axios.js","webpack://TerminusDashboard/./node_modules/axios/node_modules/is-buffer/index.js","webpack://TerminusDashboard/./node_modules/axios/lib/core/Axios.js","webpack://TerminusDashboard/./node_modules/axios/lib/core/InterceptorManager.js","webpack://TerminusDashboard/./node_modules/axios/lib/core/dispatchRequest.js","webpack://TerminusDashboard/./node_modules/axios/lib/core/transformData.js","webpack://TerminusDashboard/./node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack://TerminusDashboard/./node_modules/axios/lib/core/settle.js","webpack://TerminusDashboard/./node_modules/axios/lib/core/enhanceError.js","webpack://TerminusDashboard/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://TerminusDashboard/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://TerminusDashboard/./node_modules/axios/lib/helpers/cookies.js","webpack://TerminusDashboard/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://TerminusDashboard/./node_modules/axios/lib/helpers/combineURLs.js","webpack://TerminusDashboard/./node_modules/axios/lib/cancel/CancelToken.js","webpack://TerminusDashboard/./node_modules/axios/lib/helpers/spread.js","webpack://TerminusDashboard/./node_modules/@terminusdb/terminus-client/lib/objectFrame.js","webpack://TerminusDashboard/./src/plugins/codemirror.terminus.js","webpack://TerminusDashboard/./src/client/ObjectRenderer.js","webpack://TerminusDashboard/./src/client/viewers/StringEditor.js","webpack://TerminusDashboard/./src/client/viewers/Boolean.js","webpack://TerminusDashboard/./src/client/viewers/BooleanEditor.js","webpack://TerminusDashboard/./src/client/viewers/Choice.js","webpack://TerminusDashboard/./src/client/viewers/ChoiceEditor.js","webpack://TerminusDashboard/./src/client/viewers/Coordinate.js","webpack://TerminusDashboard/./src/client/viewers/CoordinateEditor.js","webpack://TerminusDashboard/./src/client/viewers/Date.js","webpack://TerminusDashboard/./src/client/viewers/DateEditor.js","webpack://TerminusDashboard/./src/client/viewers/Entity.js","webpack://TerminusDashboard/./src/client/viewers/EntityEditor.js","webpack://TerminusDashboard/./src/client/viewers/Image.js","webpack://TerminusDashboard/./src/client/viewers/ImageEditor.js","webpack://TerminusDashboard/./src/client/viewers/Link.js","webpack://TerminusDashboard/./src/client/viewers/Number.js","webpack://TerminusDashboard/./src/client/viewers/Range.js","webpack://TerminusDashboard/./src/client/viewers/RangeEditor.js","webpack://TerminusDashboard/./src/client/viewers/SanitizedHTML.js","webpack://TerminusDashboard/./src/client/viewers/GoogleMapEditor.js","webpack://TerminusDashboard/./src/client/viewers/GoogleMapViewer.js","webpack://TerminusDashboard/./src/client/viewers/HTMLMarkupEditor.js","webpack://TerminusDashboard/./src/client/viewers/S2EntityEditor.js","webpack://TerminusDashboard/./src/client/ValueRenderer.js","webpack://TerminusDashboard/./src/client/TerminusDB.js","webpack://TerminusDashboard/./src/client/TerminusViolation.js","webpack://TerminusDashboard/./src/client/TerminusQuery.js","webpack://TerminusDashboard/./src/query/WOQLTextboxGenerator.js","webpack://TerminusDashboard/./src/client/TerminusPropertyChooser.js","webpack://TerminusDashboard/./src/client/TerminusMapping.js","webpack://TerminusDashboard/./src/client/TerminusSchema.js","webpack://TerminusDashboard/./src/client/TerminusServer.js","webpack://TerminusDashboard/./src/client/TerminusURL.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","WOQLClient","ConnectionCapabilities","ConnectionConfig","IDParser","ErrorMessage","FrameHelper","ObjectFrame","isBuffer","toString","isArray","val","isObject","isFunction","forEach","obj","fn","length","isArrayBuffer","isFormData","FormData","isArrayBufferView","ArrayBuffer","isView","buffer","isString","isNumber","isUndefined","isDate","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","navigator","product","window","document","merge","result","assignValue","arguments","deepMerge","extend","a","b","thisArg","trim","str","replace","TerminusPluginManager","require","TerminusClient","HTMLFrameHelper","type","control","label","callback","disabled","dpropDOM","createElement","setAttribute","button","appendChild","createTextNode","addEventListener","this","innerHTML","objId","getElementsByClassName","style","background","view","pluginAvailable","icon","options","selected","sel","opt","labelFromURL","which","renderer","viewsDOM","setMode","getActionControl","isNew","cancel","url","location","href","loc","split","sh","getShorthand","bits","htmlid","prop","wrap","text","max_cell_size","max_word_size","substring","replacements","words","word","newstr","k","varname","lastIndexOf","help","input","infoDOM","linfo","lspacer","lval","Codemirror","getHeaderDom","hd","h","stylizeCodeDisplay","ui","txt","dom","cmConfig","pr","colorizePre","removeSelectedNavClass","el","classList","remove","hideDocumentSubMenus","contains","add","showSubMenus","tolggleContent","content","display","stylizeEditor","cm","ar","colorizeTextArea","updateTextArea","deleteStylizedEditor","qip","nextElementSibling","removeChildren","showHttpResult","response","action","currForm","terminator","br","retHttpHeaders","headers","hdres","json","then","rd","data","JSON","stringify","pre","getResponse","getInfoAlertDom","msg","ald","getFunctionSignature","sigs","spec","descr","args","server_url","title","description","database_url","details","format","editmode","document_url","fail_on_id_denied","woql","class","term","source","target","toggleVisibility","extractValueFromCell","cellValue","DOMParser","parseFromString","firstChild","displayDocumentSubMenus","showControl","activateSelectedNav","nav","checkDocumentSubMenus","WOQLResult","WOQLQuery","client","default_limit","prefixes","connectionConfig","platformEndpoint","sid","server","colid","dbid","serverURL","schemaURL","dbURL","docURL","pref","standard_urls","setPrefixes","shorten","execute","wrapped","self","select","getConcreteDocumentClassPattern","varc","and","getSubclassQueryPattern","not","getAbstractQueryPattern","quad","clsname","sub","queryWrappedWithLimit","query","limit","start","getAllDocumentQuery","constraint","triple","push","getEverythingQuery","wjson","getPropertyListQuery","getElementMetaDataQuery","getClassListMetaDataQuery","getClassMetaDataQuery","getDataOfChosenClassQuery","chosen","getDataOfChosenPropertyQuery","getInstanceMeta","getDocumentQuery","id","getClassesQuery","preloaded","loaded","loading","precluded","plugins","css","js","requires","setPluginOptions","opts","init","calculatePreloaded","toload","calculateRequiredInitPlugins","loadPlugins","pins","pid","indexOf","getDefaultPlugins","needed_pins","loading_order","getAvailablePlugins","pl","plugin","version_check","pluginmeta","version","jQuery","slider","e","Quill","JSONEditor","CodeMirror","fontAwesomeCheck","dataTable","select2","google","maps","ol","Map","d3","console","log","Error","element","span","className","body","insertBefore","getComputedStyle","getPropertyValue","removeChild","ticker","cback","loadPlugin","pug","cssid","loadDynamicCSS","scripts","splice","loadDynamicScript","loadPluginScripts","loadPageCSS","cssfid","cssdom","getElementById","parentNode","cssurl","pluginLoadable","pluginLoadedOrLoading","getPluginDOM","plugid","cl","cbox","checked","clab","togglePlugin","redraw","unloadPlugin","drawPlugins","num","getAsDOM","dm","clh","showPlugins","getErrorAsMessage","api","err","formatErrorMessage","status","method","nmsg","keys","getAPIErrorMessage","getAccessDeniedMessage","accessDenied","db","getInvalidURIMessage","parseAPIError","error","redirected","ObjectViewer","HTMLStringViewer","HTMLStringEditor","HTMLBooleanViewer","HTMLBooleanEditor","HTMLChoiceViewer","HTMLChoiceEditor","HTMLCoordinateViewer","HTMLCoordinateEditor","HTMLDateViewer","HTMLDateEditor","HTMLEntityViewer","HTMLEntityEditor","HTMLImageViewer","HTMLImageEditor","HTMLLinkViewer","HTMLNumberViewer","HTMLRangeViewer","HTMLRangeEditor","SantizedHTMLViewer","GoogleMapEditor","GoogleMapViewer","HTMLMarkupEditor","S2EntityEditor","RenderingMap","registeredDataViewers","registeredDataEditors","registeredPropertyViewers","registeredPropertyEditors","registeredObjectViewers","registeredObjectEditors","getValidDataViewerList","frametype","valids","concat","getValidDataEditorList","nftypes","getValidPropertyViewerList","proptype","proprange","propdom","getValidPropertyEditorList","getViewer","vi","renderers","viewer","eval","alert","getAvailablePropertyViewers","viewers","nviewers","sets","getAvailablePropertyEditors","getAvailableDataViewers","getAvailableDataEditors","getViewerForDataFrame","vals","getEditorForDataFrame","registerViewerForTypes","types","registerEditorForTypes","registerEditorForFrameType","registerViewerForFrameType","registerViewerForProperties","properties","registerEditorForProperties","HTMLPropertyViewer","patternMatchesRenderer","pattern","FramePattern","checkRenderer","compiled_options","compileOptions","parent","facets","getDefaultFacets","facet","deffacet","getDefaultFacet","hide_disabled_buttons","features","controls","viewerType","viewerOptions","header","header_viewer","HTMLObjectHeaderViewer","filter","sort","rules","output","frame_type","subject","subjectClass","range","children","depth","index","rtype","getRendererType","illegalRuleType","checkFrameType","checkLabel","checkSubject","checkSubjectClass","checkProperty","checkDepth","checkRange","checkValue","checkParent","checkChildren","checkIndex","checkStatus","rsubj","IDsMatch","found","j","values","isUpdated","numberMatch","propertyIDsMatch","valuesMatch","rangeIDsMatch","rcls","classIDsMatch","frame","ftype","renderder","getLabel","stringMatch","ida","idb","compareIDs","vala","valb","RegExp","test","constructor","renderer_type","TerminusClassChooser","choice","show_single","setRoot","root","setFilter","change","cls","ccdom","ccsel","wq","getResultsAsOptions","clist","choices","bindings","empty_choice","opt1","added","bclass","getVariableValueFromBinding","lab","freeze","CONNECT","GET_SCHEMA","UPDATE_SCHEMA","UPDATE_DOCUMENT","CLASS_FRAME","WOQL_SELECT","GET_DOCUMENT","DELETE_DATABASE","DELETE_DOCUMENT","CREATE_DATABASE","CREATE_DOCUMENT","WOQL_UPDATE","authorityActionsToArr","Array","map","item","URIEncodePayload","payload","encodeURIComponent","payloadArr","keyElement","valueElement","join","Datatables","UTILS","res","WOQLResultsViewer","wresult","wQuery","settings","queryPage","qPage","pman","count","hasBindings","showTable","show_table","orderColumns","sample","ordered","unshift","resultDOM","displayResultHeader","rs","rh","getTableDOM","nor","dtResult","getTable","tab","draw","getDtTableDOMOnChange","pageInfo","formatResultsForDatatableDisplay","columns","colDataData","formattedResult","ordered_headings","validURL","getDocumentLocalLink","outerHTML","recordsTotal","recordsFiltered","getTableBody","tbody","tr","td","wrapShortenedText","selectDocumentNavBar","showDocument","dtPlugin","thead","thr","th","apply","utils","encode","params","paramsSerializer","serializedParams","parts","v","toISOString","hashmarkIndex","slice","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","adapter","defaults","process","XMLHttpRequest","transformRequest","transformResponse","parse","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","validateStatus","common","settle","buildURL","parseHeaders","isURLSameOrigin","createError","config","Promise","resolve","reject","requestData","requestHeaders","request","auth","username","password","Authorization","btoa","open","toUpperCase","onreadystatechange","readyState","responseURL","responseHeaders","getAllResponseHeaders","responseType","responseText","statusText","onabort","onerror","ontimeout","cookies","xsrfValue","withCredentials","read","undefined","toLowerCase","setRequestHeader","onDownloadProgress","onUploadProgress","upload","cancelToken","promise","abort","send","enhanceError","message","code","config1","config2","Cancel","CONST","connection","setClientKey","getClientKey","curl","addConnection","capabilities","capabilitiesKeys","pred","auths","scope","actions","actionsArr","nrec","serverConnected","capabilitiesPermit","connectionMode","client_checks_capabilities","rec","getServerRecord","getDBRecord","srvr","connectionObj","okeys","oid","dbCapabilityID","getServerDBRecords","dbrecs","removeDB","dbidCap","newParams","docid","setServer","setDB","doc","setDocument","connected_mode","include_key","includeKey","queryURL","frameURL","baseURL","inputStr","context","parser","parseServerURL","parseDBID","setSchemaURL","parseSchemaURL","parseDocumentURL","setQueryURL","parseQueryURL","setClassFrameURL","parseClassFrameURL","setContext","validPrefixedURL","expandPrefixed","validIDString","stripOptionalPath","bit","rdf","rdfs","xsd","owl","tcs","tbs","xdd","terminus","vio","docs","prefix","node","hasChildNodes","childNodes","Math","random","Date","getTime","link","full","unshorten","sha","shb","nurl","urlFragment","charAt","urlStr","baseUrl","stype","urlFirst","urlTmp","ext","viewIncludesProperties","ty","parsed","parseXsdDate","parseXsdTime","parseXsdDateTime","year","month","day","tz","extractXsdTimezone","abs","parseInt","timezone","nparsed","hour","minute","second","xparsed","addXsdPadding","ret","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","convertTimestampToXsd","datetime","ptime","dividor","scriptid","src","existingScript","script","onload","rel","Renderers","TerminusDocumentViewer","editor","load_schema","config_options","getBuiltInViewerOptions","classmeta","instancemeta","refreshPage","elid","getClassMeta","loadCreateDocument","showBusy","page_config","loadDocumentSchema","clearBusy","setLabel","showError","loadDocument","getDocument","loadDataFrames","ncls","getClassFrame","loadSchemaFrames","deleteDocument","URL","createDocument","extr","extract","showViolations","updateDocument","durl","subjid","dataframes","domain","classframes","loadClassFrames","newDoc","fillFromSchema","render","getOptionsFromPageConfig","ObjectRenderer","controller","FrameConfig","pageconf","getClient","labdom","dfs","getDataFrames","getStdURL","pagedom","rends","holder","controldom","getDocumentPageControls","dpc","CspDatatables","wResViewer","wrViewer","convertToDatatable","dt","table","DataTable","searching","pageLength","lengthMenu","paging","initComplete","oInstance","$","each","html","columnDefs","targets","createdRow","row","find","attr","on","cell","column","showDBMainPage","dbInfo","parents","dbId","deleteDatabase","executeQuery","getQueryOnPagination","sqp","chosenValue","generateNewQueryOnPageChange","qTextDom","getCallbackSettings","len","setUp","dtdom","getNewDataOnChange","drawnTab","aSettings","_iDisplayLength","_iDisplayStart","getDataFromServer","serverSide","processing","ajax","entries","buttons","scrollX","HTMLObjectViewer","headerViewer","getObjectHeaderViewer","renderedDOM","getObjectDOM","replaceWith","getObjectIDMarker","getObjectBodyDOM","orientation","getContentOrientation","pcls","sp","vholder","getFeatureDOM","feature","hasFeatureViewer","featureViewer","redrawHeader","nheader","redrawBody","nbody","addRenderedProperty","renderedprop","clear","goTo","subj","goToName","idm","sumDOM","controlsDOM","objDOM","showFeature","facetDOM","getObjectFacetDOM","getObjectLabelDOM","idDOM","getObjectIDDOM","typeDOM","getObjectTypeDOM","getObjectStatusDOM","viewDOM","getViewPropertyDOM","hideDOM","getViewerSelectorDOM","getObjectControlsDOM","getObjectSummaryDOM","sum","getSummary","getInfoboxDOM","addDOM","getAddPropertyDOM","getModeSelectorDOM","getObjectDeleteDOM","cpropDOM","getObjectCloneDOM","rpropDOM","getObjectResetDOM","upropDOM","getObjectUpdateDOM","showDOM","getObjectShowDOM","getObjectHideDOM","viewables","getAvailableFacets","mpropDOM","getSelectionControl","currentFacet","setFacet","isNewDocument","required","isClassChoice","cs","getAvailableClassChoices","mlabDOM","changeClass","cmt","addables","getAddableProperties","cardControlAllows","addNewProperty","getViewableProperties","goToProperty","clone","reset","getAvailableViewers","currentViewer","setViewer","hide","show","save","size","getDOM","dataviewer","HTMLDateHelper","months","getMonthName","GoogleMapHelper","polygon","polyline","markers","width","height","mapLat","mapLong","zoom","stroke","color","opacity","weight","fill","line","destroy","translatePolygonToArray","vertices","getPath","seenValue","getLength","xy","getAt","lat","lng","translateArrayToPolygon","array","jsonified","latlong","createPolygon","coords","Polygon","paths","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","setMap","createPolyline","Polyline","clearMarkers","addMarker","position","marker","Marker","addListener","getCoordsFromMarkers","set","x","initMap","mapContainer","center","parseFloat","setPath","event","trigger","getPropertyHeaderViewer","HTMLPropertyHeaderViewer","propDOM","npropDOM","getPropertyDOM","getPropertyIDMarker","getPropertyBodyDOM","addRenderedValue","renderedval","wrapper","expModeMenu","getPropertyControlsDOM","getPropertyLabelDOM","statDOM","getPropertyStatusDOM","prepend","getPropertySummaryDOM","prelude","getPropertyFacetDOM","getViewValueDOM","getPropertyIDDOM","getPropertyRangeDOM","hasCardinalityRestriction","getPropertyCardinalityDOM","getPropertyCommentDOM","getComment","restriction","getRestriction","min","max","getActionControlDOM","settingsDOM","getPropertyDeleteDOM","getAddValueDOM","getPropertyResetDOM","getPropertyUpdateDOM","getPropertyShowDOM","getPropertyHideDOM","getSettingsControlDOM","addClass","getViewableValues","goToValue","showValue","HTMLDataViewer","getValueHeaderViewer","HTMLDataHeaderViewer","JSONObjectViewer","valDOM","nvalDOM","getValueDOM","getValueIDMarker","getValueBodyDOM","vdom","getDataValueViewer","getSummaryDOM","HTMLTerminusClient","fireInternalLink","preventDefault","load","internalLink","onclick","onClick","getValueFacetDOM","getValueTypeDOM","getValueStatusDOM","getValueControlsDOM","getValueDeleteDOM","getValueCloneDOM","getValueResetDOM","getValueUpdateDOM","getValueShowDOM","getValueHideDOM","TerminusDocumentChooser","show_button","getS2DOM","getIDDOM","docchooser","cfilter","termcc","new_class","tdom","s2config","dataType","contentType","delay","cache","placeholder","dcip","keyCode","dbut","toggleView","getChangeViewText","TerminusUI","TerminusConfig","pconfig","messages","explorer","nlocation","ApiExplorer","TerminusDBsdk","TerminusViolations","TerminusQueryViewer","TerminusMappingViewer","TerminusSchemaViewer","TerminusServersdk","TerminusURLLoader","setOptions","connect","connectToDB","showView","schema","showSchemaPage","showQueryPage","showExplorer","showServerMainPage","createDatabase","dbdets","getBadArguments","myserver","dbdoc","generateNewDatabaseDocument","getSchema","updateSchema","refreshDBList","crec","getCrashString","showMessage","delrec","lid","dbn","dets","fname","getConnectionEndpoint","clearServer","clearDB","TerminusServerViewer","redrawMainPage","showLoadURLPage","TerminusDBViewer","showCreateDBPage","TerminusDBCreator","showMappingPage","mapping","getDocViewerOptions","showCreateDocument","getDocCreatorOptions","main","showResult","clearMessages","clearMainPage","setMessageDOM","setbuttonControls","setControllerDOM","setExplorerDOM","setPluginsDOM","setViewerDOM","comps","slocation","toggleControl","drawControls","toggleDashboardWidget","widget","drawExplorer","loadControls","ncontrol","nd","exp","ae","sc","TerminusServerController","TerminusDBController","show_controls","pseudoCapability","show_views","busy","getBusyLoader","bsyDom","pd","pbc","pbsa","pbia","md","msgHolder","vios","nvios","cmsg","views","document_options","schema_options","piman","addPlugin","getClassFrameOptions","viewdoc_options","apiNavConfig","mainNav","navText","defaultSelected","database","subNav","getClassFrames","viewDocument","update","use_fetch","return_full_response","aec","getApiNav","getApiExplorerDom","setSelectedNavMenu","setSelectedSubMenu","navOnSelect","createNavs","navConfig","ul","navDom","cont","apiCont","getConnectExplorer","getDatabaseExplorer","getSchemaApi","getDocumentApi","getQueryApi","changeSubApiDom","curSubMenu","getDatabaseDom","getShowApiDom","getQueryApiDom","subNavOnSelect","subMenuConfig","createSubNavs","getSignature","getForm","getServerForm","form","fd","inpLabel","cd","inpId","keyLabel","resd","gatherips","curApi","urlPlaceholder","formDoc","urlLabel","inpUrl","docUrlLabel","inpDocUrl","inpKey","docLabel","inpDoc","inp","docUrl","getApiSendButton","getApiForm","enc","schurl","buttonSelf","gtxtar","txtar","dcurl","schemaUrlDom","htmlEditor","getValue","sg","ic","sig","DispatchRequest","URIError","dispatch","dburl","makeDocumentConsistentWithURL","addOptionsToDocument","docurl","qurl","q","addOptionsToWOQL","cfurl","pdoc","_","addKeyToPayload","dispatchFetch","redirect","referrer","hdrs","credentials","Headers","fetch","ok","btoaImplementation","Buffer","from","axios","delete","catch","post","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","allocUnsafe","TypeError","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","fromString","copy","fromObject","assertSize","loweredCase","utf8ToBytes","base64ToBytes","slowToString","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","arr","indexSize","arrLength","valLength","String","buf","readUInt16BE","foundIndex","hexWrite","offset","Number","remaining","strLen","substr","utf8Write","blitBuffer","asciiWrite","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","allocUnsafeSlow","_isBuffer","compare","y","list","pos","swap16","swap32","swap64","equals","inspect","match","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","out","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","dst","g","Function","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","Axios","mergeConfig","createInstance","defaultConfig","instance","instanceConfig","CancelToken","isCancel","all","promises","spread","default","InterceptorManager","dispatchRequest","interceptors","chain","interceptor","fulfilled","rejected","shift","getUri","handlers","use","eject","transformData","isAbsoluteURL","combineURLs","throwIfCancellationRequested","throwIfRequested","reason","fns","normalizedName","isAxiosError","number","fileName","lineNumber","columnNumber","stack","ignoreDuplicateOf","originURL","msie","userAgent","urlParsingNode","resolveURL","protocol","host","search","hash","hostname","port","pathname","requestURL","expires","path","secure","cookie","toGMTString","decodeURIComponent","now","relativeURL","executor","resolvePromise","token","parentframe","empty","originalFrames","DataFrame","ClassFrame","Restriction","loadRestriction","getAsFrame","ff","domainValue","pFrame","isnew","restrictions","props","clearData","newkids","genBNID","jsonld_context","cf","isValid","hasSchema","frames","cframe","getPropertyClassFrame","getChosenClassFrame","isLogic","getChosenFrame","isData","df","kid","pat","basis","getMissingPropertyList","missing","newb","getFilledPropertyList","filled","newid","pf","hasRestriction","createEmpty","clss","getClassChoices","createEmptyChoice","cloned","clonedval","kidclone","getChildren","getChild","childid","kids","removeProperty","addProperty","addPropertyValue","removePropertyValue","nfvals","contents","nkids","isValidType","rangeValue","comment","hasCardRestriction","getType","isObjectProperty","isDatatypeProperty","isRestriction","isDocument","isChoice","getChoiceOptions","elements","option","lang","getTypeShorthand","normalizer","loadFromObjectFrame","par","child","getChosenClassFrames","objframe","nc","operands","dataframe","cloneDataFrame","other","domcls","operand","cardinality","maxCardinality","minCardinality","nrest","textdom","darkMode","jsonldCheck","fromTextArea","firstLineNumber","lineNumbers","styleActiveLine","lineWrapping","smartIndent","indentWithTabs","newlineAndIndent","autoCloseBrackets","matchBrackets","afterCursor","extraKeys","refresh","setCodemirrorSize","defaultCharWidth","setOption","setSize","setTimeout","runMode","innerText","theme","ValueRenderer","PropertyViewer","PropertyRenderer","predicate","originalValues","changed","originalProperties","newProperties","TerminusDashboard","decorateRenderer","getOptionsForChild","getOptionsForValue","getOptionsForObject","buildValueRenderers","getViewerForProperty","adorig","getDataFramesToRender","vr","getChildrenToRender","kidf","viewIncludesChildren","allkids","extracts","updated","childUpdated","clsmeta","deleteProperty","setNew","addPropertyClass","nvals","deletePropertyValue","rest","currentnum","new_property","hideDisabledControls","hide_disabled_controls","nocascade","parentFacetChange","page","multiline","summary","containsPage","setView","nukeViewer","ptype","valcount","vsum","getFeaturesForFacet","getOptionsForProperty","buildPropertyRenderers","getViewerForObject","getPropertiesToRender","renders","parentObject","nkid","parentobj","newrend","demandid","inputID","dval","nprops","ctl","getController","new_object","isPartOfNewDocument","pfacet","vrend","propcount","nviewer","standardSort","patterns","sorted","rdft","rdfc","extractLDO","extractJSONLD","extracted","big","isBigType","getTypeSize","vallab","els","foptions","inputs","badData","lldom","getInputDOMs","long","latdom","longdom","getLatLongDOM","firstcol","delbut","updateValueFromForm","op","lldoms","butspan","addbut","ipdoms","DateHelper","allowbce","date_spacer","time_spacer","datetime_separator","helper","parseDate","datepart","getDateComponentDOM","timepart","getTimeComponentDOM","hdom","mdom","mlab","sdom","slab","dadom","ydom","ddom","part","xsdFromParsed","opdom","getEntityViewHTML","getEntityLabel","dv","nspan","il","tit","img","commas","numberWithCommas","delimiter","parseRangeValue","rvals","svals","useCommas","tnode","getRangeSymbolDOM","x2","t2node","data1","data2","firstip","secondip","showing_range","but","changeHandler","mapcontainer","ghelper","latLng","coo","inner","quill","d2ch","originalValue","nf","nvr","inline","getAPIURL","DBURL","getEntityReference","entities","bd","new_value","text_summary_length","nrend","getViewerForValue","objlit","getViewerForDataValue","ft","wquery","dbc","scd","dbrec","nm","getControlHTML","getDocumentChooserDOM","getDocumentCreatorDOM","nbut","mcls","nlab","click","nbuts","tcdom","gb","bi","tds","bt","tts","nlabs","ccDOM","sth","banner","dhp","scs","getDeleteOnHomePage","getClassesDOM","getDbInfoBox","info","del","dbdel","confirm","getDBSummary","sct","mfd","sci","idip","titip","descip","schem","kip","datip","butfield","cancbut","loadbut","TerminusViolation","context_msg","vioHeading","getPropertyAsDOM","pdom","ldom","WOQLTextboxGenerator","meta","generator","gentype","generators","loadGenerator","hasGeneratorOptions","changeGenerator","ng","redrawGenerator","inputDOM","getQueryButtonsDOM","getResultViewDom","qbox","getQueryCreatorChoiceDOM","qtHolder","qTextBox","getQueryTextAreaDOM","buttonsDOM","qcc","gen","box","TerminusPropertyChooser","tq","qman","datatable","gatherDatatableSettings","txtArea","queryName","getQueryButtonGroups","qGroupQueries","qrow","srcElement","textContent","nodeName","qeb","ch","setDatatableSettings","eqh","qbut","qval","qbuts","qexs","qh","qcGroup","nqbut","aqbut","qvalue","ebut","pbut","prbut","qdGroup","termpc","qdocGroup","docch","docdom","d2dom","clGroup","dtGroup","docGroup","labopt","comopt","cprop","tsel","o1","o2","getFormFieldDOM","getFormField","queries","submit","jsonip","map_source","map_target","confirm_before_update","loadSchema","msgtype","resetControlDOM","getSchemaSaveButtons","getSchemaImportActionButtons","getShowSchemaButton","getClassFrameChooser","getSchemaEditButton","getImportButton","getFormatChoices","fc","tc","tj","refreshMainPage","getSchemaViewDOM","getSchemaEditDOM","getSchemaImportDOM","getClassFrameDOM","ssb","getCancelButton","getSaveButton","getImportSaveButton","getSchemaButton","getImportPreviewButton","is_import","doImport","schema_edit_dom","func","origurl","newschema","appendSchema","showConfirmPage","s2","nschema","np","docviewer","ipval","klab","modes","overwrite","append","rsc","getServerLabelDOM","srec","desc","csbut","crbut","getDBListDOM","getServerDetailsDOM","scl","wrapTableLinkCell","tdElement","sec","lihed","th1","th2","th3","th4","th5","th6","fullid","td1","td2","td3","td4","td5","td6","deleteDBPermitted","delDB","url_input","key_input","getLabelDOM","ip","ltxt","pholder","stit","loadbuts"],"mappings":"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","file":"terminus-dashboard.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 33);\n","'use strict';\nmodule.exports = {WOQLClient:require('./lib/woqlClient'),\n                  ConnectionCapabilities:require('./lib/connectionCapabilities'),\n                  ConnectionConfig:require('./lib/connectionConfig'),\n                  IDParser:require('./lib/terminusIDParser'),\n                  ErrorMessage:require('./lib/errorMessage'),\n                  FrameHelper:require('./lib/frameHelper'),\n                  ObjectFrame:require('./lib/objectFrame')};","'use strict';\n\nvar bind = require('./helpers/bind');\nvar isBuffer = require('is-buffer');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n","const TerminusPluginManager = require('../plugins/TerminusPlugin');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\nlet HTMLFrameHelper = {};\r\n\r\nHTMLFrameHelper.getActionControl = function(type, control, label, callback, disabled){\r\n\tvar pman = new TerminusPluginManager();\r\n\tvar dpropDOM = document.createElement(\"span\");\r\n\tdpropDOM.setAttribute(\"class\", \"terminus-action-control terminus-save-btn \" + type + \"-\" + control);\r\n\tvar pman = new TerminusPluginManager();\r\n    /*if(pman.pluginAvailable(\"font-awesome\")){\r\n\t\tvar icon = document.createElement('icon');\r\n\t\tvar faic = this.getControlIcon(control);\r\n\t\tif(disabled){\r\n\t\t\ticon.setAttribute(\"class\", \"terminus-frame-control frame-control-action action-disabled fa fa\" + faic + \" \" + type + \"-\" + control + \"-disabled terminus-font-align\");\r\n\t\t\ticon.setAttribute(\"title\", disabled);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ticon.setAttribute(\"class\", \"terminus-frame-control frame-control-action frame-control-action fa fa\" + faic + \" \" + type + \"-\" + control + \" terminus-font-align\");\r\n\t\t\ticon.addEventListener(\"click\", function(){\r\n\t\t\t\tcallback(control);\r\n\t\t\t});\r\n\t\t}\r\n\t\tdpropDOM.appendChild(icon);\r\n\t}\r\n\telse{*/\r\n\t\tvar button = document.createElement(\"button\");\r\n\t\tbutton.appendChild(document.createTextNode(label));\r\n\t\tif(disabled){\r\n\t\t\tbutton.setAttribute(\"class\", \"terminus-frame-control terminus-frame-btn frame-control-action action-disabled \" + type + \"-\" + control + \"-disabled\");\r\n\t\t\tbutton.setAttribute(\"title\", disabled);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbutton.setAttribute(\"class\", \"terminus-frame-control terminus-frame-btn frame-control-action \" + type + \"-\" + control);\r\n\t\t\tbutton.addEventListener(\"click\", function(){\r\n\t\t\t\tif(this.innerHTML == 'Save'){\r\n\t\t\t\t\tvar objId = document.getElementsByClassName('terminus-object-id-input');\r\n\t\t\t\t\tif(objId.length>0){\r\n\t\t\t\t\t\tif(!objId[0].value){\r\n\t\t\t\t\t\t\tobjId[0].setAttribute('placeholder', 'Required field');\r\n\t\t\t\t\t\t\tobjId[0].style.background = '#f8d7da';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse callback(control);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse callback(control);\r\n\t\t\t\t}\r\n\t\t\t\telse callback(control);\r\n\t\t\t\t//(control);\r\n\t\t\t});\r\n\t\t}\r\n\t\tdpropDOM.appendChild(button);\r\n\t//}\r\n\treturn dpropDOM;\r\n}\r\n\r\nHTMLFrameHelper.getSettingsControl = function(view){\r\n\tvar pman = new TerminusPluginManager();\r\n\tif(pman.pluginAvailable(\"font-awesome\")){\r\n\t\tvar icon = document.createElement('icon');\r\n\t\tif(view == 'property') icon.setAttribute('class', 'fa fa-cog terminus-pointer');\r\n\t\telse if(view == 'data') icon.setAttribute('class', 'fa fa-edit terminus-pointer');\r\n\t\ticon.setAttribute('style', 'margin: 10px;')\r\n\t\treturn icon;\r\n\t}\r\n\telse{\r\n\t\tvar button = document.createElement(\"button\");\r\n\t\tbutton.setAttribute('class', 'terminus-btn');\r\n\t\tbutton.appendChild(document.createTextNode('Settings'));\r\n\t\treturn button;\r\n\t}\r\n}\r\n\r\nHTMLFrameHelper.getControlIcon = function(control){\r\n\tvar icon;\r\n\tswitch(control){\r\n\t\tcase 'delete':\r\n\t\t\ticon = '-alt-delete';\r\n\t\tbreak;\r\n\t\tcase 'add':\r\n\t\t\ticon = '-plus';\r\n\t\tbreak;\r\n\t\tcase 'reset':\r\n\t\t\ticon = '-undo';\r\n\t\tbreak;\r\n\t\tcase 'save':\r\n\t\t\ticon = '-save';\r\n\t\tbreak;\r\n\t\tcase 'hide':\r\n\t\t\ticon = '-eye-slash';\r\n\t\tbreak;\r\n\t}\r\n\treturn icon;\r\n}\r\n\r\nHTMLFrameHelper.getSelectionControl = function(type, options, selected, callback){\r\n\tvar sel = document.createElement(\"select\");\r\n\tsel.setAttribute(\"class\", \"terminus-frame-selector frame-control-selection \" + type);\r\n\tfor(var i = 0; i < options.length; i++){\r\n\t\tvar opt = document.createElement(\"option\");\r\n\t\tif(typeof options[i] == \"object\"){\r\n\t\t\topt.value = options[i].value;\r\n\t\t\tvar label = (options[i].label ?  document.createTextNode(options[i].label) : document.createTextNode(TerminusClient.FrameHelper.labelFromURL(options[i].value)));\r\n\t\t\topt.appendChild(label);\r\n\t\t}\r\n\t\telse {\r\n\t\t\topt.value = options[i];\r\n\t\t\tlabel = TerminusClient.FrameHelper.labelFromURL(opt.value);\r\n\t\t\topt.appendChild(document.createTextNode(label));\r\n\t\t}\r\n\t\tif(selected == opt.value){\r\n\t\t\topt.setAttribute(\"selected\", \"selected\");\r\n\t\t}\r\n\t\tsel.appendChild(opt);\r\n\t}\r\n\tsel.addEventListener(\"change\", function(){\r\n\t\tcallback(this.value);\r\n\t});\r\n\treturn sel;\r\n}\r\n\r\nHTMLFrameHelper.getModeSelectorDOM = function(which, renderer){\r\n\tvar viewsDOM = document.createElement(\"span\");\r\n\tviewsDOM.setAttribute(\"class\", \"terminus-mode terminus-\"+which+\"-mode\");\r\n\tif(renderer.mode == \"view\"){\r\n\t\tvar callback = function(){ renderer.setMode(\"edit\");}\r\n\t\tviewsDOM.appendChild(HTMLFrameHelper.getActionControl(\"terminus-mode terminus-\"+which+\"-mode\", \"edit\", \" Edit \", callback));\r\n\t}\r\n\telse if(renderer.isNew()){\r\n\t\treturn false;\r\n\t}\r\n\telse {\r\n\t\tvar callback = function(){ renderer.cancel();}\r\n\t\tviewsDOM.appendChild(HTMLFrameHelper.getActionControl(which, \"cancel\", \"Cancel\", callback));\r\n\t}\r\n\treturn viewsDOM;\r\n}\r\n\r\nHTMLFrameHelper.goToName = function(s, p, i){\r\n\tvar url = window.location.href;\r\n\tif(url){\r\n\t\tvar wbits = url.split(\"#\");\r\n\t\tvar loc = wbits[0];\r\n\t\tvar sh = TerminusClient.FrameHelper.getShorthand(s);\r\n\t    if(!sh) sh = s;\r\n\t\tvar bits = sh.split(\":\");\r\n\t\tif(bits.length > 1) sh = bits[1];\r\n\t\tvar htmlid = sh;\r\n\t\tif(p){\r\n\t\t\tvar prop = TerminusClient.FrameHelper.getShorthand(p);\r\n\t\t\tif(!prop ) prop = p;\r\n\t\t\tvar bits = prop.split(\":\");\r\n\t\t\tif(bits.length > 1) prop = bits[1];\r\n\t\t\thtmlid += \"_\" + prop;\r\n\t\t\tif(i){\r\n\t\t\t\thtmlid += \"_\" + i;\r\n\t\t\t}\r\n\t\t}\r\n\t\twindow.location = loc + \"#\" + htmlid;\r\n\t}\r\n}\r\n\r\nHTMLFrameHelper.wrapShortenedText = function(wrap, text, max_cell_size, max_word_size){\r\n\tif(max_cell_size && (text.length > max_cell_size)){\r\n\t\twrap.setAttribute(\"title\", text);\r\n\t\ttext = text.substring(0, max_cell_size) + \"...\";\r\n\t}\r\n\tif(max_word_size){\r\n\t\tconst replacements = {}\r\n\t\tconst words = text.split(\" \");\r\n\t\tfor(var i = 0; i < words.length; i++){\r\n\t\t\tvar word = words[i];\r\n\t\t\tif(word.length > max_word_size){\r\n\t\t\t\twrap.setAttribute(\"title\", text);\r\n\t\t\t\tvar newstr = word.substring(0, max_word_size) + \"...\";\r\n\t\t\t\treplacements[word] = newstr;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(var k in replacements){\r\n\t\t\ttext = text.replace(k, replacements[k]);\r\n\t\t}\r\n\t}\r\n\twrap.appendChild(document.createTextNode(text));\r\n}\r\n\r\nHTMLFrameHelper.getVariableValueFromBinding = function(varname, bind){\r\n\tfor(var key in bind){\r\n\t\tvar skey = key.substring(key.lastIndexOf(\"/\")+1);\r\n\t\tif(skey == varname){\r\n\t\t\tconst obj = bind[key];\r\n\t\t\tif(typeof obj == \"object\" && obj['@value']) return obj['@value'];\r\n\t\t\treturn obj;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n\r\n/*HTMLFrameHelper.getFrameRow = function(){\r\n\tvar row = document.createElement('div');\r\n\trow.setAttribute('class', 'terminus-frame-row');\r\n\treturn row;\r\n}\r\n\r\nHTMLFrameHelper.getFrameGroup = function(frow){\r\n\tvar fl = document.createElement('div');\r\n\tfl.setAttribute('class', 'terminus-frame-length');\r\n\tfrow.appendChild(fl);\r\n\r\n\tvar fg = document.createElement('div');\r\n\tfg.setAttribute('class', 'terminus-frame-group');\r\n\tfl.appendChild(fg);\r\n\treturn fl;\r\n}*/\r\n\r\nHTMLFrameHelper.getInfoboxDOM = function(type, label, value, help, input){\r\n\t/*var frow = this.getFrameRow();\r\n\tvar fgroup = this.getFrameGroup(frow);*/\r\n\tvar infoDOM = document.createElement(\"span\");\r\n\tinfoDOM.setAttribute(\"class\", \"terminus-frame-infobox-box \" + \"terminus-\" +type );\r\n\t//fgroup.appendChild(infoDOM);\r\n\tif(help){\r\n\t\tinfoDOM.setAttribute(\"title\", help);\r\n\t}\r\n\tif(label){\r\n\t\tvar linfo = document.createElement(\"span\");\r\n\t\tlinfo.setAttribute(\"class\", \"terminus-frame-infobox-label \" + \"terminus-\" +type + \"-label\");\r\n\t\tlinfo.appendChild(document.createTextNode(label));\r\n\t\tinfoDOM.appendChild(linfo);\r\n\t}\r\n\tvar lspacer = document.createElement(\"span\");\r\n\tlspacer.setAttribute(\"class\", \"terminus-frame-infobox-spacer \" + \"terminus-\" +type + \"-spacer\");\r\n\tlspacer.appendChild(document.createTextNode(\" \"));\r\n\tinfoDOM.appendChild(lspacer);\r\n\tvar lval = document.createElement(\"span\");\r\n\tlval.setAttribute(\"class\", \"terminus-frame-infobox-value \" + \"terminus-\" +type + \"-value terminus-property-label-align\");\r\n\tif(input){\r\n\t\tinput.value = value;\r\n\t\tlval.appendChild(input);\r\n\t}\r\n\telse if(value) {\r\n\t\tvar sh = TerminusClient.FrameHelper.getShorthand(value);\r\n        if(sh){\r\n    \t   \tvar bits = sh.split(\":\");\r\n            sh = bits[1];\r\n   \t\t\tlval.setAttribute(\"title\", value);\r\n\t\t\tlval.appendChild(document.createTextNode(sh));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlval.appendChild(document.createTextNode(value));\r\n\t\t}\r\n\t}\r\n\tinfoDOM.appendChild(lval);\r\n\treturn infoDOM;\r\n}\r\n\r\nmodule.exports=HTMLFrameHelper\r\n","/**\r\n * @file Javascript Api explorer tool\r\n * @author Kitty Jose\r\n * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more\r\n *\r\n * @summary Set of functions used across scripts\r\n */\r\nconst Codemirror= require('./plugins/codemirror.terminus');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n// function to read Files\r\nfunction readFile(file){\r\n    if (window.XMLHttpRequest){\r\n        // code for IE7+, Firefox, Chrome, Opera, Safari\r\n        xmlhttp=new XMLHttpRequest();\r\n    }\r\n    else{\r\n        // code for IE6, IE5\r\n        xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    }\r\n    xmlhttp.open(\"GET\",file,false);\r\n    xmlhttp.send();\r\n    xmlDoc=xmlhttp.responseText;\r\n    return xmlDoc;\r\n} // readFile()\r\n\r\n// function to write api call signatures from woql client\r\nfunction getFunctionSignature(which){\r\n  var sigs = {};\r\n  sigs.connect = {\r\n    spec   : \"WOQLClient.connect(surl, key)\",\r\n    descr  : \"\\n\\nConnect to a Terminus server at the given URI with an API key\"\r\n                + \"Stores the terminus:ServerCapability document returned in the connection register\"\r\n                + \"which stores, the url, key, capabilities, and database meta-data for the connected server\"\r\n                + \"If the curl argument is false or null, the this.server will be used if present,\"\r\n                + \" or the promise will be rejected.\"\r\n                + \"\\n1)The first (surl) argument: {string} argument it is the Server Url\"\r\n                + \"\\n2)The second(key) argument: {string} argument contains an API key\",\r\n    result : \"HTTP 200 on success, 409 for already existing database, otherwise error code\",\r\n    args   : {server_url : 'url', key: 'Api key'},\r\n    options: { title: \"\", description: \"\" }\r\n  };\r\n  sigs.create = {\r\n    spec    : \"WOQLClient.createDatabase(dburl, details, key)\",\r\n    descr   : \"\\n\\nCreate a Terminus Database\"\r\n                + \"\\n1)The first (dburl) argument:{string}, it is a terminusDB Url or a terminusDB Id \"\r\n                + \"\\n2)The second(details) argument:{object}, details which is the payload\"\r\n                + \"\\n which included information of the new database to be created\"\r\n                +  \"\\n3)The third (key) argument:{string}, contains an API key \",\r\n    result : \"HTTP 200 on success, 409 for already existing database, otherwise error code\",\r\n    args   : {database_url : 'url', details: '', key: ' Api key'},\r\n    options: { title: \"\", description: \"\" }\r\n  };\r\n  sigs.delete = {\r\n      spec  : \"WOQLClient.deleteDatabase(dburl, key)\",\r\n      descr : \"\\n\\nDeletes a Database\"\r\n                + \"\\n1)The first (dburl) argument: {string}, it is a terminusDB Url or a terminusDB Id \"\r\n                + \"\\n2)The second(key) argument: {string}, contains an API key\",\r\n      result: \"HTTP 200 on success, otherwise error code\",\r\n  };\r\n  sigs.getSchema = {\r\n    spec   : \"WOQLClient.getSchema(surl, options)\",\r\n    descr  : \"\\n\\nGets the schema of a database.\"\r\n             +\"\\n1)The first (surl) argument: {string}, it is a dbUrl/schema\"\r\n             + \"\\n2)The second(key) argument: {string}, contains an API key\",\r\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\r\n    options: { format: \"turtle\" }\r\n  };\r\n  sigs.getClassFrames = {\r\n    spec   : \"WOQLClient.getClassFrame = function(cfurl, cls, opts)\",\r\n    descr  : \"\\n\\nRetrieves a WOQL query on the specified database which updates the state and returns the results\"\r\n              +  \"\\nThe first (cfurl) argument can be\"\r\n              + \"\\n1) a valid URL of a terminus database or\"\r\n              +  \"\\n2) omitted - the current database will be used\"\r\n              +  \"\\nthe second argument (cls) is the URL / ID of a document class that exists in the database schema\"\r\n              +  \"\\nthe third argument (opts) is an options json - opts.key is an optional API key\",\r\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\r\n    options: { format: \"turtle\" }\r\n  };\r\n  sigs.updateSchema = {\r\n    spec    : \"WOQLClient.updateSchema(schurl, docs, options)\",\r\n    descr   : \"\\n\\nUpdates the Schema of the specified database\"\r\n                +\"\\n1)The first (surl) argument :{string}, is a dbUrl/schema\"\r\n                + \"\\n2)The second(docs) argument:{object}, is a valid owl ontology (new schema to be updated) in turtle format\"\r\n                + \"\\n3)The third (key) argument:{string}, contains an API key\",\r\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\r\n    args   : {document : 'doc'},\r\n    options: { format: \"turtle\", editmode: \"replace\"}\r\n  };\r\n  sigs.createDocument = {\r\n    spec   : \"WOQLClient.createDocument(docurl, document, options)\",\r\n    descr  : \"\\n\\nCreates a new document in the specified database\"\r\n              + \"\\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\"\r\n              + \"\\n2)The second(document) argument: {object}, is a valid document in json-ld\"\r\n              + \"\\n3)The third (key) argument:{string}, contains an API key\",\r\n    result : \"Created Document on success (HTTP 200), Violation Report Otherwise (HTTP 400+)\",\r\n    args   : {document_url : 'url', document: \"doc\"},\r\n    options: { format: \"turtle\", fail_on_id_denied: false}\r\n  };\r\n  sigs.viewDocument = {\r\n    spec    : \"WOQLClient.getDocument(docurl, options)\",\r\n    descr   : \"\\n\\nRetrieves a document from the specified database\"\r\n              + \"\\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\"\r\n              + \"\\n2)The second (key) argument: {string}, contains an API key\",\r\n    result : \"Document (HTTP 200), Violation Report Otherwise (HTTP 400+)\",\r\n    args   : {document_url : 'url'},\r\n    options: { format: \"turtle\"}\r\n  };\r\n  sigs.updateDocument = {\r\n    spec   : \"WOQLClient.updateDocument(docurl, document, options)\",\r\n    descr  : \"\\n\\nUpdates a document in the specified database with a new version\"\r\n                + \"\\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\"\r\n                + \"\\n2)The second(document) argument: {object}, is a valid document in json-ld\"\r\n                + \"\\n3)The third (key) argument:{string} argument contains an API key\",\r\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\r\n    args   : {document_url : 'url', document: \"doc\"},\r\n    options: { format: \"turtle\", editmode: \"replace\"}\r\n  };\r\n  sigs.deleteDocument = {\r\n    spec  : \"WOQLClient.deleteDocument(docurl, key)\",\r\n    descr : \"\\n\\nDeletes a document from the specified database\"\r\n            + \"\\n1)The first (docurl) argument: {string},is a dbUrl/document/document_id\"\r\n            + \"\\n2)The second (key) argument: {string}, contains an API key\",\r\n    result: \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\r\n    args  : {document_url : 'url'},\r\n  };\r\n  sigs.select = {\r\n    spec: \"WOQLClient.select(dburl, query, options)\",\r\n    descr: \"\\n\\nExecutes a read-only WOQL query on the specified database and returns the results\"\r\n              + \"\\n1)The first (docurl) argument: {string}, is a terminusDB Url or a terminusDB Id\"\r\n              + \"\\n2)The second (query) argument: {object}, a valid query in json-ld format \"\r\n              + \"\\n3)The third (key) argument:{string}, contains an API key\",\r\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\r\n    args: {woql: 'woql'},\r\n  };\r\n  sigs.update = {\r\n    spec  : \"WOQLClient.update(dburl, query, options)\",\r\n    descr : \"\\n\\nExecutes a WOQL query on the specified database which updates the state and returns the results\"\r\n              + \"\\n1)The first (dburl) argument: {string}, is a terminusDB Url or a terminusDB Id\"\r\n              + \"\\n2)The second (query) argument: {object}, a valid query in json-ld format \"\r\n              + \"\\n3)The third (key) argument:{string}, contains an API key\",\r\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\r\n    args  : {woql: 'woql'},\r\n  };\r\n  sigs.lookup = {\r\n    spec: \"WOQLClient.lookup(database_url, woql, options)\",\r\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\r\n    args: {class: 'url', term: 'string'},\r\n  };\r\n  sigs.map = {\r\n    spec: \"WOQLClient.lookup(source, target, woql, options)\",\r\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\r\n    args: {source: 'json', target: \"json\", woql: 'json'},\r\n  };\r\n  sigs.getClassFrame = {\r\n    spec: \"WOQLClient.getClassFrame(class, options)\",\r\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\r\n    args: {class: 'url'},\r\n  };\r\n  sigs.getPropertyFrame = {\r\n    spec: \"WOQLClient.getPropertyFrame(class, property, options)\",\r\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\r\n    args: {class: 'url', property: 'url'},\r\n  };\r\n  sigs.getFilledPropertyFrame = {\r\n    spec: \"WOQLClient.getPropertyFrame(document_url, property, options)\",\r\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\r\n    args: {document_url: 'url', property: 'url'},\r\n  };\r\n  sigs.getSubClasses = {\r\n    spec: \"WOQLClient.getSubClasses(class, options)\",\r\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\r\n    args: {class: 'url'},\r\n  };\r\n  return sigs[which];\r\n}//getFunctionSignature\r\n\r\n// returns dom element for header text\r\nfunction getHeaderDom(text){\r\n  var hd = document.createElement('div');\r\n  hd.setAttribute('class', 'terminus-module-head');\r\n  var h = document.createElement('h3');\r\n  h.innerHTML = text;\r\n  hd.appendChild(h);\r\n  return hd;\r\n} // getHeaderTextDom\r\n\r\n// returns dom for alert banner\r\nfunction getInfoAlertDom(type, label, msg){\r\n  var ald = document.createElement('div');\r\n  if(type == 'info') ald.setAttribute('class', 'terminus-alert terminus-alert-success');\r\n  else ald.setAttribute('class', 'alert');\r\n  var str = document.createElement('STRONG');\r\n  str.innerHTML = label;\r\n  ald.appendChild(str);\r\n  var txt = document.createTextNode(msg);\r\n  ald.appendChild(txt);\r\n  return ald;\r\n} // getInfoAlertDom()\r\n\r\n// formats response results from platform\r\nfunction getResponse(currForm, action, response, terminator){\r\n\r\n  var rd = document.createElement('div');\r\n\r\n  // get header result\r\n  rd.appendChild(getHeaderDom('Result'));\r\n  var br = document.createElement('BR');\r\n  rd.appendChild(br);\r\n\r\n  var data = JSON.stringify(response, 0, 4);\r\n\r\n  var pre = document.createElement('pre');\r\n  pre.setAttribute('class', 'terminus-api-view terminus-scheme-pre');\r\n  pre.innerHTML = data;\r\n\r\n  var cm = stylizeCodeDisplay(terminator, pre, rd, 'javascript');\r\n  if(!cm) rd.appendChild(pre);\r\n\r\n  var br = document.createElement('BR');\r\n  rd.appendChild(br);\r\n\r\n  currForm.appendChild(rd);\r\n\r\n  return currForm;\r\n}\r\n\r\n// formats the response from fetch call and spits out Http header and result\r\nfunction showHttpResult(response, action, currForm, terminator){\r\n    //var currForm = document.createElement('div');\r\n\r\n    var br = document.createElement('BR');\r\n    currForm.appendChild(br);\r\n    var br = document.createElement('BR');\r\n    currForm.appendChild(br);\r\n\r\n    // get header result\r\n    currForm.appendChild(getHeaderDom('HTTP Header'));\r\n\r\n    var br = document.createElement('BR');\r\n    currForm.appendChild(br);\r\n\r\n     var retHttpHeaders  = '';\r\n\r\n     // iterate over all headers\r\n     for (let [key, value] of response.headers) {\r\n       retHttpHeaders = retHttpHeaders +  `${key} = ${value}` + '\\n';\r\n     }\r\n\r\n    // http header result\r\n    var hdres = document.createElement('pre');\r\n    hdres.setAttribute('class', 'terminus-api-signature-pre');\r\n    var txt = document.createTextNode(retHttpHeaders);\r\n    hdres.appendChild(txt);\r\n\r\n    var cm = stylizeCodeDisplay(terminator, hdres, currForm, 'message/http');\r\n    if(!cm) currForm.appendChild(hdres);\r\n\r\n    return response.json()\r\n    .then(function(response){\r\n      getResponse(currForm, action, response, terminator); // get return response\r\n    })\r\n\r\n} // UTILS.showHttpResult()\r\n\r\n\r\nfunction deleteStylizedEditor(ui, qip){\r\n    if(ui.pluginAvailable(\"codemirror\")){\r\n\t\tvar cm = qip.nextElementSibling;\r\n\t\tcm.setAttribute('class', 'terminus-hide');\r\n\t\tTerminusClient.FrameHelper.removeChildren(cm);\r\n\t}\r\n}\r\n\r\n/* ui: terminus ui reference\r\n   txt: text area to be stylized\r\n   view: defines the size of editor to appear in pages (schema/ query)\r\n   mode: format to be displayed in\r\n*/\r\nfunction stylizeEditor(ui, txt, view, mode){\r\n    var cmConfig = ui.pluginAvailable(\"codemirror\");\r\n    if(!(cmConfig)) return;\r\n\tvar cm = new Codemirror(txt, mode, cmConfig);\r\n\tvar ar = cm.colorizeTextArea(view);\r\n\tcm.updateTextArea(ar);\r\n}\r\n\r\n/* ui: terminus ui reference\r\n   txt: text area to be stylized\r\n   dom: stylized pre area is appended to dom\r\n   mode: format to be displayed in\r\n*/\r\nfunction stylizeCodeDisplay(ui, txt, dom, mode){\r\n    var cmConfig = ui.pluginAvailable(\"codemirror\");\r\n    if(!(cmConfig)) return false;\r\n    var cm = new Codemirror(txt, mode, cmConfig);\r\n    var pr = cm.colorizePre();\r\n    dom.appendChild(pr);\r\n    return true;\r\n}\r\n\r\n/* name: classname to find and remove classes from elements\r\n*/\r\nfunction removeSelectedNavClass(name){\r\n    var el = document.getElementsByClassName(name);\r\n    for(var i=0; i<el.length; i++){\r\n        el[i].classList.remove(name);\r\n    }\r\n}\r\n\r\n// toggles between contents\r\nfunction tolggleContent(icon, content){\r\n    if (content.style.display === \"block\"){\r\n        removeSelectedNavClass(\"fa-chevron-up\");\r\n        icon.classList.add(\"fa-chevron-down\");\r\n        content.style.display = \"none\";\r\n    }\r\n    else{\r\n        removeSelectedNavClass(\"fa-chevron-down\");\r\n        icon.classList.add(\"fa-chevron-up\");\r\n        content.style.display = \"block\";\r\n    }\r\n}\r\n\r\n// controls current selected nav bar\r\nfunction activateSelectedNav(nav, terminator){\r\n    removeSelectedNavClass(\"terminus-selected\");\r\n\tcheckDocumentSubMenus(terminator);\r\n\tnav.classList.add(\"terminus-selected\");\r\n}\r\n\r\nfunction hideDocumentSubMenus(el){\r\n\tif(el.classList.contains('terminus-display')){\r\n\t\tel.classList.remove('terminus-display');\r\n\t\tel.classList.add('terminus-hide');\r\n\t}\r\n}\r\n\r\nfunction checkDocumentSubMenus(terminator){\r\n\tif(terminator.ui.showControl(\"get_document\")) {\r\n\t\tvar gd = document.getElementsByClassName('terminus-get-doc');\r\n\t\thideDocumentSubMenus(gd[0]);\r\n\t}\r\n\tif(terminator.ui.showControl(\"create_document\")) {\r\n\t\tvar cd = document.getElementsByClassName('terminus-create-doc');\r\n\t\thideDocumentSubMenus(cd[0]);\r\n\t}\r\n}\r\n\r\nfunction toggleVisibility(el){\r\n\tif(el.classList.contains('terminus-display')){\r\n\t\tel.classList.remove('terminus-display');\r\n\t\tel.classList.add('terminus-hide');\r\n\t}\r\n    else if(el.classList.contains('terminus-hide')){\r\n        el.classList.remove('terminus-hide');\r\n\t\tel.classList.add('terminus-display');\r\n\t}\r\n}\r\n\r\nfunction extractValueFromCell(cellValue){\r\n    var ihtml = new DOMParser().parseFromString(cellValue, \"text/xml\");\r\n    return ihtml.firstChild.innerHTML;\r\n}\r\n\r\nfunction displayDocumentSubMenus(ui) {\r\n\t//display submenus on click of documents\r\n\tif(ui.showControl(\"get_document\")) {\r\n\t\tvar gd = document.getElementsByClassName('terminus-get-doc');\r\n\t\tshowSubMenus(gd[0]);\r\n\t}\r\n\tif(ui.showControl(\"create_document\")) {\r\n\t\tvar cd = document.getElementsByClassName('terminus-create-doc');\r\n\t\tshowSubMenus(cd[0]);\r\n\t}\r\n}\r\n\r\nfunction showSubMenus (el){\r\n\tel.classList.remove('terminus-hide');\r\n\tel.classList.add('terminus-display');\r\n}\r\n\r\n\r\nmodule.exports={tolggleContent,\r\n               removeSelectedNavClass,\r\n               stylizeCodeDisplay,\r\n               stylizeEditor,\r\n               deleteStylizedEditor,\r\n               showHttpResult,\r\n               getHeaderDom,\r\n               getInfoAlertDom,\r\n               getFunctionSignature,\r\n               toggleVisibility,\r\n               extractValueFromCell,\r\n               displayDocumentSubMenus,\r\n               activateSelectedNav}\r\n","const WOQLResult = require('./WOQLResultsViewer');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\nfunction WOQLQuery(client, options, ui){\r\n\tthis.client = client;\r\n\tthis.options = options;\r\n\tthis.ui = ui;\r\n\tthis.default_limit = 1000;\r\n\tthis.prefixes = {};\r\n\tif(client.connectionConfig.platformEndpoint()){\r\n\t\tvar sid = client.connectionConfig.server.substring(0, client.connectionConfig.server.lastIndexOf(\"platform\"));\r\n\t\tthis.sid = sid;\r\n\t\tvar colid = client.connectionConfig.server.substring(0, client.connectionConfig.server.lastIndexOf(\"platform\")) + client.connectionConfig.dbid;\r\n\t\tthis.prefixes['s'] = colid + \"/ontology/main#\";\r\n\t\tthis.prefixes['g'] = sid;\r\n\t\tthis.prefixes['db'] = colid + \"/\";\r\n\t\tthis.prefixes['doc'] = colid + \"/candidate/\";\r\n\t\tthis.prefixes['dg'] = colid + \"/graph/main/\";\r\n\t}\r\n\telse {\r\n\t\tthis.sid = client.connectionConfig.serverURL();\r\n\t\tthis.prefixes['s'] = client.connectionConfig.schemaURL() + \"#\";\r\n\t\tthis.prefixes['dg'] = client.connectionConfig.dbURL() + \"/schema\";\r\n\t\tthis.prefixes['doc'] = client.connectionConfig.docURL();\r\n\t\tthis.prefixes['db'] = client.connectionConfig.dbURL() + \"/\";\r\n\t\tthis.prefixes['g'] = client.connectionConfig.serverURL();\r\n\t}\r\n\tfor(var pref in TerminusClient.FrameHelper.standard_urls){\r\n\t\tthis.prefixes[pref] = TerminusClient.FrameHelper.standard_urls[pref];\r\n\t}\r\n}\r\n\r\nWOQLQuery.prototype.setPrefixes = function(prefixes){\r\n\tthis.prefixes = prefixes;\r\n}\r\n\r\n\r\nWOQLQuery.prototype.shorten = function(url){\r\n\tfor(var pref in this.prefixes){\r\n\t\tif(this.prefixes[pref] == url.substring(0, this.prefixes[pref].length)){\r\n\t\t\treturn ( pref + \":\" + url.substring(this.prefixes[pref].length));\r\n\t\t}\r\n\t}\r\n\treturn url;\r\n}\r\n\r\nWOQLQuery.prototype.execute = function(woql){\r\n\tvar wrapped = this.wrap(woql);\r\n\tvar self = this;\r\n\treturn this.client.select(false, wrapped)\r\n\t.then(function(response){\r\n\t\tvar res = new WOQLResult.WOQLResult(response, self, self.options, self.ui);\r\n\t\treturn res;\r\n\t});\r\n}\r\n\r\nWOQLQuery.prototype.wrap = function(woql){\r\n\tvar wjson = {\r\n\t\t\"@context\" : this.prefixes,\r\n\t\t\"from\": [\r\n\t\t\tthis.client.connectionConfig.dbURL(),\r\n\t\t\twoql\r\n\t\t]\r\n\t};\r\n\treturn wjson;\r\n}\r\n\r\nWOQLQuery.prototype.getConcreteDocumentClassPattern = function(varc){\r\n\tvar varc = varc || \"v:Class\";\r\n\tvar pat = {\r\n\t\tand: [\r\n\t\t\tthis.getSubclassQueryPattern(varc, \"tcs:Document\"),\r\n\t\t\t{\r\n\t\t\t\tnot: [this.getAbstractQueryPattern(varc)]\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\treturn pat;\r\n}\r\n\r\nWOQLQuery.prototype.getAbstractQueryPattern = function(varname){\r\n\tvar qp = {\r\n\t\tquad: [varname, \"tcs:tag\", \"tcs:abstract\", \"db:schema\"]\r\n\t}\r\n\treturn qp;\r\n}\r\n\r\nWOQLQuery.prototype.getSubclassQueryPattern = function(varname, clsname){\r\n\tvar sqp = {sub: [varname, clsname]};\r\n\treturn sqp;\r\n}\r\n\r\nWOQLQuery.prototype.queryWrappedWithLimit = function(query, limit, start){\r\n\tlimit = limit ? limit : this.default_limit ;\r\n\tstart = start ? start : 0;\r\n\tvar wjson = {\r\n\t\tlimit: [limit, {\r\n\t\t\tstart: [start, query]\r\n\t\t}]\r\n\t};\r\n\treturn wjson;\r\n}\r\n\r\n\r\nWOQLQuery.prototype.getAllDocumentQuery = function(constraint, limit, start){\r\n\tvar query = {\r\n\t\tand: [\r\n\t\t\t{\r\n\t\t\t\ttriple: [\"v:Document\", \"rdf:type\", \"v:Type\"]\r\n\t\t\t},\r\n\t\t\tthis.getSubclassQueryPattern(\"v:Type\", \"tcs:Document\")\r\n\t\t]\r\n\t}\r\n\tif(constraint){\r\n\t\tquery.and.push(constraint);\r\n\t}\r\n\treturn this.queryWrappedWithLimit(query, limit, start);\r\n}\r\n\r\nWOQLQuery.prototype.getEverythingQuery = function(constraint, limit, start){\r\n\tvar wjson = {triple: [\"v:Subject\", \"v:Predicate\", \"v:Object\"]};\r\n\tif(constraint){\r\n\t\twjson = {and: [wjson, constraint]};\r\n\t}\r\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\r\n}\r\n\r\nWOQLQuery.prototype.getPropertyListQuery = function(constraint, limit, start){\r\n\tvar wjson = {\r\n\t\tand: [{quad: [\"v:Property\", \"rdfs:range\", \"v:Range\", \"db:schema\"]},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Property\", \"rdf:type\", \"v:Type\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Property\", \"rdfs:label\", \"v:Label\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Property\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Property\", \"rdfs:domain\", \"v:Domain\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t]\r\n\t}\r\n\tif(constraint){\r\n\t\twjson = {and: [wjson, constraint]};\r\n\t}\r\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\r\n}\r\n\r\n\r\nWOQLQuery.prototype.getElementMetaDataQuery = function(constraint, limit, start){\r\n\tvar wjson = {\r\n\t\tand: [{quad: [\"v:Element\", \"rdf:type\", \"v:Type\", \"db:schema\"]},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Element\", \"tcs:tag\", \"v:Abstract\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Element\", \"rdfs:domain\", \"v:Domain\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Element\", \"rdfs:range\", \"v:Range\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t]\r\n\t}\r\n\tif(constraint){\r\n\t\twjson = {and: [wjson, constraint]};\r\n\t}\r\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\r\n}\r\n\r\nWOQLQuery.prototype.getClassListMetaDataQuery = function(constraint, limit, start){\r\n\tvar wjson = {\r\n\t\tand: [{quad: [\"v:Element\", \"rdf:type\", \"owl:Class\", \"db:schema\"]},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Element\", \"tcs:tag\", \"v:Abstract\", \"db:schema\"]}]\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\tif(constraint){\r\n\t\twjson = {and: [wjson, constraint]};\r\n\t}\r\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\r\n}\r\n\r\nWOQLQuery.prototype.getClassMetaDataQuery = WOQLQuery.prototype.getClassListMetaDataQuery;\r\n\r\nWOQLQuery.prototype.getDataOfChosenClassQuery = function(chosen, limit, start){\r\n\tvar wjson = {\r\n\t\tand: [{triple: [\"v:Document\", \"rdf:type\", chosen]},\r\n\t\t\t{\r\n\t\t\t\topt: [{triple: [\"v:Document\", \"v:Property\", \"v:Value\"]}]\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\r\n}\r\n\r\nWOQLQuery.prototype.getDataOfChosenPropertyQuery = function(chosen, limit, start){\r\n\tvar wjson = {\r\n\t\tand: [{triple: [\"v:Document\", chosen, \"v:Value\"]},\r\n\t\t\t{\r\n\t\t\t\topt: [{triple: [\"v:Document\", \"rdfs:label\", \"v:Label\"]}]\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\r\n}\r\n\r\nWOQLQuery.prototype.getInstanceMeta = function(url, limit, start){\r\n\tvar wjson = {\r\n\t\tand: [\r\n\t\t\t{triple: [url, \"rdfs:label\", \"v:InstanceLabel\"]},\r\n\t\t\t{triple: [url, \"rdf:type\", \"v:InstanceType\"]},\r\n\t\t\t{\r\n\t\t\t\topt: [{triple: [url, \"rdfs:comment\", \"v:InstanceComment\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:InstanceType\", \"rdfs:label\", \"v:ClassLabel\", \"db:schema\"]}]\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\r\n}\r\n\r\n\r\nWOQLQuery.prototype.getDocumentQuery = function(id, limit, start){\r\n\tvar wjson = {\r\n\t\tand: [\r\n\t\t\t{triple: [id, \"v:Property\", \"v:Property_Value\"]},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Property\", \"rdfs:label\", \"v:Property_Label\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Property\", \"rdf:type\", \"v:Property_Type\", \"db:schema\"]}]\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\r\n}\r\n\r\nWOQLQuery.prototype.getClassesQuery = function(){\r\n\tvar wjson = {\r\n\t\tand: [\r\n\t\t\t{triple: [\"v:ID\", \"rdf:type\", \"v:Class\"]},\r\n\t\t\t{\r\n\t\t\t\topt: [{triple: [\"v:ID\", \"rdfs:label\", \"v:Label\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{triple: [\"v:ID\", \"rdfs:comment\", \"v:Comment\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\topt: [{quad: [\"v:Class\", \"rdfs:label\", \"v:Type\", \"db:schema\"]}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tsub: ['v:Class', 'tcs:Document']\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\treturn wjson;\r\n}\r\n\r\nmodule.exports=WOQLQuery\r\n","const TerminusClient = require('@terminusdb/terminus-client');\r\nfunction TerminusPluginManager(){\r\n\tthis.preloaded = [];\r\n\tthis.loaded = [];\r\n\tthis.loading = [];\r\n\tthis.precluded = [];\r\n\tthis.plugins = {};\r\n\tthis.plugins[\"font-awesome\"] = {\r\n\t\tlabel: \"Font Awesome\",\r\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0-11/css/all.css\"]\r\n\t};\r\n\tthis.plugins[\"quill\"] = {\r\n\t\tlabel: \"Quill\",\r\n\t\tjs: [\"https://cdn.quilljs.com/1.3.6/quill.min.js\"],\r\n\t\tcss: [\"https://cdn.quilljs.com/1.3.6/quill.snow.css\"],\r\n\t};\r\n\tthis.plugins[\"codemirror\"] = {\r\n\t\tlabel : \"Code Mirror\",\r\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.js\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/xml/xml.js\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/css/css.js\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/turtle/turtle.js\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/javascript/javascript.js\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/anyword-hint.js\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.js\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/runmode/runmode.js\",\r\n\t\t  \t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/http/http.js\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/closebrackets.js\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/matchbrackets.js\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/display/placeholder.js\"\r\n\t  ],\r\n\t\tcss: [\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.css\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.css\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/neo.css\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/erlang-dark.css\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/eclipse.css\"\r\n\t\t]\r\n\t};\r\n\tthis.plugins[\"jquery\"] = {\r\n\t\tlabel: \"jQuery\",\r\n\t\tjs: [\"https://code.jquery.com/jquery-2.2.4.min.js\"]\r\n\t};\r\n\tthis.plugins[\"jqueryui\"] = {\r\n\t\tlabel: \"jQuery UI\",\r\n\t\tcss: [\"https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css\"],\r\n\t\tjs: [\"https://code.jquery.com/ui/1.12.0/jquery-ui.js\"],\r\n\t\trequires: ['jquery']\r\n\t};\r\n\tthis.plugins[\"datatables\"] = {\r\n\t\tlabel: \"Data Tables\",\r\n\t\tjs: [\"https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js\",\r\n\t\t\t \"https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.16/b-1.5.1/b-html5-1.5.1/datatables.min.js\"],\r\n\t\tcss: [\"https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css\"],\r\n\t\trequires: ['jquery']\r\n\t};\r\n\t/*this.plugins[\"prettify\"] = {\r\n\t\tlabel: \"Prettify\",\r\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js\"],\r\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.css\"],\r\n\t\trequires: ['jquery']\r\n\t};*/\r\n\tthis.plugins[\"gmaps\"] = {\r\n\t\tlabel: \"Google Maps\",\r\n\t\tjs: [\"https://maps.googleapis.com/maps/api/js\"],\r\n\t\t//plugin: \"gmaps.terminus.js\"\r\n\t};\r\n\tthis.plugins[\"d3\"] = {\r\n\t\tlabel: \"d3\",\r\n\t\tjs: [\"https://code.jquery.com/jquery-2.2.4.min.js\"],\r\n\t\trequires: ['jquery']\r\n\t};\r\n\tthis.plugins[\"select2\"] = {\r\n\t\tlabel: \"Select 2\",\r\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js\"],\r\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css\"],\r\n\t\trequires: ['jquery']\r\n\t};\r\n\t/*this.plugins[\"jsoneditor\"] = {\r\n\t\tlabel: \"JSON Editor\",\r\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/7.0.4/jsoneditor.min.js\"],\r\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/7.0.4/jsoneditor.min.css\"],\r\n\t\t//plugin: \"jsoneditor.terminus.js\"\r\n\t};\r\n\tthis.plugins[\"bootstrap\"] = {\r\n\t\tlabel: \"Bootstrap\",\r\n\t\tjs: [\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"],\r\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/css/bootstrap.min.css\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css\"]\r\n\t};\r\n\tthis.plugins[\"flot\"] = {\r\n\t\tlabel: \"Flot\",\r\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.min.js\",\r\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.resize.min.js\"],\r\n\t\trequires: [\"jquery\"]\r\n\t};*/\r\n}\r\n\r\nTerminusPluginManager.prototype.setPluginOptions = function(opts){\r\n\tfor(var p in opts){\r\n\t\tif(!this.plugins[p]) continue;\r\n\t\tfor(var k in opts[p]){\r\n\t\t\tthis.plugins[p][k] = opts[p][k];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nTerminusPluginManager.prototype.init = function(opts, then){\r\n\tif(opts) this.setPluginOptions(opts);\r\n\tthis.calculatePreloaded();\r\n\tvar toload = this.calculateRequiredInitPlugins(opts);\r\n\tif(toload && toload[0].length) {\r\n\t\tif(toload[1].length){\r\n\t\t\tvar self = this;\r\n\t\t\tvar nthen = function(){\r\n\t\t\t\tself.loadPlugins(toload[1], then);\r\n\t\t\t}\r\n\t\t\tthis.loadPlugins(toload[0], nthen);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.loadPlugins(toload[0], then);\r\n\t\t}\r\n\t}\r\n\telse if(then){\r\n\t\tthen();\r\n\t}\r\n}\r\n\r\nTerminusPluginManager.prototype.calculateRequiredInitPlugins = function(opts){\r\n\tif(opts){\r\n\t\tvar pins = [];\r\n\t\tfor(var pid in opts){\r\n\t\t\tif(opts[pid] && pins.indexOf(pid) == -1){\r\n\t\t\t\tif(typeof opts[pid] != \"object\" && opts[pid]){\r\n\t\t\t\t\tpins.push(pid);\r\n\t\t\t\t}\r\n\t\t\t\telse if(typeof opts[pid] == \"object\"){\r\n\t\t\t\t\tif(!(typeof opts[pid].loaded != \"undefined\" && !opts[pid].loaded)){\r\n\t\t\t\t\t\tpins.push(pid);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tvar pins = this.getDefaultPlugins();\r\n\t}\r\n\tvar needed_pins = [];\r\n\tfor(var i = 0; i<pins.length; i++){\r\n\t\tif(this.loaded.indexOf(pins[i]) == -1 && this.preloaded.indexOf(pins[i]) == -1 ){\r\n\t\t\tneeded_pins.push(pins[i])\r\n\t\t}\r\n\t}\r\n\tvar loading_order = [[], []];\r\n\tfor(var i = 0; i<needed_pins.length; i++){\r\n\t\tif(this.plugins[needed_pins[i]]){\r\n\t\t\tif(this.plugins[needed_pins[i]].requires && this.plugins[needed_pins[i]].requires.length){\r\n\t\t\t\tloading_order[1].push(needed_pins[i]);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tloading_order[0].push(needed_pins[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn loading_order;\r\n}\r\n\r\nTerminusPluginManager.prototype.getAvailablePlugins = function(){\r\n\treturn this.plugins;\r\n}\r\n\r\nTerminusPluginManager.prototype.calculatePreloaded = function(){\r\n\tfor(var pl in this.plugins){\r\n\t\tif(this.pluginAvailable(pl)){\r\n\t\t\tthis.preloaded.push(pl);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nTerminusPluginManager.prototype.pluginAvailable = function(plugin, version_check){\r\n\tif(typeof this.plugins[plugin] == \"object\"){\r\n\t\tvar pluginmeta = this.plugins[plugin];\r\n\t\tif(pluginmeta.requires && pluginmeta.requires.length){\r\n\t\t\tfor(var i =0 ; i < pluginmeta.requires.length; i++){\r\n\t\t\t\tif(!this.pluginAvailable(pluginmeta.requires[i], version_check)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar required_version = (pluginmeta.version ? pluginmeta.version : false);\r\n\t\tswitch(plugin){\r\n\t\t\tcase \"jquery\": {\r\n\t\t\t\tif(typeof jQuery == \"undefined\") return false;\r\n\t\t\t\tif(version_check && required_version){}\r\n\t\t\t\treturn true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"jqueryui\": {\r\n\t\t\t\ttry{\r\n\t\t\t\t\tif(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.slider )) return true;\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e){}\r\n\t\t\t\treturn false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"quill\": {\r\n\t\t\t\tif(typeof Quill == \"undefined\") return false;\r\n\t\t\t\treturn true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"jsoneditor\": {\r\n\t\t\t\tif(typeof JSONEditor == \"undefined\") return false;\r\n\t\t\t\treturn true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"codemirror\": {\r\n\t\t\t\tif(typeof CodeMirror == \"undefined\") return false;\r\n\t\t\t\treturn this.plugins[plugin];  // sent plugin config with darkmode true/ false\r\n\t\t\t}\r\n\t\t\tcase \"font-awesome\": {\r\n\t\t\t\t//if(typeof CodeMirror != \"undefined\") return true;\r\n\t\t\t\treturn this.fontAwesomeCheck();\r\n\t\t\t}\r\n\t\t\tcase \"datatables\": {\r\n\t\t\t\t if(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.dataTable)) return true;\r\n\t\t\t\t return false;\r\n\t\t\t}\r\n\t\t\tcase \"select2\": {\r\n\t\t\t\t if(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.select2 )) return true;\r\n\t\t\t\t return false;\r\n\t\t\t}\r\n\t\t\tcase \"gmaps\": {\r\n\t\t\t\tif(typeof google == \"undefined\" || typeof google.maps == \"undefined\") return false;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tcase \"openlayers\": {\r\n\t\t\t\tif(typeof ol == \"undefined\" || typeof ol.Map == \"undefined\") return false;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tcase \"d3\": {\r\n\t\t\t\tif(typeof d3 == \"undefined\") return false;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tconsole.log(new Error(plugin + \" is not a supported plugin ID\"));\r\n\t}\r\n\treturn false;\r\n};\r\n\r\nTerminusPluginManager.prototype.fontAwesomeCheck = function(){\r\n\tvar span = document.createElement('span');\r\n\tspan.className = 'fa';\r\n\tspan.style.display = 'none';\r\n\tif(document.body){\r\n\t\tdocument.body.insertBefore(span, document.body.firstChild);\r\n\t\tfunction css(element, property) {\r\n\t\t  return window.getComputedStyle(element, null).getPropertyValue(property);\r\n\t\t}\r\n\t\tvar loaded = false;\r\n\t\tvar fontAwsm = css(span, 'font-family');\r\n\t\tif (fontAwsm.replace(/\"/g, \"\") == 'Font Awesome 5 Free') { // remove double quotes\r\n\t\t\tloaded = true;\r\n\t\t}\r\n\t\tdocument.body.removeChild(span);\r\n\t\treturn loaded;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nTerminusPluginManager.prototype.getDefaultPlugins = function(){\r\n\tvar defplugs = [\"font-awesome\"];\r\n\treturn defplugs;\r\n}\r\n\r\nTerminusPluginManager.prototype.loadPlugins = function(plugins, then){\r\n\tvar ticker = plugins.length;\r\n\tvar cback = function(){\r\n\t\tif(--ticker <= 1 && then){\r\n\t\t\tthen();\r\n\t\t}\r\n\t};\r\n\tfor(var i = 0; i < plugins.length; i++){\r\n\t\tthis.loadPlugin(plugins[i], cback);\r\n\t}\r\n}\r\n\r\nTerminusPluginManager.prototype.loadPlugin = function(plugin, then){\r\n\tvar pug = this.plugins[plugin];\r\n\tif(pug.css){\r\n\t\tfor(var i=0; i<pug.css.length; i++){\r\n\t\t\tvar cssid = plugin + \"_css_\" + i;\r\n\t\t\tTerminusClient.FrameHelper.loadDynamicCSS(cssid, pug.css[i]);\r\n\t\t}\r\n\t}\r\n\tvar scripts = (pug.js ? pug.js : []);\r\n\tif(plugin == \"gmaps\" && pug.key){\r\n\t\tscripts[0] += \"?key=\" + pug.key;\r\n\t}\r\n\tif(pug.plugin){\r\n\t\t//scripts.push(\"plugins/\" + pug.plugin);\r\n\t}\r\n\tif(plugin == \"codemirror\"){\r\n\t\tvar cm = scripts[0];\r\n\t\tvar sid = plugin + \"_js_\" + (scripts.length -1);\r\n\t\tscripts.splice(0, 1);\r\n\t\tvar self = this;\r\n\t\tvar cback = function(){\r\n\t\t\tself.loadPluginScripts(plugin, scripts, then);\r\n\t\t}\r\n\t\tTerminusClient.FrameHelper.loadDynamicScript(sid, cm, cback);\r\n\t}\r\n\telse {\r\n\t\tthis.loadPluginScripts(plugin, scripts, then);\r\n\t}\r\n}\r\n\r\nTerminusPluginManager.prototype.loadPluginScripts = function(plugin, scripts, then){\r\n\tvar ticker = scripts.length - 1;\r\n\tvar self = this;\r\n\tvar cback = function(){\r\n\t\tif(ticker == 0) {\r\n\t\t\tif(self.loaded.indexOf(plugin) == -1){\r\n\t\t\t\tself.loaded.push(plugin);\r\n\t\t\t}\r\n\t\t\tif(self.loading.indexOf(plugin) != -1){\r\n\t\t\t\tself.loading.splice(self.loading.indexOf(plugin), 1);\r\n\t\t\t}\r\n\t\t\tthen();\r\n\t\t}\r\n\t\tticker--;\r\n\t};\r\n\tif(scripts.length == 0){\r\n\t\tthis.loaded.push(plugin);\r\n\t}\r\n\telse {\r\n\t\tthis.loading.push(plugin);\r\n\t}\r\n\tfor(var i = 0; i<scripts.length; i++){\r\n\t\tvar sid = plugin + \"_js_\" + i;\r\n\t\tTerminusClient.FrameHelper.loadDynamicScript(sid, scripts[i], cback);\r\n\t}\r\n}\r\n\r\nTerminusPluginManager.prototype.loadPageCSS = function(css){\r\n\tcssfid = \"terminus_client_css\";\r\n\tvar cssdom = document.getElementById(cssfid);\r\n\tif(cssdom){\r\n\t\tcssdom.parentNode.removeChild(cssdom);\r\n\t}\r\n\tif(css){\r\n\t\tcssurl = \"css/\" + css + \".css\";\r\n\t\tTerminusClient.FrameHelper.loadDynamicCSS(cssfid, cssurl);\r\n\t}\r\n}\r\n\r\nTerminusPluginManager.prototype.pluginLoadable = function(pid){\r\n\treturn (this.precluded.indexOf(pid) !== -1 || this.pluginLoadedOrLoading(pid));\r\n}\r\n\r\nTerminusPluginManager.prototype.pluginLoadedOrLoading = function(pid){\r\n\tif(this.loaded.indexOf(pid) != -1) return true;\r\n\tif(this.preloaded.indexOf(pid) != -1) return true;\r\n\tif(this.loading.indexOf(pid) != -1) return true;\r\n\treturn false;\r\n}\r\n\r\nTerminusPluginManager.prototype.disabled = function(pid, obj){\r\n\tif(this.precluded.indexOf(pid) != -1) return true;\r\n\tif(obj.requires){\r\n\t\tfor(var i = 0; i<obj.requires.length; i++){\r\n\t\t\tif(!this.pluginLoadedOrLoading(obj.requires[i])) return true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nTerminusPluginManager.prototype.getPluginDOM = function(plugid, obj, ui){\r\n\tvar a = document.createElement(\"a\");\r\n\tvar cl = document.createElement(\"span\");\r\n\ta.appendChild(cl);\r\n\tcl.setAttribute(\"class\", \"terminus-plugin-control\");\r\n\tvar cbox = document.createElement(\"input\");\r\n\tcbox.id = \"terminus-plugin-control-\" + plugid;\r\n\tcbox.type = \"checkbox\";\r\n\tif(this.preloaded.indexOf(plugid) != -1){\r\n\t\tcbox.checked = true;\r\n\t\tcbox.disabled = true;\r\n\t}\r\n\telse if(this.loaded.indexOf(plugid) != -1){\r\n\t\tcbox.checked = true;\r\n\t}\r\n\telse if(this.loading.indexOf(plugid) != -1){\r\n\t\tcbox.checked = true;\r\n\t}\r\n\telse if(this.disabled(plugid, obj)){\r\n\t\tcbox.disabled = true;\r\n\t}\r\n\tvar clab = document.createElement(\"label\");\r\n\tclab.setAttribute(\"class\", \"terminus-plugin-label terminus-pointer\");\r\n\tclab.setAttribute(\"for\", cbox.id);\r\n\tclab.appendChild(document.createTextNode(obj.label));\r\n\tcl.appendChild(clab);\r\n\tcl.appendChild(cbox);\r\n\tvar self = this;\r\n\tcbox.addEventListener(\"change\", function(){\r\n\t\tself.togglePlugin(plugid, ui);\r\n\t});\r\n\treturn a;\r\n}\r\n\r\nTerminusPluginManager.prototype.togglePlugin = function(plugid, ui){\r\n\tif(this.loaded.indexOf(plugid) == -1){\r\n\t\tvar then = function(){\r\n\t\t\tui.redraw();\r\n\t\t}\r\n\t\tthis.loadPlugin(plugid, then);\r\n\t}\r\n\telse {\r\n\t\tthis.unloadPlugin(plugid);\r\n\t}\r\n\tTerminusClient.FrameHelper.removeChildren(ui.plugins);\r\n\tui.drawPlugins();\r\n}\r\n\r\nTerminusPluginManager.prototype.unloadPlugin = function(plugid){\r\n\tif(!this.plugins[plugid] || this.loaded.indexOf(plugid) == -1) {\r\n\t\tconsole.log(new Error(plugid + \" plugin unload request when it is not loaded\"));\r\n\t\treturn false;\r\n\t}\r\n\tvar pug = this.plugins[plugid];\r\n\tvar num = (pug.js) ? pug.js.length : 0;\r\n\tif(pug.plugin) num++;\r\n\tfor(var i=0; i< num; i++){\r\n\t\tvar cssfid = plugid + \"_js_\" + i;\r\n\t\tvar cssdom = document.getElementById(cssfid);\r\n\t\tif(cssdom){\r\n\t\t\tcssdom.parentNode.removeChild(cssdom);\r\n\t\t}\r\n\t}\r\n\tnum = (pug.css ? pug.css.length : 0);\r\n\tfor(var i=0; i< num; i++){\r\n\t\tvar cssfid = plugid + \"_css_\" + i;\r\n\t\tvar cssdom = document.getElementById(cssfid);\r\n\t\tif(cssdom){\r\n\t\t\tcssdom.parentNode.removeChild(cssdom);\r\n\t\t}\r\n\t}\r\n\tthis.loaded.splice(this.loaded.indexOf(plugid), 1);\r\n}\r\n\r\nTerminusPluginManager.prototype.getAsDOM = function(ui){\r\n\tvar dm = document.createElement(\"span\");\r\n\tdm.setAttribute(\"class\", \"terminus-plugin-manager\");\r\n\tvar clh = document.createElement(\"span\");\r\n\tclh.setAttribute(\"class\", \"terminus-plugin-control-header terminus-plugin-nav terminus-pointer\");\r\n\tclh.appendChild(document.createTextNode(\"Plugins\"));\r\n\tdm.appendChild(clh);\r\n\tvar a = document.createElement('a');\r\n\tthis.showPlugins(a, ui);\r\n\tclh.appendChild(a);\r\n\ta.style.display = 'none';\r\n\tclh.addEventListener('click', function(){\r\n\t\tif(a.style.display == 'none')\r\n\t\t\ta.style.display = 'block';\r\n\t\telse a.style.display = 'none';\r\n\t})\r\n\treturn dm;\r\n}\r\n\r\nTerminusPluginManager.prototype.showPlugins = function(a, ui){\r\n\ta.setAttribute('style', 'background-color: #111;');\r\n\tfor(var pid in this.plugins){\r\n\t\ta.appendChild(this.getPluginDOM(pid, this.plugins[pid], ui));\r\n\t}\r\n}\r\n\r\nmodule.exports=TerminusPluginManager\r\n","function getErrorAsMessage(url, api, err) {\n\t// console.log('getErrorAsMessage');\n\tlet str = '';\n\tif (err.response) {\n\t\terr = err.response;\n\t\tif (err.data) str += `${formatErrorMessage(err.data)}`;\n\t} else if (err.body) str += `${formatErrorMessage(err.data)}`;\n\n\tif (err.status) str += `Code: ${err.status}`;\n\tif (err.action) str += `, Action: ${err.action}`;\n\tif (err.type) str += `, Type: ${err.type}`;\n\tif (url) str += `, url: ${url}`;\n\tif (api && api.method) str += `, method: ${api.method}`;\n\treturn str;\n}\n\nfunction formatErrorMessage(msg) {\n\tif (typeof msg === 'object') {\n\t\tlet nmsg = '';\n\t\tfor (const key of Object.keys(msg)) {\n\t\t\tnmsg += `${key} ${msg[key]} `;\n\t\t}\n\t\treturn nmsg;\n\t}\n\treturn msg;\n}\n\nfunction accessDenied(action, db, server) {\n\tconst err = {};\n\terr.status = 403;\n\terr.url = (server || '') + (db || '');\n\terr.type = 'client';\n\terr.action = action;\n\terr.body = `${err.action} not permitted for ${err.url}`;\n\treturn err;\n}\n\nfunction getAPIErrorMessage(url, api, err) {\n\treturn `API Error ${getErrorAsMessage(url, api, err)}`;\n}\n\nfunction getAccessDeniedMessage(url, api, err) {\n\treturn `Access Denied ${getErrorAsMessage(url, api, err)}`;\n}\n\nfunction getInvalidURIMessage(url, call) {\n\tconst str = `Invalid argument to\n            ${call}. \n            ${url}\n            is not a valid Terminus DB API endpoint`;\n\treturn str;\n}\n\n/**\n * Utility functions for generating and retrieving error messages\n * and storing error state\n */\n\nfunction parseAPIError(response) {\n\tconst err = {};\n\terr.status = response.status;\n\terr.type = response.type;\n\tif (response.data && typeof response.data === 'object') {\n\t\tlet msg;\n\t\ttry {\n\t\t\tmsg = response.text();\n\t\t} catch (e) {\n\t\t\ttry {\n\t\t\t\tmsg = response.json();\n\t\t\t} catch (error) {\n\t\t\t\tmsg = response.toString();\n\t\t\t}\n\t\t}\n\t\terr.body = msg;\n\t} else if (response.data) err.body = response.data;\n\terr.url = response.url;\n\terr.headers = response.headers;\n\terr.redirected = response.redirected;\n\treturn err;\n}\n\n\nmodule.exports = {\n\tgetErrorAsMessage,\n\tgetAPIErrorMessage,\n\tgetAccessDeniedMessage,\n\taccessDenied,\n\tgetInvalidURIMessage,\n\tparseAPIError\n};\n","const ObjectViewer= require(\"./ObjectViewer\")\r\nconst HTMLStringViewer = require('./viewers/String');\r\nconst HTMLStringEditor = require('./viewers/StringEditor');\r\nconst HTMLBooleanViewer = require('./viewers/Boolean');\r\nconst HTMLBooleanEditor = require('./viewers/BooleanEditor');\r\nconst HTMLChoiceViewer = require('./viewers/Choice');\r\nconst HTMLChoiceEditor = require('./viewers/ChoiceEditor');\r\nconst HTMLCoordinateViewer = require('./viewers/Coordinate');\r\nconst HTMLCoordinateEditor = require('./viewers/CoordinateEditor');\r\nconst HTMLDateViewer = require('./viewers/Date');\r\nconst HTMLDateEditor = require('./viewers/DateEditor');\r\nconst HTMLEntityViewer = require('./viewers/Entity');\r\nconst HTMLEntityEditor = require('./viewers/EntityEditor');\r\nconst HTMLImageViewer = require('./viewers/Image');\r\nconst HTMLImageEditor = require('./viewers/ImageEditor');\r\nconst HTMLLinkViewer = require('./viewers/Link');\r\nconst HTMLNumberViewer = require('./viewers/Number');\r\nconst HTMLRangeViewer = require('./viewers/Range');\r\nconst HTMLRangeEditor = require('./viewers/RangeEditor');\r\nconst SantizedHTMLViewer = require('./viewers/SanitizedHTML');\r\nconst GoogleMapEditor = require('./viewers/GoogleMapEditor');\r\nconst GoogleMapViewer = require('./viewers/GoogleMapViewer');\r\nconst HTMLMarkupEditor = require('./viewers/HTMLMarkupEditor');\r\nconst S2EntityEditor = require('./viewers/S2EntityEditor');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nlet RenderingMap = {\r\n\tregisteredDataViewers: {},\r\n\tregisteredDataEditors: {},\t\r\n\tregisteredPropertyViewers: {},\r\n\tregisteredPropertyEditors: {},\r\n\tregisteredObjectViewers: {},\r\n\tregisteredObjectEditors: {},\r\n\tgetValidDataViewerList: function(type, frametype){\r\n\t\tvar valids = ['HTMLStringViewer'];\r\n\t\tif(frametype && typeof this.registeredDataViewers[frametype] != \"undefined\"){\r\n\t\t\tvalids = valids.concat(this.registeredDataViewers[frametype]);\r\n\t\t}\r\n\t\tif(typeof this.registeredDataViewers[type] != \"undefined\"){\r\n\t\t\tvalids = valids.concat(this.registeredDataViewers[type]);\r\n\t\t}\r\n\t\treturn valids;\r\n\t},\r\n\tgetValidDataEditorList: function(type, frametype){\r\n\t\tvar valids = ['HTMLStringEditor'];\r\n\t\tif(frametype && typeof this.registeredDataEditors[frametype] != \"undefined\"){\r\n\t\t\tvar nftypes = this.registeredDataEditors[frametype];\r\n\t\t\tif(nftypes){\r\n\t\t\t\tfor(var i = 0; i<nftypes.length; i++){\r\n\t\t\t\t\tif(valids.indexOf(nftypes[i]) == -1) valids.push(nftypes[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(typeof this.registeredDataEditors[type] != \"undefined\"){\r\n\t\t\tvalids = valids.concat(this.registeredDataEditors[type]);\r\n\t\t}\r\n\t\treturn valids;\r\n\t},\r\n\tgetValidPropertyViewerList: function(property, proptype, proprange, propdom){\r\n\t\tvar valids = ['HTMLPropertyViewer'];\r\n\t\tif(property && typeof this.registeredPropertyViewers[property] != \"undefined\"){\r\n\t\t\tvalids = valids.concat(this.registeredPropertyViewers[property]);\r\n\t\t}\r\n\t\tif(proprange && typeof this.registeredPropertyViewers[proprange] != \"undefined\"){\r\n\t\t\tvalids = valids.concat(this.registeredPropertyViewers[proprange]);\r\n\t\t}\r\n\t\tif(propdom && typeof this.registeredPropertyViewers[propdom] != \"undefined\"){\r\n\t\t\tvalids = valids.concat(this.registeredPropertyViewers[propdom]);\r\n\t\t}\r\n\t\tif(proptype && typeof this.registeredPropertyViewers[proptype] != \"undefined\"){\r\n\t\t\tvalids = valids.concat(this.registeredPropertyViewers[proptype]);\r\n\t\t}\r\n\t\treturn valids;\r\n\t},\r\n\tgetValidPropertyEditorList: function(property, proptype, proprange, propdom){\r\n\t\tvar valids = ['HTMLPropertyViewer'];\r\n\t\tif(property && typeof this.registeredPropertyEditors[property] != \"undefined\"){\r\n\t\t\tvalids = valids.concat(this.registeredPropertyEditors[property]);\r\n\t\t}\r\n\t\tif(proprange && typeof this.registeredPropertyEditors[proprange] != \"undefined\"){\r\n\t\t\tvalids = valids.concat(this.registeredPropertyEditors[proprange]);\r\n\t\t}\r\n\t\tif(propdom && typeof this.registeredPropertyEditors[propdom] != \"undefined\"){\r\n\t\t\tvalids = valids.concat(this.registeredPropertyEditors[propdom]);\r\n\t\t}\r\n\t\tif(proptype && typeof this.registeredPropertyEditors[proptype] != \"undefined\"){\r\n\t\t\tvalids = valids.concat(this.registeredPropertyEditors[proptype]);\r\n\t\t}\r\n\t\treturn valids;\r\n\t},\r\n\tgetViewer: function(type, options){\r\n\t\tvar vi = this.renderers[type];\r\n\t\toptions = (options ? options: {});\r\n\t\ttry {\r\n\t\t\tvar viewer = eval(\"new \" + type + \".\" + type + \"(\" + JSON.stringify(options) + \")\");\t\r\n\t\t\treturn viewer;\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\talert(\"failed on create \" + e.toString());\r\n\t\t}\r\n\t},\r\n\tgetAvailablePropertyViewers: function(type, renderer) {\r\n\t\tvar viewers = [];\r\n\t\tvar nviewers = []\r\n\t\tvar opts = this.getValidPropertyViewerList(type);\r\n\t\tfor(var i = 0; i<opts.length; i++){\r\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\r\n\t\t\t\tnviewers.push(opts[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(var i = 0; i<nviewers.length; i++){\r\n\t\t\tif(this.renderers[nviewers[i]]){\r\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\r\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn viewers;\r\n\t},\r\n\tgetAvailablePropertyEditors: function(type, renderer) {\r\n\t\tvar viewers = [];\r\n\t\tvar nviewers = []\r\n\t\tvar opts = this.getValidPropertyEditorList();\r\n\t\tfor(var i = 0; i<opts.length; i++){\r\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\r\n\t\t\t\tnviewers.push(opts[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(var i = 0; i<nviewers.length; i++){\r\n\t\t\tif(this.renderers[nviewers[i]]){\r\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\r\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn viewers;\r\n\t\t\r\n\t},\r\n\tgetAvailableDataViewers: function(type, frametype){\r\n\t\tvar viewers = [];\r\n\t\tvar nviewers = []\r\n\t\tvar opts = this.getValidDataViewerList(type, frametype);\r\n\t\tfor(var i = 0; i<opts.length; i++){\r\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\r\n\t\t\t\tnviewers.push(opts[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(var i = 0; i<nviewers.length; i++){\r\n\t\t\tif(this.renderers[nviewers[i]]){\r\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\r\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn viewers;\r\n\t},\r\n\tgetAvailableDataEditors: function(type, frametype){\r\n\t\tvar viewers = [];\r\n\t\tvar nviewers = []\r\n\t\tvar opts = this.getValidDataEditorList(type, frametype);\r\n\t\tfor(var i = 0; i<opts.length; i++){\r\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\r\n\t\t\t\tnviewers.push(opts[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(var i = 0; i<nviewers.length; i++){\r\n\t\t\tif(this.renderers[nviewers[i]]){\r\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\r\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn viewers;\r\n\t},\r\n\tgetViewerForDataFrame: function(type, frametype){\r\n\t\tvar vals = this.getValidDataViewerList(type, frametype);\r\n\t\treturn vals[vals.length-1];\r\n\t},\r\n\tgetEditorForDataFrame: function(type, frametype){\r\n\t\tvar vals = this.getValidDataEditorList(type, frametype);\r\n\t\treturn vals[vals.length-1];\r\n\t},\r\n\tregisterViewerForTypes: function(viewer, label, types){\r\n\t\tfor(var i = 0; i < types.length; i++){\r\n\t\t\tif(typeof this.registeredDataViewers[types[i]] == \"undefined\"){\r\n\t\t\t\tthis.registeredDataViewers[types[i]] = [];\r\n\t\t\t}\r\n\t\t\tif(this.registeredDataViewers[types[i]].indexOf(viewer) == -1){\r\n\t\t\t\tthis.registeredDataViewers[types[i]].push(viewer);\r\n\t\t\t\tthis.renderers[viewer] = {label: label};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tregisterEditorForTypes: function(viewer, label, types){\r\n\t\tfor(var i = 0; i < types.length; i++){\r\n\t\t\tif(typeof this.registeredDataEditors[types[i]] == \"undefined\"){\r\n\t\t\t\tthis.registeredDataEditors[types[i]] = [];\r\n\t\t\t}\r\n\t\t\tif(this.registeredDataEditors[types[i]].indexOf(viewer) == -1){\r\n\t\t\t\tthis.registeredDataEditors[types[i]].push(viewer);\r\n\t\t\t\tthis.renderers[viewer] = {label: label};\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t},\r\n\tregisterEditorForFrameType: function(viewer, label, frametype){\r\n\t\tthis.renderers[viewer] = {label: label};\r\n\t\tif(typeof this.registeredDataEditors[frametype] == \"undefined\") this.registeredDataEditors[frametype] = [];\r\n\t\tif(this.registeredDataEditors[frametype].indexOf(viewer) == -1){\r\n\t\t\tthis.registeredDataEditors[frametype].push(viewer);\r\n\t\t}\r\n\t},\r\n\tregisterViewerForFrameType: function(viewer, label, frametype){\r\n\t\tthis.renderers[viewer] = {label: label};\r\n\t\tif(typeof this.registeredDataViewers[frametype] == \"undefined\") this.registeredDataViewers[frametype] = [];\r\n\t\tif(this.registeredDataViewers[frametype].indexOf(viewer) == -1){\r\n\t\t\tthis.registeredDataViewers[frametype].push(viewer);\r\n\t\t}\r\n\t},\r\n\tregisterViewerForProperties: function(viewer, label, properties){\r\n\t\tfor(var i = 0; i < properties.length; i++){\r\n\t\t\tif(typeof this.registeredPropertyViewers[properties[i]] == \"undefined\"){\r\n\t\t\t\tthis.registeredPropertyViewers[properties[i]] = [];\r\n\t\t\t}\r\n\t\t\tif(this.registeredPropertyViewers[properties[i]].indexOf(viewer) == -1){\r\n\t\t\t\tthis.registeredPropertyViewers[properties[i]].push(viewer);\r\n\t\t\t\tthis.renderers[viewer] = {label: label};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tregisterEditorForProperties: function(viewer, label, properties){\r\n\t\tfor(var i = 0; i < properties.length; i++){\r\n\t\t\tif(typeof this.registeredPropertyEditors[properties[i]] == \"undefined\"){\r\n\t\t\t\tthis.registeredPropertyEditors[properties[i]] = [];\r\n\t\t\t}\r\n\t\t\tif(this.registeredPropertyEditors[properties[i]].indexOf(viewer) == -1){\r\n\t\t\t\tthis.registeredPropertyEditors[properties].push(viewer);\r\n\t\t\t\tthis.renderers[viewer] = {label: label};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\trenderers: {\r\n\t\tHTMLStringViewer: { label: \"String Viewer\"},\r\n\t\tHTMLStringEditor: { label: \"String Editor\"},\r\n\t\tHTMLPropertyViewer: { label: \"HTML Property Viewer\"}\r\n\t},\r\n\tpatternMatchesRenderer: function(pattern, renderer){\r\n\t\tif(typeof pattern == \"object\" && pattern.length){ //multiple patterns are ANDed\r\n\t\t\tfor(var i = 0 ; i<pattern.length; i++){\r\n\t\t\t\tvar fp = new FramePattern(pattern[i]);\r\n\t\t\t\tif(!fp.checkRenderer(renderer)) return false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar fp = new FramePattern(pattern);\r\n\t\t\treturn fp.checkRenderer(renderer);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nRenderingMap.addPlugin = function(plugin){\r\n\tif(plugin == \"gmaps\"){\r\n\t\tthis.registerEditorForTypes(\"GoogleMapEditor\", \"Google Map Editor\", [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\r\n\t\tthis.registerViewerForTypes(\"GoogleMapViewer\", \"Google Map Editor\", [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\r\n\t}\r\n\tif(plugin == \"quill\"){\r\n\t\tthis.registerEditorForTypes(\"HTMLMarkupEditor\", \"Quill WYSIWIG HTML Editor\", [\"xdd:html\"]);\r\n\t}\r\n\tif(plugin == \"select2\"){\r\n\t\tRenderingMap.registerEditorForFrameType(\"S2EntityEditor\", \"S2 Autocomplete Selector\", \"document\");\r\n\t}\r\n\tif(plugin == \"jsoneditor\"){\r\n\t\tRenderingMap.registerEditorForFrameType(\"S2EntityEditor\", \"S2 Autocomplete Selector\", \"document\");\r\n\t}\r\n}\r\n\r\nRenderingMap.getAvailableObjectViewers = function(renderer){\r\n\tvar entries = ['html', 'json'];\r\n\treturn entries;\r\n}\r\n\r\nRenderingMap.decorateRenderer = function(options, renderer){\r\n\tvar compiled_options = this.compileOptions(options, renderer);\r\n\tif(compiled_options && compiled_options.mode){\r\n\t\trenderer.mode = compiled_options.mode;\r\n\t}\r\n\telse {\r\n\t\tif(renderer.parent && renderer.parent.mode) renderer.mode = renderer.parent.mode;\r\n\t\telse renderer.mode = \"view\";\r\n\t}\r\n\tif(compiled_options && compiled_options.view){\r\n\t\trenderer.view = compiled_options.view;\r\n\t}\r\n\telse {\r\n\t\tif(renderer.parent && renderer.parent.view) renderer.view = renderer.parent.view;\r\n\t\telse renderer.view = \"full\";\r\n\t}\r\n\tif(compiled_options && compiled_options.facets){\r\n\t\trenderer.facets = compiled_options.facets;\r\n\t}\r\n\telse {\r\n\t\trenderer.facets = renderer.getDefaultFacets();\r\n\t}\r\n\tif(compiled_options && compiled_options.facet && typeof renderer.facets[compiled_options.facet] == \"object\"){\r\n\t\trenderer.facet = compiled_options.facet;\r\n\t}\t\r\n\telse {\r\n\t\tvar deffacet = renderer.getDefaultFacet();\r\n\t\tif(typeof renderer.facets[deffacet] == \"object\"){\r\n\t\t\trenderer.facet = deffacet;\r\n\t\t}\r\n\t\telse {\r\n\t\t\trenderer.facet = key(renderer.facets);\r\n\t\t}\r\n\t}\r\n\tif(compiled_options && compiled_options.hide_disabled_buttons){\r\n\t\trenderer.hide_disabled_buttons = compiled_options.hide_disabled_buttons;\r\n\t}\r\n\telse if(renderer.parent) renderer.hide_disabled_buttons = parent.hide_disabled_buttons;\r\n\telse renderer.hide_disabled_buttons = true;\r\n\tif(compiled_options && typeof compiled_options.features == \"object\"){\r\n\t\trenderer.features = compiled_options.features;\r\n\t}\r\n\telse {\r\n\t\trenderer.features = renderer.facets[renderer.facet].features;\r\n\t\t//renderer.features = renderer.getDefaultFeatures(renderer.facet);\r\n\t}\r\n\tif(compiled_options && typeof compiled_options.controls == \"object\"){\r\n\t\trenderer.controls = compiled_options.controls;\r\n\t}\r\n\telse {\r\n\t\trenderer.controls = renderer.facets[renderer.facet].controls;\r\n\t\t//renderer.controls = renderer.getDefaultControls();\r\n\t}\r\n\tif(compiled_options && typeof compiled_options.viewerType != \"undefined\"){\r\n\t\trenderer.viewerType = compiled_options.viewerType;\r\n\t\tif(compiled_options.viewerOptions)\r\n\t\t\trenderer.viewerOptions = compiled_options.viewerOptions;\r\n\t}\r\n\tif(compiled_options && typeof compiled_options.header != \"undefined\"){}\r\n\telse {\r\n\t\trenderer.header_viewer = new ObjectViewer.HTMLObjectHeaderViewer();\r\n\t}\r\n\tif(compiled_options && typeof compiled_options.filter != \"undefined\"){}\r\n\telse {}\r\n\tif(compiled_options && typeof compiled_options.sort != \"undefined\"){}\r\n\telse {}\r\n\treturn options;\r\n}\t\r\n\r\nRenderingMap.compileOptions = function(options, renderer){\r\n\tvar compiled_options = {};\r\n\tvar rules = [];\r\n\tfor(var key in options){\r\n\t\tif(key != \"rules\"){\r\n\t\t\tcompiled_options[key] = options[key];\r\n\t\t}\r\n\t}\r\n\tif(options.rules){\r\n\t\tfor(var i = 0; i<options.rules.length; i++){\r\n\t\t\tvar match = (!options.rules[i].pattern || this.patternMatchesRenderer(options.rules[i].pattern, renderer));\r\n\t\t\tif(match && options.rules[i].output){\r\n\t\t\t\tfor(var k in options.rules[i].output){\r\n\t\t\t\t\tcompiled_options[k] = options.rules[i].output[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn compiled_options;\r\n}\r\n\r\n\r\nRenderingMap.registerViewerForTypes(\"HTMLBooleanViewer\", \"Checkbox Viewer\", [\"xsd:boolean\"]);\r\nRenderingMap.registerEditorForTypes(\"HTMLBooleanEditor\", \"Checkbox Editor\", [\"xsd:boolean\"]);\r\nRenderingMap.registerViewerForFrameType(\"HTMLChoiceViewer\", \"Choice Viewer\", \"oneOf\");\r\nRenderingMap.registerEditorForFrameType(\"HTMLChoiceEditor\", \"Choice Selector\", \"oneOf\");\r\nRenderingMap.registerViewerForTypes(\"HTMLCoordinateViewer\", \"Coordinate Viewer\", [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\r\nRenderingMap.registerEditorForTypes(\"HTMLCoordinateEditor\", \"Coordinate Editor\", [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\r\nRenderingMap.registerViewerForTypes(\"HTMLDateViewer\", \"Date Viewer\", [\"xsd:time\", \"xsd:date\", \"xsd:dateTime\", \"xsd:gYear\", \r\n\t\"xsd:gYearRange\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:dateTimeStamp\"]);\r\nRenderingMap.registerEditorForTypes(\"HTMLDateEditor\", \"Date Editor\", [\"xsd:time\", \"xsd:date\", \"xsd:dateRange\" ,\"xsd:dateTime\", \"xsd:gYear\", \r\n\t\"xsd:gYearRange\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:dateTimeStamp\"]);\r\nRenderingMap.registerViewerForFrameType(\"HTMLEntityViewer\", \"Document Viewer\", \"document\");\r\nRenderingMap.registerEditorForFrameType(\"HTMLEntityEditor\", \"Document Selector\", \"document\");\r\nRenderingMap.registerViewerForTypes(\"HTMLImageViewer\", \"Image Viewer\", [\"xdd:url\", \"xsd:anyURI\", \"xsd:base64Binary\"]);\r\nRenderingMap.registerEditorForTypes(\"HTMLImageEditor\", \"Image Editor\", [\"xsd:base64Binary\"]);\r\nRenderingMap.registerViewerForTypes(\"HTMLImageViewer\", \"Image Viewer\", [\"xdd:url\", \"xsd:anyURI\", \"xsd:base64Binary\"]);\r\nRenderingMap.registerEditorForTypes(\"HTMLImageEditor\", \"Image Editor\", [\"xsd:base64Binary\"]);\r\nRenderingMap.registerViewerForTypes(\"HTMLLinkViewer\", \"Link Viewer\", [\"xdd:url\", \"xsd:anyURI\"]);\r\nRenderingMap.registerViewerForTypes(\"HTMLNumberViewer\", \"Number with commas\", \r\n\t\t[\"xsd:decimal\", \"xsd:double\", \"xsd:float\", \"xsd:short\", \"xsd:integer\", \"xsd:long\", \r\n\t\t\t\"xsd:nonNegativeInteger\", \"xsd:positiveInteger\", \"xsd:negativeInteger\", \"xsd:nonPositiveInteger\"]);\r\nRenderingMap.registerViewerForTypes(\"HTMLRangeViewer\", \"Range Viewer\", [\"xdd:gYearRange\", \"xdd:dateRange\", \"xdd:integerRange\", \"xdd:decimalRange\"]);\r\nRenderingMap.registerEditorForTypes(\"HTMLRangeEditor\", \"Range Editor\", [\"xdd:gYearRange\", \"xdd:dateRange\", \"xdd:integerRange\", \"xdd:decimalRange\"]);\r\nRenderingMap.registerViewerForTypes(\"SantizedHTMLViewer\", \"Sanitized HTML\", [\"xsd:string\", \"xdd:html\"]);\r\n\r\nFramePattern = function(pattern){\r\n\tthis.renderer = (pattern.renderer ? pattern.renderer : false);\r\n\tthis.label = (pattern.value ? pattern.value : false);\r\n\tthis.frame_type = (pattern.frame_type ? pattern.frame_type : false);\r\n\tthis.subject = (pattern.subject ? pattern.subject : false);\r\n\tthis.subjectClass = (pattern.subjectClass ? pattern.subjectClass : false);\r\n\tthis.range = (pattern.range ? pattern.range : false);\r\n\tthis.property = (pattern.property ? pattern.property : false);\r\n\tthis.value = (pattern.value ? pattern.value : false);\r\n\tthis.parent = (pattern.parent ? new FramePattern(pattern.parent) : false);\r\n\tthis.children = [];\r\n\tif(pattern.children){\r\n\t\tfor(var i = 0 ; i < pattern.children.length ; i++){\r\n\t\t\tthis.children.push(new FramePattern(pattern.children[i]));\r\n\t\t}\r\n\t}\r\n\tthis.depth = (typeof pattern.depth != \"undefined\" ? pattern.depth : false);\r\n\tthis.index = (pattern.index ? pattern.index : false);\r\n\tthis.status = (pattern.status ? pattern.status : false);\r\n}\r\n\r\nFramePattern.prototype.checkRenderer = function(renderer){\r\n\tvar rtype = this.getRendererType(renderer);\r\n\tif(!rtype) return false;\r\n\tif(this.renderer && this.renderer != rtype) return false;\r\n\tif(this.illegalRuleType(rtype)) return false;\r\n\tif(this.frame_type && !this.checkFrameType(rtype, renderer)) return false;\r\n\tif(this.label && !this.checkLabel(rtype, renderer)) return false;\r\n\tif(this.subject && !this.checkSubject(rtype, renderer)) return false;\r\n\tif(this.subjectClass && !this.checkSubjectClass(rtype, renderer)) return false;\r\n\tif(this.property && !this.checkProperty(rtype, renderer)) return false;\r\n\tif(this.depth !== false && !this.checkDepth(rtype, renderer)) return false;\r\n\tif(this.range && !this.checkRange(rtype, renderer)) return false;\r\n\tif(this.value && !this.checkValue(rtype, renderer)) return false;\r\n\tif(this.parent && !this.checkParent(rtype, renderer)) return false;\r\n\tif(this.children && this.children.length && !this.checkChildren(rtype, renderer)) return false;\r\n\tif(this.index && !this.checkIndex(rtype, renderer)) return false;\r\n\tif(this.status && !this.checkStatus(rtype, renderer)) return false;\r\n\treturn true;\r\n} \r\n\r\nFramePattern.prototype.illegalRuleType = function(rtype){\r\n\tif(rtype == 'value' && (this.children.length || this.label)) return true;\r\n\tif(rtype == 'object' && this.range ) return true;\r\n\treturn false;\r\n}\r\n\r\n/* subject is an id or an array of ids, \r\n/* match is positive if the renderer's subject appears in the array or is the id\r\n */\r\nFramePattern.prototype.checkSubject = function(subject, renderer){\r\n\tif(typeof this.subject != \"object\" || !this.subject.length) this.subject = [this.subject];\r\n\tvar rsubj = renderer.subject();\r\n\tfor(var i = 0 ; i<this.subject.length; i++){\r\n\t\tif(this.IDsMatch(subject[i], rsubj)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n//at least one child must match all child rules\r\nFramePattern.prototype.checkChildren = function(rtype, renderer){\r\n\tfor(var i = 0 ; i<this.children.length; i++){\r\n\t\tvar found = false;\r\n\t\tif(rtype == \"object\"){\r\n\t\t\tfor(var prop in renderer.properties){\r\n\t\t\t\tif(this.children[i].checkRenderer(renderer.properties[prop])) {\r\n\t\t\t\t\tfound = true;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(rtype == \"property\"){\r\n\t\t\tfor(var j = 0; j <= renderer.values.length; j++){\r\n\t\t\t\tif(this.children[j].checkRenderer(renderer.values[j])) {\r\n\t\t\t\t\tfound = true;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(!found) return false;\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nFramePattern.prototype.checkStatus = function(rtype, renderer){\r\n\tif(typeof this.status != \"object\" || this.status.length == 0) this.status = [this.status];\r\n\tfor(var i = 0; i<this.status.length; i++){\r\n\t\tif(this.status[i] == \"updated\" && !renderer.isUpdated()) return false;\r\n\t\tif(this.status[i] == \"new\" && !renderer.isNew()) return false;\r\n\t\tif(this.status[i] == \"unchanged\" && renderer.isUpdated()) return false;\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nFramePattern.prototype.checkDepth = function(rtype, renderer){\r\n\treturn this.numberMatch(this.depth, renderer.depth());\r\n}\r\n\r\nFramePattern.prototype.checkParent = function(rtype, renderer){\r\n\treturn this.parent.checkRenderer(renderer.parent);\r\n}\r\n\r\nFramePattern.prototype.checkIndex = function(rtype, renderer){\r\n\tif(rtype == 'value'){\r\n\t\treturn this.index == renderer.index;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nFramePattern.prototype.checkProperty  = function(rtype, renderer){\r\n\tif(typeof this.property != \"object\" || !this.property.length) this.property = [this.property];\r\n\tfor(var i = 0 ; i<this.property.length; i++){\r\n\t\tif(this.propertyIDsMatch(renderer.property(), this.property[i])){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n//returns true if any of the values are found\r\nFramePattern.prototype.checkValue = function(rtype, renderer){\r\n\tif(typeof this.value != \"object\" || !this.value.length) this.value = [this.value];\r\n\tfor(var i = 0 ; i<this.value.length; i++){\r\n\t\tif(rtype == \"value\"){\r\n\t\t\tif(this.valuesMatch(renderer.value(), this.value[i])){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(rtype == \"property\"){\r\n\t\t\tfor(var j = 0; j<= renderer.values.length;  j++){\r\n\t\t\t\tif(this.getRendererType(renderer.values[i]) == 'value' &&\r\n\t\t\t\t\t\tthis.valuesMatch(renderer.values[i].value(), this.value[i])){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(rtype == \"object\"){\r\n\t\t\tfor(var prop in renderer.properties){\r\n\t\t\t\tif(this.checkValue(this.getRendererType(renderer.properties[prop]), renderer.properties[prop])){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nFramePattern.prototype.checkRange  = function(rtype, renderer){\r\n\tif(typeof this.range != \"object\" || !this.range.length) this.range = [this.range];\r\n\tfor(var i = 0 ; i<this.range.length; i++){\r\n\t\tif(this.rangeIDsMatch(renderer.range(), this.range[i])){ \r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nFramePattern.prototype.checkSubjectClass = function(rtype, renderer){\r\n\tif(typeof this.subjectClass != \"object\" || !this.subjectClass.length) this.subjectClass = [this.subjectClass];\r\n\tvar rcls = renderer.subjectClass();\r\n\tfor(var i = 0 ; i<this.subjectClass.length; i++){\r\n\t\tif(this.classIDsMatch(this.subjectClass[i], rcls)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nFramePattern.prototype.checkFrameType = function (rtype, renderer){\r\n\tif(rtype == \"object\") return this.frame_type == \"object\";\r\n\tif(rtype == \"value\") {\r\n\t\tif(renderer.frame){\r\n\t\t\treturn this.frame_type == renderer.frame.ftype();\r\n\t\t}\r\n\t\telse {\r\n\t\t\talert(JSON.stringify(renderer));\r\n\t\t\talert(\"No frame\");\r\n\t\t}\r\n\t}\r\n\tif(rtype == \"property\") return false;\r\n}\r\n\r\nFramePattern.prototype.checkLabel = function(rtype, renderer){\r\n\tif(typeof renderder.getLabel != \"function\"){\r\n\t\tconsole.log(new Error(\"Rule passed to check label with broken renderer object - no getLabel\"));\r\n\t\treturn false;\r\n\t}\r\n\treturn this.stringMatch(this.label, renderer.getLabel());\r\n}\r\n\r\nFramePattern.prototype.IDsMatch = function(ida, idb){\r\n\treturn TerminusClient.FrameHelper.compareIDs(ida, idb);\r\n}\r\n\r\nFramePattern.prototype.classIDsMatch = function(ida, idb){\r\n\treturn this.IDsMatch(ida, idb);\r\n}\r\nFramePattern.prototype.propertyIDsMatch = function(ida, idb){\r\n\tvar match = this.IDsMatch(ida, idb);\r\n\treturn match;\r\n}\r\nFramePattern.prototype.rangeIDsMatch = function(ida, idb){\r\n\treturn this.IDsMatch(ida, idb);\r\n}\r\nFramePattern.prototype.valuesMatch = function(vala, valb){\r\n\treturn vala == valb;\r\n}\r\nFramePattern.prototype.numberMatch = function(vala, valb){\r\n\tif(typeof vala == \"string\"){\r\n\t\ttry {\r\n\t\t\treturn eval(valb + vala);\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn vala === valb;\r\n}\r\n\r\nFramePattern.prototype.stringMatch = function(vala, valb){\r\n\tvar pat = new RegExp(vala);\r\n\treturn pat.test(valb);\r\n}\r\n\r\nFramePattern.prototype.getRendererType = function(renderer){\r\n    if(renderer.constructor.name == \"ObjectRenderer\") return \"object\";\r\n    if(renderer.constructor.name == \"PropertyRenderer\") return \"property\";\r\n    if(renderer.constructor.name == \"ValueRenderer\") return \"value\";\r\n\tif(renderer.renderer_type) return renderer.renderer_type;\r\n\tconsole.log(new Error(\"frame configuration passed non-renderer type \" + renderer.constructor.name));\r\n\tconsole.log(renderer);\r\n\treturn false;\r\n}\r\n\r\n\r\nmodule.exports=RenderingMap\r\n\r\n\r\n","/*\r\n * Utility class which runs a query against the schema and presents the returned classes as a drop-down / class filter list\r\n */\r\n\r\nconst WOQLQuery = require('../query/WOQLQuery');\r\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nTerminusClassChooser = function(ui, filter, chosen){\r\n\tthis.ui = ui;\r\n\tthis.choice = (chosen ? chosen : false);\r\n\tthis.filter = filter;\r\n\tthis.show_single = true;\r\n}\r\n\r\nTerminusClassChooser.prototype.setRoot = function(root){\r\n\tthis.root = root;\r\n}\r\n\r\nTerminusClassChooser.prototype.setFilter = function(filter){\r\n\tthis.filter = filter;\r\n}\r\n\r\nTerminusClassChooser.prototype.change = function(cls){\r\n\talert(\"Need to specify class chooser function (\" + cls + \")\");\r\n}\r\n\r\nTerminusClassChooser.prototype.getAsDOM = function(style){\r\n\tvar ccdom = document.createElement(\"span\");\r\n\tccdom.setAttribute(\"class\", \"terminus-class-chooser\");\r\n\tvar ccsel = document.createElement(\"select\");\r\n\tccsel.setAttribute(\"class\", style + \" terminus-type-select terminus-class-select\");\r\n\t// ccsel.setAttribute(\"class\", \"terminus-class-select terminus-type-select terminus-query-select\");\r\n\tvar self = this;\r\n\tccsel.addEventListener(\"change\", function(){\r\n\t\tthis.choice = this.value;\r\n\t\tself.change(this.value);\r\n\t\tthis.value = \"\";\r\n\t});\r\n\tccdom.appendChild(ccsel);\r\n\tvar wq = new WOQLQuery(this.ui.client, {}, this.ui);\r\n\tvar woql = wq.getClassListMetaDataQuery(this.filter);\r\n\tvar self = this;\r\n\twq.execute(woql)\r\n\t.then(function(response){\r\n\t\tvar opts = self.getResultsAsOptions(response);\r\n\t\tif(opts){\r\n\t\t\tfor(var i = 0; i<opts.length; i++){\r\n\t\t\t\tccsel.appendChild(opts[i]);\r\n\t\t\t}\r\n\t\t\tself.options = opts;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tccdom.removeChild(ccsel);\r\n\t\t}\r\n\t});\r\n\treturn ccdom;\r\n}\r\n\r\nTerminusClassChooser.prototype.getResultsAsOptions = function(clist){\r\n\tvar choices = [];\r\n\tif(clist.bindings){\r\n\t\tif(this.show_single == false && clist.bindings.length < 2) return false;\r\n\t\tif(this.empty_choice){\r\n\t\t\tvar opt1 = document.createElement(\"option\");\r\n\t\t\topt1.setAttribute(\"class\", \"terminus-class-choice terminus-empty-choice\");\r\n\t\t\topt1.value = \"\";\r\n\t\t\topt1.appendChild(document.createTextNode(this.empty_choice));\r\n\t\t\tchoices.push(opt1);\r\n\t\t}\r\n\t\tvar added = [];\r\n\t\tfor(var i = 0; i<clist.bindings.length; i++){\r\n\t\t\tvar bclass = HTMLFrameHelper.getVariableValueFromBinding(\"Element\", clist.bindings[i]);\r\n\t\t\tif(!bclass) bclass = HTMLFrameHelper.getVariableValueFromBinding(\"Class\", clist.bindings[i]);\r\n\t\t\tif(bclass && added.indexOf(bclass) == -1){\r\n\t\t\t\tadded.push(bclass);\r\n\t\t\t\tvar opt = document.createElement(\"option\");\r\n\t\t\t\topt.setAttribute(\"class\", \"terminus-class-choice\");\r\n\t\t\t\topt.value = bclass;\r\n\t\t\t\tif(opt.value == this.choice){\r\n\t\t\t\t\topt.selected = true;\r\n\t\t\t\t}\r\n\t\t\t\tvar lab = HTMLFrameHelper.getVariableValueFromBinding(\"Label\", clist.bindings[i]);\r\n\t\t\t\tif(!lab || lab == \"unknown\"){\r\n\r\n\t\t\t\t\tlab = TerminusClient.FrameHelper.labelFromURL(bclass);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif(lab[\"@value\"]) lab = lab[\"@value\"];\r\n\t\t\t\topt.appendChild(document.createTextNode(lab));\r\n\t\t\t\tchoices.push(opt);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn choices;\r\n}\r\n\r\n\r\n\r\nmodule.exports=TerminusClassChooser\r\n","\nmodule.exports = Object.freeze({\n\tCONNECT: 'connect',\n\tGET_SCHEMA: 'get_schema',\n\tUPDATE_SCHEMA: 'update_schema',\n\tUPDATE_DOCUMENT: 'update_document',\n\tCLASS_FRAME: 'class_frame',\n\tWOQL_SELECT: 'woql_select',\n\tGET_DOCUMENT: 'get_document',\n\tDELETE_DATABASE: 'delete_database',\n\tDELETE_DOCUMENT: 'delete_document',\n\tCREATE_DATABASE: 'create_database',\n\tCREATE_DOCUMENT: 'create_document',\n\tWOQL_UPDATE: 'woql_update'\n});\n\n/*\n{\"extends\": \"strongloop\",\n  \"env\": {\n\t\t\"browser\": true,\n\t\t\"node\": true,\n\t\t\"es6\": true\n  },\n  \"rules\":{\"max-len\": [\"error\", { \"code\": 100 }]},\n \"parserOptions\": { \"ecmaVersion\": 6 }}\n*/\n","function authorityActionsToArr(action) {\n\tif (Array.isArray(action) === false) return [];\n\n\treturn action.map(item => item['@id']);\n}\n\nfunction URIEncodePayload(payload) {\n\tif (typeof payload === 'string') return encodeURIComponent(payload);\n\tconst payloadArr = [];\n\tfor (const key of Object.keys(payload)) {\n\t\tif (typeof payload[key] === 'object') {\n\t\t\tfor (const keyElement of Object.keys(payload[key])) {\n\t\t\t\t const valueElement = payload[key][keyElement];\n\t\t\t\t payloadArr.push(`${encodeURIComponent(keyElement)}=${encodeURIComponent(valueElement)}`);\n\t\t\t}\n\t\t} else {\n\t\t\tpayloadArr.push(`${encodeURIComponent(key)}=${encodeURIComponent(payload[key])}`);\n\t\t}\n\t}\n\treturn payloadArr.join('&');\n}\n\nmodule.exports = { authorityActionsToArr, URIEncodePayload };\n","const TerminusPluginManager = require('../plugins/TerminusPlugin');\r\nconst Datatables = require('../plugins/datatables.terminus');\r\nconst UTILS=require('../Utils');\r\nconst HTMLFrameHelper = require('../client/HTMLFrameHelper');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction WOQLResult(res, query, options, ui){\r\n\tthis.ui = ui;\r\n\tthis.query = query;\r\n\tthis.bindings = ((res && res.bindings) ? res.bindings : []);\r\n}\r\n\r\nWOQLResult.prototype.count = function(){\r\n\treturn this.bindings.length;\r\n}\r\n\r\nWOQLResult.prototype.shorten = function(url){\r\n\treturn this.query.shorten(url);\r\n}\r\n\r\nWOQLResult.prototype.hasBindings = function(result){\r\n\tif(result) return (result.bindings && result.bindings.length);\r\n\telse return (this.bindings && this.bindings.length);\r\n}\r\n\r\n\r\n\r\nfunction WOQLResultsViewer(ui, wresult, wQuery, options, settings, queryPage){\r\n\tthis.ui = ui;\r\n\tthis.result = wresult;\r\n\tthis.wQuery = wQuery;\r\n\tthis.max_cell_size = 400;\r\n\tthis.max_word_size = 60;\r\n\tthis.options = options;\r\n\tthis.qPage = queryPage;\r\n\t//this.wqlRes = new WOQLResult();\r\n\tthis.pman = new TerminusPluginManager();\r\n\tthis.settings = settings;\r\n}\r\n\r\nWOQLResultsViewer.prototype.showTable = function(){\r\n\tif(this.options && typeof this.options.show_table != \"undefined\") return this.options.show_table;\r\n\treturn true;\r\n}\r\n\r\nWOQLResultsViewer.prototype.orderColumns = function(sample){\r\n\tvar ordered = [];\r\n\tfor(var h in sample){\r\n\t\tif(ordered.indexOf(h) == -1){\r\n\t\t\tordered.unshift(h);\r\n\t\t}\r\n\t}\r\n\treturn ordered;\r\n}\r\n\r\nWOQLResultsViewer.prototype.getAsDOM = function(resultDOM, displayResultHeader){\r\n\tvar rs = document.createElement('div');\r\n\tresultDOM.appendChild(rs);\r\n\tif(displayResultHeader){\r\n\t\tvar rh = document.createElement('div');\r\n\t\trh.setAttribute(\"class\", \"terminus-margin-top-bottom terminus-module-head\");\r\n\t\trh.appendChild(document.createTextNode(\"Results\"));\r\n\t\trs.appendChild(rh);\r\n\t}\r\n\tif(this.result && this.result.hasBindings() && this.showTable()){\r\n\t\tthis.getTableDOM(this.result.bindings, rs);\r\n\t\treturn rs;\r\n\t}\r\n\telse {\r\n\t\tnor = document.createElement('div');\r\n\t\tnor.setAttribute('class', 'terminus-no-res-alert');\r\n\t\tnor.appendChild(document.createTextNode(\"No results available, create new ones to view them here...\"));\r\n\t\trs.appendChild(nor);\r\n\t\treturn rs;\r\n\t}\r\n}\r\n\r\nWOQLResultsViewer.prototype.getTableDOM = function(bindings, resultDOM){\r\n\tif(this.pman.pluginAvailable(\"datatables\")){\r\n\t\tvar dtResult = this.getTable(bindings, true, {});\r\n\t\tresultDOM.appendChild(dtResult.tab);\r\n\t\tvar dt = new Datatables.Datatables(this, this.qPage);\r\n\t\tdt.draw(dtResult, resultDOM);\r\n\t\tresultDOM.classList.add('terminus-expandable');\r\n\t\tresultDOM.classList.add('terminus-dt-result-cont');\r\n\t\treturn tab;\r\n    }\r\n\telse{\r\n\t\tvar tab = this.getTable(bindings, false, {});\r\n\t\tresultDOM.appendChild(tab);\r\n\t}\r\n}\r\n\r\nWOQLResultsViewer.prototype.getDtTableDOMOnChange = function(bindings, resultDOM, pageInfo){\r\n\t\tvar dtResult = this.getTable(bindings, true, pageInfo);\r\n\t\tresultDOM.appendChild(dtResult.tab);\r\n\t\treturn dtResult;\r\n}\r\n\r\nWOQLResultsViewer.prototype.formatResultsForDatatableDisplay = function(bindings, pageInfo){\r\n    var columns = [], colDataData = {}, data = [], formattedResult = {}, arr = [];\r\n\tvar dtResult = {};\r\n    var ordered_headings = this.orderColumns(bindings[0]);\r\n\t// get columns\r\n\tfor(var i = 0; i<ordered_headings.length; i++){\r\n\t\tvar clab = TerminusClient.FrameHelper.validURL(ordered_headings[i]) ? TerminusClient.FrameHelper.labelFromURL(ordered_headings[i]) : ordered_headings[i];\r\n        columns.push({data: clab});\r\n\t}\r\n\t// get data for respective columns\r\n\tfor(var i = 0; i<bindings.length; i++){\r\n\t\tcolDataData = {};\r\n\t\tfor(var j = 0; j<ordered_headings.length; j++){\r\n\t\t\tif(typeof bindings[i][ordered_headings[j]] == \"object\"){\r\n\t\t\t\tvar lab = (bindings[i][ordered_headings[j]]['@value'] ? bindings[i][ordered_headings[j]]['@value'] : \"Object?\");\r\n\t\t\t}\r\n\t\t\telse if(typeof bindings[i][ordered_headings[j]] == \"string\") {\r\n\t\t\t\tvar lab = this.result.shorten(bindings[i][ordered_headings[j]]);\r\n\t\t\t\tif(lab == \"unknown\") lab = \"\";\r\n\t\t\t\tif(lab.substring(0, 4) == \"doc:\"){\r\n\t\t\t\t\tlab = this.getDocumentLocalLink(lab).outerHTML;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar clab = TerminusClient.FrameHelper.validURL(ordered_headings[j]) ? TerminusClient.FrameHelper.labelFromURL(ordered_headings[j]) : ordered_headings[j];\r\n\t\t\tcolDataData[clab] = lab;\r\n\t\t}\r\n\t\tdata.push(colDataData);\r\n\t}\r\n\tdtResult.columns = columns;\r\n\tformattedResult.data = data;\r\n\tformattedResult.recordsTotal = 65;\r\n\tformattedResult.recordsFiltered = 65;\r\n\tformattedResult.draw = 1;\r\n\tdtResult.data = formattedResult;\r\n\treturn dtResult;\r\n}\r\n\r\nWOQLResultsViewer.prototype.getTableBody = function(bindings, ordered_headings){\r\n\tvar tbody = document.createElement(\"tbody\");\r\n\tvar self = this;\r\n\tfor(var i = 0; i<bindings.length; i++){\r\n\t\tvar tr = document.createElement(\"tr\");\r\n\t\tfor(var j = 0; j<ordered_headings.length; j++){\r\n\t\t\tvar td = document.createElement(\"td\");\r\n\t\t\tif(typeof bindings[i][ordered_headings[j]] == \"object\"){\r\n\t\t\t\tvar lab = (bindings[i][ordered_headings[j]]['@value'] ? bindings[i][ordered_headings[j]]['@value'] : \"?\");\r\n\t\t\t}\r\n\t\t\telse if(typeof bindings[i][ordered_headings[j]] == \"string\") {\r\n\t\t\t\tvar lab = this.result.shorten(bindings[i][ordered_headings[j]]);\r\n\t\t\t}\r\n\t\t\tif(lab == \"unknown\") lab = \"\";\r\n\t\t\tif(lab.substring(0, 4) == \"doc:\"){\r\n\t\t\t\tvar a = this.getDocumentLocalLink(lab);\r\n\t\t\t\ttd.appendChild(a);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tHTMLFrameHelper.wrapShortenedText(td, lab, this.max_cell_size, this.max_word_size);\r\n\t\t\t}\r\n\t\t\ttr.appendChild(td);\r\n\t\t}\r\n\t\ttbody.appendChild(tr);\r\n\t}\r\n\treturn tbody;\r\n}\r\n\r\nWOQLResultsViewer.prototype.selectDocumentNavBar = function(ui) {\r\n\tUTILS.removeSelectedNavClass(\"terminus-selected\");\r\n\tvar dnav = document.getElementsByClassName('terminus-document-nav');\r\n\tdnav[0].classList.add(\"terminus-selected\");\r\n\tUTILS.displayDocumentSubMenus(ui);\r\n}\r\n\r\nWOQLResultsViewer.prototype.getDocumentLocalLink = function(lab){\r\n\tvar a = document.createElement(\"a\");\r\n\ta.setAttribute(\"title\", lab);\r\n\ta.setAttribute(\"href\", '#');\r\n\tvar self = this;\r\n\ta.addEventListener(\"click\", function(){\r\n\t\tif(self.result.ui) {\r\n\t\t\tself.result.ui.showDocument(this.title);\r\n\t\t\tself.result.ui.redraw();\r\n\t\t\tself.selectDocumentNavBar(self.ui);\r\n\t\t}\r\n\t});\r\n\ta.appendChild(document.createTextNode(lab));\r\n\treturn a;\r\n}\r\n\r\nWOQLResultsViewer.prototype.getTable = function(bindings, dtPlugin, pageInfo){\r\n\tvar tab = document.createElement(\"table\");\r\n\ttab.setAttribute(\"class\", \"terminus-hover-table\");\r\n\tvar thead = document.createElement(\"thead\");\r\n\tvar thr = document.createElement(\"tr\");\r\n\tvar ordered_headings = this.orderColumns(bindings[0]);\r\n\tfor(var i = 0; i<ordered_headings.length; i++){\r\n\t\tvar th = document.createElement(\"th\");\r\n\t\tth.setAttribute('class', 'terminus-table-header-full-css');\r\n\t\tvar clab = (ordered_headings[i].indexOf(\"http\") != -1) ? TerminusClient.FrameHelper.labelFromURL(ordered_headings[i]) : ordered_headings[i];\r\n\t\tth.appendChild(document.createTextNode(clab));\r\n\t\tthr.appendChild(th);\r\n\t}\r\n\tthead.appendChild(thr);\r\n\ttab.appendChild(thead);\r\n\tif(dtPlugin){\r\n\t\tvar tbody = document.createElement(\"tbody\");\r\n\t\ttab.appendChild(tbody);\r\n\t\tvar dtResult ={};\r\n\t\tdtResult.result = this.formatResultsForDatatableDisplay(bindings, pageInfo);\r\n\t\tdtResult.tab = tab;\r\n\t\treturn dtResult;\r\n\t}\r\n\telse {\r\n\t\tvar tbody = this.getTableBody(bindings, ordered_headings);\r\n\t\ttab.appendChild(tbody);\r\n\t\treturn tab;\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports={WOQLResultsViewer, WOQLResult}\r\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  // Only Node.JS has a process variable that is of [[Class]] process\n  if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  } else if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  utils.forEach(['url', 'method', 'params', 'data'], function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(['headers', 'auth', 'proxy'], function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach([\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'maxContentLength',\n    'validateStatus', 'maxRedirects', 'httpAgent', 'httpsAgent', 'cancelToken',\n    'socketPath'\n  ], function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","const UTILS = require('./utils.js');\nconst CONST = require('./const.js');\nconst ErrorMessage = require('./errorMessage');\n/*\n * Creates an entry in the connection registry for the server\n * and all the databases that the client has access to\n * maps the input authorties to a per-db array for internal storage and easy\n * access control checks\n * {doc:dbid => {terminus:authority =>\n * [terminus:woql_select, terminus:create_document, auth3, ...]}}\n *\n */\n\nfunction ConnectionCapabilities(connectionConfig, key) {\n\tthis.connection = {};\n\tthis.connectionConfig = connectionConfig;\n\tif (this.connectionConfig.server && key) {\n\t\tthis.setClientKey(this.connectionConfig.server, key);\n\t}\n}\n\nConnectionCapabilities.prototype.getClientKey = function (serverURL) {\n\tif (!serverURL) serverURL = this.connectionConfig.serverURL();\n\tif (serverURL && this.connection[serverURL]) return this.connection[serverURL].key;\n\treturn false;\n};\n\n\n/*\n * Utility functions for changing the state of connections with Terminus servers\n */\nConnectionCapabilities.prototype.setClientKey = function (curl, key) {\n\tif (typeof key === 'string' && key.trim()) {\n\t\tif (typeof this.connection[curl] === 'undefined') {\n\t\t\tthis.connection[curl] = {};\n\t\t}\n\t\tthis.connection[curl].key = key.trim();\n\t}\n};\n\n\n/**\n * @params {string} curl a valid terminusDB server URL\n * @params {object} capabilities it is the connect call response\n */\nConnectionCapabilities.prototype.addConnection = function (curl, capabilities) {\n\tif (typeof this.connection[curl] === 'undefined') {\n\t\tthis.connection[curl] = {};\n\t}\n\tconst capabilitiesKeys = capabilities ? Object.keys(capabilities) : [];\n\n\tfor (const pred of capabilitiesKeys) {\n\t    if (pred === 'terminus:authority' && capabilities[pred]) {\n\t      const auths = Array.isArray(capabilities[pred]) === true\n\t        ? capabilities[pred]\n\t        : [capabilities[pred]];\n\n\t      for (let i = 0; i < auths.length; i += 1) {\n\t        let scope = auths[i]['terminus:authority_scope'];\n\t        const actions = auths[i]['terminus:action'];\n\n\t        if (Array.isArray(scope) === false) scope = [scope];\n\t        const actionsArr = UTILS.authorityActionsToArr(actions);\n\n\t        for (let j = 0; j < scope.length; j += 1) {\n\t          const nrec = scope[j];\n\t          if (typeof this.connection[curl][nrec['@id']] === 'undefined') {\n\t            this.connection[curl][nrec['@id']] = nrec;\n\t          }\n\t          this.connection[curl][nrec['@id']]['terminus:authority'] = actionsArr;\n\t        }\n\t      }\n\t    } else {\n\t      this.connection[curl][pred] = capabilities[pred];\n\t    }\n\t}\n};\n\nConnectionCapabilities.prototype.serverConnected = function () {\n\treturn typeof this.connection[this.connectionConfig.server] !== 'undefined';\n};\n\nConnectionCapabilities.prototype.capabilitiesPermit = function (action, dbid, server) {\n\tif (!this.connectionConfig.connectionMode()\n         || this.connectionConfig.client_checks_capabilities !== true\n         || action === CONST.CONNECT) { return true; }\n\n\tserver = server || this.connectionConfig.server;\n\tdbid = dbid || this.connectionConfig.dbid;\n\n\tlet rec;\n\n\tif (action === CONST.CREATE_DATABASE) {\n\t\trec = this.getServerRecord(server);\n\t} else if (dbid) rec = this.getDBRecord(dbid);\n\telse console.log('no dbid', server, dbid);\n\tif (rec) {\n\t\tconst auths = rec['terminus:authority'];\n\t\tif (auths && auths.indexOf(`terminus:${action}`) !== -1) return true;\n\t} else {\n\t\tconsole.log('problem with ', this.connection, action, server, dbid);\n\t}\n\tthis.error = ErrorMessage.accessDenied(action, dbid, server);\n\treturn false;\n};\n\nConnectionCapabilities.prototype.getServerRecord = function (srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tconst connectionObj = this.connection[url] || {};\n\tconst okeys = Object.keys(connectionObj);\n\n\tfor (const oid of okeys) {\n\t\tif (this.connection[url][oid]['@type'] === 'terminus:Server') {\n\t\t\treturn this.connection[url][oid];\n\t\t}\n\t}\n\treturn false;\n};\n\nConnectionCapabilities.prototype.getDBRecord = function (dbid, srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tdbid = (dbid || this.connectionConfig.dbid);\n\tif (typeof this.connection[url] !== 'object') {\n\t\treturn false;\n\t}\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\tdbid = this.dbCapabilityID(dbid);\n\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\treturn undefined;\n};\n\nConnectionCapabilities.prototype.getServerDBRecords = function (srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tconst dbrecs = {};\n\tconst connectionObj = this.connection[url] || {};\n\n\tfor (const oid of Object.keys(connectionObj)) {\n\t\tif (this.connection[url][oid]['@type'] === 'terminus:Database') {\n\t\t\tdbrecs[oid] = this.connection[url][oid];\n\t\t}\n\t}\n\treturn dbrecs;\n};\n\n/*\n * removes a database record from the connection registry (after deletion, for example)\n */\nConnectionCapabilities.prototype.removeDB = function (dbid, srvr) {\n\tdbid = dbid || this.connectionConfig.dbid;\n\n\tif (dbid && this.connectionConfig.dbid && this.connectionConfig.dbid === dbid) {\n\t\tthis.connectionConfig.dbid = false;\n\t}\n\n\tconst url = srvr || this.connectionConfig.server;\n\tconst dbidCap = this.dbCapabilityID(dbid);\n\tif (dbidCap && this.connection[url] && this.connection[url][dbidCap]) {\n\t\tdelete this.connection[url][dbidCap];\n\t}\n};\n\n\nConnectionCapabilities.prototype.dbCapabilityID = function (dbid) {\n\treturn `doc:${dbid}`;\n};\n\nConnectionCapabilities.prototype.getDBRecord = function (dbid, srvr) {\n\tconst url = srvr || this.connectionConfig.server;\n\tdbid = dbid || this.connectionConfig.dbid;\n\tif (typeof this.connection[url] !== 'object') {\n\t\treturn false;\n\t}\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\tdbid = this.dbCapabilityID(dbid);\n\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\treturn undefined;\n};\n\nmodule.exports = ConnectionCapabilities;\n","\nconst IDParser = require('./terminusIDParser');\n\nfunction ConnectionConfig(params) {\n\tconst newParams = params || {};\n\tthis.server = false;\n\tthis.dbid = false;\n\tthis.docid = false;\n\tif (newParams.server) this.setServer(newParams.server);\n\tif (newParams.db) this.setDB(newParams.db);\n\tif (newParams.doc) this.setDocument(newParams.doc);\n\t/*\n     * client configuration options - connected_mode = connected\n     * tells the client to first connect to the server before invoking other services\n     */\n\n\tthis.connected_mode = newParams.connected_mode || 'connected';\n\t// include a terminus:user_key API key in the calls\n\tthis.include_key = newParams.include_key || true;\n\t// client side checking of access control (in addition to server-side access control)\n\tthis.client_checks_capabilities = newParams.client_checks_capabilities || true;\n}\n\nConnectionConfig.prototype.serverURL = function () {\n\treturn this.server;\n};\n\n\nConnectionConfig.prototype.connectionMode = function () {\n\treturn this.connected_mode === 'connected';\n};\n\nConnectionConfig.prototype.includeKey = function () {\n\treturn this.include_key === true;\n};\n\nConnectionConfig.prototype.schemaURL = function () {\n\treturn `${this.dbURL()}/schema`;\n};\nConnectionConfig.prototype.queryURL = function () {\n\treturn `${this.dbURL()}/woql`;\n};\nConnectionConfig.prototype.frameURL = function () {\n\treturn `${this.dbURL()}/frame`;\n};\nConnectionConfig.prototype.docURL = function () {\n\treturn `${this.dbURL()}/document/${this.docid ? this.docid : ''}`;\n};\n\nConnectionConfig.prototype.dbURL = function (call) {\n\t// url swizzling to talk to platform using server/dbid/platform/ pattern..\n\tif (this.platformEndpoint()) {\n\t\tconst baseURL = this.server.substring(0, this.server.lastIndexOf('/platform/'));\n\n\t\tif (!call || call !== 'create') {\n\t\t\treturn `${baseURL}/${this.dbid}/platform`;\n\t\t} if (call === 'platform') {\n\t\t\treturn `${baseURL}/${this.dbid}`;\n\t\t}\n\t}\n\treturn this.server + this.dbid;\n};\n\nConnectionConfig.prototype.platformEndpoint = function () {\n\tif (this.server && this.server.lastIndexOf('/platform/') === this.server.length - 10) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n/**\n * Utility functions for setting and parsing urls and determining\n * the current server, database and document\n */\nConnectionConfig.prototype.setServer = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseServerURL(inputStr)) {\n\t\tthis.server = parser.server();\n\t\tthis.dbid = false;\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setDB = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseDBID(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n// @param {string} inputStr TerminusDB server URL or a valid TerminusDB Id or omitted\n\nConnectionConfig.prototype.setSchemaURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseSchemaURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setDocument = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseDocumentURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tif (parser.dbid()) this.dbid = parser.dbid();\n\t\tif (parser.docid()) this.docid = parser.docid();\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setQueryURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseQueryURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setClassFrameURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseClassFrameURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nmodule.exports = ConnectionConfig;\n","/*\n11.75s$ npm install\n6.39s$ npm test\n*/\n/*\n * Helper class for parsing and decomposing Terminus URLs /\n * and dealing with namespace prefixed URLs\n */\n// const URL = require('url').URL;\n\n/*\n\"@context\": {\n    \"owl\":\"http://www.w3.org/2002/07/owl#\",\n    \"rdf\":\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"xsd\":\"http://www.w3.org/2001/XMLSchema#\"\n  } */\n\n\nfunction IDParser(context) {\n\tthis.context = context;\n\tthis.server_url = false;\n\tthis.db = false;\n\tthis.doc = false;\n}\n\nIDParser.prototype.server = function () {\n\treturn this.server_url;\n};\n\nIDParser.prototype.dbid = function () {\n\treturn this.db;\n};\n\nIDParser.prototype.docid = function () {\n\treturn this.doc;\n};\n\nIDParser.prototype.setContext = function (context) {\n\tthis.context = context;\n};\n\nIDParser.prototype.parseServerURL = function (str) {\n\tthis.server_url = false;\n\n\tif (this.validURL(str)) {\n\t\tthis.server_url = str;\n\t} else if (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tthis.server_url = this.expandPrefixed(str, this.context);\n\t}\n\n\tif (this.server_url && this.server_url.lastIndexOf('/') !== this.server_url.length - 1\n\t) {\n\t\tthis.server_url += '/';\n\t}\n\treturn this.server_url;\n};\n\nIDParser.prototype.parseDBID = function (str) {\n\tthis.db = false;\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tif (str.lastIndexOf('/') === str.length - 1) {\n\t\t\t// trim trailing slash\n\t\t\tstr = str.substring(0, str.length - 1);\n\t\t}\n\t\tconst index = str.lastIndexOf('/');\n\n\t\tconst serverURL = str.substring(0, index);\n\t\t// only dbNamer\n\t\tstr = str.substring(index + 1);\n\n\t\tif (this.parseServerURL(serverURL) === false) return false;\n\t}\n\n\tif (this.validIDString(str)) {\n\t\tthis.db = str;\n\t}\n\treturn this.db;\n};\n\nIDParser.prototype.parseDocumentURL = function (str) {\n\tthis.doc = false;\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\n\tif (this.validURL(str)) {\n\t\tlet dbURL = str;\n\t\tif (str.lastIndexOf('/document/') !== -1) {\n\t\t\t// get dbURL\n\t\t\tdbURL = str.substring(0, str.lastIndexOf('/document/'));\n\t\t\tstr = str.substring(str.lastIndexOf('/document/') + 10);\n\t\t}\n\t\tif (this.parseDBID(dbURL) === false) return false;\n\t}\n\tif (str.substring(0, 4) === 'doc:') str = str.substring(4);\n\t// check if the document's name hasn't space or '/'\n\tif (this.validIDString(str)) {\n\t\tthis.doc = str;\n\t}\n\treturn this.doc;\n};\n\nIDParser.prototype.parseSchemaURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'schema');\n\t}\n\treturn this.parseDBID(str);\n};\n\nIDParser.prototype.parseQueryURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'woql');\n\t\tstr = this.stripOptionalPath(str, 'query');\n\t}\n\treturn this.parseDBID(str);\n};\n\nIDParser.prototype.stripOptionalPath = function (str, bit) {\n\tif (str.indexOf(`/${bit}`) !== -1) str = str.substring(0, str.indexOf(`/${bit}`));\n\treturn str;\n};\n\nIDParser.prototype.parseClassFrameURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'frame');\n\t}\n\treturn this.parseDBID(str);\n};\n\n// Valid URLs are those that start with http:// or https://\nIDParser.prototype.validURL = function (str) {\n\tif (str.substring(0, 7) === 'http://' || str.substring(0, 8) === 'https://') return true;\n\treturn false;\n};\n\nIDParser.prototype.validPrefixedURL = function (str, context) {\n\tif (typeof str !== 'string' || typeof context !== 'object') return false;\n\tconst parts = str.split(':');\n\tif (parts.length !== 2) return false;\n\tif (parts[0].length < 1 || parts[1].length < 1) return false;\n\tif (context && context[parts[0]] && this.validIDString(parts[1])) return true;\n\treturn false;\n};\n\nIDParser.prototype.validIDString = function (str) {\n\tif (typeof str !== 'string') return false;\n\tif (str.indexOf(':') !== -1 || str.indexOf(' ') !== -1 || str.indexOf('/') !== -1) return false;\n\treturn true;\n};\n\nIDParser.prototype.expandPrefixed = function (str, context) {\n\tconst parts = str.split(':');\n\treturn context[parts[0]] + parts[1];\n};\n\nmodule.exports = IDParser;\n","/**\n * Helper functions for dealing with frames and linked data documents\n */\nconst FrameHelper = {\n\tstandard_urls: {\n\t\trdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n\t\trdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n\t\txsd: 'http://www.w3.org/2001/XMLSchema#',\n\t\towl: 'http://www.w3.org/2002/07/owl#',\n\t\ttcs: 'http://terminusdb.com/schema/tcs#',\n\t\ttbs: 'http://terminusdb.com/schema/tbs#',\n\t\txdd: 'http://terminusdb.com/schema/xdd#',\n\t\tterminus: 'http://terminusdb.com/schema/terminus#',\n\t\tvio: 'http://terminusdb.com/schema/vio#',\n\t\tdocs: 'http://terminusdb.com/schema/documentation#'\n\t}\n};\n\nFrameHelper.addURLPrefix = function (prefix, url) {\n\tthis.standard_urls[prefix] = url;\n};\n\n\nFrameHelper.removeChildren = function (node) {\n\tif (node) {\n\t\twhile (node.hasChildNodes()) {\n\t\t\tnode.removeChild(node.childNodes[0]);\n\t\t}\n\t}\n};\n\nFrameHelper.empty = function (obj) {\n\t   // null and undefined are \"empty\"\n\tif (!obj) return true;\n\t// Assume if it has a length property with a non-zero value\n\t// that that property is correct.\n\tif (obj.length > 0) return false;\n\tif (obj.length === 0) return true;\n\t// Otherwise, does it have any properties of its own?\n\t// Note that this doesn't handle\n\t// toString and valueOf enumeration bugs in IE < 9\n\t// for (const key in obj) {\n\tif (typeof obj === 'object') {\n\t\tfor (const key of Object.keys(obj)) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) return false;\n\t\t}\n\t}\n\treturn true;\n};\n\nFrameHelper.genBNID = function () {\n\tconst r = Math.random().toString(36).substring(7);\n\tconst d = new Date();\n\tconst bnid = `_:${r}${d.getTime()}`;\n\treturn bnid;\n};\n\nFrameHelper.getShorthand = function (link) {\n\tif (typeof link === 'object' && link.length) link = link[0];\n\tif (link && typeof link === 'string') {\n\t\tfor (const pref of Object.keys(this.standard_urls)) {\n\t\t\tconst full = this.standard_urls[pref];\n\t\t\tif (link.substring(0, full.length) === full) {\n\t\t\t\tconst sh = `${pref}:${link.substring(full.length)}`;\n\t\t\t\treturn sh;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nFrameHelper.compareIDs = function (ida, idb) {\n\tif (ida === idb) return true;\n\tif (this.unshorten(ida) === idb) return true;\n\tif (this.unshorten(ida) === this.unshorten(idb)) return true;\n\tconst sha = this.getShorthand(ida);\n\tconst shb = this.getShorthand(idb);\n\tif (sha && ((sha === idb) || (sha === shb))) return true;\n\tif (shb && shb === ida) return true;\n\treturn false;\n};\n\nFrameHelper.unshorten = function (url) {\n\tif (this.validURL(url)) return url;\n\tif (!url) return url;\n\tconst bits = url.split(':');\n\tif (bits[1]) {\n\t\tif (this.standard_urls[bits[0]]) {\n\t\t\treturn this.standard_urls[bits[0]] + bits[1];\n\t\t}\n\t}\n\treturn url;\n};\n\n// Valid URLs are those that start with http:// or https://\nFrameHelper.validURL = function (str) {\n\tif (str && (str.substring(0, 7) === 'http://' || str.substring(0, 8) === 'https://')) return true;\n\treturn false;\n};\n\n\nFrameHelper.labelFromURL = function (url) {\n\tlet nurl = this.urlFragment(url);\n\tnurl = (nurl || url);\n\tif (nurl.lastIndexOf('/') < nurl.length - 1) {\n\t\tnurl = nurl.substring(nurl.lastIndexOf('/') + 1);\n\t}\n\tnurl = nurl.replace('_', ' ');\n\treturn nurl.charAt(0).toUpperCase() + nurl.slice(1);\n};\n\nFrameHelper.urlFragment = function (url) {\n\turl = (typeof url !== 'string') ? window.location.href : url;\n\tlet bits = url.split('#');\n\tif (bits.length <= 1) {\n\t\tif (!this.validURL(url)) {\n\t\t\tbits = url.split(':');\n\t\t}\n\t}\n\tif (bits.length >= 1) {\n\t\tconst [, urlStr] = bits;\n\n\t\tif (urlStr) {\n\t\t\tconst [baseUrl] = urlStr.split('?');\n\t\t\turl = baseUrl;\n\t\t}\n\t}\n\treturn url;\n};\n\nFrameHelper.isStringType = function (stype) {\n\tif (stype === 'http://www.w3.org/2001/XMLSchema#string') return true;\n\tif (stype === 'xsd:string') return true;\n\treturn false;\n};\n\nFrameHelper.lastURLBit = function (url) {\n\turl = (typeof url === 'undefined') ? window.location.href : url;\n\tconst [urlFirst] = url.split('#');\n\tconst [urlTmp] = urlFirst.split('?');\n\turl = urlTmp.substring(url.lastIndexOf('/') + 1);\n\treturn url;\n};\n\n\nFrameHelper.getStdURL = function (pref, ext, url) {\n\tif (this.standard_urls[pref]) {\n\t\tif (url) {\n\t\t\tif (url === this.standard_urls[pref] + ext) return url;\n\t\t} else {\n\t\t\treturn this.standard_urls[pref] + ext;\n\t\t}\n\t}\n\treturn false;\n};\n\nFrameHelper.viewIncludesProperties = function (view) {\n\tif (view === 'full' || view === 'production' || view === 'terse') {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nFrameHelper.viewIncludesChildren = function (view, type) {\n\treturn this.viewIncludesProperties(view, type);\n};\n\nFrameHelper.viewIncludesValue = function (view, type) {\n\treturn this.viewIncludesProperties(view, type);\n};\n\nFrameHelper.numberWithCommas = function (value) {\n\tif (value >= 1000 || value <= -1000) {\n\t    const parts = value.toString().split('.');\n\t    if (value <= -1000) parts[0] = parts[0].substring(1);\n\t    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n\t    if (value <= -1000) value = `-${parts.join('.')}`;\n\t    else value = parts.join('.');\n\t}\n\treturn value;\n};\n\nFrameHelper.datatypes = [\n\t'xdd:coordinate', 'xdd:coordinatePolyline',\n\t'xdd:coordinatePolygon', 'xdd:dateRange', 'xdd:gYearRange', 'xdd:integerRange',\n\t'xdd:decimalRange', 'xdd:cc', 'xdd:email', 'xdd:html', 'xdd:url', 'xsd:anySimpleType',\n\t'xsd:string', 'xsd:boolean', 'xsd:decimal', 'xsd:double', 'xsd:float', 'xsd:time', 'xsd:date',\n\t'xsd:dateTime', 'xsd:dateTimeStamp', 'xsd:gYear', 'xsd:gMonth', 'xsd:gDay', 'xsd:gYearMonth',\n\t'xsd:gMonthDay', 'xsd:duration', 'xsd:yearMonthDuration', 'xsd:dayTimeDuration',\n\t'xsd:byte', 'xsd:short', 'xsd:integer', 'xsd:long', 'xsd:unsignedByte',\t'xsd:unsignedInt',\n\t'xsd:unsignedLong',\t'xsd:nonNegativeInteger', 'xsd:positiveInteger', 'xsd:negativeInteger',\n\t'xsd:nonPositiveInteger', 'xsd:base64Binary', 'xsd:anyURI', 'xsd:language', 'xsd:normalizedString',\n\t'xsd:token', 'xsd:NMTOKEN',\t'xsd:Name',\t'xsd:NCName', 'xsd:NOTATION', 'xsd:QName', 'xsd:ID',\n\t'xsd:IDREF', 'xsd:ENTITY', 'rdf:XMLLiteral', 'rdf:PlainLiteral', 'rdfs:Literal', 'xdd:json'\n];\n\nFrameHelper.parseDate = function (ty, value) {\n\tlet parsed;\n\tif (ty === 'xsd:date') {\n\t\tparsed = this.parseXsdDate(value);\n\t} else if (ty === 'xsd:time') {\n\t\tparsed = this.parseXsdTime(value);\n\t} else if (ty === 'xsd:dateTime') {\n\t\tparsed = this.parseXsdDateTime(value);\n\t} else if (ty === 'xsd:gYear') {\n\t\tparsed = { year: value };\n\t} else if (ty === 'xsd:gYearRange') {\n\t\tparsed = { year: value };\n\t} else if (ty === 'xsd:gMonth') {\n\t\tparsed = { month: value.substring(2) };\n\t} else if (ty === 'xsd:gDay') {\n\t\tparsed = { day: value };\n\t} else if (ty === 'xsd:gYearMonth') {\n\t\tconst bits = value.split('-');\n\t\twhile (bits.length < 2) bits.push('');\n\t\tparsed = { year: bits[0], month: bits[1] };\n\t} else if (ty === 'xsd:gMonthDay') {\n\t\tconst bits = value.split('-');\n\t\twhile (bits.length < 2) bits.push('');\n\t\tparsed = { month: bits[0], day: bits[1] };\n\t} else if (ty === 'xsd:dateTimeStamp') {\n\t\tparsed = this.parseXsdDateTime(value);\n\t}\n\treturn parsed;\n};\n\nFrameHelper.parseXsdDate = function (val) {\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tlet year;\n\tif (val.substring(0, 1) === '-') {\n\t\tyear = val.substring(0, 5);\n\t} else {\n\t\tyear = val.substring(0, 4);\n\t}\n\tlet parsed;\n\tif (year && Math.abs(year) < 10000) {\n\t\tlet month = val.substring(year.length + 1, year.length + 3);\n\t\tif (month) { month = parseInt(month, 10); } else return false;\n\t\tlet day = val.substring(year.length + 4);\n\t\tif (day) day = parseInt(day, 10);\n\t\telse return false;\n\t\tparsed = {\n\t\t\tyear,\n\t\t\t   month,\n\t\t\t   day,\n\t\t\t   timezone: tz\n\t\t};\n\t}\n\treturn parsed;\n};\n\nFrameHelper.addXsdPadding = function (parsed) {\n\tconst nparsed = {};\n\tif (typeof parsed.year !== 'undefined' && parsed.year !== false && parsed.year < 1000) {\n\t\tif (Math.abs(parsed.year) < 10) nparsed.year = (parsed.year < 0 ? `-000${Math.abs(parsed.year)}` : `000${parsed.year}`);\n\t\telse if (Math.abs(parsed.year) < 100) nparsed.year = (parsed.year < 0 ? `-00${Math.abs(parsed.year)}` : `00${parsed.year}`);\n\t\telse nparsed.year = (parsed.year < 0 ? `-0${Math.abs(parsed.year)}` : `0${parsed.year}`);\n\t} else if (parsed.year) {\n\t\tnparsed.year = parsed.year;\n\t}\n\tif (typeof parsed.month !== 'undefined' && parsed.month !== false && parsed.month < 10) {\n\t\tnparsed.month = `0${parsed.month}`;\n\t} else if (parsed.month) {\n\t\tnparsed.month = parsed.month;\n\t}\n\tif (typeof parsed.day !== 'undefined' && parsed.day !== false && parsed.day < 10) {\n\t\tnparsed.day = `0${parsed.day}`;\n\t} else if (parsed.day) {\n\t\tnparsed.day = parsed.day;\n\t}\n\tif (typeof parsed.hour !== 'undefined' && parsed.hour !== false && parsed.hour < 10) {\n\t\tnparsed.hour = `0${parsed.hour}`;\n\t} else if (parsed.hour) {\n\t\tnparsed.hour = parsed.hour;\n\t}\n\tif (typeof parsed.minute !== 'undefined' && parsed.minute !== false && parsed.minute < 10) {\n\t\tnparsed.minute = `0${parsed.minute}`;\n\t} else if (parsed.minute) {\n\t\tnparsed.minute = parsed.minute;\n\t}\n\tif (typeof parsed.second !== 'undefined' && parsed.second !== false && parsed.second < 10) {\n\t\tnparsed.second = `0${parsed.second}`;\n\t} else if (parsed.second) {\n\t\tnparsed.second = parsed.second;\n\t}\n\treturn nparsed;\n};\n\n\nFrameHelper.xsdFromParsed = function (parsed, ty) {\n\tconst xparsed = this.addXsdPadding(parsed);\n\tlet ret;\n\tif (ty === 'xsd:gYear') {\n\t\tret = (xparsed.year ? xparsed.year : false);\n\t} else if (ty === 'xsd:time') {\n\t\treturn (xparsed.hour && xparsed.minute && xparsed.second) ? `${xparsed.hour}:${xparsed.minute}:${xparsed.second}` : false;\n\t} else if (ty === 'xsd:date') {\n\t\treturn (xparsed.year && xparsed.month && xparsed.day) ? `${xparsed.year}-${xparsed.month}-${xparsed.day}` : false;\n\t} else if (ty === 'xsd:dateTime' || ty === 'xsd:dateTimeStamp') {\n\t\tret = (xparsed.year && xparsed.month && xparsed.day) ? `${xparsed.year}-${xparsed.month}-${xparsed.day}T` : false;\n\t\tif (ret) ret += `${xparsed.hour ? xparsed.hour : '12'}:${xparsed.minute ? xparsed.minute : '00'}:${xparsed.second ? xparsed.second : '00'}`;\n\t} else if (ty === 'xsd:gMonth') {\n\t\tret = (xparsed.month ? `--${xparsed.month}` : false);\n\t} else if (ty === 'xsd:gDay') {\n\t\tret = (xparsed.day ? `---${xparsed.day}` : false);\n\t} else if (ty === 'xsd:gYearMonth') {\n\t\tret = (xparsed.year && xparsed.month) ? `${xparsed.year}-${xparsed.month}` : false;\n\t} else if (ty === 'xsd:gMonthDay') {\n\t\tret = (xparsed.day && xparsed.month) ? `--${xparsed.month}-${xparsed.day}` : false;\n\t}\n\tif (xparsed.timezone) {\n\t\tret += xparsed.timezone;\n\t}\n\treturn ret;\n};\n\n\nFrameHelper.parseXsdTime = function (val) {\n\tif (!val) return {};\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tconst parsed = {\n\t\thour: val.substring(0, 2),\n\t\tminute: val.substring(3, 5),\n\t\tsecond: val.substring(6),\n\t\ttimezone: tz\n\t};\n\treturn parsed;\n};\n\nFrameHelper.convertTimestampToXsd = function (val) {\n\t  const a = new Date(val * 1000);\n\t  const parsed = {\n\t\tyear: a.getFullYear(),\n\t\tmonth: a.getMonth() + 1,\n\t\tday: a.getDate(),\n\t\thour: a.getHours(),\n\t\tminute: a.getMinutes(),\n\t\tsecond: a.getSeconds()\n\t  };\n\t  return parsed;\n};\n\nFrameHelper.parseXsdDateTime = function (val) {\n\tif (!val) return {};\n\tif (typeof val === 'number') {\n\t\treturn this.convertTimestampToXsd(val);\n\t}\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tconst datetime = this.parseXsdDate(val);\n\tconst ptime = this.parseXsdTime(val.substring(val.indexOf('T') + 1));\n\n\tfor (const i of Object.keys(ptime)) {\n\t\tdatetime[i] = ptime[i];\n\t}\n\tdatetime.timezone = tz;\n\treturn datetime;\n};\n\nFrameHelper.extractXsdTimezone = function (val) {\n\tif (val && val.charAt(val.length - 1) === 'Z') {\n\t\treturn 'Z';\n\t}\n\tif (val && (val.charAt(val.length - 6) === '+' || val.charAt(val.length - 6) === '-')) {\n\t\tval.substring(val.length - 6);\n\t}\n\treturn false;\n};\n\nFrameHelper.parseRangeValue = function (val, dividor) {\n\tdividor = (dividor || ',');\n\tlet vals = [];\n\tif (typeof val === 'object' && val.length) {\n\t\tvals = val;\n\t} else if (val) {\n\t\tif (typeof val !== 'string') {\n\t\t\tval = `${val}`;\n\t\t}\n\t\tif (val.length && (val.charAt(0) === '[') && val.charAt(val.length - 1) === ']') {\n\t\t\tvals.push(val.substring(1, val.indexOf(dividor)));\n\t\t\tvals.push(val.substring(val.indexOf(dividor) + 1, val.length - 1));\n\t\t} else {\n\t\t\tvals.push(val);\n\t\t}\n\t}\n\treturn vals;\n};\n\nFrameHelper.loadDynamicScript = function (scriptid, src, callback) {\n\tconst existingScript = document.getElementById(scriptid);\n\tif (!existingScript) {\n\t\tconst script = document.createElement('script');\n\t\tscript.src = src; // URL for the third-party library being loaded.\n\t\tdocument.body.appendChild(script);\n\t\tscript.onload = function () {\n\t\t\tscript.id = scriptid; // do it here so it doesn't trigger the callback below on multiple calls\n\t\t\tif (callback) callback(scriptid);\n\t\t};\n\t}\n\tif (existingScript && callback) {\n\t\tcallback(scriptid);\n\t}\n};\n\nFrameHelper.loadDynamicCSS = function (cssid, src, callback) {\n\tconst existingScript = document.getElementById(cssid);\n\tif (!existingScript) {\n\t\tconst link = document.createElement('link');\n\t\tlink.href = src; // URL for the third-party library being loaded.\n\t\tlink.id = cssid; // e.g., googleMaps or stripe\n\t\tlink.rel = 'stylesheet';\n\t\tdocument.body.appendChild(link);\n\t\tlink.onload = function () {\n\t\t\tif (callback) callback(cssid);\n\t\t};\n\t}\n\tif (existingScript && callback) callback(cssid);\n};\n\nmodule.exports = FrameHelper;\n","const WOQLQuery = require('../query/WOQLQuery');\r\nconst Renderers = require('./ObjectRenderer');\r\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction TerminusDocumentViewer(ui, action, options){\r\n\tthis.ui = ui;\r\n\tthis.server = this.ui.server();\r\n\tthis.db = this.ui.db();\r\n\tthis.init();\r\n\tthis.mode = (options && options.mode ? options.mode : \"view\");\r\n\tthis.editor = (options && options.editor ? options.editor : false);\r\n\tthis.load_schema = (options && options.load_schema ? options.load_schema : true);\r\n\tthis.config_options = this.getBuiltInViewerOptions();\r\n\tthis.options = (options ? options : this.config_options[action]);\r\n\tthis.action = action;\r\n\tthis.document = false;\r\n}\r\n\r\nTerminusDocumentViewer.prototype.init = function(){\r\n\tvar wq = new WOQLQuery(this.ui.client, this.options, this.ui);\r\n\tvar woql = wq.getClassMetaDataQuery();\r\n\tvar self = this;\r\n\tself.classmeta = {};\r\n\tself.instancemeta = {};\r\n\twq.execute(woql).then(function(wresult){\r\n\t\tif(wresult && wresult.hasBindings()){\r\n\t\t\tfor(var i = 0; i<wresult.bindings.length; i++){\r\n\t\t\t\tvar cls = HTMLFrameHelper.getVariableValueFromBinding(\"Element\", wresult.bindings[i]);\r\n\t\t\t\tif(cls && typeof self.classmeta[cls] == \"undefined\"){\r\n\t\t\t\t\tself.classmeta[cls] = wresult.bindings[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tself.refreshPage();\r\n\t\t}\r\n\t})\r\n\t.catch(function(e){\r\n\t\tconsole.log(e);\r\n\t});\r\n}\r\n\r\nTerminusDocumentViewer.prototype.getInstanceMeta = function(elid){\r\n\tvar self = this;\r\n\tif(self.instancemeta && typeof self.instancemeta[elid] != \"undefined\") return self.instancemeta[elid] ;\r\n\tvar wq = new WOQLQuery(this.ui.client, this.options, this.ui);\r\n\tvar woql = wq.getInstanceMeta(elid);\r\n\treturn wq.execute(woql).then(function(wresult){\r\n\t\tif(wresult && wresult.hasBindings()){\r\n\t\t\tvar res = wresult.bindings[0];\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\treturn false;\r\n\t})\r\n\t.catch(function(e){\r\n\t\tconsole.log(e);\r\n\t});\r\n}\r\n\r\nTerminusDocumentViewer.prototype.getClassMeta = function(cls){\r\n\tif(typeof this.classmeta[cls]){\r\n\t\treturn this.classmeta[cls];\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nTerminusDocumentViewer.prototype.loadCreateDocument = function(url){\r\n\tif(url){\r\n\t\tthis.ui.showBusy(\"Fetching frame for document class \" + url);\r\n\t\tvar self = this;\r\n\t\tthis.mode = \"edit\";\r\n\t\tthis.page_config = \"create\";\r\n\t\tif(url.indexOf(\"/\") == -1 && url.indexOf(\":\") == -1) {\r\n\t\t\turl = \"schema:\" + url;\r\n\t\t}\r\n\t\treturn this.loadDocumentSchema(url)\r\n\t\t.then(function(response){\r\n\t\t\tself.ui.clearBusy();\r\n\t\t\tself.setLabel();\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tself.ui.clearBusy();\r\n\t\t\tself.ui.showError(error);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nTerminusDocumentViewer.prototype.loadDocument = function(url, cls){\r\n\tif(!url) return false;\r\n\tvar self = this;\r\n\tif(url.substring(0,4) == \"doc:\"){\r\n\t\turl = url.substring(4);\r\n\t}\r\n\tthis.page_config = \"view\";\r\n\turl = url.replace(\"/candidate\", \"/platform/document\");\r\n\tthis.ui.showBusy(\"Loading Document from \" + url);\r\n\treturn this.ui.client.getDocument(url, {\"terminus:encoding\": \"terminus:frame\"})\r\n\t.then(function(response){\r\n\t\tself.ui.clearBusy();\r\n\t\tself.loadDataFrames(response);\r\n\t\tself.setLabel();\r\n\t\tself.refreshPage();\r\n\t\tif(self.load_schema){\r\n\t\t\tself.loadDocumentSchema(self.document.cls).then(function(){ self.refreshPage()}).catch(function(e){console.error(e)});\r\n\t\t}\r\n\t\treturn response;\r\n\t})\r\n\t.catch(function(error) {\r\n\t\tconsole.error(error);\r\n\t\tself.ui.clearBusy();\r\n\t\tself.ui.showError(error);\r\n\t});\r\n}\r\n\r\nTerminusDocumentViewer.prototype.loadDocumentSchema = function(cls){\r\n\tvar self = this;\r\n\tvar ncls = TerminusClient.FrameHelper.unshorten(cls);\r\n\treturn this.ui.client.getClassFrame(false, ncls)\r\n\t.then(function(response){\r\n\t\tself.loadSchemaFrames(response, cls);\r\n\t\tself.refreshPage();\r\n\t});\r\n}\r\n\r\nTerminusDocumentViewer.prototype.deleteDocument = function(URL){\r\n\tthis.document = false;\r\n\tvar self = this;\r\n\tthis.ui.showBusy(\"Deleting Document \" + URL);\r\n\treturn this.ui.client.deleteDocument(URL)\r\n\t.then(function(response){\r\n\t\tself.ui.clearBusy();\r\n\t}).catch(function(error){\r\n\t\tself.ui.clearBusy();\r\n\t\tself.ui.showError(error);\r\n\t});\r\n}\r\n\r\nTerminusDocumentViewer.prototype.createDocument = function(id){\r\n\tvar self = this;\r\n\tvar extr = this.renderer.extract();\r\n\tvar opts = { \"terminus:encoding\": \"jsonld\" };\r\n\tthis.ui.showBusy(\"Creating document\");\r\n\treturn this.ui.client.createDocument(id, extr, opts)\r\n\t.then(function(response){\r\n\t\tself.ui.clearBusy();\r\n\t\tself.ui.showDocument(id);\r\n\t}).catch(function(error){\r\n\t\tself.ui.clearBusy();\r\n\t\tif(error.data && error.data['terminus:witnesses']){\r\n\t\t\tself.ui.showViolations(error.data['terminus:witnesses'], \"instance\");\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.ui.showError(error);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nTerminusDocumentViewer.prototype.updateDocument = function(){\r\n\tvar durl = this.document.subjid;\r\n\tvar extr = this.renderer.extract();\r\n\tvar self = this;\r\n\tvar opts = { \"terminus:encoding\": \"jsonld\" };\r\n\tthis.ui.showBusy(\"Updating document \" + durl);\r\n\treturn this.ui.client.updateDocument(durl, extr, opts)\r\n\t.then(function(response){\r\n\t\tself.ui.clearBusy();\r\n\t\tself.ui.showDocument(durl);\r\n\t}).catch(function(error){\r\n\t\tself.ui.clearBusy();\r\n\t\tif(error.data && error.data['terminus:witnesses']){\r\n\t\t\tself.ui.showViolations(error.data['terminus:witnesses'], \"instance\");\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.ui.showError(error);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nTerminusDocumentViewer.prototype.loadDataFrames = function(dataframes, cls){\r\n\tif(!cls){\r\n\t\tif(this.document) cls = this.document.cls;\r\n\t\telse {\r\n\t\t\tif(dataframes && dataframes.length && dataframes[0] && dataframes[0].domain){\r\n\t\t\t\tcls = dataframes[0].domain;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif(cls){\r\n\t\tif(!this.document){\r\n\t\t\tthis.document = new TerminusClient.ObjectFrame(cls, dataframes);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.document.loadDataFrames(dataframes);\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tconsole.log(\"Missing Class\" + \" \" + \"Failed to add dataframes due to missing class\");\r\n\t}\r\n}\r\n\r\n\r\nTerminusDocumentViewer.prototype.loadSchemaFrames = function(classframes, cls){\r\n\tif(!cls){\r\n\t\tif(classframes && classframes.length && classframes[0] && classframes[0].domain){\r\n\t\t\tcls = classframes[0].domain;\r\n\t\t}\r\n\t}\r\n\tif(cls){\r\n\t\tif(!this.document){\r\n\t\t\tthis.document = new TerminusClient.ObjectFrame(cls);\r\n\t\t}\r\n\t\tif(classframes){\r\n\t\t\tthis.document.loadClassFrames(classframes);\r\n\t\t\tif(!this.document.subjid){\r\n\t\t\t\tthis.document.newDoc = true;\r\n\t\t\t\tthis.document.fillFromSchema(\"_:\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tconsole.log(\"Missing Class\", \"Failed to add class frames due to missing class\");\r\n\t}\r\n}\r\n\r\nTerminusDocumentViewer.prototype.render = function(){\r\n\tif(!this.renderer && this.document){\r\n\t\tif(this.page_config){\r\n\t\t\tthis.options = this.getOptionsFromPageConfig(this.page_config);\r\n\t\t}\r\n\t\ttry{\r\n\t\t\tthis.renderer = new Renderers.ObjectRenderer(this.document, false, this.options);\r\n\t\t\tthis.renderer.mode = this.mode;\r\n\t\t\tthis.renderer.controller = this;\r\n\t\t}catch(e){\r\n\t \t\tconsole.error('TerminusDocumentViewer render',e.toString())\r\n\t \t}\r\n\t}\r\n\tif(this.renderer){\r\n\t\treturn this.renderer.render();\r\n\t}\r\n}\r\n\r\nTerminusDocumentViewer.prototype.getBuiltInViewerOptions = function(){\r\n\treturn FrameConfig;\r\n}\r\n\r\nTerminusDocumentViewer.prototype.getOptionsFromPageConfig = function(pageconf){\r\n\tif(typeof this.config_options[pageconf] == \"object\") {\r\n\t\treturn this.config_options[pageconf];\r\n\t}\r\n\treturn this.options;\r\n}\r\n\r\n\r\nTerminusDocumentViewer.prototype.getClient = function(){\r\n\treturn this.ui.client;\r\n}\r\n\r\nTerminusDocumentViewer.prototype.extract = function(options){\r\n\treturn this.renderer.extract();\r\n}\r\n\r\nTerminusDocumentViewer.prototype.getLabel = function(){\r\n\tvar lab = (this.cls ? this.cls : false);\r\n\tif(!lab) lab = (this.docid ? this.docid : \"Void\");\r\n\treturn lab;\r\n}\r\n\r\nTerminusDocumentViewer.prototype.setLabel = function(){\r\n\tif(this.document && this.labdom){\r\n\t\tTerminusClient.FrameHelper.removeChildren(this.labdom);\r\n\t\tvar dfs = this.document.getDataFrames(TerminusClient.FrameHelper.getStdURL(\"rdfs\", \"label\"));\r\n\t\tfor(var i = 0; i< dfs.length; i++){\r\n\t\t\tvar lab = dfs[i].get();\r\n\t\t\tif(lab) {\r\n\t\t\t\tthis.labdom.appendChild(document.createTextNode(lab));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nTerminusDocumentViewer.prototype.refreshPage = function(){\r\n\tif(this.pagedom){\r\n\t\tTerminusClient.FrameHelper.removeChildren(this.pagedom);\r\n\t\tvar rends = this.render();\r\n\t\tif(rends){\r\n\t\t\tthis.pagedom.appendChild(rends);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nTerminusDocumentViewer.prototype.getAsDOM = function(){\r\n\tvar holder = document.createElement(\"div\");\r\n\tholder.setAttribute(\"class\", \"terminus-document-holder\");\r\n\tif(this.mode !== 'edit'){ // dont provide drop down on create mode\r\n\t\tthis.controldom = document.createElement(\"div\");\r\n\t\tthis.controldom.setAttribute(\"class\", \"terminus-document-controller\");\r\n\t\tif(Object.keys(this.config_options).length > 1)\tthis.controldom.appendChild(this.getDocumentPageControls());\r\n\t\tholder.appendChild(this.controldom);\r\n\t}\r\n\tthis.pagedom = document.createElement(\"div\");\r\n\tthis.pagedom.setAttribute(\"class\", \"terminus-document-page\");\r\n\tvar rends = this.render();\r\n\tif(rends){\r\n\t\tthis.pagedom.appendChild(rends);\r\n\t}\r\n\tholder.appendChild(this.pagedom);\r\n\treturn holder;\r\n}\r\n\r\nTerminusDocumentViewer.prototype.getDocumentPageControls = function(){\r\n\tvar dpc = document.createElement(\"select\");\r\n\tdpc.setAttribute(\"class\", \"terminus-form-select terminus-document-config\");\r\n\tfor(var i in this.config_options){\r\n\t\tif(i === 'create') continue; // create docuemnt option from config is not taken in edit mode \r\n\t\tvar opt = document.createElement(\"option\");\r\n\t\topt.value = i;\r\n\t\tif(this.page_config == i){\r\n\t\t\topt.selected = true;\r\n\t\t}\r\n\t\topt.appendChild(document.createTextNode(this.config_options[i].label));\r\n\t\tdpc.appendChild(opt);\r\n\t}\r\n\tvar self = this;\r\n\tdpc.addEventListener(\"change\", function(){\r\n\t\tself.page_config = this.value;\r\n\t\tself.renderer = false;\r\n\t\tself.refreshPage();\r\n\t})\r\n\treturn dpc;\r\n}\r\n\r\nmodule.exports=TerminusDocumentViewer\r\n","const TerminusClient = require('@terminusdb/terminus-client');\r\nconst UTILS= require('../Utils')\r\n\r\n/*** client side processing ***/\r\nfunction CspDatatables(ui){\r\n    this.ui = ui;\r\n}\r\n\r\nCspDatatables.prototype.convertToDatatable = function(tab){\r\n    var dt = this;\r\n    var table = jQuery(tab).DataTable({\r\n         searching : false,\r\n         pageLength: 25,\r\n         lengthMenu: [10, 25, 50, 75, 100],\r\n         paging    : true,\r\n         select    : true,\r\n         initComplete: function(settings) {\r\n                        var ict =settings.oInstance.api();\r\n                        ict.$('td').each(function(){\r\n                            this.setAttribute('title', $(this).html())\r\n                        })},\r\n         columnDefs:[{targets:'_all',className:\"truncate\"}],\r\n         createdRow: function(row) {\r\n                            var td = $(row).find(\".truncate\");\r\n                            td.attr(\"title\", td.html());}\r\n    }); //jQuery(tab)\r\n\r\n    // on click of row connect to db, on click of 5th column delete db\r\n    jQuery(tab, 'tbody').on('click', 'td', function(){\r\n        if(table.cell(this).index().column == 5){\r\n            var dbInfo = table.row(jQuery(this).parents('tr')).data();\r\n            var dbId = UTILS.extractValueFromCell(dbInfo[0]);\r\n            dt.ui.deleteDatabase(dbId);\r\n            return;\r\n        }\r\n        else dt.ui.showDBMainPage();\r\n     }); // on click\r\n\r\n    tab.setAttribute('class'      , 'stripe dataTable terminus-db-size');\r\n    tab.setAttribute('cellpadding', '1');\r\n    tab.setAttribute('cellspacing', '0');\r\n    tab.setAttribute('border'     , '0');\r\n    return tab;\r\n}\r\n\r\nCspDatatables.prototype.draw = function(dtResult){\r\n    return(this.convertToDatatable(dtResult));\r\n}\r\n\r\n/*** server side processing ***/\r\nfunction Datatables(wResViewer, qPage){\r\n   this.wrViewer = wResViewer;\r\n   this.wQuery = wResViewer.wQuery;\r\n   this.ui = wResViewer.ui;\r\n   this.qPage = qPage;\r\n}\r\n\r\n/*\r\n    query: new woqlquery with current pagination changes\r\n    pageInfo: current drawCallBack page change info\r\n    resultDOM: result dom on veiwer page\r\n*/\r\nDatatables.prototype.executeQuery = function(query, pageInfo, resultDOM){\r\n    var self = this;\r\n    //dcb.wquery.execute(query)\r\n    this.wQuery.execute(query)\r\n      .then(function(result){\r\n          var dtResult = {};\r\n          dtResult =self.wrViewer.getDtTableDOMOnChange(result.bindings, resultDOM, pageInfo);\r\n          return dtResult;\r\n          //self.getDataFromServer(dtResult, wrViewer, ui, wQuery, resultDOM);\r\n      })\r\n      .catch(function(err){\r\n          console.error(err);\r\n          self.ui.showError(err);\r\n      });\r\n}\r\n\r\n/* get query string based on datatable pagination and current query */\r\nDatatables.prototype.getQueryOnPagination = function(wq, settings){\r\n    switch(settings.query){\r\n        case 'Show_All_Documents':\r\n            return wq.getAllDocumentQuery(null, settings.pageLength, settings.start);\r\n        break;\r\n        case 'Show_All_Data':\r\n            return wq.getEverythingQuery(null, settings.pageLength, settings.start);\r\n        break;\r\n        case 'Show_All_Schema_Elements':\r\n            return wq.getElementMetaDataQuery(null, settings.pageLength, settings.start);\r\n        break;\r\n        case 'Show_Document_Classes':\r\n        \tvar sqp = wq.getConcreteDocumentClassPattern(\"Class\");\r\n            return wq.getClassMetaDataQuery(sqp);\r\n        break;\r\n        case 'Show_All_Properties':\r\n            return wq.getPropertyListQuery(null, settings.pageLength, settings.start);\r\n        break;\r\n        case 'Show_All_Classes':\r\n            return wq.getClassMetaDataQuery(null, settings.pageLength, settings.start);\r\n        break;\r\n        case 'Show_Data_Class':\r\n            return  wq.getDataOfChosenClassQuery(settings.chosenValue, settings.pageLength, settings.start);\r\n        break;\r\n        case 'Show_Property_Class':\r\n            return wq.getDataOfChosenPropertyQuery(settings.chosenValue, settings.pageLength, settings.start);\r\n        break;\r\n        case 'Show_Document_Info_by_Id':\r\n            return wq.getDocumentQuery(settings.chosenValue, settings.pageLength, settings.start);\r\n        break;\r\n        default:\r\n            console.log('Invalid woql option passed');\r\n        break;\r\n\r\n    }\r\n}\r\n\r\n/*\r\n    pageInfo: current drawCallBack page change info\r\n*/\r\nDatatables.prototype.generateNewQueryOnPageChange = function(pageInfo){\r\n    if(this.qPage) UTILS.deleteStylizedEditor(this.ui, pageInfo.qTextDom);\r\n    var query = this.getQueryOnPagination(this.wQuery, pageInfo)\r\n    if(this.qPage) {\r\n        pageInfo.qTextDom.value = JSON.stringify(query,undefined, 2);\r\n        UTILS.stylizeEditor(this.ui, pageInfo.qTextDom, 'query', 'javascript');\r\n    }\r\n    return query;\r\n}\r\n\r\n/*\r\n    dt: Datatable reference\r\n    len : current number of records to display\r\n*/\r\nDatatables.prototype.getCallbackSettings = function(dt, len, start){\r\n    var pageInfo = {};\r\n    pageInfo.pageLength = len;\r\n    pageInfo.start      = start;\r\n    pageInfo.qTextDom   = dt.qTextDom;\r\n    pageInfo.query      = dt.query;\r\n    pageInfo.chosenValue = dt.chosenValue;\r\n    return pageInfo;\r\n}\r\n\r\n/*\r\n    tab: datatable table dom\r\n    settings : settings from woql txt generator\r\n    resultDOM: result dom of viewer\r\n*/\r\nDatatables.prototype.setUp = function(tab, settings, resultDOM){\r\n    // delete previous datatable\r\n    TerminusClient.FrameHelper.removeChildren(this.dtdom);\r\n    this.dtdom = document.createElement('div');\r\n    this.dtdom.appendChild(tab);\r\n    resultDOM.appendChild(this.dtdom);\r\n    // saving query text box dom to change limit value on change of datatable page length\r\n    this.qTextDom = settings.qTextDom;\r\n    this.query = settings.query;\r\n    this.chosenValue = settings.chosenValue;\r\n}\r\n\r\nDatatables.prototype.getNewDataOnChange = function(drawnTab, aSettings, resultDOM){\r\n    var pageInfo = this.getCallbackSettings(this, aSettings._iDisplayLength, aSettings._iDisplayStart);\r\n    var query = this.generateNewQueryOnPageChange(pageInfo);\r\n    return this.executeQuery(query, pageInfo, resultDOM);\r\n    //return  dtResult.result.data;\r\n}\r\n\r\nDatatables.prototype.getDataFromServer = function(dtResult,resultDOM){\r\n    var dt = this;\r\n    var tab = dtResult.tab;\r\n    this.setUp(tab, this.wrViewer.settings, resultDOM);\r\n    // initialize datatables\r\n    var table = jQuery(tab).DataTable({\r\n         searching   : false,\r\n         pageLength  : dt.wrViewer.settings.pageLength,\r\n         serverSide  : true,\r\n         processing  : true,\r\n         lengthMenu  : [5, 10, 25, 50, 75, 100],\r\n         dom         : 'RBlftip',\r\n         columns     : dtResult.result.columns,\r\n         paging      : true,\r\n         select      : true,\r\n         initComplete: function(settings) {\r\n                        var ict =settings.oInstance.api();\r\n                        ict.$('td').each(function(){\r\n                            this.setAttribute('title', $(this).html())\r\n                        })},\r\n         ajax        : function (data, callback, settings) {\r\n                        if(Object.entries(dtResult.result.data).length > 0){\r\n                            // first draw is loaded\r\n                            var res = dtResult.result.data;\r\n                            dtResult.result.data = {};\r\n                        }\r\n                        else{\r\n                            var res = dt.getNewDataOnChange(this, settings, resultDOM);\r\n                            console.log('res', res);\r\n                        }\r\n                        callback(res);},\r\n         buttons     : [{ extend: 'copy', text: 'Copy to clipboard' },\r\n                        { extend: 'excel', text: 'Export to Excel' }],\r\n         columnDefs  : [{targets:'_all',className:\"truncate\"}],\r\n         createdRow  : function(row){\r\n                            var td = $(row).find(\".truncate\");\r\n                            td.attr(\"title\", td.html());},\r\n         //colReorder  : {addFixed : true, liveDrag:true},\r\n         scrollX     : true\r\n    }); //jQuery(tab)\r\n\r\n    //styling\r\n    tab.setAttribute('class'      , 'stripe dataTable');\r\n    tab.setAttribute('style'       , 'margin: 0!important');\r\n    tab.setAttribute('cellpadding', '1');\r\n    tab.setAttribute('cellspacing', '1');\r\n    tab.setAttribute('border'     , '0');\r\n\r\n    return tab;\r\n}\r\n\r\n/*\r\nserverside: true or false\r\n*/\r\nDatatables.prototype.draw = function(dtResult, resultDOM){\r\n    return(this.getDataFromServer(dtResult, resultDOM));\r\n}\r\n\r\nmodule.exports={Datatables, CspDatatables}\r\n","/**\r\n * Object for producing a HTML view of a given object in a frame\r\n */\r\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction HTMLObjectViewer(renderer){\r\n\tthis.renderer = renderer;\r\n\tthis.properties = [];\r\n\tthis.headerViewer = renderer.getObjectHeaderViewer();\r\n\t//this.featureViewers = {};\r\n}\r\n\r\n/**\r\n * Functions for rendering / re-rendering the object as header and body components\r\n */\r\nHTMLObjectViewer.prototype.render = function(){\r\n\tif(this.renderedDOM){\r\n\t\tvar renderedDOM = this.getObjectDOM();\r\n\t\tthis.renderedDOM.replaceWith(renderedDOM);\r\n\t\tthis.renderedDOM = renderedDOM;\r\n\t}\r\n\telse {\r\n\t\tthis.renderedDOM = this.getObjectDOM();\r\n\t}\r\n\tthis.renderedDOM.appendChild(this.getObjectIDMarker(this.renderer));\r\n\tif(this.headerViewer){\r\n\t\tthis.header = this.headerViewer.getAsDOM(this.renderer);\r\n\t\tif(this.header) this.renderedDOM.appendChild(this.header);\r\n\t}\r\n\tthis.body = this.getObjectBodyDOM();\r\n\tif(this.body) this.renderedDOM.appendChild(this.body);\r\n\treturn this.renderedDOM;\r\n}\r\n\r\nHTMLObjectViewer.prototype.getObjectDOM = function(){\r\n\tvar orientation = this.renderer.getContentOrientation();\r\n\tvar pcls = \"terminus-object-frame-\" + orientation;\r\n\tif(orientation == \"page\"){\r\n\t\tvar sp = document.createElement(\"div\");\r\n\t}\r\n\telse {\r\n\t\tvar sp = document.createElement(\"span\");\r\n\t}\r\n\tvar css = \"terminus-object-frame \" + pcls + (this.renderer.parent ? \"\" : \" terminus-root-frame\") + \" terminus-object-frame-\" + this.renderer.mode;\r\n\tsp.setAttribute(\"class\", css);\r\n\tsp.setAttribute(\"data-class\", this.renderer.subjectClass());\r\n\tsp.setAttribute(\"data-id\", this.renderer.subject());\r\n\treturn sp;\r\n}\r\n\r\nHTMLObjectViewer.prototype.getObjectBodyDOM = function(){\r\n\tvar orientation = this.renderer.getContentOrientation();\r\n\tvar pcls = \"terminus-object-properties-\" + orientation;\r\n\tif(orientation == \"page\"){\r\n\t\tvar vholder = document.createElement(\"div\");\r\n\t}\r\n\telse {\r\n\t\tvar vholder = document.createElement(\"span\");\r\n\t}\r\n    vholder.setAttribute('class', 'terminus-object-properties ' + pcls);\r\n    for(var prop in this.properties){\r\n\t\tif(this.properties[prop]) vholder.appendChild(this.properties[prop]);\r\n\t}\r\n\treturn vholder;\r\n}\r\n\r\nHTMLObjectViewer.prototype.getFeatureDOM = function(feature){\r\n\tif(this.hasFeatureViewer(feature)){\r\n\t\treturn this.featureViewer[feature](this.renderer, this);\r\n\t}\r\n}\r\n\r\nHTMLObjectViewer.prototype.redraw = function(){\r\n\tTerminusClient.FrameHelper.removeChildren(this.renderedDOM);\r\n\tthis.properties = [];\r\n\tthis.renderer.render(this);\r\n}\r\n\r\nHTMLObjectViewer.prototype.redrawHeader = function(){\r\n\tif(this.headerViewer && this.header) {\r\n\t\tvar nheader = this.headerViewer.getAsDOM(this.renderer);\r\n\t\tthis.header.replaceWith(nheader);\r\n\t\tthis.header = nheader;\r\n\t}\r\n}\r\n\r\nHTMLObjectViewer.prototype.redrawBody = function(){\r\n\tif(this.body){\r\n\t\tvar nbody = this.getObjectBodyDOM();\r\n\t\tthis.body.replaceWith(nbody);\r\n\t\tthis.body = nbody;\r\n\t}\r\n}\r\n\r\n/**\r\n * Adds a rendered version of a property to the internal properties array\r\n */\r\nHTMLObjectViewer.prototype.addRenderedProperty = function(prop, renderedprop){\r\n\tthis.properties[prop] = renderedprop;\r\n}\r\n\r\nHTMLObjectViewer.prototype.clear = function(){\r\n\tTerminusClient.FrameHelper.removeChildren(this.renderedDOM);\r\n\tthis.properties = {};\r\n}\r\n\r\n/**\r\n * Removes the object from the dom\r\n */\r\nHTMLObjectViewer.prototype.remove = function(){\r\n\tthis.renderedDOM.parentNode.removeChild(this.renderedDOM);\r\n}\r\n\r\nHTMLObjectViewer.prototype.goTo = function(subj, property){\r\n\tHTMLFrameHelper.goToName(subj, property);\r\n}\r\n\r\n/**\r\n * Generates a html anchor element to use as a marker to find the object on the page\r\n */\r\nHTMLObjectViewer.prototype.getObjectIDMarker = function(renderer){\r\n\tvar idm = document.createElement(\"a\");\r\n\tidm.setAttribute(\"class\", \"terminus-object-idmarker\");\r\n\tvar sh = TerminusClient.FrameHelper.getShorthand(renderer.subject());\r\n    if(!sh) sh = renderer.subject();\r\n    if(sh){\r\n\t\tvar bits = sh.split(\":\");\r\n\t\tif(bits.length > 1) sh = bits[1];\r\n\t\tidm.setAttribute(\"name\", sh);\r\n    }\r\n\treturn idm;\r\n}\r\n\r\nfunction HTMLObjectHeaderViewer(){}\r\n\r\nHTMLObjectHeaderViewer.prototype.getAsDOM = function(renderer){\r\n\tvar orientation = renderer.getContentOrientation();\r\n\tvar pcls = \"terminus-object-frame-btn terminus-object-header-\" + orientation;\r\n\tif(orientation == \"page\"){\r\n\t\tvar objDOM = document.createElement(\"div\");\r\n\t}\r\n\telse {\r\n\t\tvar objDOM = document.createElement(\"span\");\r\n\t}\r\n\tobjDOM.setAttribute(\"class\", \"terminus-object-header \" + pcls);\r\n\tif(renderer.showFeature(\"facet\")){\r\n\t\tvar facetDOM = this.getObjectFacetDOM(renderer);\r\n\t\tif(facetDOM) objDOM.appendChild(facetDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"label\")){\r\n\t\tvar sumDOM = this.getObjectLabelDOM(renderer);\r\n\t\tif(sumDOM) objDOM.appendChild(sumDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"id\")){\r\n\t\tvar idDOM = this.getObjectIDDOM(renderer);\r\n\t\tif(idDOM) objDOM.appendChild(idDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"type\")){\r\n\t\tvar typeDOM = this.getObjectTypeDOM(renderer);\r\n\t\tif(typeDOM) objDOM.appendChild(typeDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"status\")){\r\n\t\tvar sumDOM = this.getObjectStatusDOM(renderer);\r\n\t\tif(sumDOM) objDOM.appendChild(sumDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"view\")){\r\n\t\tvar viewDOM = this.getViewPropertyDOM(renderer);\r\n\t\tif(viewDOM) objDOM.appendChild(viewDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"viewer\")){\r\n\t\tvar hideDOM = this.getViewerSelectorDOM(renderer);\r\n\t\tif(hideDOM) objDOM.appendChild(hideDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"control\")){\r\n\t\tvar controlsDOM = this.getObjectControlsDOM(renderer);\r\n\t\tif(controlsDOM) objDOM.appendChild(controlsDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"summary\")){\r\n\t\tvar controlsDOM = this.getObjectSummaryDOM(renderer);\r\n\t\tif(controlsDOM) objDOM.appendChild(controlsDOM);\r\n\t}\r\n\treturn objDOM;\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectSummaryDOM = function(renderer){\r\n\tvar sum = renderer.getSummary();\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"object-summary\", false, sum.long, sum.status);\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectControlsDOM = function(renderer){\r\n\tvar controlsDOM = document.createElement(\"span\");\r\n\tcontrolsDOM.setAttribute(\"class\", \"terminus-object-controls\");\r\n\tif(renderer.showFeature(\"add\")){\r\n\t\tvar addDOM = this.getAddPropertyDOM(renderer);\r\n\t\tif(addDOM) controlsDOM.appendChild(addDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"mode\")){\r\n\t\tvar viewsDOM = HTMLFrameHelper.getModeSelectorDOM(\"object\", renderer);\r\n\t\tif(viewsDOM) controlsDOM.appendChild(viewsDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"delete\")){\r\n\t\tvar dpropDOM = this.getObjectDeleteDOM(renderer);\r\n\t\tif(dpropDOM) controlsDOM.appendChild(dpropDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"clone\")){\r\n\t\tvar cpropDOM = this.getObjectCloneDOM(renderer);\r\n\t\tif(cpropDOM) controlsDOM.appendChild(cpropDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"reset\")){\r\n\t\tvar rpropDOM = this.getObjectResetDOM(renderer);\r\n\t\tif(rpropDOM) controlsDOM.appendChild(rpropDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"update\")){\r\n\t\tvar upropDOM = this.getObjectUpdateDOM(renderer);\r\n\t\tif(upropDOM) controlsDOM.appendChild(upropDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"show\")){\r\n\t\tvar showDOM = this.getObjectShowDOM(renderer);\r\n\t\tif(showDOM) controlsDOM.appendChild(showDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"hide\")){\r\n\t\tvar hideDOM = this.getObjectHideDOM(renderer);\r\n\t\tif(hideDOM) controlsDOM.appendChild(hideDOM);\r\n\t}\r\n\treturn controlsDOM;\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectFacetDOM = function(renderer){\r\n\tvar viewables = renderer.getAvailableFacets();\r\n\tvar self = this;\r\n\tif(viewables && viewables.length){\r\n\t\tvar mpropDOM = document.createElement(\"span\");\r\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-facet\");\r\n\t\tvar callback = function(val){\r\n\t\t\tif(val){\r\n\t\t\t\trenderer.setFacet(val);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"object-facet\", viewables, renderer.currentFacet(), callback);\r\n\t\tmpropDOM.appendChild(sel);\r\n\t\treturn mpropDOM;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectLabelDOM = function(renderer){\r\n\tvar lab = renderer.getLabel();\r\n\tif(lab){\r\n\t\treturn HTMLFrameHelper.getInfoboxDOM(\"object-label\", false, lab);\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectIDDOM = function(renderer){\r\n\tvar val = renderer.subject();\r\n\tvar input = false;\r\n\tif(renderer.mode == \"edit\" && renderer.isNewDocument()){\r\n\t\tif(renderer.idDOM) val = renderer.idDOM.value;\r\n\t\tinput = document.createElement(\"input\");\r\n\t\tinput.setAttribute(\"class\", \"terminus-object-id-input\");\r\n\t\tinput.required  = true;\r\n\t\tif(val == \"_:\") val = \"\";\r\n\t\trenderer.idDOM = input;\r\n\t}\r\n\telse {\r\n\t\tif(renderer.isNewDocument() && val == \"_:\") val = \"New Document\";\r\n\t}\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"object-id\", \"ID\", val, \"Every fragment of data is identified by a unique URL\", input);\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectTypeDOM = function(renderer){\r\n\tif(renderer.mode == \"edit\" && renderer.parent && renderer.parent.isClassChoice() && renderer.isNew()){\r\n\t\tvar cs = renderer.parent.getAvailableClassChoices();\r\n\t\tif(cs && cs.length){\r\n\t\t\tvar mpropDOM = document.createElement(\"span\");\r\n\t\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-change-class\");\r\n\t\t\tvar mlabDOM = document.createElement(\"span\");\r\n\t\t\tmlabDOM.setAttribute(\"class\", \"terminus-property-change-label\");\r\n\t\t\tmlabDOM.appendChild(document.createTextNode(\"Type\"));\r\n\t\t\tmpropDOM.appendChild(mlabDOM);\r\n\t\t\tvar callback = function(cls){\r\n\t\t\t\tif(cls){\r\n\t\t\t\t\trenderer.changeClass(cls);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"change-class\", cs, renderer.subjectClass(), callback);\r\n\t\t\tmpropDOM.appendChild(sel);\r\n\t\t\treturn mpropDOM;\r\n\t\t}\r\n\t}\r\n\tvar cm = renderer.getClassMeta(renderer.subjectClass());\r\n\tvar lab = renderer.subjectClass();\r\n\tvar cmt = \"All objects have types, identified by a unique URL\";\r\n\tif(cm){\r\n\t\tlab = HTMLFrameHelper.getVariableValueFromBinding(\"Label\", cm);\r\n\t\tcmt = HTMLFrameHelper.getVariableValueFromBinding(\"Comment\", cm);\r\n\t\tcmt = (cmt ? renderer.subjectClass() + \" \" + cmt : renderer.subjectClass());\r\n\t}\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"object-type\", \"Type\", lab, cmt);\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectStatusDOM = function(renderer){\r\n\tvar sum = renderer.getSummary();\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"status-\"+sum.status, false, sum.status, sum.status);\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getAddPropertyDOM = function(renderer){\r\n\tvar addables = renderer.getAddableProperties();\r\n\tif(addables && addables.length){\r\n\t\tvar mpropDOM = document.createElement(\"span\");\r\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-add-property\");\r\n\t\taddables.unshift({ value: \"\", label: \"Add New Property\"});\r\n\t\tvar callback = function(add){\r\n\t\t\tif(add){\r\n\t\t\t\trenderer.addNewProperty(add);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar disabled = (renderer.cardControlAllows(\"add\") ? false : \"Cardinality Rules Forbid Add\");\r\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"add-property\", addables, \"\", callback, disabled);\r\n\t\tmpropDOM.appendChild(sel);\r\n\t\treturn mpropDOM;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getViewPropertyDOM = function(renderer){\r\n\tvar viewables = renderer.getViewableProperties();\r\n\tvar self = this;\r\n\tif(viewables && viewables.length){\r\n\t\tvar mpropDOM = document.createElement(\"span\");\r\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-view-property\");\r\n\t\tviewables.unshift({ value: \"\", label: \"View Property\"});\r\n\t\tvar callback = function(add){\r\n\t\t\tif(add){\r\n\t\t\t\trenderer.goToProperty(add);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"view-property\", viewables, \"\", callback);\r\n\t\tmpropDOM.appendChild(sel);\r\n\t\treturn mpropDOM;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectDeleteDOM = function(renderer){\r\n\tvar callback = function(){renderer.delete()};\r\n\tvar disabled = (renderer.cardControlAllows(\"delete\") ? false : \"Cardinality Rules Forbid Delete\");\r\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"delete\", \"Delete\", callback, disabled);\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectCloneDOM = function(renderer){\r\n\tvar callback = function(){renderer.clone()};\r\n\tvar disabled = (renderer.cardControlAllows(\"clone\") ? false : \"Cardinality Rules Forbid Clone\");\r\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"clone\", \"Clone\", callback, disabled);\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectResetDOM = function(renderer){\r\n\tvar callback = function(){renderer.reset()};\r\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to reset\");\r\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"reset\", \"Reset\", callback, disabled);\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getViewerSelectorDOM = function(renderer){\r\n\tvar viewers = renderer.getAvailableViewers();\r\n\tif(viewers && viewers.length){\r\n\t\tvar mpropDOM = document.createElement(\"span\");\r\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-viewer\");\r\n\t\tvar callback = function(viewer){\r\n\t\t\tif(viewer){\r\n\t\t\t\trenderer.setViewer(viewer);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar selected = renderer.currentViewer();\r\n\t\tvar sel = HTMLFrameHelper.getSelectionControl('object-viewer', viewers, selected, callback);\r\n\t\tmpropDOM.appendChild(sel);\r\n\t\treturn mpropDOM;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectHideDOM = function(renderer){\r\n\tvar callback = function(){renderer.hide()};\r\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"hide\", \"Hide\", callback);\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectShowDOM = function(renderer){\r\n\tvar callback = function(){renderer.show()};\r\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"show\", \"Show\", callback);\r\n}\r\n\r\nHTMLObjectHeaderViewer.prototype.getObjectUpdateDOM = function(renderer){\r\n\tvar dpropDOM = document.createElement(\"span\");\r\n\tdpropDOM.setAttribute(\"class\", \"terminus-object-update\");\r\n\tif(renderer.isNewDocument()){\r\n\t\tvar disabled = false;//(renderer.isUpdated() ? false : \"No changes\");\r\n\t}\r\n\telse {\r\n\t\tvar disabled = (renderer.isUpdated() ? false : \"No changes\");\r\n\t}\r\n\tvar saveback = function(){renderer.save()};\r\n\tdpropDOM.appendChild(HTMLFrameHelper.getActionControl(\"object\", \"save\", \"Save\", saveback, disabled));\r\n\treturn dpropDOM;\r\n}\r\n\r\nmodule.exports={HTMLObjectViewer,HTMLObjectHeaderViewer}\r\n","function HTMLStringViewer(options){\r\n\tthis.size = ((options && options.size) ? options.size : false);\r\n\tthis.css = ((options && options.css) ? \"terminus-literal-value \" + options.css : \"terminus-literal-value\");\r\n}\r\n\r\nHTMLStringViewer.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar input = document.createElement(\"span\");\r\n\tinput.setAttribute('class', this.css);\r\n\tinput.setAttribute('data-value', value);\r\n\tvalue = document.createTextNode(value);\r\n\tinput.appendChild(value);\r\n\treturn input;\r\n}\r\n\r\nmodule.exports={HTMLStringViewer}\r\n\r\n\r\n","function HTMLDateHelper(){\r\n\tthis.months = [\"January\", \"Februrary\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n}\r\n\r\nHTMLDateHelper.prototype.getMonthName = function(num){\r\n\treturn this.months[num-1];\r\n}\r\n\r\nmodule.exports={HTMLDateHelper}","\r\nfunction GoogleMapHelper(options){\r\n\tthis.polygon = false;\r\n\tthis.polyline = false;\r\n\tthis.markers = [];\r\n\tthis.init(options);\r\n}\r\n\r\nGoogleMapHelper.prototype.init = function(config){\r\n\tthis.type = ((config && config.type) ? config.type: 'Shape'); \r\n\tthis.width = ((config && config.width) ? config.width : '400px'); \r\n\tthis.height = ((config && config.height ) ? config.height : '400px'); \r\n\tthis.mapLat = ((config && config.mapLat) ? config.mapLat : '41.9010004'); \r\n\tthis.mapLong = ((config && config.mapLong ) ? config.mapLong : '12.500061500000015');\r\n\tthis.zoom = ((config && config.zoom) ? config.zoom : 3);\r\n\tthis.stroke = ((config && config.stroke) ? config.stroke : { color: '#FF0000', opacity: 0.3, weight: 3});\r\n\tthis.fill = ((config && config.fill) ? config.fill : { color: '#FF0000', opacity: 0.1});\r\n\tthis.line = ((config && config.line) ? config.line : { color: '#000000', opacity: 0.9, weight: 3});\r\n}\r\n\r\nGoogleMapHelper.prototype.destroy = function(){\r\n    this.clear();\r\n} \r\n\r\nGoogleMapHelper.prototype.translatePolygonToArray = function(polygon){\r\n   var data = \"[\";\r\n   var vertices = polygon.getPath();\r\n   var seenValue = false;\r\n   for (var j=0; j<vertices.getLength(); j++){\r\n       if(seenValue){\r\n           data = data + \",\";\r\n       }\r\n       var xy = vertices.getAt(j);\r\n       data = data + \"[\" + xy.lat() + \",\" + xy.lng() + \"]\"\r\n       seenValue = true;\r\n   }\r\n   data = data + \"]\";\r\n   return data;\r\n};\r\n\r\nGoogleMapHelper.prototype.translateArrayToPolygon = function(array){\r\n   var jsonified = JSON.parse(array);\r\n   var output = [];\r\n   for(var i=0;i<jsonified.length;i++){\r\n       var latlong = {}\r\n       latlong.lat = jsonified[i][0];\r\n       latlong.lng = jsonified[i][1];\r\n       output.push(latlong);\r\n   }\r\n   return output;\r\n}\r\n\r\nGoogleMapHelper.prototype.createPolygon = function(coords, map) {\r\n\tvar polygon = new google.maps.Polygon({\r\n        paths: coords,\r\n        strokeColor: this.stroke.color,\r\n        strokeOpacity: this.stroke.opacity,\r\n        strokeWeight: this.stroke.weight,\r\n        fillColor: this.fill.color,\r\n        fillOpacity: this.fill.opacity\r\n\t});\r\n    polygon.setMap(map);\r\n\treturn polygon;\r\n}\r\n\r\nGoogleMapHelper.prototype.createPolyline = function(coords){\r\n\tvar init = {\r\n\t      strokeColor: this.line.color,\r\n\t      strokeOpacity: this.line.opacity,\r\n\t      strokeWeight: this.line.weight\r\n\t};\r\n\tif(coords){\r\n\t\tinit.paths = coords;\r\n\t}\r\n\tvar poly = new google.maps.Polyline(init);\r\n\treturn poly;\r\n}\r\n\r\nGoogleMapHelper.prototype.clearMarkers = function() {\r\n\tfor (var i = 0; i < this.markers.length; i++ ) {\r\n\t\tthis.markers[i].setMap(null);\r\n\t}\r\n\tthis.markers.length = 0;\r\n}\r\n\r\n\r\nGoogleMapHelper.prototype.addMarker = function(position, map, renderer, title, ty) {\r\n\tvar init = {\r\n\t\tposition: position, \r\n\t\tmap: map\r\n\t}\r\n\tif(title){\r\n\t\tinit.title = title;\r\n\t}\r\n\tvar marker = new google.maps.Marker(init);\r\n\tvar self = this;\r\n\tif(this.markers.length == 0 && ty == \"xdd:coordinatePolygon\"){\r\n     \tmarker.addListener('click', function() {\r\n\t\t\tvar coords = self.getCoordsFromMarkers();\r\n    \t\tself.polygon = self.createPolygon(coords, map);\r\n            self.clearMarkers();\r\n            self.polyline.setMap(null);\r\n            renderer.set(self.translatePolygonToArray(self.polygon));\r\n        });                \t\r\n    }\r\n\tthis.markers.push(marker);\r\n\tif(ty == \"xdd:coordinatePolyline\"){\r\n\t\tvar x = this.translatePolygonToArray(this.polyline);\r\n\t\trenderer.set(x);\r\n\t}\r\n\treturn marker;\r\n}\r\n\r\nGoogleMapHelper.prototype.getCoordsFromMarkers = function(){\r\n\treturn this.polyline.getPath();\r\n}\r\n\r\nGoogleMapHelper.prototype.clear = function(){\r\n\tif(this.polygon) {\r\n\t\tthis.polygon.setMap(null);\r\n\t\tthis.polygon = false;\r\n\t}\r\n\tif(this.polyline) {\r\n\t\tthis.clearMarkers();\r\n\t\tthis.polyline.setMap(null);\r\n\t}\r\n}\r\n\r\nGoogleMapHelper.prototype.initMap = function(mapContainer, renderer, value, type){\r\n\tmapContainer.style.width = this.width;\r\n\tmapContainer.style.height = this.height;\r\n\tif(typeof google == \"undefined\"){\r\n\t\talert(\"google is not effing loaded\");\r\n\t\treturn false;\r\n\t}\r\n\tvar map = new google.maps.Map(mapContainer, {\r\n\t    zoom: this.zoom,\r\n\t\tcenter: {lat: parseFloat(this.mapLat), lng: parseFloat(this.mapLong)}  \r\n\t});\r\n\tif(type == \"xdd:coordinatePolygon\"){\r\n\t    this.polyline = this.createPolyline();\r\n\t\tthis.polyline.setMap(map);\r\n\t\tvar coords = (value ? this.translateArrayToPolygon(value) : []);\r\n\t\tif(value){\r\n\t    \tthis.polygon = this.createPolygon(coords, map);\r\n\t    }\r\n\t}\r\n\telse if(type == \"xdd:coordinatePolyline\"){\r\n\t\tvar coords = (value ? this.translateArrayToPolygon(value) : []);\r\n\t    this.polyline = this.createPolyline();\r\n\t\tthis.polyline.setMap(map);\t\t\r\n\t\tif(value){\r\n\t    \tthis.polyline.setPath(coords);\r\n\t    }\r\n\t}\t\r\n\telse if(type == \"xdd:coordinate\"){\r\n\t\tif(value){\r\n\t\t\tthis.clearMarkers();\r\n            var lat = parseFloat(value.substring(1, value.indexOf(\",\")));\r\n\t\t\tvar long = parseFloat(value.substring(value.indexOf(\",\")+1, value.length-1));\r\n            var init = {\r\n            \tposition: {lat: lat, lng: long},\r\n        \t\tmap: map\r\n\t        }\r\n\t        var marker = new google.maps.Marker(init);\r\n\t        this.markers.push(marker);\r\n\t\t}\r\n\t}\r\n    google.maps.event.trigger(map, 'resize');\r\n    return map;\r\n}\r\n\r\nmodule.exports=GoogleMapHelper;","const HTMLFrameHelper = require('./HTMLFrameHelper');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n/**\r\n * Property Viewer\r\n */\r\nfunction HTMLPropertyViewer(renderer){\r\n\tthis.renderer = renderer;\r\n\tthis.values = [];\r\n\tthis.headerViewer = renderer.getPropertyHeaderViewer();\r\n}\r\n\r\n\r\n/**\r\n * Draws the property as header and body components\r\n */\r\nHTMLPropertyViewer.prototype.render = function(){\r\n\t//var block = document.createElement('div');\r\n\t//block.setAttribute('style', 'display: flex; margin: 10px');\r\n\t//var br = document.createElement('br');\r\n\t//block.appendChild(br);\r\n\tif(this.propDOM){\r\n\t\tvar npropDOM = this.getPropertyDOM();\r\n\t\t//npropDOM.setAttribute('style', 'display: flex; margin: 10px;');\r\n\t\t\t//block.appendChild(npropDOM);\r\n\t\tthis.propDOM.replaceWith(npropDOM);\r\n\t\tthis.propDOM = npropDOM;\r\n\t\t//this.propDOM = block;\r\n\t}\r\n\telse {\r\n\t\t//block.appendChild(this.getPropertyDOM());\r\n\t\t//this.propDOM = block;\r\n\t\tthis.propDOM = this.getPropertyDOM();\r\n\t\t//this.propDOM.setAttribute('style', 'display: flex; margin: 10px;');\r\n\t}\r\n\tthis.propDOM.appendChild(this.getPropertyIDMarker(this.renderer));\r\n\tif(this.headerViewer){\r\n\t\tthis.header = this.headerViewer.getAsDOM(this.renderer);\r\n\t\tif(this.header) this.propDOM.appendChild(this.header);\r\n\t}\r\n\tthis.body = this.getPropertyBodyDOM();\r\n\tif(this.body) this.propDOM.appendChild(this.body);\r\n\treturn this.propDOM;\r\n}\r\n\r\nHTMLPropertyViewer.prototype.getPropertyDOM = function(){\r\n\tvar orientation = this.renderer.getContentOrientation();\r\n\tvar pcls = \" terminus-property-frame-display terminus-property-frame-\" + orientation;\r\n\tif(orientation == \"label\"){\r\n\t\tvar sp = document.createElement(\"span\");\r\n\t}\r\n\telse {\r\n\t\tvar sp = document.createElement(\"div\");\r\n\t}\r\n\t//terminus-property-frame-spacer\r\n\r\n\tsp.setAttribute(\"class\", \"terminus-property-frame terminus-zebra-frame terminus-property-frame-\" + this.renderer.mode + \" \" + pcls);\r\n\tsp.setAttribute('data-property', this.renderer.property());\r\n\treturn sp;\r\n}\r\n\r\nHTMLPropertyViewer.prototype.getPropertyBodyDOM = function(){\r\n\tvar orientation = this.renderer.getContentOrientation();\r\n\tvar pcls = \"terminus-property-values-\" + orientation;\r\n\tif(orientation == \"page\"){\r\n\t\tvar vholder = document.createElement(\"div\");\r\n\t}\r\n\telse {\r\n\t\tvar vholder = document.createElement(\"span\");\r\n\t}\r\n    vholder.setAttribute('class', 'terminus-property-values ' + pcls + ' terminus-property-values-align');\r\n\tfor(var i =0; i<this.values.length; i++){\r\n\t\tvholder.appendChild(this.values[i]);\r\n\t}\r\n\treturn vholder;\r\n}\r\n\r\nHTMLPropertyViewer.prototype.addRenderedValue = function(renderedval){\r\n\tthis.values.push(renderedval);\r\n}\r\n\r\nHTMLPropertyViewer.prototype.clear = function(){\r\n\tTerminusClient.FrameHelper.removeChildren(this.propDOM);\r\n\tthis.values = [];\r\n}\r\n\r\n\r\n/**\r\n * Removes the property from the dom\r\n */\r\nHTMLPropertyViewer.prototype.remove = function(){\r\n\tthis.propDOM.parentNode.removeChild(this.propDOM);\r\n}\r\n\r\n/**\r\n * Redraws the property to reflect an updated state\r\n */\r\nHTMLPropertyViewer.prototype.redraw = function(){\r\n\tvar npropDOM = this.getPropertyDOM();\r\n\tthis.propDOM.replaceWith(npropDOM);\r\n\tthis.propDOM = npropDOM;\r\n\tthis.values = [];\r\n\tthis.renderer.render(this);\r\n}\r\n\r\nHTMLPropertyViewer.prototype.redrawHeader = function(){\r\n\tif(this.headerViewer && this.header) {\r\n\t\tvar nheader = this.headerViewer.getAsDOM(this.renderer);\r\n\t\tthis.header.replaceWith(nheader);\r\n\t\tthis.header = nheader;\r\n\t}\r\n}\r\n\r\nHTMLPropertyViewer.prototype.redrawBody = function(){\r\n\tif(this.body){\r\n\t\tvar nbody = this.getPropertyBodyDOM();\r\n\t\tthis.body.replaceWith(nbody);\r\n\t\tthis.body = nbody;\r\n\t}\r\n}\r\n\r\n/**\r\n * Generates a html anchor element to use as a marker to find the property on the page\r\n */\r\nHTMLPropertyViewer.prototype.getPropertyIDMarker = function(renderer){\r\n\tvar idm = document.createElement(\"a\");\r\n\tidm.setAttribute(\"class\", \"terminus-property-idmarker\");\r\n\tvar subj = TerminusClient.FrameHelper.getShorthand(renderer.subject());\r\n\tif(!subj ) subj = renderer.subject();\r\n\tvar bits = subj .split(\":\");\r\n\tif(bits.length > 1) subj = bits[1];\r\n\tvar prop = TerminusClient.FrameHelper.getShorthand(renderer.property());\r\n\tif(!prop ) prop = renderer.property();\r\n\tvar bits = prop.split(\":\");\r\n\tif(bits.length > 1) prop = bits[1];\r\n\tidm.setAttribute(\"name\", subj + \"_\" + prop);\r\n\treturn idm;\r\n}\r\n\r\nHTMLPropertyViewer.prototype.goTo = function(subj, property, index){\r\n\tHTMLFrameHelper.goToName(subj, property, index);\r\n}\r\n\r\nfunction HTMLPropertyHeaderViewer(){}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getAsDOM = function(renderer){\r\n\tvar orientation = renderer.getContentOrientation();\r\n\tvar pcls = \"terminus-property-header-\" + orientation;\r\n\tif(orientation == \"page\"){\r\n\t\tvar objDOM = document.createElement(\"div\");\r\n\t}\r\n\telse {\r\n\t\tvar objDOM = document.createElement(\"span\");\r\n\t}\r\n\tobjDOM.setAttribute(\"class\", \"terminus-text terminus-property-header \" + pcls);\r\n\tvar wrapper = document.createElement(\"span\");\r\n\twrapper.setAttribute(\"class\", \"terminus-property-header-wrapper\");\r\n\tif(renderer.showFeature(\"control\")){\r\n\t\tvar expModeMenu = this.getPropertyControlsDOM(wrapper, renderer);\r\n\t\tif(orientation == 'page') this.expModeMenu = expModeMenu;\r\n\t\telse this.expModeMenu = null;\r\n\t}\r\n\tif(renderer.showFeature(\"label\")){\r\n\t\tvar sumDOM = this.getPropertyLabelDOM(renderer);\r\n\t\tif(renderer.showFeature(\"status\")){\r\n\t\t\tvar statDOM = this.getPropertyStatusDOM(renderer);\r\n\t\t\tif(statDOM) sumDOM.prepend(statDOM);\r\n\t\t}\r\n\t\tif(sumDOM) wrapper.appendChild(sumDOM);\r\n\t}\r\n\telse if(renderer.showFeature(\"status\")){\r\n\t\tvar statDOM = this.getPropertyStatusDOM(renderer);\r\n\t\tif(statDOM) wrapper.appendChild(statDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"summary\")){\r\n\t\tvar sumDOM = this.getPropertySummaryDOM(renderer);\r\n\t\tif(sumDOM) wrapper.appendChild(sumDOM);\r\n\t}\r\n\r\n\tvar prelude = document.createElement(\"span\");\r\n\tprelude.setAttribute(\"class\", \"terminus-property-header-info terminus-property-header-info-\"+renderer.currentFacet());\r\n\r\n\tif(renderer.showFeature(\"facet\")){\r\n\t\tvar facetDOM = this.getPropertyFacetDOM(renderer);\r\n\t\tif(facetDOM) prelude.appendChild(facetDOM);\r\n\t\t//if(facetDOM && this.expModeMenu) this.expModeMenu.appendChild(facetDOM);//\r\n\t}\r\n\tif(renderer.showFeature(\"view\")){\r\n\t\tvar viewDOM = this.getViewValueDOM(renderer);\r\n\t\tif(viewDOM) prelude.appendChild(viewDOM);\r\n\t\t//if(viewDOM && this.expModeMenu) this.expModeMenu.appendChild(viewDOM); //prelude.appendChild(viewDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"id\")){\r\n\t\tvar idDOM = this.getPropertyIDDOM(renderer);\r\n\t\tif(idDOM) prelude.appendChild(idDOM);\r\n\t\t//if(idDOM && this.expModeMenu) this.expModeMenu.appendChild(idDOM); //\r\n\t}\r\n\tif(renderer.showFeature(\"type\")){\r\n\t\tvar typeDOM = this.getPropertyRangeDOM(renderer);\r\n\t\tif(typeDOM)\tprelude.appendChild(typeDOM);\r\n\t\t/*if(typeDOM && this.expModeMenu){\r\n\t\t\tthis.expModeMenu.appendChild(typeDOM);//\r\n\t\t\ttypeDOM.style.display = 'block';\r\n\t\t}*/\r\n\t}\r\n\tif(renderer.showFeature(\"cardinality\") && renderer.hasCardinalityRestriction()){\r\n\t\tvar hideDOM = this.getPropertyCardinalityDOM(renderer);\r\n\t\tif(hideDOM) prelude.appendChild(hideDOM);\r\n\t\t//\tthis.expModeMenu.appendChild(hideDOM); \t\t\thideDOM.style.display = 'block';\r\n\r\n\t}\r\n\tif(renderer.showFeature(\"comment\")){\r\n\t\tvar sumDOM = this.getPropertyCommentDOM(renderer);\r\n\t\tif(sumDOM) prelude.appendChild(sumDOM);\r\n\t\t/*if(sumDOM && this.expModeMenu){\r\n\t\t\tthis.expModeMenu.appendChild(sumDOM); //\r\n\t\t\tsumDOM.style.display = 'block';\r\n\t\t}*/\r\n\t}\r\n\twrapper.appendChild(prelude);\r\n\tobjDOM.appendChild(wrapper);\r\n\treturn objDOM;\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyFacetDOM = function(renderer){\r\n\tvar viewables = renderer.getAvailableFacets();\r\n\tvar self = this;\r\n\tif(viewables && viewables.length){\r\n\t\tvar mpropDOM = document.createElement(\"span\");\r\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-facet\");\r\n\t\tvar callback = function(val){\r\n\t\t\tif(val){\r\n\t\t\t\trenderer.setFacet(val);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"property-facet\", viewables, renderer.currentFacet(), callback);\r\n\t\tmpropDOM.appendChild(sel);\r\n\t\treturn mpropDOM;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyIDDOM = function(renderer){\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-id\", \"Property\", renderer.property(), \"This property is identified by this unique URL: \" + renderer.property());\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyRangeDOM = function(renderer){\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-type\", \"Type\", renderer.range(), \"The type of arguments that this property accepts\");\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertySummaryDOM = function(renderer){\r\n\tvar sum = renderer.getSummary();\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-summary\", false, sum.long, sum.status);\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyStatusDOM = function(renderer){\r\n\tvar sum = renderer.getSummary();\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"status-\"+sum.status, false, sum.status, sum.status);\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyLabelDOM = function(renderer){\r\n\tvar lab = renderer.getLabel();\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-label\", false, lab);\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyCommentDOM = function(renderer){\r\n\tvar lab = renderer.getComment();\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-comment\", false, lab);\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyCardinalityDOM = function(renderer){\r\n\tvar restriction = renderer.getRestriction();\r\n\tif(restriction.min && restriction.max){\r\n\t\tif(restriction.min == restriction.max){\r\n\t\t\tvar lab = restriction.min;\r\n\t\t\tvar help = \"Cardinality: \" + restriction.min;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar lab = restriction.min + \"-\" + restriction.max;\r\n\t\t\tvar help = \"Minimum Cardinality: \" + restriction.min;\r\n\t\t\thelp += \", Maximum Cardinality: \" + restriction.max;\r\n\t\t}\r\n\t}\r\n\telse if(restriction.min){\r\n\t\tvar lab = \">\"+(restriction.min-1);\r\n\t\tvar help = \"Minimum Cardinality: \" + restriction.min;\r\n\t}\r\n\telse if(restriction.max){\r\n\t\tvar lab = \"<\"+(restriction.max+1);\r\n\t\tvar help = \"Maximum Cardinality: \" + restriction.max;\r\n\t}\r\n\telse {\r\n\t\treturn false;\r\n\t}\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-cardinality\", \"Cardinality\", lab, help);\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getActionControlDOM = function(settingsDOM, renderer){\r\n\tif(renderer.showFeature(\"mode\")){\r\n\t\tvar viewsDOM = HTMLFrameHelper.getModeSelectorDOM(\"property\", renderer);\r\n\t\tif (viewsDOM) settingsDOM.appendChild(viewsDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"delete\")){\r\n\t\tvar dpropDOM = this.getPropertyDeleteDOM(renderer);\r\n\t\tif (dpropDOM) settingsDOM.appendChild(dpropDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"add\") && !renderer.isClassChoice()){\r\n\t\tvar addDOM = this.getAddValueDOM(renderer);\r\n\t\tif(addDOM) settingsDOM.appendChild(addDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"reset\")){\r\n\t\tvar rpropDOM = this.getPropertyResetDOM(renderer);\r\n\t\tif(rpropDOM) settingsDOM.appendChild(rpropDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"update\")){\r\n\t\tvar upropDOM = this.getPropertyUpdateDOM(renderer);\r\n\t\tif(upropDOM) settingsDOM.appendChild(upropDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"show\")){\r\n\t\tvar showDOM = this.getPropertyShowDOM(renderer);\r\n\t\tif(showDOM) settingsDOM.appendChild(showDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"hide\")){\r\n\t\tvar hideDOM = this.getPropertyHideDOM(renderer);\r\n\t\tif(hideDOM) settingsDOM.appendChild(hideDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"viewer\")){\r\n\t\tvar hideDOM = this.getViewerSelectorDOM(renderer);\r\n\t\tif(hideDOM) settingsDOM.appendChild(hideDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"add\") && renderer.isClassChoice()){\r\n\t\tvar addDOM = this.getAddValueDOM(renderer);\r\n\t\tif(addDOM) settingsDOM.appendChild(addDOM);\r\n\t}\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getSettingsControlDOM = function(controlsDOM, renderer){\r\n\tvar settings = document.createElement(\"div\");\r\n\tcontrolsDOM.appendChild(settings);\r\n\tvar orientation = renderer.getContentOrientation();\r\n\tif(false && orientation == 'page'){ // expert mode\r\n\t\tvar sControl = HTMLFrameHelper.getSettingsControl('property');\r\n\t\tvar menu = document.createElement('div');\r\n\t\tmenu.setAttribute('class', 'terminus-hide terminus-popup');\r\n\t\tmenu.appendChild(document.createTextNode('Edit property'));\r\n\t\tmenu.appendChild(document.createElement('BR'));\r\n\t\tsControl.appendChild(menu);\r\n\t\tsControl.addEventListener('click', function(e){\r\n\t\t\tvar target = e.target || e.srcElement,\r\n        \ttext = target.textContent || target.innerText;\r\n\t\t\tif((target.nodeName == 'ICON') || (target.nodeName == 'BUTTON')){\r\n\t\t\t\tif(this.children[0].style.display == 'none') this.children[0].style.display = 'block';\r\n\t\t\t\telse this.children[0].style.display = 'none';\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.getActionControlDOM(menu, renderer);\r\n\t    settings.appendChild(sControl);\r\n\t\treturn menu;\r\n\t}\r\n\telse this.getActionControlDOM(controlsDOM, renderer);\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyControlsDOM = function(wrapper, renderer){\r\n\tvar controlsDOM = document.createElement(\"span\");\r\n\tcontrolsDOM.setAttribute(\"class\", \"terminus-property-controls\");\r\n\t//controlsDOM.setAttribute(\"style\", \"display: table-cell;\");\r\n\t// get settings icon or button\r\n\tvar expModeMenu = this.getSettingsControlDOM(controlsDOM, renderer);\r\n\twrapper.appendChild(controlsDOM);\r\n\treturn expModeMenu;\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getAddValueDOM = function(renderer){\r\n\tif(renderer.isClassChoice()){\r\n\t\tvar cs = renderer.getAvailableClassChoices();\r\n\t\tif(cs && cs.length){\r\n\t\t\tvar mpropDOM = document.createElement(\"span\");\r\n\t\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-add-class\");\r\n\t\t\tcs.unshift({ value: \"\", label: \"Add Type\"});\r\n\t\t\tvar callback = function(cls){\r\n\t\t\t\tif(cls){\r\n\t\t\t\t\trenderer.addClass(cls);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"add-property\", cs, \"\", callback);\r\n\t\t\tmpropDOM.appendChild(sel);\r\n\t\t\treturn mpropDOM;\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tvar callback = function(){renderer.add(\"edit\")};\r\n\t\tvar disabled = (renderer.cardControlAllows(\"add\") ? false : \"Cardinality Rules Forbid Add\");\r\n\t\treturn HTMLFrameHelper.getActionControl(\"property\", \"add\", \"Add\", callback, disabled);\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getViewValueDOM = function(renderer){\r\n\tvar viewables = renderer.getViewableValues();\r\n\tvar self = this;\r\n\tif(viewables && viewables.length){\r\n\t\tvar mpropDOM = document.createElement(\"span\");\r\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-view-value\");\r\n\t\tviewables.unshift({ value: \"\", label: \"View Value\"});\r\n\t\tvar callback = function(val){\r\n\t\t\trenderer.goToValue(val);\r\n\t\t}\r\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"view-values\", viewables, \"\", callback);\r\n\t\tmpropDOM.appendChild(sel);\r\n\t\treturn mpropDOM;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyDeleteDOM = function(renderer){\r\n\tvar callback = function(){renderer.delete()};\r\n\tvar disabled = (renderer.cardControlAllows(\"delete\") ? false : \"Cardinality Rules Forbid Delete\");\r\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"delete\", \"Delete\", callback, disabled);\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyHideDOM = function(renderer){\r\n\tvar callback = function(){renderer.hide()};\r\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"hide\", \"Hide\", callback);\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyResetDOM = function(renderer){\r\n\tvar callback = function(){renderer.reset()};\r\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to reset\");\r\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"reset\", \"Reset\", callback, disabled);\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyShowDOM = function(renderer){\r\n\tvar callback = function(){renderer.show()};\r\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"show\", \"Show\", callback);\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getPropertyUpdateDOM = function(renderer){\r\n\tvar dpropDOM = document.createElement(\"span\");\r\n\tdpropDOM.setAttribute(\"class\", \"terminus-property-update\");\r\n\tvar disabled = (renderer.isUpdated() ? false : \"No Change\");\r\n\tvar saveback = function(){renderer.save()};\r\n\tdpropDOM.appendChild(HTMLFrameHelper.getActionControl(\"property\", \"save\", \"Save\", saveback, disabled));\r\n\treturn dpropDOM;\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.getViewerSelectorDOM = function(renderer){\r\n\tvar viewers = renderer.getAvailableViewers();\r\n\tif(viewers && viewers.length){\r\n\t\tvar mpropDOM = document.createElement(\"span\");\r\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-viewer\");\r\n\t\tvar callback = function(viewer){\r\n\t\t\tif(viewer){\r\n\t\t\t\trenderer.setViewer(viewer);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar selected = renderer.currentViewer();\r\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"property-viewers\", viewers, selected, callback);\r\n\t\tmpropDOM.appendChild(sel);\r\n\t\treturn mpropDOM;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nHTMLPropertyHeaderViewer.prototype.showValue = function(renderer, index){\r\n\tvar htmlid = renderer.subject() + \"->\" + renderer.property() + \"_\" + index;\r\n\twindow.location = (\"\"+window.location).replace(/#[A-Za-z0-9_]*$/,'') + \"#\" + htmlid;\r\n}\r\n\r\nfunction HTMLDataViewer(renderer){\r\n\tthis.renderer = renderer;\r\n\tthis.headerViewer = renderer.getValueHeaderViewer();\r\n}\r\n\r\nmodule.exports={HTMLPropertyViewer,HTMLPropertyHeaderViewer}\r\n","/**\r\n * Draws the property as header and body components\r\n */\r\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\r\nconst HTMLStringViewer = require('./viewers/String');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\nfunction HTMLDataViewer(renderer){\r\n\tthis.renderer = renderer;\r\n\tthis.headerViewer = renderer.getValueHeaderViewer();\r\n}\r\n\r\nHTMLDataViewer.prototype.render = function(){\r\n\tif(this.valDOM){\r\n\t\tvar nvalDOM = this.getValueDOM();\r\n\t\tthis.valDOM.replaceWith(nvalDOM);\r\n\t\tthis.valDOM = nvalDOM;\r\n\t}\r\n\telse {\r\n\t\tthis.valDOM = this.getValueDOM();\r\n\t}\r\n\tthis.valDOM.appendChild(this.getValueIDMarker(this.renderer));\r\n\tthis.body = this.getValueBodyDOM();\r\n\tif(this.body) this.valDOM.appendChild(this.body);\r\n\tif(this.headerViewer){\r\n\t\tthis.header = this.headerViewer.getAsDOM(this.renderer);\r\n\t\tif(this.renderer.facet == 'page'){ //expert mode\r\n\t\t\tif(this.header && this.expModeMenu) {\r\n\t\t\t\tthis.expModeMenu.appendChild(this.header);\r\n\t\t\t\t//this.valDOM.appendChild(this.expModeMenu);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(this.header) this.valDOM.appendChild(this.header);\r\n\t}\r\n\treturn this.valDOM;\r\n}\r\n\r\nHTMLDataViewer.prototype.getValueDOM = function(){\r\n\tif(this.renderer.currentFacet() == \"page\"){\r\n\t\tvar sp = document.createElement(\"div\");\r\n\t}\r\n\telse {\r\n\t\tvar sp = document.createElement(\"span\");\r\n\t}\r\n\tsp.setAttribute(\"class\", \"terminus-property-value property-value-\" + this.renderer.currentFacet() + \" property-value-\" + this.renderer.mode);\r\n\tif(this.renderer.mode == \"view\"){\r\n\t\tsp.setAttribute('data-value', this.renderer.value());\r\n\t}\r\n\treturn sp;\r\n}\r\n\r\nHTMLDataViewer.prototype.getValueBodyDOM = function(){\r\n\tif(this.renderer.currentFacet() == \"page\"){\r\n\t\tvar vholder = document.createElement(\"div\");\r\n\t}\r\n\telse {\r\n\t\tvar vholder = document.createElement(\"span\");\r\n\t}\r\n    vholder.setAttribute('class', ' terminus-property-body property-value-body property-value-body-'+this.renderer.currentFacet() + ' terminus-property-body-align');\r\n\t//vholder.setAttribute('style', 'display: flex;');\r\n\tif(this.renderer.showFeature(\"body\")){\r\n        var valueViewer = this.renderer.getDataValueViewer();\r\n    \tvar vdom = valueViewer.getDOM(this.renderer, this);\r\n    }\r\n    else if(this.renderer.showFeature(\"summary\")){\r\n\t\tvar vdom = this.getSummaryDOM();\r\n    }\r\n    else {\r\n    \treturn false;\r\n    }\r\n    if(vdom) vholder.appendChild(vdom);\r\n\tif(false && this.renderer.currentFacet() == \"page\"){\r\n\t\tvar sControl = HTMLFrameHelper.getSettingsControl('data');\r\n\t\tvar menu = document.createElement('div');\r\n\t\tmenu.setAttribute('class', 'terminus-hide terminus-popup');\r\n\t\tmenu.appendChild(document.createTextNode('Edit property value'));\r\n\t\tmenu.appendChild(document.createElement('BR'));\r\n\t\tsControl.appendChild(menu);\r\n\t\tsControl.addEventListener('click', function(e){\r\n\t\t\tvar target = e.target || e.srcElement,\r\n\t\t\ttext = target.textContent || target.innerText;\r\n\t\t\tif((target.nodeName == 'ICON') || (target.nodeName == 'BUTTON')){\r\n\t\t\t\tif(this.children[0].style.display == 'none') this.children[0].style.display = 'block';\r\n\t\t\t\telse this.children[0].style.display = 'none';\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.expModeMenu = menu;\r\n\t\tvholder.appendChild(sControl);\r\n\t}\r\n\treturn vholder;\r\n}\r\n\r\n/**\r\n * Removes the value from the dom\r\n */\r\nHTMLDataViewer.prototype.remove = function(){\r\n\tthis.valDOM.parentNode.removeChild(this.valDOM);\r\n}\r\n\r\nHTMLDataViewer.prototype.redrawHeader = function(){\r\n\tif(this.headerViewer && this.header) {\r\n\t\tvar nheader = this.headerViewer.getAsDOM(this.renderer);\r\n\t\tthis.header.replaceWith(nheader);\r\n\t\tthis.header = nheader;\r\n\t}\r\n}\r\n\r\nHTMLDataViewer.prototype.redrawBody = function(){\r\n\tif(this.body){\r\n\t\tvar nbody = this.getValueBodyDOM();\r\n\t\tthis.body.replaceWith(nbody);\r\n\t\tthis.body = nbody;\r\n\t}\r\n}\r\n\r\n/**\r\n * Generates a html anchor element to use as a marker to find the property on the page\r\n */\r\nHTMLDataViewer.prototype.getValueIDMarker = function(renderer){\r\n\tvar idm = document.createElement(\"a\");\r\n\tidm.setAttribute(\"class\", \"terminus-value-idmarker\");\r\n\tvar subj = TerminusClient.FrameHelper.getShorthand(renderer.subject());\r\n\tif(!subj ) subj = renderer.subject();\r\n\tvar bits = subj .split(\":\");\r\n\tif(bits.length > 1) subj = bits[1];\r\n\tvar prop = TerminusClient.FrameHelper.getShorthand(renderer.property());\r\n\tif(!prop ) prop = renderer.property();\r\n\tvar bits = prop.split(\":\");\r\n\tif(bits.length > 1) prop = bits[1];\r\n\tidm.setAttribute(\"name\", subj + \"_\" + prop + \"_\" + renderer.index);\r\n\treturn idm;\r\n}\r\n\r\nHTMLDataViewer.prototype.getSummaryDOM = function(){\r\n\tvar sum = this.renderer.getSummary();\r\n\treturn HTMLTerminusClient.FrameHelper.getInfoboxDOM(\"value-summary\", false, sum.long, sum.long);\r\n}\r\n\r\nHTMLDataViewer.prototype.fireInternalLink = function(link){\r\n\tvar self = this;\r\n\tvar fire = function(e){\r\n\t\te.preventDefault();\r\n\t\tself.renderer.load(link);\t\t\r\n\t}\r\n\treturn fire;\r\n}\r\n\r\nHTMLDataViewer.prototype.internalLink = function(link, label){\r\n\tvar onclick = this.fireInternalLink(link);\r\n\tvar a = document.createElement(\"a\");\r\n\ta.onClick = onclick;\r\n\ta.href=link;\r\n\ta.addEventListener(\"click\", onclick);\r\n\tif(label){\r\n\t\ta.appendChild(document.createTextNode(label));\r\n\t}\r\n\telse {\r\n\t\tvar sh = TerminusClient.FrameHelper.getShorthand(link);\r\n\t\tif(sh){\r\n\t\t\ta.setAttribute(\"title\", link);\r\n\t\t\ta.appendChild(document.createTextNode(sh));\r\n\t\t}\r\n\t\telse {\r\n\t\t\ta.appendChild(document.createTextNode(link));\r\n\t\t}\r\n\t}\r\n\treturn a;\r\n}\r\n\r\nHTMLDataViewer.prototype.clear = function(){\r\n\tTerminusClient.FrameHelper.removeChildren(this.valDOM);\r\n}\r\n\r\n\r\nfunction HTMLDataHeaderViewer(){}\r\n\r\nHTMLDataHeaderViewer.prototype.getAsDOM = function(renderer){\r\n\tif(renderer.currentFacet() == \"page\"){\r\n\t\tvar objDOM = document.createElement(\"div\");\r\n\t}\r\n\telse {\r\n\t\tvar objDOM = document.createElement(\"span\");\r\n\t}\r\n\tobjDOM.setAttribute(\"class\", \"terminus-value-header terminus-value-header-\" + renderer.currentFacet());\r\n\tif(renderer.showFeature(\"facet\")){\r\n\t\tvar facetDOM = this.getValueFacetDOM(renderer);\r\n\t\tif(facetDOM) objDOM.appendChild(facetDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"viewer\")){\r\n\t\tvar hideDOM = this.getViewerSelectorDOM(renderer);\r\n\t\tif(hideDOM) objDOM.appendChild(hideDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"type\")){\r\n\t\tvar typeDOM = this.getValueTypeDOM(renderer);\r\n\t\tif(typeDOM) objDOM.appendChild(typeDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"status\")){\r\n\t\tvar sumDOM = this.getValueStatusDOM(renderer);\r\n\t\tif(sumDOM) objDOM.appendChild(sumDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"control\")){\r\n\t\tvar controlsDOM = this.getValueControlsDOM(renderer);\r\n\t\tif(controlsDOM) objDOM.appendChild(controlsDOM);\r\n\t}\r\n\treturn objDOM;\r\n}\r\n\r\nHTMLDataHeaderViewer.prototype.getValueFacetDOM = function(renderer){\r\n\tvar viewables = renderer.getAvailableFacets();\r\n\tvar self = this;\r\n\tif(viewables && viewables.length){\r\n\t\tvar mpropDOM = document.createElement(\"span\");\r\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-value-facet\");\r\n\t\tvar callback = function(val){\r\n\t\t\tif(val){\r\n\t\t\t\trenderer.setFacet(val);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"value-facet\", viewables, renderer.currentFacet(), callback);\r\n\t\tmpropDOM.appendChild(sel);\r\n\t\treturn mpropDOM;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n\r\nHTMLDataHeaderViewer.prototype.getValueTypeDOM = function(renderer){\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"value-type\", \"Type\", renderer.type(), \"All data values have types, identified by a unique URL\");\r\n}\r\n\r\nHTMLDataHeaderViewer.prototype.getValueStatusDOM = function(renderer){\r\n\tvar sum = renderer.getSummary();\r\n\treturn HTMLFrameHelper.getInfoboxDOM(\"status-\"+sum.status, false, sum.status, sum.status);\r\n}\r\n\r\n\r\nHTMLDataHeaderViewer.prototype.getValueControlsDOM = function(renderer){\r\n\tvar controlsDOM = document.createElement(\"span\");\r\n\tcontrolsDOM.setAttribute(\"class\", \"terminus-value-controls\");\r\n\tif(renderer.showFeature(\"mode\")){\r\n\t\tvar viewsDOM = HTMLFrameHelper.getModeSelectorDOM(\"value\", renderer);\r\n\t\tif(viewsDOM) controlsDOM.appendChild(viewsDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"delete\")){\r\n\t\tvar dpropDOM = this.getValueDeleteDOM(renderer);\r\n\t\tif(dpropDOM) controlsDOM.appendChild(dpropDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"clone\")){\r\n\t\tvar cpropDOM = this.getValueCloneDOM(renderer);\r\n\t\tif(cpropDOM) controlsDOM.appendChild(cpropDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"reset\")){\r\n\t\tvar rpropDOM = this.getValueResetDOM(renderer);\r\n\t\tif(rpropDOM) controlsDOM.appendChild(rpropDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"update\")){\r\n\t\tvar upropDOM = this.getValueUpdateDOM(renderer);\r\n\t\tif(upropDOM) controlsDOM.appendChild(upropDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"show\")){\r\n\t\tvar showDOM = this.getValueShowDOM(renderer);\r\n\t\tif(showDOM) controlsDOM.appendChild(showDOM);\r\n\t}\r\n\tif(renderer.showFeature(\"hide\")){\r\n\t\tvar hideDOM = this.getValueHideDOM(renderer);\r\n\t\tif(hideDOM) controlsDOM.appendChild(hideDOM);\r\n\t}\r\n\treturn controlsDOM;\r\n}\r\n\r\nHTMLDataHeaderViewer.prototype.getValueDeleteDOM = function(renderer){\r\n\tvar callback = function(){renderer.delete()};\r\n\tvar disabled = (renderer.cardControlAllows(\"delete\") ? false : \"Cardinality Rules Forbid Delete\");\r\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"delete\", \"Delete\", callback, disabled);\r\n}\r\n\r\nHTMLDataHeaderViewer.prototype.getValueResetDOM = function(renderer){\r\n\tvar callback = function(){renderer.reset()};\r\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to reset\");\r\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"reset\", \"Reset\", callback, disabled);\r\n}\r\n\r\nHTMLDataHeaderViewer.prototype.getValueShowDOM = function(renderer){\r\n\tvar callback = function(){renderer.show()};\r\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"show\", \"Show\", callback);\r\n}\r\n\r\nHTMLDataHeaderViewer.prototype.getValueHideDOM = function(renderer){\r\n\tvar callback = function(){renderer.hide()};\r\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"hide\", \"Hide\", callback);\r\n}\r\n\r\nHTMLDataHeaderViewer.prototype.getValueCloneDOM = function(renderer){\r\n\tvar callback = function(){renderer.clone()};\r\n\tvar disabled = (renderer.cardControlAllows(\"clone\") ? false : \"Cardinality Rules Forbid Clone\");\r\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"clone\", \"Clone\", callback, disabled);\r\n}\r\n\r\nHTMLDataHeaderViewer.prototype.getValueUpdateDOM = function(renderer){\r\n\tvar dpropDOM = document.createElement(\"span\");\r\n\tdpropDOM.setAttribute(\"class\", \"terminus-value-update\");\r\n\tvar saveback = function(){renderer.save()};\r\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to save - no change\");\r\n\tdpropDOM.appendChild(HTMLFrameHelper.getActionControl(\"value\", \"save\", \"Save\", saveback, disabled));\r\n\treturn dpropDOM;\r\n}\r\n\r\nHTMLDataHeaderViewer.prototype.getViewerSelectorDOM = function(renderer){\r\n\tvar viewers = renderer.getAvailableViewers();\r\n\tif(viewers && viewers.length){\r\n\t\tvar mpropDOM = document.createElement(\"span\");\r\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-value-viewer\");\r\n\t\tvar callback = function(viewer){\r\n\t\t\tif(viewer){\r\n\t\t\t\trenderer.setViewer(viewer);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar selected = renderer.currentViewer();\r\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"data-viewer\", viewers, selected, callback);\r\n\t\tmpropDOM.appendChild(sel);\r\n\t\treturn mpropDOM;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction JSONObjectViewer(renderer){\r\n\tthis.renderer = renderer;\r\n\tthis.properties = [];\r\n}\r\n\r\n/**\r\n * Functions for rendering / re-rendering the object as header and body components\r\n */\r\nJSONObjectViewer.prototype.render = function(){\r\n\talert(\"render json tbd\");\r\n}\r\nJSONObjectViewer.prototype.redraw = function(){\r\n\talert('redraw json tbd');\r\n}\r\n\r\nmodule.exports={HTMLDataViewer,HTMLDataHeaderViewer,JSONObjectViewer}\r\n","const WOQLQuery = require('../query/WOQLQuery');\r\nconst TerminusClassChooser = require('./TerminusClassChooser');\r\n/*\r\n * Utility class which allows the user to choose a document by id or by label (if select2 and full text indexing is turned on)\r\n */\r\n\r\nTerminusDocumentChooser = function(ui, root, value, view){\r\n\tthis.ui = ui;\r\n\tthis.root = root;\r\n\tthis.choice = value;\r\n\tthis.view = (view ? view : \"id\");\r\n\tthis.show_button = true;\r\n}\r\n\r\nTerminusDocumentChooser.prototype.setRoot = function(root){\r\n\tthis.root = root;\r\n}\r\n\r\nTerminusDocumentChooser.prototype.setFilter = function(filter){\r\n\tthis.filter = filter;\r\n}\r\n\r\nTerminusDocumentChooser.prototype.change = function(docid){\r\n\talert(\"Need to specify doc chooser function (\" + docid + \")\");\r\n}\r\n\r\nTerminusDocumentChooser.prototype.getAsDOM = function(style){\r\n\tif(this.view == \"label\" && \tthis.ui.client.connectionConfig.platformEndpoint() && this.ui.pluginAvailable(\"select2\")){\r\n\t\treturn this.getS2DOM(style);\r\n\t}\r\n\treturn this.getIDDOM();\r\n}\r\n\r\nTerminusDocumentChooser.prototype.getS2DOM = function(style){\r\n\tvar docchooser = document.createElement(\"span\");\r\n\tdocchooser.setAttribute(\"class\", \"terminus-document-chooser terminus-doc-holder\");\r\n\tvar wq = new WOQLQuery(this.ui.client, {}, this.ui);\r\n\tvar cfilter = wq.getSubclassQueryPattern(\"v:Class\", \"'\"+this.root+\"'\");\r\n\tvar termcc = new TerminusClassChooser(this.ui, cfilter);\r\n\ttermcc.empty_choice = \"Filter by Type\";\r\n\ttermcc.show_single = false;\r\n\tvar self = this;\r\n\ttermcc.change = function(new_class){\r\n\t\tif(new_class){\r\n\t\t\tself.filter = new_class;\r\n\t\t}\r\n\t}\r\n\ttdom = termcc.getAsDOM(style);\r\n\tif(tdom) docchooser.appendChild(tdom);\r\n\tvar holder = document.createElement(\"span\");\r\n\tholder.setAttribute(\"class\", \"terminus-entity-reference-value\");\r\n\tvar sel = document.createElement(\"select\");\r\n\tsel.setAttribute(\"class\", \"terminus-entity-class-input\");\r\n\tholder.appendChild(sel);\r\n\tvar opt = document.createElement(\"option\");\r\n\tvar lookup = function (params) {\r\n\t\tparams.class = self.filter;\r\n\t\treturn JSON.stringify(params);\r\n    }\r\n\tvar searchurl = this.ui.client.dbURL() + \"/search\";\r\n\tvar s2config = {\r\n\t\tajax: {\r\n\t\t    url: searchurl,\r\n\t\t    dataType: 'json',\r\n\t\t    data: lookup,\r\n\t\t    type: \"POST\",\r\n\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t    delay: 250,\r\n\t\t    cache: true\r\n\t\t},\r\n\t\tplaceholder: \"Enter Document Name\",\r\n\t\twidth: 200\r\n\t};\r\n\tjQuery(sel).select2(s2config).change(function(){\r\n\t\tcallback(this.value);\r\n\t});\r\n\tdocchooser.appendChild(holder);\r\n\treturn docchooser;\r\n}\r\n\r\nTerminusDocumentChooser.prototype.getIDDOM = function(){\r\n\tvar docchooser = document.createElement(\"span\");\r\n\tdocchooser.setAttribute(\"class\", \"terminus-document-chooser terminus-doc-holder\");\r\n\tvar dcip = document.createElement(\"input\");\r\n\tdcip.setAttribute(\"class\", \"terminus-document-chooser terminus-query-text\");\r\n\t//11092019 dcip.setAttribute(\"class\", \"terminus-form-value terminus-document-chooser\");\r\n\tdcip.setAttribute(\"placeholder\", \"Enter Document ID\");\r\n\tdcip.addEventListener('keypress', function(e){\r\n\t\tvar key = e.which || e.keyCode;\r\n\t\t// on enter\r\n\t\tif (key === 13 && dcip.value) {\r\n\t\t\tself.choice = dcip.value;\r\n\t\t\tself.change(dcip.value);\r\n\t\t}\r\n\t});\r\n\tdocchooser.appendChild(dcip);\r\n\tif(this.show_button){\r\n\t\tvar dbut = document.createElement(\"button\");\r\n\t\tdbut.setAttribute(\"class\", \"terminus-control-button terminus-btn\");\r\n\t\tvar self = this;\r\n\t\tdbut.addEventListener(\"click\", function(){\r\n\t\t\tif(dcip.value) {\r\n\t\t\t\tself.choice = dcip.value;\r\n\t\t\t\tself.change(dcip.value);\r\n\t\t\t}\r\n\t\t});\r\n\t\t//11092019 dbut.appendChild(document.createTextNode(\"View Document Properties\"));\r\n\t\tdbut.appendChild(document.createTextNode(\"Go\"));\r\n\t\tdocchooser.appendChild(dbut);\r\n\t}\r\n\treturn docchooser;\r\n}\r\n\r\nTerminusDocumentChooser.prototype.toggleView = function(){\r\n\tif(this.view == \"id\") this.view = \"label\";\r\n\telse this.view = \"id\";\r\n}\r\n\r\nTerminusDocumentChooser.prototype.getChangeViewText = function(){\r\n\tif(this.view == \"id\"){\r\n\t\treturn \"Document Lookup\";\r\n\t}\r\n\treturn \"Load Document ID\";\r\n}\r\n\r\nmodule.exports=TerminusDocumentChooser\r\n","const TerminusUI = require('./TerminusUI');\r\nconst RenderingMap = require('./client/RenderingMap');\r\n\r\nvar terminator = new TerminusUI(TerminusConfig);\r\nvar pconfig = {};\r\npconfig.buttons = {'client'   : document.getElementById(\"terminus-client-btn\"),\r\n\t\t\t\t   'explorer' : document.getElementById(\"terminus-explorer-btn\")}\r\npconfig.controller \t= document.getElementById(\"terminus-control-panel\");\r\npconfig.messages = document.getElementById(\"terminus-user-messages\");\r\npconfig.plugins = document.getElementById(\"terminus-plugin-loader\");\r\npconfig.explorer = document.getElementById(\"terminus-explorer\");\r\npconfig.viewer = document.getElementById(\"terminus-content-viewer\");\r\nvar nlocation = (TerminusConfig && TerminusConfig.location) ? TerminusConfig.location : false;\r\nterminator.draw(pconfig, nlocation);\r\n\r\nfunction showPanel(mode){\r\n\ttoggleHeaders(mode, document.getElementById(\"terminus-content-viewer\"));\r\n}\r\n\r\nmodule.exports={TerminusUI:TerminusUI,\r\n                RenderingMap:RenderingMap}\r\n","/**\r\n * Terminus UI object\r\n *\r\n * Traffic control of messages going between different Terminus UI pages and features\r\n *\r\n * @param opts - options array\r\n */\r\nconst ApiExplorer = require('./ApiExplorer');\r\nconst TerminusDocumentViewer = require('./client/TerminusDocument');\r\nconst TerminusDBsdk = require('./client/TerminusDB');\r\nconst TerminusViolations = require('./client/TerminusViolation');\r\nconst TerminusQueryViewer = require('./client/TerminusQuery');\r\nconst TerminusMappingViewer = require('./client/TerminusMapping');\r\nconst TerminusSchemaViewer = require('./client/TerminusSchema');\r\nconst TerminusServersdk = require('./client/TerminusServer');\r\nconst TerminusURLLoader = require('./client/TerminusURL');\r\nconst TerminusPluginManager = require('./plugins/TerminusPlugin');\r\nconst UTILS=require('./Utils');\r\nconst RenderingMap = require('./client/RenderingMap');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction TerminusUI(opts){\r\n\tthis.client = new TerminusClient.WOQLClient();\r\n\tthis.controls = [];\r\n\tthis.setOptions(opts);\r\n}\r\n\r\n/*\r\n * Client connects to specified server and specified part\r\n * opts is a json with the following fields:\r\n * server: mandatory URL of the server to connect to\r\n * key: optional client API key\r\n * dbid: id of the database to connect to\r\n * schema: if set, the UI will load the schema page after connecting\r\n * query: if set, the query will be sent to the server and the results will be loaded on the query page\r\n * document: if set, the document page corresponding to this document will be loaded after connecting\r\n *\r\n * (note: schema, query, document are mutually exclusive and must also have a dbid set)\r\n */\r\nTerminusUI.prototype.connect = function(opts){\r\n\tvar self = this;\r\n\tthis.client.connectionConfig.server = false;\r\n\tvar key = ((opts && opts.key) ? opts.key : false);\r\n\tthis.showBusy(\"Connecting to server at \" + opts.server);\r\n\treturn this.client.connect(opts.server, key)\r\n\t.then( function(response) {\r\n\t\tself.clearBusy();\r\n\t\tif(opts && opts.db && self.getDBRecord(opts.db)){\r\n\t\t\tself.connectToDB(opts.db);\r\n\t\t\tif(opts.document && self.showView(\"get_document\")){\r\n\t\t\t\tresponse = self.showDocument(opts.document);\r\n\t\t\t}\r\n\t\t\telse if(opts.schema && self.showView(\"get_schema\")){\r\n\t\t\t\tresponse = self.showSchemaPage(opts.schema);\r\n\t\t\t}\r\n\t\t\telse if(opts.query && self.showView(\"woql_select\")){\r\n\t\t\t\tself.showQueryPage(opts.query);\r\n\t\t\t}\r\n\t\t\telse if(opts.explorer && self.showView(\"api_explorer\")){\r\n\t\t\t\tself.showExplorer(opts.explorer);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tself.showDBMainPage();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.showServerMainPage();\r\n\t\t}\r\n\t\tself.redraw();\r\n\t\treturn response;\r\n\t})\r\n\t.catch(function(err) {\r\n\t\tself.clearBusy();\r\n\t\tself.showError(err);\r\n\t\tthrow(err);\r\n\t});\r\n}\r\n\r\n/**\r\n * Sends a request to create a new database to the server and interprets the response\r\n *\r\n * dbdets is a json object with the following fields:\r\n * id: the id of the new database (alphanumeric, no spaces, url friendly) mandatory\r\n * title: the text name of the new database for tables, etc. mandatory\r\n * description: text description of the database (optional)\r\n * key: a API client key for server auth\r\n * schema: the url of another Terminus DB from which to import schema\r\n * instance: the url of another Terminus DB from which to import data\r\n *\r\n */\r\nTerminusUI.prototype.createDatabase = function(dbdets){\r\n\tvar self = this;\r\n\tif(!dbdets.id || !dbdets.title){\r\n        return Promise.reject(new Error(self.getBadArguments(\"createDatabase\", \"ID and title are mandatory fields\")));\r\n\t}\r\n\tvar dbid = dbdets.id;\r\n\tvar myserver = this.client.connectionConfig.server;\r\n\tself.showBusy(\"Creating Database \" + dbdets.title + \" with id \" + dbid);\r\n\tvar dbdoc = this.generateNewDatabaseDocument(dbdets);\r\n\treturn this.client.createDatabase(dbid, dbdoc)\r\n\t.then(function(response){ //import schema into newly created DB\r\n\t\tif(dbdets.schema){\r\n\t\t\tself.showBusy(\"Fetching imported schema from \" + dbdets.schema);\r\n\t\t\tvar opts = (dbdets.key ?  {\"terminus:user_key\": dbdets.key } : {});\r\n\t\t\topts['terminus:encoding'] = \"terminus:turtle\";\r\n\t\t\treturn self.client.getSchema(dbdets.schema, opts)\r\n\t\t\t.then(function(response){\r\n\t\t\t\tself.showBusy(\"Updating database with new schema\");\r\n\t\t\t\tself.client.connectionConfig.server = myserver;\r\n\t\t\t\tself.client.connectionConfig.dbid = dbid;\r\n\t\t\t\tvar nopts = {'terminus:encoding':  \"terminus:turtle\"};\r\n\t\t\t\treturn self.client.updateSchema(false, response, nopts);\r\n\t\t\t})\r\n\t\t\t.then(function(response){\r\n\t\t\t\tself.clearBusy();\r\n\t\t\t\tself.redraw();\r\n\t\t\t\treturn response;\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.clearBusy();\r\n\t\t}\r\n\t\treturn response;\r\n\t})\r\n\t.then(function(response){ //reload list of databases in background..\r\n\t\treturn self.refreshDBList()\r\n\t\t.then(function(response){\r\n\t\t\tif(crec = self.client.connection.getDBRecord(dbid)){\r\n\t\t\t\tself.client.connectionConfig.dbid = dbid;\r\n\t\t\t\tself.showDBMainPage();\r\n\t\t\t\tself.showMessage(\"Successfully Created Database \" + dbid, \"success\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t        return Promise.reject(new Error(self.getCrashString(\"createDatabase\", \"Failed to retrieve record of created database \" + dbid)));\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\t.catch(function(error){\r\n\t\tself.clearBusy();\r\n\t\tself.showError(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * Deletes the database with the passed id from the currently connected server\r\n */\r\nTerminusUI.prototype.deleteDatabase = function(dbid){\r\n\tvar self = this;\r\n\tvar delrec = this.client.connection.getDBRecord();\r\n\tvar lid = (dbid ? dbid : this.db());\r\n\tvar dbn = (delrec && delrec['rdfs:label'] && delrec['rdfs:label'][\"@value\"] ? delrec['rdfs:label'][\"@value\"] + \" (id: \" + lid + \")\" : lid);\r\n\tthis.showBusy(\"Deleting database \" + dbn);\r\n\treturn this.client.deleteDatabase(dbid)\r\n\t.then(function(response){\r\n\t\tself.clearBusy();\r\n\t\tself.client.connectionConfig.dbid = false;\r\n\t\tself.removeDB(dbid);\r\n\t\tself.showServerMainPage();\r\n\t\tself.showMessage(\"Successfully Deleted Database \" + dbn, \"success\");\r\n\t\tself.refreshDBList();\r\n\t\treturn response;\r\n\t})\r\n\t.catch(function(error){\r\n\t\tself.clearBusy();\r\n\t\tself.showError(error);\r\n\t});\r\n}\r\n\r\n/*\r\n * Transforms a details (id, title, description) array into  json-ld document\r\n */\r\nTerminusUI.prototype.generateNewDatabaseDocument = function(dets){\r\n\tvar doc = {\r\n\t\t\"@context\" : {\r\n\t\t\trdfs: \"http://www.w3.org/2000/01/rdf-schema#\",\r\n\t\t\tterminus: \"http://terminusdb.com/schema/terminus#\"\r\n\t\t},\r\n\t\t\"@type\": \"terminus:Database\"\r\n\t}\r\n\tif(dets.title){\r\n\t\tdoc['rdfs:label'] = {\r\n\t\t\t\"@language\":  \"en\",\r\n\t\t\t\"@value\": dets.title\r\n\t\t};\r\n\t}\r\n\tif(dets.description){\r\n\t\tdoc['rdfs:comment'] = {\r\n\t\t\t\"@language\":  \"en\",\r\n\t\t\t\"@value\": dets.description\r\n\t\t};\r\n\t}\r\n\tdoc['terminus:allow_origin'] = { \"@type\" : \"xsd:string\", \"@value\" : \"*\" };\r\n\treturn doc;\r\n}\r\n\r\nTerminusUI.prototype.getBadArguments = function(fname, str){\r\n\treturn \"Bad arguments to \" + fname + \": \" + str;\r\n}\r\n\r\nTerminusUI.prototype.getCrashString = function(fname, str){\r\n\treturn \"Results from \" + fname + \" indicate the possibility of a system failure \" + str;\r\n}\r\n\r\n/*\r\n * Parses the passed URL and turns it into a call to the connect function - loads the appropriate endpoing\r\n */\r\nTerminusUI.prototype.load = function(url, key){\r\n\tvar args = {};\r\n\tif(url && url.indexOf(\"/document/\") != -1){\r\n\t\turl = url.substring(0, url.indexOf(\"/document/\"));\r\n\t\targs.document = url.substring(url.indexOf(\"/document/\")+10);\r\n\t}\r\n\telse if(url && url.indexOf(\"/schema\") != -1){\r\n\t\turl = url.substring(0, url.indexOf(\"/schema\"));\r\n\t\targs.schema = {};\r\n\t}\r\n\telse if(url && url.indexOf(\"/woql\") != -1){\r\n\t\turl = url.substring(0, url.indexOf(\"/query\"));\r\n\t\targs.query = url.substring(url.indexOf(\"/query\")+7);\r\n\t}\r\n\targs.server = url;\r\n\tif(key) args.key = key;\r\n\treturn this.connect(args);\r\n}\r\n\r\n/**\r\n * Fetches the DB URL from the url by chopping off the extra bits\r\n */\r\nTerminusUI.prototype.getConnectionEndpoint = function(url){\r\n\tif(url && url.lastIndexOf(\"/schema\") != -1){\r\n\t\treturn url.substring(0, url.lastIndexOf(\"/schema\"));\r\n\t}\r\n\tif(url && url.lastIndexOf(\"/document\") != -1){\r\n\t\treturn url.substring(0, url.lastIndexOf(\"/document\"));\r\n\t}\r\n\tif(url && url.lastIndexOf(\"/frame\") != -1){\r\n\t\treturn url.substring(0, url.lastIndexOf(\"/frame\"));\r\n\t}\r\n\tif(url && url.lastIndexOf(\"/woql\") != -1){\r\n\t\treturn url.substring(0, url.lastIndexOf(\"/woql\"));\r\n\t}\r\n\treturn url;\r\n}\r\n\r\nTerminusUI.prototype.server = function(){\r\n\treturn this.client.connectionConfig.server;\r\n}\r\n\r\nTerminusUI.prototype.db = function(){\r\n\treturn this.client.connectionConfig.dbid;\r\n}\r\n\r\nTerminusUI.prototype.clearServer = function(){\r\n\tthis.client.connectionConfig.server = false;\r\n}\r\n\r\nTerminusUI.prototype.connectToDB = function(dbid){\r\n\tthis.client.connectionConfig.dbid = dbid;\r\n\tTerminusClient.FrameHelper.standard_urls['doc'] = this.client.connectionConfig.dbURL() + \"/document/\";\r\n\tTerminusClient.FrameHelper.standard_urls['scm'] = this.client.connectionConfig.dbURL() + \"/schema#\";\r\n}\r\n\r\nTerminusUI.prototype.clearDB = function(){\r\n\tthis.client.connectionConfig.dbid = false;\r\n}\r\n\r\nTerminusUI.prototype.removeDB = function(db, url){\r\n\tthis.client.connection.removeDB(db, url);\r\n}\r\n\r\nTerminusUI.prototype.getDBRecord = function(db, url){\r\n\treturn this.client.connection.getDBRecord(db, url);\r\n}\r\n\r\nTerminusUI.prototype.refreshDBList = function(){\r\n\tvar self = this;\r\n\treturn this.client.connect();\r\n}\r\n\r\nTerminusUI.prototype.showServerMainPage = function(){\r\n\tthis.viewer = new TerminusServersdk.TerminusServerViewer(this);\r\n\tthis.redrawMainPage();\r\n}\r\n\r\nTerminusUI.prototype.showLoadURLPage = function(val){\r\n\tthis.viewer = new TerminusURLLoader(this, val);\r\n\tthis.redrawMainPage();\r\n}\r\n\r\nTerminusUI.prototype.showDBMainPage = function(){\r\n\tthis.viewer = new TerminusDBsdk.TerminusDBViewer(this);\r\n\tthis.redraw();\r\n}\r\n\r\nTerminusUI.prototype.showCreateDBPage = function(){\r\n\tthis.viewer = new TerminusDBsdk.TerminusDBCreator(this);\r\n\tthis.redrawMainPage();\r\n}\r\n\r\nTerminusUI.prototype.showSchemaPage = function(durl){\r\n\tthis.viewer = new TerminusSchemaViewer(this);\r\n\tthis.redrawMainPage();\r\n}\r\n\r\nTerminusUI.prototype.showQueryPage = function(query){\r\n\tthis.viewer = new TerminusQueryViewer(this, query, this.options);\r\n\tthis.redrawMainPage();\r\n}\r\n\r\nTerminusUI.prototype.showMappingPage = function(mapping){\r\n\tthis.viewer = new TerminusMappingViewer(this, mapping, this.options);\r\n\tthis.redrawMainPage();\r\n}\r\n\r\nTerminusUI.prototype.showDocument = function(durl){\r\n\tthis.viewer = new TerminusDocumentViewer(this, \"view\", this.getDocViewerOptions());\r\n\tconst promise = this.viewer.loadDocument(durl);\r\n\tthis.redrawMainPage();\r\n\treturn promise;\r\n}\r\n\r\nTerminusUI.prototype.showCreateDocument = function(durl){\r\n\tthis.viewer = new TerminusDocumentViewer(this, \"create\", this.getDocCreatorOptions());\r\n\tconst promise = this.viewer.loadCreateDocument(durl);\r\n\tthis.redrawMainPage();\r\n\treturn promise;\r\n}\r\n\r\nTerminusUI.prototype.redrawMainPage = function(){\r\n\tTerminusClient.FrameHelper.removeChildren(this.main);\r\n\tif(this.viewer){\r\n\t\tthis.main.appendChild(this.viewer.getAsDOM());\r\n\t}\r\n}\r\n\r\nTerminusUI.prototype.showResult = function(response){\r\n\tthis.showMessage(response, \"success\");\r\n};\r\n\r\nTerminusUI.prototype.showError = function(response){\r\n\tthis.showMessage(response, \"error\");\r\n};\r\n\r\nTerminusUI.prototype.clearMessages = function(response){\r\n\tif(this.messages) TerminusClient.FrameHelper.removeChildren(this.messages);\r\n};\r\n\r\nTerminusUI.prototype.clearMainPage = function(){\r\n\tif(this.main) TerminusClient.FrameHelper.removeChildren(this.main);\r\n}\r\n\r\nTerminusUI.prototype.setMessageDOM = function(dom){\r\n\tthis.messages = dom;\r\n}\r\n\r\nTerminusUI.prototype.setbuttonControls = function(dom){\r\n\tthis.buttons = dom;\r\n}\r\n\r\nTerminusUI.prototype.setControllerDOM = function(dom){\r\n\tthis.controller = dom;\r\n}\r\n\r\nTerminusUI.prototype.setExplorerDOM = function(dom){\r\n\tthis.explorer = dom;\r\n}\r\n\r\nTerminusUI.prototype.setPluginsDOM = function(dom){\r\n\tthis.plugins = dom;\r\n}\r\n\r\nTerminusUI.prototype.setViewerDOM = function(dom){\r\n\tthis.main = dom;\r\n}\r\n\r\nTerminusUI.prototype.draw = function(comps, slocation){\r\n\tif(comps && comps.buttons) this.setbuttonControls(comps.buttons);\r\n\tif(comps && comps.messages) this.setMessageDOM(comps.messages);\r\n\tif(comps && comps.controller) this.setControllerDOM(comps.controller);\r\n\tif(comps && comps.explorer) this.setExplorerDOM(comps.explorer);\r\n\tif(comps && comps.viewer) this.setViewerDOM(comps.viewer);\r\n\tif(comps && comps.plugins) this.setPluginsDOM(comps.plugins);\r\n\tif(this.plugins){\r\n\t\tthis.drawPlugins();\r\n\t}\r\n\tif(this.buttons){\r\n\t\tthis.toggleControl();\r\n\t}\r\n\tvar self = this;\r\n\tvar cdrawn = false;\r\n\tif(slocation && slocation.server){\r\n\t\tif(typeof this.client.connection.connection[slocation.server] == \"undefined\") {\r\n\t\t\treturn this.connect(slocation)\r\n\t\t\t.catch(function(error){\r\n\t\t\t\tself.showLoadURLPage();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tthis.showLoadURLPage();\r\n\t};\r\n}\r\n\r\n\r\n\r\nTerminusUI.prototype.redraw = function(msg){\r\n\tthis.clearMessages();\r\n\tif(this.controller){\r\n\t\tTerminusClient.FrameHelper.removeChildren(this.controller);\r\n\t\tthis.drawControls();\r\n\t}\r\n\tif(this.explorer){\r\n\t\tTerminusClient.FrameHelper.removeChildren(this.explorer);\r\n\t\t//this.drawExplorer();\r\n\t}\r\n\tif(this.viewer){\r\n\t\tthis.redrawMainPage();\r\n\t}\r\n\tif(msg) this.showMessage(msg);\r\n};\r\n\r\n\r\nTerminusUI.prototype.toggleDashboardWidget = function(widget){\r\n    TerminusClient.FrameHelper.removeChildren(this.controller);\r\n    TerminusClient.FrameHelper.removeChildren(this.explorer);\r\n    UTILS.removeSelectedNavClass('terminus-dashboard-selected');\r\n    widget.classList.add('terminus-dashboard-selected');\r\n}\r\n\r\nTerminusUI.prototype.toggleControl = function(){\r\n  var self = this;\r\n  this.buttons.client.addEventListener('click', function(){\r\n    self.toggleDashboardWidget(this);\r\n    self.drawControls();\r\n    self.showServerMainPage();\r\n  })\r\n  this.buttons.explorer.addEventListener('click', function(){\r\n    self.toggleDashboardWidget(this);\r\n    self.drawExplorer();\r\n  })\r\n}\r\n\r\nTerminusUI.prototype.drawControls = function(){\r\n\tthis.controls = [];\r\n\tthis.loadControls();\r\n\tfor(var i = 0; i<this.controls.length; i++){\r\n\t\tvar ncontrol = this.controls[i];\r\n\t\tif(ncontrol && (nd = ncontrol.getAsDOM())){\r\n\t\t\tthis.controller.appendChild(nd);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nTerminusUI.prototype.drawExplorer = function(){\r\n\tif(this.explorer){\r\n\t\tif(this.showControl(\"api_explorer\")){\r\n\t\t\tvar exp = new ApiExplorer(this);\r\n\t\t\tae = exp.getAsDOM();\r\n\t\t\tthis.explorer.appendChild(ae);\r\n\t\t\tthis.explorer.style.display = 'block';\r\n\t\t}\r\n\t}\r\n}\r\n\r\nTerminusUI.prototype.loadControls = function(){\r\n\tif(this.showControl('server')){\r\n\t\tvar sc = new TerminusServersdk.TerminusServerController(this);\r\n\t\tif(sc) {\r\n\t\t\tthis.controls.push(sc);\r\n\t\t}\r\n\t\tif(this.db() && this.showControl(\"db\")){\r\n\t\t\tvar sc = new TerminusDBsdk.TerminusDBController(this);\r\n\t\t\tif(sc) this.controls.push(sc);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nTerminusUI.prototype.showControl = function(el){\r\n\tif(this.show_controls.indexOf(el) == -1) return false;\r\n\tif(this.pseudoCapability(el)) return true;\r\n\tif(this.client.connection.capabilitiesPermit(el)) {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nTerminusUI.prototype.showView = function(el){\r\n\tif(this.show_views.indexOf(el) == -1) return false;\r\n\tif(this.pseudoCapability(el)) return true;\r\n\tif(this.client.connection.capabilitiesPermit(el)) {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nTerminusUI.prototype.clearBusy = function(response){\r\n\tthis.clearMessages();\r\n\tif(this.viewer && typeof this.viewer.busy == \"function\") this.viewer.busy(false);\r\n}\r\n\r\nTerminusUI.prototype.getBusyLoader = function(bsyDom){\r\n     var pd = document.createElement('div');\r\n     var pbc = document.createElement('div');\r\n     pbc.setAttribute('class', 'term-progress-bar-container');\r\n     pd.appendChild(pbc);\r\n\r\n     var pbsa = document.createElement('div');\r\n     pbsa.setAttribute('class', 'term-progress-bar term-stripes animated reverse slower');\r\n     pbc.appendChild(pbsa);\r\n     var pbia = document.createElement('span');\r\n     pbia.setAttribute('class', 'term-progress-bar-inner');\r\n     pbsa.appendChild(pbia);\r\n\r\n     bsyDom.appendChild(pd);\r\n}\r\n\r\nTerminusUI.prototype.showMessage = function(msg, type){\r\n\tif(this.messages){\r\n\t\tTerminusClient.FrameHelper.removeChildren(this.messages);\r\n\t\tvar md = document.createElement('div');\r\n        switch(type){\r\n            case 'busy':\r\n                var msgHolder = document.createElement('div');\r\n                msgHolder.setAttribute('class', 'terminus-busy-msg')\r\n                msgHolder.appendChild(document.createTextNode(msg));\r\n                md.appendChild(msgHolder);\r\n                this.getBusyLoader(md);\r\n            break;\r\n            case 'success':\r\n                md.setAttribute('class', 'terminus-show-msg-success');\r\n                md.appendChild(document.createTextNode(msg));\r\n            break;\r\n            case 'error':\r\n                md.setAttribute('class', 'terminus-show-msg-error');\r\n                md.appendChild(document.createTextNode(msg));\r\n            break;\r\n        }\r\n\t\tthis.messages.appendChild(md);\r\n\t}\r\n};\r\n\r\nTerminusUI.prototype.showViolations = function(vios, type){\r\n\tvar nvios = new TerminusViolations(vios, this);\r\n\tif(this.messages){\r\n\t\tvar cmsg = (type == \"schema\" ? \" in Schema\" : \" in Document\");\r\n\t\tTerminusClient.FrameHelper.removeChildren(this.messages);\r\n\t\tthis.messages.appendChild(nvios.getAsDOM(cmsg));\r\n\t}\r\n}\r\n\r\nTerminusUI.prototype.showBusy = function(msg){\r\n\tthis.showMessage(msg, \"busy\");\r\n\tif(this.viewer && typeof this.viewer.busy == \"function\") this.viewer.busy(msg);\r\n};\r\n\r\nTerminusUI.prototype.pseudoCapability = function(el){\r\n\tvar pseuds = [\"server\", \"db\", \"change-server\", \"api_explorer\", \"import_schema\", \"schema_format\"];\r\n\tif(pseuds.indexOf(el) == -1) return false;\r\n\treturn true;\r\n}\r\n\r\nTerminusUI.prototype.setOptions = function(opts){\r\n\tthis.show_controls = opts && opts.controls ? opts.controls :\r\n\t\t[\"server\", \"db\", \"change-server\", \"schema_format\",\r\n\t\t\t\"import_schema\", \"class_frame\", \"create_database\",\r\n\t\t\t\"create_document\", \"get_document\", \"update_schema\",\r\n\t\t\t\"get_schema\", \"woql_select\"\r\n\t\t];\r\n\tthis.show_views = opts && opts.views ? opts.views : this.show_controls;\r\n\tif(opts.document){\r\n\t\tthis.document_options = opts.document;\r\n\t}\r\n\tif(opts.schema){\r\n\t\tthis.schema_options = opts.schema;\r\n\t}\r\n\tthis.piman = new TerminusPluginManager();\r\n\tvar self = this;\r\n\tthis.piman.init(opts.plugins, function(){\r\n\t\tvar pins = [\"gmaps\", \"quill\", \"select2\"];\r\n\t\tfor(var i = 0; i<pins.length; i++){\r\n\t\t\tif(self.piman.pluginAvailable(pins[i])){\r\n\t\t\t\tRenderingMap.addPlugin(pins[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tself.redraw();\r\n\t});\r\n\tif(opts.css && this.piman){\r\n\t\tthis.piman.loadPageCSS(opts.css);\r\n\t}\r\n\tthis.loadControls();\r\n}\r\n\r\nTerminusUI.prototype.pluginAvailable = function(p){\r\n\treturn this.piman.pluginAvailable(p);\r\n}\r\n\r\nTerminusUI.prototype.drawPlugins = function(){\r\n\tif(!this.piman) {\r\n\t\tconsole.log(new Error(\"No plugin manager initialised in UI object\"));\r\n\t\treturn false;\r\n\t}\r\n\tthis.plugins.appendChild(this.piman.getAsDOM(this));\r\n}\r\n\r\nTerminusUI.prototype.getDocViewerOptions = function(){\r\n\tif(this.document_options && this.document_options['view']){\r\n\t\treturn this.document_options['view'];\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nTerminusUI.prototype.getDocCreatorOptions = function(){\r\n\tif(this.document_options && this.document_options['view']){\r\n\t\treturn this.document_options['view'];\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nTerminusUI.prototype.getClassFrameOptions = function(){\r\n\treturn this.viewdoc_options;\r\n}\r\n\r\nmodule.exports=TerminusUI\r\n","/**\r\n * @file Javascript Api explorer tool\r\n * @author Kitty Jose\r\n * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more\r\n *\r\n * @summary Displays a demo and description of api calls from WOQLCLient and what happens under the hood of api calls\r\n */\r\nconst TerminusPluginManager = require('./plugins/TerminusPlugin');\r\nconst UTILS = require('./Utils');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nlet apiNavConfig = {\r\n    mainNav: {\r\n        connect: {\r\n    \t\tnavText: 'Connect API',\r\n            action : 'connect',\r\n            icon   : 'link',\r\n            defaultSelected: true\r\n    \t},\r\n        database: {\r\n            navText: 'Database API',\r\n            action : 'create',\r\n            icon   : 'database'\r\n        },\r\n        schema: {\r\n            navText: 'Schema API',\r\n            action : 'schema',\r\n            icon   : 'cog'\r\n        },\r\n        document: {\r\n            navText: 'Document API',\r\n            action : 'document',\r\n            icon   : 'file'\r\n        },\r\n        query: {\r\n            navText: 'Query API',\r\n            action : 'query',\r\n            icon   : 'search'\r\n        }\r\n    },\r\n    subNav: {\r\n        database: {\r\n            createDatabase: {\r\n                navText: 'Create database',\r\n                action : 'create',\r\n                icon   : 'plus',\r\n                defaultSelected: true\r\n            },\r\n            deleteDatabase: {\r\n                navText: 'Delete database',\r\n                action : 'delete',\r\n                icon   : 'trash-alt'\r\n            }\r\n        },\r\n        schema: {\r\n            getSchema: {\r\n                navText: 'View Schema',\r\n                action : 'getSchema',\r\n                icon   : 'eye',\r\n                defaultSelected: true\r\n            },\r\n            updateSchema: {\r\n                navText: 'Update Schema',\r\n                action : 'updateSchema',\r\n                icon   : 'arrow-up'\r\n            },\r\n            getClassFrames: {\r\n                navText: 'Get Class Frames',\r\n                action : 'getClassFrames',\r\n                icon   : 'share-alt'\r\n            }\r\n        },\r\n        document: {\r\n            viewDocument: {\r\n        \t\tnavText: 'View Document',\r\n                action : 'viewDocument',\r\n                icon   : 'eye',\r\n                defaultSelected: true\r\n        \t},\r\n            createDocument: {\r\n                navText: 'Create Document',\r\n                action : 'createDocument',\r\n                icon   : 'plus'\r\n            },\r\n            updateDocument: {\r\n                navText: 'Update Document',\r\n                action : 'updateDocument',\r\n                icon   : 'arrow-up'\r\n            },\r\n            deleteDocument:{\r\n                navText: 'Delete Document',\r\n                action : 'deleteDocument',\r\n                icon   : 'trash-alt'\r\n            }\r\n        },\r\n        query: {\r\n            select: {\r\n                navText: 'Select',\r\n                action : 'select',\r\n                icon   : 'mouse-pointer',\r\n                defaultSelected: true\r\n            },\r\n            update: {\r\n                navText: 'Update',\r\n                action : 'update',\r\n                icon   : 'arrow-up'\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction ApiExplorer(ui){\r\n    this.ui = ui;\r\n    this.viewer = ui.main;\r\n    this.client = new TerminusClient.WOQLClient();\r\n    this.client.use_fetch = true;\r\n    this.client.return_full_response = true;\r\n    this.pman = new TerminusPluginManager();\r\n}\r\n\r\n// Controller provides access to Api explorer functions\r\nApiExplorer.prototype.getAsDOM = function(){\r\n \tvar aec = document.createElement(\"div\");\r\n    aec.setAttribute(\"class\", \"terminus-db-controller\");\r\n    if(this.ui){\r\n       this.getApiNav(aec, this.viewer); // nav\r\n       this.getApiExplorerDom('connect', this.viewer); // content dom\r\n    } // if this.ui\r\n    return aec;\r\n }\r\n\r\n/***** Api Nav bar *****/\r\n// Toggle selected nav bars\r\nApiExplorer.prototype.setSelectedNavMenu = function(a){\r\n    UTILS.removeSelectedNavClass(\"terminus-selected\");\r\n    a.classList.add(\"terminus-selected\");\r\n}\r\n\r\nApiExplorer.prototype.setSelectedSubMenu = function(a){\r\n    UTILS.removeSelectedNavClass(\"terminus-submenu-selected\");\r\n    a.classList.add(\"terminus-submenu-selected\");\r\n}\r\n\r\nApiExplorer.prototype.navOnSelect = function(action, nav, viewer){\r\n    UTILS.removeSelectedNavClass(\"terminus-selected\");\r\n    nav.classList.add(\"terminus-selected\");\r\n    this.getApiExplorerDom(action, viewer);\r\n}\r\n\r\n// create nav bars\r\nApiExplorer.prototype.createNavs = function(navConfig, viewer, ul){\r\n    var a = document.createElement('a');\r\n    a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\r\n    if(navConfig.defaultSelected) a.classList.add('terminus-selected');\r\n    var self = this;\r\n    a.addEventListener(\"click\", function(){\r\n        self.navOnSelect(navConfig.action, this, viewer);\r\n    })\r\n    var icon = document.createElement('i');\r\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-' + navConfig.icon);\r\n    a.appendChild(icon);\r\n    var txt = document.createTextNode(navConfig.navText);\r\n    a.appendChild(txt);\r\n    ul.appendChild(a);\r\n}\r\n\r\n// gets api nav bar\r\nApiExplorer.prototype.getApiNav = function(navDom, viewer){\r\n    // list view of apis\r\n    var nav = document.createElement('div');\r\n    navDom.appendChild(nav);\r\n    // connect to server api\r\n    var ul = document.createElement('ul');\r\n    ul.setAttribute('class', 'terminus-ul');\r\n    nav.appendChild(ul);\r\n    // loop over apiNavConfig\r\n    for (var key in apiNavConfig.mainNav){\r\n        if (apiNavConfig.mainNav.hasOwnProperty(key)) {\r\n            this.createNavs(apiNavConfig.mainNav[key], viewer, ul);\r\n        }\r\n    } // for apiNavConfig\r\n    return navDom;\r\n} // getApiNav()\r\n\r\n/***** Api sub navs  *****/\r\n// get schema api explorer - nav bar, alert msg, headers ...\r\nApiExplorer.prototype.getApiExplorerDom = function(view, viewer){\r\n    // clear of viewer\r\n    TerminusClient.FrameHelper.removeChildren(viewer);\r\n    // wrapper\r\n    var wrap = document.createElement('div');\r\n    //wrap.setAttribute('class', 'terminus-wrapper terminus-wrapper-height');\r\n    viewer.appendChild(wrap);\r\n    var cont = document.createElement('div');\r\n    cont.setAttribute('class', 'container-fluid');\r\n    wrap.appendChild(cont);\r\n    var row = document.createElement('div');\r\n    row.setAttribute('class', 'row-fluid');\r\n    cont.appendChild(row);\r\n    var body = document.createElement('div');\r\n    body.setAttribute('class', 'terminus-module-body');\r\n    row.appendChild(body);\r\n    var api = document.createElement('div');\r\n    api.setAttribute('class', 'terminus-module-body terminus-module-body-white-bg terminus-module-body-width');\r\n    body.appendChild(api);\r\n    // body\r\n    var cont = document.createElement('div');\r\n    var self = this;\r\n    switch(view){\r\n        case 'connect':\r\n            var apiCont = self.getConnectExplorer(cont);\r\n            api.appendChild(apiCont);\r\n        break;\r\n        case 'create':\r\n            var apiCont = self.getDatabaseExplorer(cont);\r\n            api.appendChild(apiCont);\r\n        break;\r\n        case 'schema':\r\n            var apiCont = self.getSchemaApi(cont);\r\n            api.appendChild(apiCont);\r\n        break;\r\n        case 'document':\r\n            var apiCont = self.getDocumentApi(cont);\r\n            api.appendChild(apiCont);\r\n        break;\r\n        case 'query':\r\n            var apiCont = self.getQueryApi(cont);\r\n            api.appendChild(apiCont);\r\n        break;\r\n    }// switch(api)\r\n    return wrap;\r\n} // getApiExplorerDom\r\n\r\n// on trigger of click event - change dom\r\nApiExplorer.prototype.changeSubApiDom = function(curSubMenu, action, cont, body){\r\n    TerminusClient.FrameHelper.removeChildren(body);\r\n    switch(curSubMenu){\r\n        case 'database':\r\n            var dom = this.getDatabaseDom(action, body);\r\n        break;\r\n        case 'schema':  // getShowApiDom() deals with schema and document\r\n             var dom = this.getShowApiDom(action, body);\r\n        break;\r\n        case 'document': // getShowApiDom() deals with schema and document\r\n             var dom = this.getShowApiDom(action, body);\r\n        break;\r\n        case 'query':\r\n            var dom = this.getQueryApiDom(action, body);\r\n        break;\r\n        default:\r\n            console.log('Invalid Api Config');\r\n        break;\r\n    }\r\n    cont.appendChild(dom);\r\n}\r\n\r\nApiExplorer.prototype.subNavOnSelect = function(curSubMenu, subMenuConfig, subNav, cont, body){\r\n    this.setSelectedSubMenu(subNav);\r\n    this.changeSubApiDom(curSubMenu, subMenuConfig.action, cont, body);\r\n}\r\n\r\n// create sub nav bars\r\nApiExplorer.prototype.createSubNavs = function(curSubMenu, subMenuConfig, cont, body, ul){\r\n    // comment getclassframes for api explorer time being\r\n    if(subMenuConfig.action == 'getClassFrames') return;\r\n    var a = document.createElement('a');\r\n    a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\r\n    if(subMenuConfig.defaultSelected) a.classList.add('terminus-submenu-selected');\r\n    var self = this;\r\n    a.addEventListener(\"click\", function() {\r\n        self.subNavOnSelect(curSubMenu, subMenuConfig, this, cont, body);\r\n    })\r\n    var icon = document.createElement('i');\r\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-' + subMenuConfig.icon);\r\n    a.appendChild(icon);\r\n    var txt = document.createTextNode(subMenuConfig.navText);\r\n    a.appendChild(txt);\r\n    ul.appendChild(a);\r\n}\r\n\r\n// get connect to server api calls - on click of connectAPI nav bar\r\nApiExplorer.prototype.getConnectExplorer = function(body){\r\n    var self = this;\r\n    var br = document.createElement('BR');\r\n    body.appendChild(br);\r\n    // get signature\r\n    var b = this.getSignature('connect');\r\n    body.appendChild(b);\r\n    // get header Parameter\r\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\r\n    var br = document.createElement('BR');\r\n    body.appendChild(br);\r\n    //form to get server url\r\n    this.getForm( '', body, true, 'connect', 'URL : server_url');\r\n    //body.appendChild(form);\r\n    return body;\r\n} // getConnectExplorer\r\n\r\n// get database api calls - on click of databaseAPI nav bar - submenus of database Api defined here\r\nApiExplorer.prototype.getDatabaseExplorer = function(cont){\r\n    var body = document.createElement('div');\r\n    // list view of Databse tools\r\n    var ul = document.createElement('ul');\r\n    ul.setAttribute('class','terminus-ul-horizontal');\r\n    // loop over apiNavConfig\r\n    for (var key in apiNavConfig.subNav.database){\r\n        if (apiNavConfig.subNav.database.hasOwnProperty(key))\r\n            this.createSubNavs('database', apiNavConfig.subNav.database[key], cont, body, ul);\r\n    } // for apiNavConfig\r\n    cont.appendChild(ul);\r\n    // landing page\r\n    var dom = this.getDatabaseDom(apiNavConfig.subNav.database.createDatabase.action, body);\r\n    cont.appendChild(dom);\r\n    return cont;\r\n} // getDatabaseExplorer\r\n\r\n// get schema api calls - on click of SchemaAPI nav bar - submenus of schema Api defined here\r\nApiExplorer.prototype.getSchemaApi = function(cont){\r\n    var body = document.createElement('div');\r\n    // list view of Databse tools\r\n    var ul = document.createElement('ul');\r\n    ul.setAttribute('class','terminus-ul-horizontal');\r\n    // loop over apiNavConfig\r\n    for (var key in apiNavConfig.subNav.schema){\r\n        if (apiNavConfig.subNav.schema.hasOwnProperty(key)) {\r\n            this.createSubNavs('schema', apiNavConfig.subNav.schema[key], cont, body, ul);\r\n        }\r\n    } // for apiNavConfig\r\n    cont.appendChild(ul);\r\n    var dom = this.getShowApiDom(apiNavConfig.subNav.schema.getSchema.action, body);\r\n    cont.appendChild(dom);\r\n    return cont;\r\n} // getSchemaApi\r\n\r\n// get document api calls - on click of DocumentAPI nav bar\r\nApiExplorer.prototype.getDocumentApi = function(cont){\r\n    var body = document.createElement('div');\r\n    // list view of Databse tools\r\n    var ul = document.createElement('ul');\r\n    ul.setAttribute('class','terminus-ul-horizontal');\r\n    // loop over apiNavConfig\r\n    for (var key in apiNavConfig.subNav.document){\r\n        if (apiNavConfig.subNav.document.hasOwnProperty(key)) {\r\n            this.createSubNavs('document', apiNavConfig.subNav.document[key], cont, body, ul);\r\n        }\r\n    } // for apiNavConfig\r\n    cont.appendChild(ul);\r\n    var dom = this.getShowApiDom(apiNavConfig.subNav.document.viewDocument.action, body);\r\n    cont.appendChild(dom);\r\n    return cont;\r\n} // getDocumentApi\r\n\r\n// get query api calls - on click of QueryAPI nav bar - submenus of Query Api defined here\r\nApiExplorer.prototype.getQueryApi  = function(cont){\r\n    var body = document.createElement('div');\r\n    // list view of Databse tools\r\n    var ul = document.createElement('ul');\r\n    ul.setAttribute('class','terminus-ul-horizontal');\r\n    // loop over apiNavConfig\r\n    for (var key in apiNavConfig.subNav.query){\r\n        if (apiNavConfig.subNav.query.hasOwnProperty(key)) {\r\n            this.createSubNavs('query', apiNavConfig.subNav.query[key], cont, body, ul);\r\n        }\r\n    } // for apiNavConfig\r\n    cont.appendChild(ul);\r\n    var dom = this.getQueryApiDom(apiNavConfig.subNav.query.select.action, body);\r\n    cont.appendChild(dom);\r\n    return cont;\r\n} //getQueryApi\r\n\r\n/***** Api Content view  *****/\r\n// get database dom\r\nApiExplorer.prototype.getDatabaseDom = function(mode, body){\r\n    var self = this;\r\n    var br = document.createElement('BR');\r\n    body.appendChild(br);\r\n    // get signature\r\n    var b = this.getSignature(mode);\r\n    body.appendChild(b);\r\n    // get header Parameter\r\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\r\n    var br = document.createElement('BR');\r\n    body.appendChild(br);\r\n    //form to get database id\r\n    if(mode == 'create') this.getForm( null, body, false, mode, 'URL : server/database_id');\r\n    else this.getForm( null, body, true, mode, 'URL : server/database_id');\r\n    return body;\r\n} // getConnectExplorer\r\n\r\n//get create & delete db form\r\nApiExplorer.prototype.getServerForm = function(){\r\n  // form\r\n  var form = document.createElement('form');\r\n  form.setAttribute('class', 'terminus-form-horizontal row-fluid');\r\n\r\n  var fd = document.createElement('div');\r\n  fd.setAttribute('class', 'terminus-control-group');\r\n  form.appendChild(fd);\r\n  var inpLabel = document.createElement('label');\r\n  inpLabel.setAttribute('class', 'terminus-control-label');\r\n  inpLabel.setAttribute('for', 'basicinput');\r\n  inpLabel.innerHTML = 'Url:';\r\n  fd.appendChild(inpLabel);\r\n  var cd = document.createElement('div');\r\n  cd.setAttribute('class', 'terminus-controls');\r\n  fd.appendChild(cd);\r\n  var inpId = document.createElement('input');\r\n  inpId.setAttribute('type', 'text');\r\n  inpId.setAttribute('id', 'basicinput');\r\n  inpId.setAttribute('class', 'terminus-input-text');\r\n  inpId.setAttribute('placeholder', 'URL : server_url');\r\n  if(this.val) inpId.value = this.val;\r\n  cd.appendChild(inpId);\r\n\r\n  var fd = document.createElement('div');\r\n  fd.setAttribute('class', 'terminus-control-group');\r\n  form.appendChild(fd);\r\n  var keyLabel = document.createElement('label');\r\n  keyLabel.setAttribute('class', 'terminus-control-label');\r\n  keyLabel.setAttribute('for', 'basicinput');\r\n  keyLabel.innerHTML = 'Key:';\r\n  fd.appendChild(keyLabel);\r\n  var cd = document.createElement('div');\r\n  cd.setAttribute('class', 'terminus-controls');\r\n  fd.appendChild(cd);\r\n  var key = document.createElement('input');\r\n  key.setAttribute('type', 'text');\r\n  key.setAttribute('id', 'basicinput');\r\n  key.setAttribute('class', 'span8 terminus-input-text');\r\n  key.setAttribute('placeholder', 'Key : key');\r\n  if(this.val) key.value = this.val;\r\n  cd.appendChild(key);\r\n\r\n  var button = document.createElement('button');\r\n  button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\r\n  button.setAttribute('type', 'button');\r\n  button.innerHTML = 'Send Api';\r\n  var gatherips = function(){\r\n    var input = {};\r\n    input.url = inpId.value;\r\n    input.key = key.value;\r\n    return input;\r\n  }\r\n  var resd = document.createElement('div');\r\n  form.appendChild(button);\r\n  form.appendChild(resd);\r\n  var self = this;\r\n  button.addEventListener(\"click\", function(){\r\n    var buttonSelf = this;\r\n    //opts = {};\r\n    var input = gatherips();\r\n    self.client.connect(input.url, input.key)\r\n    .then(function(response){\r\n      TerminusClient.FrameHelper.removeChildren(resd);\r\n      var resultDom = UTILS.showHttpResult(response, 'connect', resd, self.ui);\r\n    });\r\n  }) // button click\r\n  return form;\r\n} // getServerForm()\r\n\r\n// get database api calls - on click of databaseAPI nav bar - submenus of database Api defined here\r\nApiExplorer.prototype.getDatabaseExplorer = function(cont){\r\n  var body = document.createElement('div');\r\n  // list view of Databse tools\r\n  var ul = document.createElement('ul');\r\n  ul.setAttribute('class','terminus-ul-horizontal');\r\n  // loop over apiNavConfig\r\n  for (var key in apiNavConfig.subNav.database){\r\n      if (apiNavConfig.subNav.database.hasOwnProperty(key)) {\r\n          this.createSubNavs('database', apiNavConfig.subNav.database[key], cont, body, ul);\r\n      }\r\n  } // for apiNavConfig\r\n  cont.appendChild(ul);\r\n  // landing page\r\n  var dom = this.getDatabaseDom(apiNavConfig.subNav.database.createDatabase.action, body);\r\n  cont.appendChild(dom);\r\n  return cont;\r\n} // getDatabaseExplorer\r\n\r\n\r\n// get schema & document dom\r\nApiExplorer.prototype.getShowApiDom = function(action, body){\r\n    var self = this;\r\n    var br = document.createElement('BR');\r\n    body.appendChild(br);\r\n    // signature\r\n    var b = this.getSignature(action);\r\n    body.appendChild(b);\r\n    // get header Parameter\r\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\r\n    var br = document.createElement('BR');\r\n    body.appendChild(br);\r\n    // get input\r\n    switch(action){\r\n        case 'getSchema':\r\n            this.getForm( 'schema', body, true, action, 'URL : server/database_id');\r\n        break;\r\n        case 'getClassFrames':\r\n            this.getForm( 'getClassFrames', body, true, action, 'URL : server/database_id');\r\n        break;\r\n        case 'updateSchema':\r\n            this.getForm( 'schema', body, false, action, 'URL : server/database_id');\r\n        break;\r\n        case 'viewDocument':\r\n            this.getForm('document', body, true, action, 'URL : server/database_id/document/document_id');\r\n        break;\r\n        case 'deleteDocument':\r\n            this.getForm('document', body, true, action, 'URL : server/database_id/document/document_id');\r\n        break;\r\n        case 'createDocument':\r\n            this.getForm('document', body, false, action, 'URL : server/database_id/document/document_id');\r\n        break;\r\n        case 'updateDocument':\r\n            this.getForm('document', body, false, action, 'URL : server/database_id/document/document_id');\r\n        break;\r\n        default:\r\n            console.log('Invalid Api Call on form');\r\n        break;\r\n   }// switch(action)\r\n\r\n   return body;\r\n } // getShowApiDom()\r\n\r\n// get query api dom\r\nApiExplorer.prototype.getQueryApiDom = function(action, body){\r\n    var br = document.createElement('BR');\r\n    body.appendChild(br);\r\n    // signature\r\n    var b = this.getSignature(action);\r\n    body.appendChild(b);\r\n    // get header Parameter\r\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\r\n    var br = document.createElement('BR');\r\n    body.appendChild(br);\r\n    this.getForm( 'query', body, false, action, 'URL : server/database_id');\r\n    return body;\r\n} // getQueryApiDom\r\n\r\n/*ApiExplorer.prototype.getClassFramesForm = function(){\r\n    // form\r\n    var form = document.createElement('form');\r\n    form.setAttribute('class', 'terminus-form-horizontal row-fluid');\r\n    var fd = document.createElement('div');\r\n    fd.setAttribute('class', 'terminus-control-group');\r\n    form.appendChild(fd);\r\n    var inpLabel = document.createElement('label');\r\n    inpLabel.setAttribute('class', 'terminus-control-label');\r\n    inpLabel.setAttribute('for', 'basicinput');\r\n    inpLabel.innerHTML = 'Url:';\r\n    fd.appendChild(inpLabel);\r\n    var cd = document.createElement('div');\r\n    cd.setAttribute('class', 'terminus-controls');\r\n    fd.appendChild(cd);\r\n    var inpUrl = document.createElement('input');\r\n    inpUrl.setAttribute('type', 'text');\r\n    inpUrl.setAttribute('id', 'basicinput');\r\n    inpUrl.setAttribute('class', 'span8 terminus-input-text');\r\n    inpUrl.setAttribute('placeholder', 'URL : database_url');\r\n    if(this.val) inpUrl.value = this.val;\r\n    cd.appendChild(inpUrl);\r\n    var fd = document.createElement('div');\r\n    fd.setAttribute('class', 'terminus-control-group');\r\n    form.appendChild(fd);\r\n    var inpLabel = document.createElement('label');\r\n    inpLabel.setAttribute('class', 'terminus-control-label');\r\n    inpLabel.setAttribute('for', 'basicinput');\r\n    inpLabel.innerHTML = 'Url/ ID:';\r\n    fd.appendChild(inpLabel);\r\n    var cd = document.createElement('div');\r\n    cd.setAttribute('class', 'terminus-controls');\r\n    fd.appendChild(cd);\r\n    var inpDocUrl = document.createElement('input');\r\n    inpDocUrl.setAttribute('type', 'text');\r\n    inpDocUrl.setAttribute('id', 'basicinput');\r\n    inpDocUrl.setAttribute('class', 'span8 terminus-input-text');\r\n    inpDocUrl.setAttribute('placeholder', 'Url or ID of document class');\r\n    cd.appendChild(inpDocUrl);\r\n    var fd = document.createElement('div');\r\n    fd.setAttribute('class', 'terminus-control-group');\r\n    form.appendChild(fd);\r\n    var optLabel = document.createElement('label');\r\n    optLabel.setAttribute('class', 'terminus-control-label');\r\n    optLabel.setAttribute('for', 'basicinput');\r\n    optLabel.innerHTML = 'Options:';\r\n    fd.appendChild(optLabel);\r\n    var cd = document.createElement('div');\r\n    cd.setAttribute('class', 'terminus-controls');\r\n    fd.appendChild(cd);\r\n    var optInp = document.createElement('input');\r\n    optInp.setAttribute('type', 'text');\r\n    optInp.setAttribute('id', 'basicinput');\r\n    optInp.setAttribute('class', 'span8 terminus-input-text');\r\n    optInp.setAttribute('placeholder', 'options');\r\n    cd.appendChild(optInp);\r\n    var button = document.createElement('button');\r\n    button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\r\n    button.setAttribute('type', 'button');\r\n    button.innerHTML = 'Send Api';\r\n    var gatherips = function(){\r\n        var input = {};\r\n        input.url = inpUrl.value;\r\n        input.docUrl = inpDocUrl.value;\r\n        input.options = optInp.value;\r\n        return input;\r\n    }\r\n    var self = this;\r\n    button.addEventListener(\"click\", function(form){\r\n      var input = gatherips();\r\n      var buttonSelf = this;\r\n      opts = {};\r\n      opts.explorer = true;\r\n      self.client.getClassFrame(input.url, input.docUrl, opts)\r\n      .then(function(response){\r\n          var currForm = buttonSelf.parentNode;\r\n          var resultDom = UTILS.showHttpResult(response, 'getClassFrames', currForm, self.ui);\r\n      });\r\n    }) // button click\r\n    form.appendChild(button);\r\n    return form;\r\n}   */\r\n\r\n// get form for all Apis\r\nApiExplorer.prototype.getForm = function(curApi, body, view, action, urlPlaceholder){\r\n    // form\r\n    var formDoc = document.createElement('form');\r\n    formDoc.setAttribute('class', 'terminus-form-horizontal row-fluid');\r\n    var fd = document.createElement('div');\r\n    fd.setAttribute('class', 'terminus-control-group');\r\n    formDoc.appendChild(fd);\r\n    var urlLabel = document.createElement('label');\r\n    urlLabel.setAttribute('class', 'terminus-control-label');\r\n    urlLabel.setAttribute('for', 'basicinput');\r\n    urlLabel.innerHTML = 'Url:';\r\n    fd.appendChild(urlLabel);\r\n    var cd = document.createElement('div');\r\n    cd.setAttribute('class', 'terminus-controls');\r\n    fd.appendChild(cd);\r\n    var inpUrl = document.createElement('input');\r\n    inpUrl.setAttribute('type', 'text');\r\n    inpUrl.setAttribute('id', 'basicinput');\r\n    inpUrl.setAttribute('class', 'span8 terminus-input-text');\r\n    inpUrl.setAttribute('placeholder', urlPlaceholder);\r\n    cd.appendChild(inpUrl);\r\n    // add extra form fields based on current api chosen\r\n    switch(curApi){\r\n        case 'getClassFrames':\r\n            var fd = document.createElement('div');\r\n            fd.setAttribute('class', 'terminus-control-group');\r\n            formDoc.appendChild(fd);\r\n            var docUrlLabel = document.createElement('label');\r\n            docUrlLabel.setAttribute('class', 'terminus-control-label');\r\n            docUrlLabel.setAttribute('for', 'basicinput');\r\n            docUrlLabel.innerHTML = 'Url/ ID:';\r\n            fd.appendChild(docUrlLabel);\r\n            var cd = document.createElement('div');\r\n            cd.setAttribute('class', 'terminus-controls');\r\n            fd.appendChild(cd);\r\n            var inpDocUrl = document.createElement('input');\r\n            inpDocUrl.setAttribute('type', 'text');\r\n            inpDocUrl.setAttribute('id', 'basicinput');\r\n            inpDocUrl.setAttribute('class', 'span8 terminus-input-text');\r\n            inpDocUrl.setAttribute('placeholder', 'Url or ID of document class');\r\n            cd.appendChild(inpDocUrl);\r\n        break;\r\n        case 'schema':\r\n            //encoding\r\n           /* var fd = document.createElement('div');\r\n            fd.setAttribute('class', 'terminus-control-group');\r\n            formDoc.appendChild(fd);\r\n            var encLabel = document.createElement('label');\r\n            encLabel.setAttribute('class', 'terminus-control-label');\r\n            encLabel.setAttribute('for', 'basicinput');\r\n            encLabel.innerHTML = 'Encoding:';\r\n            fd.appendChild(encLabel);\r\n            var cd = document.createElement('div');\r\n            cd.setAttribute('class', 'terminus-controls');\r\n            fd.appendChild(cd);\r\n            var inpEnc = document.createElement('select');\r\n            inpEnc.setAttribute('style', 'height: 50px;width: 300px;padding: 10px;');\r\n            inpEnc.setAttribute('placeholder', 'turtle');\r\n            var optTurt = document.createElement('option');\r\n            optTurt.setAttribute('value', 'terminus:turtle');\r\n            optTurt.appendChild(document.createTextNode('turtle'));\r\n            inpEnc.appendChild(optTurt);\r\n            var optJld = document.createElement('option');\r\n            optJld.setAttribute('value', 'terminus:jsonld');\r\n            optJld.appendChild(document.createTextNode('jsonLD'));\r\n            inpEnc.appendChild(optJld);\r\n            cd.appendChild(inpEnc); */\r\n        break;\r\n    }\r\n    var fd = document.createElement('div');\r\n    fd.setAttribute('class', 'terminus-control-group');\r\n    formDoc.appendChild(fd);\r\n    var keyLabel = document.createElement('label');\r\n    keyLabel.setAttribute('class', 'terminus-control-label');\r\n    keyLabel.setAttribute('for', 'basicinput');\r\n    keyLabel.innerHTML = 'Key:';\r\n    fd.appendChild(keyLabel);\r\n    var cd = document.createElement('div');\r\n    cd.setAttribute('class', 'terminus-controls');\r\n    fd.appendChild(cd);\r\n    var inpKey = document.createElement('input');\r\n    inpKey.setAttribute('type', 'text');\r\n    inpKey.setAttribute('id', 'basicinput');\r\n    inpKey.setAttribute('class', 'span8 terminus-input-text');\r\n    inpKey.setAttribute('placeholder', 'Key');\r\n    cd.appendChild(inpKey);\r\n    if(!view){\r\n        // include text area only if call is type post\r\n        var fd = document.createElement('div');\r\n        fd.setAttribute('class', 'terminus-control-group');\r\n        formDoc.appendChild(fd);\r\n        var docLabel = document.createElement('label');\r\n        docLabel.setAttribute('class', 'terminus-control-label');\r\n        docLabel.setAttribute('for', 'basicinput');\r\n        if(curApi == 'query') docLabel.innerHTML = 'Query:';\r\n        docLabel.innerHTML = 'Document:';\r\n        fd.appendChild(docLabel);\r\n        var cd = document.createElement('div');\r\n        cd.setAttribute('class', 'terminus-controls');\r\n        fd.appendChild(cd);\r\n        var inpDoc = document.createElement('textarea');\r\n        cd.appendChild(inpDoc);\r\n        inpDoc.setAttribute('class', 'terminus-api-explorer-text-area');\r\n        UTILS.stylizeEditor(this.ui, inpDoc, 'api-doc', 'javascript');\r\n    }\r\n    body.appendChild(formDoc);\r\n    // gather inputs\r\n    var inp ={};\r\n    inp.url = inpUrl;\r\n    inp.key = inpKey;\r\n    if(curApi == 'getClassFrames') inp.docUrl = inpDocUrl;\r\n    //if(curApi == 'schema') inp.enc = inpEnc;\r\n    if(!view) inp.doc = inpDoc;\r\n    var form = this.getApiSendButton(action, inp);\r\n    body.appendChild(form);\r\n}\r\n\r\n// define event listeners on send api of schema & documents\r\n\r\nApiExplorer.prototype.getApiForm = function(action, input){\r\n  // form\r\n  var form = document.createElement('form');\r\n  form.setAttribute('class', 'terminus-form-horizontal row-fluid');\r\n\r\n  var button = document.createElement('button');\r\n  button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\r\n  button.setAttribute('type', 'button');\r\n  button.innerHTML = 'Send Api';\r\n  form.appendChild(button);\r\n  var resd = document.createElement('div');\r\n  form.appendChild(resd);\r\n  var self = this;\r\n  switch(action){\r\n    case 'getSchema':\r\n      button.addEventListener(\"click\", function(){\r\n        var opts = {};\r\n        opts['terminus:encoding'] = input.enc.value;\r\n        opts['terminus:user_key'] = 'terminus:turtle';\r\n        var schurl = input.url.value;\r\n        var buttonSelf = this;\r\n        self.client.getSchema(schurl, opts)\r\n        .then(function(response){\r\n          TerminusClient.FrameHelper.removeChildren(resd);\r\n          var resultDom = UTILS.showHttpResult(response, 'getSchema', resd, self.ui);\r\n        });\r\n      }) // button click\r\n    break;\r\n    case 'updateSchema':\r\n      button.addEventListener(\"click\", function(){\r\n        var buttonSelf = this;\r\n        opts = {};\r\n        opts['terminus:encoding'] = input.enc.value;\r\n        opts['terminus:user_key'] = 'terminus:turtle';\r\n        var schurl = input.url.value;\r\n        self.client.connectionConfig.connected_mode = false;\r\n        self.client.updateSchema(schurl, input.doc.value, opts)\r\n        .then(function(response){\r\n          var gtxtar = document.createElement('textarea');\r\n          gtxtar.setAttribute('readonly', true);\r\n          gtxtar.innerHTML = response;\r\n          var currForm = buttonSelf.parentNode;\r\n          currForm.appendChild(gtxtar);\r\n          UTILS.stylizeEditor(this.ui, txtar, 'schema', 'turtle');\r\n        });\r\n      }) // button click\r\n    break;\r\n    case 'viewDocument':\r\n      button.addEventListener(\"click\", function(){\r\n      var dcurl = input.value;\r\n      var buttonSelf = this;\r\n      var opts = {};\r\n      opts.format = 'turtle';\r\n      self.client.getDocument(dcurl, opts)\r\n      .then(function(response){\r\n        TerminusClient.FrameHelper.removeChildren(resd);\r\n        var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n      });\r\n    }) // button click\r\n    break;\r\n    case 'deleteDocument':\r\n      button.addEventListener(\"click\", function(){\r\n      var dcurl = input.value;\r\n      var buttonSelf = this;\r\n      var opts = {};\r\n      self.client.deleteDocument(dcurl, opts)\r\n      .then(function(response){\r\n        TerminusClient.FrameHelper.removeChildren(resd);\r\n        var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n      });\r\n    }) // button click\r\n    break;\r\n    case 'createDocument':\r\n      button.addEventListener(\"click\", function(){\r\n        var dcurl = input.schemaUrlDom.value;\r\n        var payload = input.htmlEditor.getValue();\r\n        var buttonSelf = this;\r\n        opts = {};\r\n        self.client.createDocument(dcurl, payload, opts)\r\n        .then(function(response){\r\n          TerminusClient.FrameHelper.removeChildren(resd);\r\n          var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n        });\r\n      }) // button click\r\n    break;\r\n    case 'updateDocument':\r\n      button.addEventListener(\"click\", function(){\r\n        var dcurl = input.schemaUrlDom.value;\r\n        var payload = input.htmlEditor.getValue();\r\n        var buttonSelf = this;\r\n        opts = {};\r\n        opts.editmode = 'replace';\r\n        opts.format = 'json';\r\n        self.client.updateDocument(dcurl, payload, opts)\r\n        .then(function(response){\r\n          TerminusClient.FrameHelper.removeChildren(resd);\r\n          var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n        });\r\n      }) // button click\r\n    break;\r\n  } // switch(action)\r\n\r\n  var br = document.createElement('BR');\r\n  form.appendChild(br);\r\n  var br = document.createElement('BR');\r\n  form.appendChild(br);\r\n\r\n  return form;\r\n} // getApiForm()\r\n\r\n\r\n// define event listeners on send api of schema & documents\r\nApiExplorer.prototype.getApiSendButton = function(action, input){\r\n    // form\r\n    var form = document.createElement('form');\r\n    form.setAttribute('class', 'terminus-form-horizontal row-fluid');\r\n    var button = document.createElement('button');\r\n    button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\r\n    button.setAttribute('type', 'button');\r\n    button.innerHTML = 'Send Api';\r\n    form.appendChild(button);\r\n    var resd = document.createElement('div');\r\n    form.appendChild(resd);\r\n    var self = this;\r\n    switch(action){\r\n        case 'connect':\r\n            button.addEventListener(\"click\", function(){\r\n                self.client.connect(input.url.value, input.key.value)\r\n                .then(function(response){\r\n                \tTerminusClient.FrameHelper.removeChildren(resd);\r\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n               });\r\n            }) // button click\r\n        break;\r\n        case 'create':\r\n            button.addEventListener(\"click\", function(form){\r\n              self.client.createDatabase(input.url.value, JSON.parse(input.doc.value), input.key.value)\r\n              .then(function(response){\r\n            \t  TerminusClient.FrameHelper.removeChildren(resd);\r\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n              });\r\n            }) // button click\r\n        break;\r\n        case 'delete':\r\n            button.addEventListener(\"click\", function(){\r\n              var opts ={}\r\n              self.client.deleteDatabase(input.url.value, input.key.value)\r\n              .then(function(response){\r\n            \t  TerminusClient.FrameHelper.removeChildren(resd);\r\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n              });\r\n            }) // button click\r\n        break\r\n        case 'getSchema':\r\n            button.addEventListener(\"click\", function(){\r\n                var opts = {};\r\n                opts['terminus:encoding'] = 'terminus:turtle';\r\n                opts['terminus:user_key'] = input.key.value;\r\n                var schurl = input.url.value;\r\n                self.client.getSchema(schurl, opts)\r\n                .then(function(response){\r\n                \tTerminusClient.FrameHelper.removeChildren(resd);\r\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n                });\r\n            }) // button click\r\n        break;\r\n        case 'updateSchema':\r\n            button.addEventListener(\"click\", function(){\r\n                opts = {};\r\n                opts['terminus:encoding'] = 'terminus:turtle';\r\n                opts['terminus:user_key'] = input.key.value;\r\n                var payload = input.doc.value;\r\n                var schurl = input.url.value;\r\n                self.client.connectionConfig.connected_mode = false;\r\n                self.client.updateSchema(schurl, input.doc.value, opts)\r\n                //self.client.updateSchema(schurl, input.doc.value, opts)\r\n                .then(function(response){\r\n                \tTerminusClient.FrameHelper.removeChildren(resd);\r\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n                });\r\n            }) // button click\r\n        break;\r\n        case 'getClassFrames':\r\n            button.addEventListener(\"click\", function(form){\r\n                var schurl = input.url.value;\r\n                opts = {};\r\n                opts.explorer = true;\r\n                self.client.getClassFrame(input.url, JSON.parse(input.docUrl.value), opts)\r\n                .then(function(response){\r\n                    var currForm = buttonSelf.parentNode;\r\n                    var resultDom = UTILS.showHttpResult(response, action, currForm, self.ui);\r\n                });\r\n            }) // button click\r\n        break;\r\n        case 'viewDocument':\r\n          button.addEventListener(\"click\", function(){\r\n              var dcurl = input.url.value;\r\n              var opts = {};\r\n              opts['terminus:encoding'] = \"terminus:frame\";\r\n              opts['terminus:user_key'] = input.key.value;\r\n              self.client.getDocument(dcurl, opts)\r\n              .then(function(response){\r\n            \t    TerminusClient.FrameHelper.removeChildren(resd);\r\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n              });\r\n        }) // button click\r\n        break;\r\n        case 'deleteDocument':\r\n          button.addEventListener(\"click\", function(){\r\n              var dcurl = input.url.value;\r\n              var opts = {};\r\n              opts.key = input.key.value;\r\n              self.client.deleteDocument(dcurl, opts)\r\n              .then(function(response){\r\n            \t  TerminusClient.FrameHelper.removeChildren(resd);\r\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n              });\r\n          }) // button click\r\n        break;\r\n        case 'createDocument':\r\n          button.addEventListener(\"click\", function(){\r\n              var dcurl = input.url.value;\r\n              var payload = input.doc.value;\r\n              opts = {};\r\n              opts['terminus:encoding'] = \"jsonld\";\r\n              opts['terminus:user_key'] = input.key.value;\r\n              self.client.createDocument(dcurl, JSON.parse(payload), opts)\r\n              .then(function(response){\r\n            \t   TerminusClient.FrameHelper.removeChildren(resd);\r\n                   var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n               });\r\n          }) // button click\r\n        break;\r\n        case 'updateDocument':\r\n          button.addEventListener(\"click\", function(){\r\n            var dcurl = input.url.value;\r\n            var payload = input.doc.value;\r\n            var buttonSelf = this;\r\n            opts = {};\r\n            opts['terminus:encoding'] = \"jsonld\";\r\n            opts['terminus:user_key'] = input.key.value;\r\n            self.client.updateDocument(dcurl, JSON.parse(payload), opts)\r\n            .then(function(response){\r\n            \tTerminusClient.FrameHelper.removeChildren(resd);\r\n                var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n            });\r\n          }) // button click\r\n        break;\r\n        case 'select':\r\n            button.addEventListener(\"click\", function(){\r\n                var opts = {};\r\n                opts.key = input.key.value;\r\n                var doc = JSON.parse(input.doc.value);\r\n                self.client.select(input.url.value, doc, opts)\r\n                .then(function(response){\r\n                \tTerminusClient.FrameHelper.removeChildren(resd);\r\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n                });\r\n            }) // button click\r\n        break;\r\n        case 'update':\r\n            button.addEventListener(\"click\", function(){\r\n              var opts = {};\r\n              opts.key = input.key.value;\r\n              var doc = JSON.parse(input.doc.value);\r\n              self.client.update(input.url.value, doc, opts)\r\n              .then(function(response){\r\n            \t  TerminusClient.FrameHelper.removeChildren(resd);\r\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\r\n              });\r\n            }) // button click\r\n        break;\r\n        default:\r\n            console.log('Invalid Api call on button');\r\n        break;\r\n    } // switch(action)\r\n    var br = document.createElement('BR');\r\n    form.appendChild(br);\r\n    var br = document.createElement('BR');\r\n    form.appendChild(br);\r\n    return form;\r\n} // getApiSendButton()\r\n\r\n// get signature of api calls\r\nApiExplorer.prototype.getSignature = function(action){\r\n    var api = document.createElement('div');\r\n    // get header signature\r\n    var sg = document.createElement('button');\r\n    sg.appendChild(document.createTextNode('Click to read API Signature'));\r\n    sg.setAttribute('class', 'terminus-collapsible');\r\n    ic = document.createElement('i');\r\n    ic.setAttribute('class', 'terminus-cheveron-float fa fa-chevron-down');\r\n    sg.appendChild(ic);\r\n    api.appendChild(sg);\r\n    var br = document.createElement('BR');\r\n    api.appendChild(br);\r\n    var cl = document.createElement('div');\r\n    cl.setAttribute('class', 'terminus-collapsible-content content');\r\n    var sig = UTILS.getFunctionSignature(action);\r\n    var txt = document.createTextNode(sig.spec);\r\n    var pre = document.createElement('pre');\r\n    pre.setAttribute('class', 'terminus-api-signature-pre');\r\n    pre.appendChild(txt);\r\n    var txt =  document.createTextNode(sig.descr);\r\n    pre.appendChild(txt);\r\n    var br = document.createElement('BR');\r\n    pre.appendChild(br);\r\n    var br = document.createElement('BR');\r\n    pre.appendChild(br);\r\n    var txt = document.createTextNode(sig.result);\r\n    pre.appendChild(txt);\r\n    cl.appendChild(pre);\r\n    api.appendChild(cl);\r\n    var br = document.createElement('BR');\r\n    api.appendChild(br);\r\n    sg.addEventListener('click', function(){\r\n        UTILS.tolggleContent(ic, cl);\r\n    });\r\n    return api;\r\n} // getSignature()\r\n\r\n// displays signature only on click\r\nfunction tolggleSignatureContent(content){\r\n    if (content.style.display === \"block\")\r\n        content.style.display = \"none\";\r\n    else content.style.display = \"block\";\r\n}\r\n\r\nmodule.exports=ApiExplorer\r\n","\nconst CONST = require('./const');\nconst DispatchRequest = require('./dispatchRequest');\nconst ErrorMessage = require('./errorMessage');\nconst ConnectionCapabilities = require('./connectionCapabilities');\nconst ConnectionConfig = require('./connectionConfig');\nconst UTILS = require('./utils.js');\n\n/**\n * @file Javascript WOQL client object\n * @license Apache Version 2\n * @summary Simple Javascript Client for accessing the Terminus DB API\n */\n\n/**\n  * @param {Object} params\n  */\nfunction WOQLClient(params) {\n\t// current connection context variables\n\tconst key = params ? params.key : undefined;\n\tthis.use_fetch = false;\n\tthis.return_full_response = false;\n\tthis.connectionConfig = new ConnectionConfig(params);\n\tthis.connection = new ConnectionCapabilities(this.connectionConfig, key);\n}\n\nWOQLClient.CONST = CONST;\n\n/**\n * Connect to a Terminus server at the given URI with an API key\n * Stores the terminus:ServerCapability document returned\n * in the connection register which stores, the url, key, capabilities,\n * and database meta-data for the connected server\n *\n * If the curl argument is false or null,\n * this.connectionConfig.server will be used if present,\n * or the promise will be rejected.\n\n * @param  {string} curl Terminus server URI\n * @param  {string} API  key\n * @return {Promise}\n * @public\n */\nWOQLClient.prototype.connect = function (curl, key) {\n\tif (curl && !this.connectionConfig.setServer(curl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(curl, CONST.CONNECT))\n\t\t);\n\t}\n\tconst serverURL = this.connectionConfig.serverURL();\n\tif (key) {\n\t\tthis.connection.setClientKey(serverURL, key);\n\t}\n\t// unset the current server setting until successful connect\n\tthis.connectionConfig.server = false;\n\tconst self = this;\n\treturn this.dispatch(serverURL, CONST.CONNECT).then((response) => {\n\t\tself.connectionConfig.server = serverURL;\n\t\tself.connection.addConnection(serverURL, response);\n\t\treturn response;\n\t});\n};\n\n/**\n * Create a Terminus Database by posting\n * a terminus:Database document to the Terminus API\n *\n * The dburl argument can be\n *    1) a valid URL of a terminus database or\n *    2) a valid Terminus database id or\n *    3) can be omitted\n * \t\tin case 2) the current server will be used,\n * \t\tin case 3) the database id will be set from the @id field of the terminuse:Database document.\n *\n * The second (details) argument contains a terminus:Database document\n * with a mandatory rdfs:label field and an optional rdfs:comment field.\n * The third (key) argument contains an optional API key\n *\n * @param {string} dburl Terminus server URI or a TerminusID\n * @param {object} details\n * @param {string} key\n * @return {Promise}\n * @public\n */\nWOQLClient.prototype.createDatabase = function (dburl, details, key) {\n\tif (dburl && !this.connectionConfig.setDB(dburl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(dburl, 'Create Database'))\n\t\t);\n\t}\n\tif (\n\t\tdetails\n    && details['@id']\n    && !this.connectionConfig.setDB(details['@id'], details['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(details['@id'], 'Create Database'))\n\t\t);\n\t}\n\tdetails = this.makeDocumentConsistentWithURL(details, this.connectionConfig.dbURL());\n\n\tconst opts = {};\n\tif (key) {\n\t\topts.key = key;\n\t}\n\tconst doc = this.addOptionsToDocument(details, opts);\n\treturn this.dispatch(this.connectionConfig.dbURL('create'), CONST.CREATE_DATABASE, doc);\n};\n\n/**\n * Delete a Database\n * @param {String} dburl it is a terminusDB Url or a terminusDB Id\n * @param {String} key an optional API key\n * @return {Promise}\n *\n * if dburl is omitted, the current server and database will be used\n */\nWOQLClient.prototype.deleteDatabase = function (dburl, key) {\n\tif (dburl && !this.connectionConfig.setDB(dburl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(dburl, 'Delete Database'))\n\t\t);\n\t}\n\tconst opts = {};\n\n\tif (key) {\n\t\topts.key = key;\n\t}\n\n\tconst self = this;\n\treturn this.dispatch(`${this.connectionConfig.dbURL()}`, CONST.DELETE_DATABASE, opts).then(\n\t\t(response) => {\n\t\t\tself.connection.removeDB();\n\t\t\treturn response;\n\t\t}\n\t);\n};\n\n/**\n * Retrieves the schema of the specified database\n *\n * @param {string} schurl TerminusDB server URL or a valid TerminusDB Id or omitted\n * @param {object} opts is an options object\n * @return {Promise}\n *\n * opts.format is optional and defines which format is requested (*json / turtle)\n * opts.key is an optional API key\n */\nWOQLClient.prototype.getSchema = function (schurl, opts) {\n\tif (schurl && !this.connectionConfig.setSchemaURL(schurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(schurl, 'Get Schema'))\n\t\t);\n\t}\n\t// consoleco.log('schemaURL', this.connectionConfig.schemaURL());\n\treturn this.dispatch(this.connectionConfig.schemaURL(), CONST.GET_SCHEMA, opts);\n};\n\n/**\n * Updates the Schema of the specified database\n *\n * @param {string} schurl TerminusDB server URL or a valid TerminusDB Id or omitted\n * @param {object} doc is a valid owl ontology in json-ld or turtle format\n * @param {object} opts is an options object\n * @return {Promise}\n *\n * if omitted the current server and database will be used\n * opts.format is used to specify which format is being used (*json / turtle)\n * opts.key is an optional API key\n */\nWOQLClient.prototype.updateSchema = function (schurl, doc, opts) {\n\tif (schurl && !this.connectionConfig.setSchemaURL(schurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(schurl, 'Update Schema'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(doc, opts);\n\treturn this.dispatch(this.connectionConfig.schemaURL(), 'update_schema', doc);\n};\n\n/**\n * Creates a new document in the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus database (an id will be randomly assigned) or\n * 2) a valid URL or of a terminus document (the document will be given the passed URL) or\n * 3) a valid terminus document id (the current server and database will be used)\n * 4) can be omitted (the URL will be taken from the document if present)\n * The second argument (doc) is a valid document in json-ld\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.createDocument = function (docurl, doc, opts) {\n\tif (docurl && !this.connectionConfig.setDocument(docurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Create Document'))\n\t\t);\n\t} if (\n\t\tdoc\n    && doc['@id']\n    && !this.connectionConfig.setDocument(doc['@id'], doc['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(doc['@id'], 'Create Document'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(\n\t\tthis.makeDocumentConsistentWithURL(doc, this.connectionConfig.docURL()),\n\t\topts\n\t);\n\treturn this.dispatch(this.connectionConfig.docURL(), 'create_document', doc);\n};\n\n/**\n * Retrieves a document from the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database\n * the second argument (opts) is an options json -\n * \t\topts.key is an optional API key\n * \t\topts.shape is frame | *document\n */\nWOQLClient.prototype.getDocument = function (docurl, opts) {\n\tif (docurl && (!this.connectionConfig.setDocument(docurl) || !this.connectionConfig.docid)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Get Document'))\n\t\t);\n\t}\n\treturn this.dispatch(this.connectionConfig.docURL(), 'get_document', opts);\n};\n\n/**\n * Updates a document in the specified database with a new version\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database or\n * 3) omitted in which case the id will be taken from the document @id field\n * the second argument (doc) is a document in json-ld format\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.updateDocument = function (docurl, doc, opts) {\n\tif (docurl && !this.connectionConfig.setDocument(docurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Update Document'))\n\t\t);\n\t}\n\tif (doc && doc['@id']\n    && !this.connectionConfig.setDocument(doc['@id'], doc['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(doc['@id'], 'Update Document'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(\n\t\tthis.makeDocumentConsistentWithURL(doc, this.connectionConfig.docURL()),\n\t\topts\n\t);\n\treturn this.dispatch(this.connectionConfig.docURL(), 'update_document', doc);\n};\n\n/**\n * Deletes a document from the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database\n * 3) omitted - the current document will be used\n * the second argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.deleteDocument = function (docurl, opts) {\n\tif (docurl && (!this.connectionConfig.setDocument(docurl) || !this.connectionConfig.docid)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Delete Document'))\n\t\t);\n\t}\n\treturn this.dispatch(this.connectionConfig.docURL(), 'delete_document', opts);\n};\n\n/**\n * Executes a read-only WOQL query on the specified database and returns the results\n *\n * @param {string} qurl TerminusDB server URL or omitted (the current DB will be used)\n * @param {string} woql is a \"woql query select statement\"\n * @param {object} opts it can contents the API key (opts.key)\n *\n */\nWOQLClient.prototype.select = function (qurl, woql, opts) {\n\tif (qurl && !this.connectionConfig.setQueryURL(qurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(qurl, 'Select'))\n\t\t);\n\t}\n\tlet q = { 'terminus:query': JSON.stringify(woql) };\n\tq = this.addOptionsToWOQL(q, opts);\n\treturn this.dispatch(this.connectionConfig.queryURL(), CONST.WOQL_SELECT, q);\n};\n\n/**\n * Executes a WOQL query on the specified database which updates the state and returns the results\n *\n * The first (qurl) argument can be\n * 1) a valid URL of a terminus database or\n * 2) omitted - the current database will be used\n * the second argument (woql) is a woql select statement encoded as a string\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.update = function (qurl, woql, opts) {\n\tif (qurl && !this.connectionConfig.setQueryURL(qurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(qurl, 'Update'))\n\t\t);\n\t}\n\twoql = this.addOptionsToWOQL(woql, opts);\n\treturn this.dispatch(this.connectionConfig.queryURL(), 'woql_update', woql);\n};\n\n/**\n * Retrieves a WOQL query on the specified database which updates the state and returns the results\n *\n * The first (cfurl) argument can be\n * 1) a valid URL of a terminus database or\n * 2) omitted - the current database will be used\n * the second argument (cls) is the URL / ID of a document class that exists in the database schema\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.getClassFrame = function (cfurl, cls, opts) {\n\tif (cfurl && !this.connectionConfig.setClassFrameURL(cfurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(cfurl, 'Get Class Frame'))\n\t\t);\n\t}\n\tif (!opts) opts = {};\n\topts['terminus:class'] = cls;\n\treturn this.dispatch(this.connectionConfig.frameURL(), 'class_frame', opts);\n};\n\n/*\n * Utility functions for adding standard fields to API arguments\n */\nWOQLClient.prototype.addOptionsToWOQL = function (woql, opts) {\n\tif (opts && opts.key) {\n\t\twoql.key = opts.key;\n\t}\n\treturn woql;\n};\n\nWOQLClient.prototype.addOptionsToDocument = function (doc, opts) {\n\tconst pdoc = {};\n\tpdoc['@context'] = doc['@context'];\n\tif (pdoc['@context'] && doc['@id']) { // add blank node prefix as document base url\n\t\tpdoc['@context']._ = `${doc['@id']}/`;\n\t}\n\tif (opts && opts['terminus:encoding'] && opts['terminus:encoding'] === 'terminus:turtle') {\n\t\tpdoc['terminus:turtle'] = doc;\n\t\tpdoc['terminus:schema'] = this.connectionConfig.schemaURL();\n\t\tdelete pdoc['terminus:turtle']['@context'];\n\t} else {\n\t\tpdoc['terminus:document'] = doc;\n\t\tdelete pdoc['terminus:document']['@context'];\n\t}\n\tpdoc['@type'] = 'terminus:APIUpdate';\n\tif (opts && opts['terminus:user_key']) {\n\t\tpdoc['terminus:user_key'] = opts['terminus:user_key'];\n\t}\n\tif (opts && opts.key) {\n\t\tpdoc['terminus:user_key'] = opts.key;\n\t}\n\treturn pdoc;\n};\n\nWOQLClient.prototype.addKeyToPayload = function (payload, url) {\n\tif (typeof payload !== 'object')payload = {};\n\tif (payload.key) {\n\t\tpayload['terminus:user_key'] = payload.key;\n\t\tdelete payload.key;\n\t} else if (this.connection.getClientKey()) {\n\t\tpayload['terminus:user_key'] = this.connection.getClientKey();\n\t} else if (this.connection.getClientKey(url)) {\n\t\tpayload['terminus:user_key'] = this.connection.getClientKey(url);\n\t}\n\treturn payload;\n};\n\nWOQLClient.prototype.makeDocumentConsistentWithURL = function (doc, dburl) {\n\tdoc['@id'] = dburl;\n\treturn doc;\n};\n\nWOQLClient.prototype.dispatch = function (url, action, payload) {\n\tif (this.connectionConfig.includeKey()) {\n\t\tpayload = this.addKeyToPayload(payload, url);\n\t}\n\tif (this.use_fetch) {\n\t\treturn this.dispatchFetch(url, action, payload);\n\t}\n\treturn DispatchRequest(url, action, payload);\n};\n\n\nWOQLClient.prototype.dispatchFetch = function (url, action, payload) {\n\tconst api = {\n\t\tmode: 'cors', // no-cors, cors, *same-origin\n\t\tredirect: 'follow', // manual, *follow, error\n\t\treferrer: 'client', // no-referrer, *client\n\t};\n\tlet hdrs = {};\n\tif (this.connectionConfig.platformEndpoint()) {\n\t\tapi.credentials = 'include'; // include, *same-origin, omit\n\t}\n\tif (payload && payload['terminus:user_key']) {\n\t\thdrs = { Authorization: `Basic ${btoa(`:${payload['terminus:user_key']}`)}` };\n\t\tdelete (payload['terminus:user_key']);\n\t}\n\t// read only API calls - use GET\n\tswitch (action) {\n\tcase CONST.DELETE_DATABASE:\n\tcase CONST.DELETE_DOCUMENT:\n\t\tif (Object.keys(payload).length > 0) url += `?${UTILS.URIEncodePayload(payload)}`;\n\t\tapi.method = 'DELETE';\n\t\tapi.cache = 'no-cache';\n\t\tbreak;\n\tcase CONST.CREATE_DATABASE:\n\tcase CONST.UPDATE_SCHEMA:\n\tcase CONST.CREATE_DOCUMENT:\n\tcase CONST.UPDATE_DOCUMENT:\n\tcase CONST.WOQL_UPDATE:\n\t\tapi.method = 'POST';\n\t\tapi.cache = 'no-cache';\n\t\thdrs['Content-Type'] = 'application/json';\n\t\tapi.body = JSON.stringify(payload);\n\t\tbreak;\n\tcase CONST.GET_SCHEMA:\n\tcase CONST.CONNECT:\n\tcase CONST.CLASS_FRAME:\n\tcase CONST.WOQL_SELECT:\n\tcase CONST.GET_DOCUMENT:\n\tdefault:\n\t\tapi.method = 'GET';\n\t\tif (Object.keys(payload).length > 0) url += `?${UTILS.URIEncodePayload(payload)}`;\n\t}\n\tconst self = this;\n\tif (Object.keys(hdrs).length > 0) {\n\t\tapi.headers = new Headers(hdrs);\n\t}\n\treturn fetch(url, api).then((response) => {\n\t\tif (self.return_full_response) return response;\n\t\tif (response.ok) {\n\t\t\treturn response.json();\n\t\t}\n\t\tself.error = self.parseAPIError(response);\n\t\treturn Promise.reject(new Error(self.getAPIErrorMessage(url, api, self.error)));\n\t});\n};\n\nmodule.exports = WOQLClient;\n","const axios = require('axios');\nconst UTILS = require('./utils.js');\nconst CONST = require('./const.js');\nconst ErrorMessage = require('./errorMessage');\n/*\nAccess-Control-Allow-Credentials   true\nAccess-Control-Allow-Headers  X-PINGOTHER, Content-Type\nAccess-Control-Allow-Methods GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS\nAccess-Control-Allow-Origin: http://localhost:3000 // WILD CARD WILL NOT WORK WHEN POSTING\n*/\n\nfunction btoaImplementation(str) {\n\ttry {\n\t\treturn btoa(str);\n\t} catch (err) {\n\t\t// console.log('in buffer')\n\t\treturn Buffer.from(str).toString('base64');\n\t}\n}\n\nfunction DispatchRequest(url, action, payload) {\n\tconst options = {\n\t\tmode: 'cors', // no-cors, cors, *same-origin\n\t\tredirect: 'follow', // manual, *follow, error\n\t\treferrer: 'client',\n\t\t// url:url,\n\t\t// no-referrer, *client\n\t};\n\tif (payload && payload['terminus:user_key']) {\n\t\toptions.headers = { Authorization: `Basic ${btoaImplementation(`:${payload['terminus:user_key']}`)}` };\n\t\tdelete (payload['terminus:user_key']);\n\t}\n\n\tswitch (action) {\n\tcase CONST.DELETE_DATABASE:\n\tcase CONST.DELETE_DOCUMENT:\n\t\tif (payload) {\n\t\t\tconst ext = UTILS.URIEncodePayload(payload);\n\t\t\tif (ext) url += `?${ext}`;\n\t\t}\n\t\treturn axios.delete(url, options)\n\t\t\t.then(response => response.data)\n\t\t\t.catch((err) => {\n\t\t\t\tthrow new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t});\n\tcase CONST.CREATE_DATABASE:\n\tcase CONST.UPDATE_SCHEMA:\n\tcase CONST.CREATE_DOCUMENT:\n\tcase CONST.UPDATE_DOCUMENT:\n\tcase CONST.WOQL_UPDATE:\n\t\toptions.headers = options.headers ? options.headers : {};\n\t\toptions.headers['Content-Type'] = 'application/json';\n\t\treturn axios.post(url, JSON.stringify(payload), options)\n\t\t\t.then(response => response.data)\n\t\t\t.catch((err) => {\n\t\t\t\tconst e = new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t\tif (err.response && err.response.data) e.data = err.response.data;\n\t\t\t\tthrow e;\n\t\t\t});\n\tcase CONST.GET_SCHEMA:\n\tcase CONST.CONNECT:\n\tcase CONST.CLASS_FRAME:\n\tcase CONST.WOQL_SELECT:\n\tcase CONST.GET_DOCUMENT:\n\tdefault:\n\t\tif (payload) {\n\t\t\tconst ext = UTILS.URIEncodePayload(payload);\n\t\t\tif (ext) url += `?${ext}`;\n\t\t}\n\t\treturn axios.get(url, options)\n\t\t\t.then((response => response.data))\n\t\t\t.catch((err) => {\n\t\t\t\tthrow new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t});\n\t}\n}\n\nmodule.exports = DispatchRequest;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\nmodule.exports = function isBuffer (obj) {\n  return obj != null && obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n  config.method = config.method ? config.method.toLowerCase() : 'get';\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","/**\n * Represents a frame for visualising a specific object frame, anywhere within a document\n * Recursive data structure where this.children contains an indexed array of object frames\n * and this.dataframes contains a property indexed array of data frames\n * Every object frame carries a reference to its classframe\n * This gives us instructions as to how to create new frames according to the schema\n * After that it's turtles all the way down.\n * @param cls - ID of the class (URL)\n * @param classframe - an array of frames representing a class\n * @param archetypes list of class frames\n * @param parent parent object\n * @returns\n */\nconst FrameHelper = require('./frameHelper');\n\nfunction ObjectFrame(cls, dataframes, classframes, parent, parentframe) {\n\t// the class of the frame - mandatory\n\tthis.empty();\n\tthis.cls = cls;\n\n\t// array of frames representing the full class frame\n\t// (optional - required to be able to safely add missing properties)\n\tif (classframes && typeof classframes === 'object') {\n\t\tthis.loadClassFrames(classframes);\n\t}\n\tif (dataframes && typeof dataframes === 'object') {\n\t\tthis.originalFrames = dataframes;\n\t\tthis.loadDataFrames(dataframes);\n\t} else {\n\t\tthis.originalFrames = false;\n\t}\n\t// parent object frame\n\tthis.parent = parent;\n\t// original frame used by parent to create me\n\tthis.parentframe = parentframe;\n\t// set to true if this is a newly created document\n\tthis.newDoc = false;\n}\n\nObjectFrame.prototype.getAsFrame = function (prop, parent) {\n\tif (this.parentframe) return this.parentframe;\n\tconst ff = { type: 'objectProperty', property: prop };\n\tff.range = this.cls;\n\tff.domain = parent.cls;\n\tff.domainValue = parent.subjid;\n\tff.frame = [];\n\tfor (const pFrame of Object.keys(this.dataframes)) {\n\t\tfor (let i = 0; i < this.dataframes[pFrame].length; i += 1) {\n\t\t\tff.frame.push(this.dataframes[pFrame][i].getAsFrame());\n\t\t}\n\t}\n\tfor (const key of Object.keys(this.children)) {\n\t\tfor (let i = 0; i < this.children[key].length; i += 1) {\n\t\t\tff.frame.push(this.children[key][i].getAsFrame(key, this));\n\t\t}\n\t}\n\treturn ff;\n};\n\n\nObjectFrame.prototype.isnew = function () {\n\treturn this.newDoc;\n};\n\n/**\n * Cleans out object and sets everything empty\n */\nObjectFrame.prototype.empty = function () {\n\t// all indexed by property\n\tthis.classframes = {};\n\tthis.dataframes = {};\n\tthis.restrictions = {};\n\tthis.children = {};\n\tthis.subjid = false;\n\tthis.cls = false;\n};\n\n/*\n * Resets object state to original state\n */\nObjectFrame.prototype.reset = function (prop) {\n\tif (prop) {\n\t\tconst props = [];\n\t\tfor (let i = 0; i < this.originalFrames.length; i += 1) {\n\t\t\tif (this.originalFrames[i].property === prop) {\n\t\t\t\tprops.push(this.originalFrames[i]);\n\t\t\t}\n\t\t}\n\t\tif (this.children[prop]) this.children[prop] = [];\n\t\tif (this.dataframes[prop]) this.dataframes[prop] = [];\n\t\tthis.loadDataFrames(props);\n\t} else {\n\t\tthis.dataframes = {};\n\t\tthis.restrictions = {};\n\t\tthis.children = {};\n\t\tthis.loadDataFrames(this.originalFrames);\n\t}\n};\n\n/*\n * Clears out any specific information from a tree\n */\nObjectFrame.prototype.clear = function () {\n\tthis.clearData();\n\tconst newkids = {};\n\tfor (const prop of Object.keys(this.children)) {\n\t\t// change all the object ids in the\n\t\tfor (let i = 0; i < this.children[prop].length; i += 1) {\n\t\t\tif (typeof newkids[prop] === 'undefined') newkids[prop] = [];\n\t\t\tthis.children[prop][i].subjid = FrameHelper.genBNID();\n\t\t\tthis.children[prop][i].clear();\n\t\t}\n\t}\n\treturn this;\n};\n\n/**\n * Empties out all of the object's dataframes\n */\nObjectFrame.prototype.clearData = function () {\n\tfor (const prop of Object.keys(this.dataframes)) {\n\t\tfor (let i = 0; i < this.dataframes[prop].length; i += 1) {\n\t\t\tthis.dataframes[prop][i].clear();\n\t\t}\n\t}\n\treturn this;\n};\n\n/**\n * Loads class frames for the object's class - the instructions about how to put an object together\n */\nObjectFrame.prototype.loadClassFrames = function (classframes) {\n\tfor (let j = 0; j < classframes.length; j += 1) {\n\t\tif (classframes[j]['@context']) this.jsonld_context = classframes[j]['@context'];\n\n\t\tconst cf = new ClassFrame(classframes[j]);\n\t\tif (cf.isValid()) {\n\t\t\tif (typeof this.classframes[classframes[j].property] === 'undefined') {\n\t\t\t\tthis.classframes[classframes[j].property] = [];\n\t\t\t}\n\t\t\tthis.classframes[classframes[j].property] = cf;\n\t\t\tif (cf.isObject() && this.children[classframes[j].property]) {\n\t\t\t\tfor (let i = 0; i < this.children[classframes[j].property].length; i += 1) {\n\t\t\t\t\tthis.children[classframes[j].property][i].loadClassFrames(classframes[j].frame);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n};\n\n/**\n * Does this object have a schema loaded?\n */\nObjectFrame.prototype.hasSchema = function () {\n\treturn !FrameHelper.empty(this.classframes);\n};\n\n/*\n * Loads an array of data frames into the object's internal index\n * {property: [frames]}\n */\nObjectFrame.prototype.loadDataFrames = function (frames) {\n\tif (typeof frames !== 'object' || !frames.length) return undefined;\n\tif (!this.originalFrames) this.originalFrames = frames;\n\tif (!this.subjid && frames[0].domainValue) this.subjid = frames[0].domainValue;\n\tfor (let i = 0; i < frames.length; i += 1) {\n\t\tif (frames[i]['@context']) this.jsonld_context = frames[i]['@context'];\n\t\tlet cframe = this.getPropertyClassFrame(frames[i].property, frames[i]);\n\t\tif (cframe.isClassChoice()) {\n\t\t\tcframe = cframe.getChosenClassFrame(frames[i].range);\n\t\t\tif (!cframe) {\n\t\t\t\tconsole.log(`no choice frame ${frames[i].range}`);\n\t\t\t}\n\t\t} else if (cframe.isLogic()) {\n\t\t\tcframe = cframe.getChosenFrame(frames[i]);\n\t\t}\n\t\tif (cframe && cframe.isData()) {\n\t\t\tconst df = new DataFrame(frames[i], this);\n\t\t\tif (typeof this.dataframes[frames[i].property] === 'undefined') {\n\t\t\t\tthis.dataframes[frames[i].property] = [];\n\t\t\t}\n\t\t\tthis.dataframes[frames[i].property].push(df);\n\t\t} else if (cframe && cframe.isObject()) {\n\t\t\tconst kid = new ObjectFrame(cframe.range, cframe.frame, frames[i].frame, this, frames[i]);\n\t\t\tif (typeof this.children[frames[i].property] === 'undefined') {\n\t\t\t\tthis.children[frames[i].property] = [];\n\t\t\t}\n\t\t\tthis.children[frames[i].property].push(kid);\n\t\t}\n\t}\n\treturn this;\n};\n\nObjectFrame.prototype.compare = function (pat) {\n\t// if(pat.range && pat.range !== this.range) return false;\n\tif (pat.domain && pat.domain !== this.cls) return false;\n\treturn true;\n};\n\n/**\n * If a class frame is present, it is returned for the given property\n * If no class frame is present and an instance frame is passed in the\n * this enables make it up as you go along editing\n * second argument a class frame will be created from the instance frame.\n */\nObjectFrame.prototype.getPropertyClassFrame = function (prop, instance) {\n\tif (this.classframes && typeof this.classframes === 'object' && typeof this.classframes[prop] === 'object') {\n\t\treturn this.classframes[prop];\n\t}\n\tif (instance) {\n\t\tconst cf = new ClassFrame(instance);\n\t\treturn cf;\n\t}\n\tif (this.dataframes && this.dataframes[prop]) {\n\t\treturn this.dataframes[prop][0];\n\t}\n\tif (this.children && this.children[prop]) {\n\t\tconst basis = this.children[prop][0].parentframe;\n\t\tif (basis) {\n\t\t\tconst cf = new ClassFrame(basis);\n\t\t\treturn cf;\n\t\t}\n\t}\n\treturn false;\n};\n\n/**\n * Missing properties are those that are present in the classframe,\n * but not instantiated in the current object frame\n * for this to work we need to load the frame with the associated classframe\n */\nObjectFrame.prototype.getMissingPropertyList = function () {\n\tconst missing = [];\n\tfor (const prop of Object.keys(this.classframes)) {\n\t\tif (!(this.dataframes[prop] || this.children[prop])) {\n\t\t\tconst cframe = this.getPropertyClassFrame(prop);\n\t\t\tconst newb = { label: cframe.getLabel(), value: prop };\n\t\t\tmissing.push(newb);\n\t\t}\n\t}\n\treturn missing;\n};\n\n/**\n * List of properties that are filled in the object\n */\nObjectFrame.prototype.getFilledPropertyList = function () {\n\tconst filled = [];\n\tfor (const prop of Object.keys(this.dataframes)) {\n\t\tconst cframe = this.getPropertyClassFrame(prop);\n\t\tconst newb = { label: cframe.getLabel(), value: prop };\n\t\tfilled.push(newb);\n\t}\n\tfor (const prop of Object.keys(this.children)) {\n\t\tconst cframe = this.getPropertyClassFrame(prop);\n\t\tconst newb = { label: cframe.getLabel(), value: prop };\n\t\tfilled.push(newb);\n\t}\n\treturn filled;\n};\n\nObjectFrame.prototype.fillFromSchema = function (newid) {\n\tif (newid) this.subjid = newid;\n\tconst dataframes = {};\n\tconst children = {};\n\tfor (const prop of Object.keys(this.classframes)) {\n\t\tconst pf = this.getPropertyClassFrame(prop);\n\t\tif (pf && pf.isData()) {\n\t\t\tif (pf.hasRestriction() && pf.restriction.min) {\n\t\t\t\tdataframes[prop] = [];\n\t\t\t\tfor (let i = 0; i < pf.restriction.min; i += 1) {\n\t\t\t\t\tdataframes[prop].push(pf.createEmpty(newid));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdataframes[prop] = [pf.createEmpty(newid)];\n\t\t\t}\n\t\t} else if (pf && pf.isObject() && !pf.isClassChoice()) {\n\t\t\tif (pf.hasRestriction() && pf.restriction.min) {\n\t\t\t\tchildren[prop] = [];\n\t\t\t\tfor (let i = 0; i < pf.restriction.min; i += 1) {\n\t\t\t\t\tconst empty = pf.createEmpty(FrameHelper.genBNID());\n\t\t\t\t\tchildren[prop].push(empty);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst empty = pf.createEmpty(FrameHelper.genBNID());\n\t\t\t\tchildren[prop] = [empty];\n\t\t\t}\n\t\t} else if (pf.isClassChoice()) {\n\t\t\tconst clss = pf.getClassChoices();\n\t\t\tif (clss && clss.length) {\n\t\t\t\tconst empty = pf.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\t\tchildren[prop] = [empty];\n\t\t\t}\n\t\t}\n\t}\n\tthis.dataframes = dataframes;\n\tthis.children = children;\n\tthis.originalFrames = [];\n\tfor (const prop of Object.keys(this.dataframes)) {\n\t\tfor (let i = 0; i < this.dataframes[prop].length; i += 1) {\n\t\t\tthis.originalFrames.push(this.dataframes[prop][i].getAsFrame());\n\t\t}\n\t}\n\tfor (const prop of Object.keys(this.children)) {\n\t\tfor (let i = 0; i < this.children[prop].length; i += 1) {\n\t\t\tthis.originalFrames.push(this.children[prop][i].getAsFrame(prop, this));\n\t\t}\n\t}\n\treturn this;\n};\n\nObjectFrame.prototype.clone = function (newid) {\n\tconst dataframes = {};\n\tconst children = {};\n\tconst cloned = new ObjectFrame(this.cls, false, false, this.parent);\n\tcloned.classframes = this.classframes;\n\tcloned.subjid = newid;\n\tif (this.dataframes && typeof this.dataframes === 'object') {\n\t\tfor (const prop of Object.keys(this.dataframes)) {\n\t\t\tconst pf = this.getPropertyClassFrame(prop);\n\t\t\tif (pf.isData()) {\n\t\t\t\tdataframes[prop] = [];\n\t\t\t\tfor (let i = 0; i < this.dataframes[prop].length; i += 1) {\n\t\t\t\t\tconst clonedval = pf.clone(newid, this.dataframes[prop][i]);\n\t\t\t\t\tdataframes[prop].push(clonedval);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (this.children && typeof this.children === 'object') {\n\t\tfor (const prop of Object.keys(this.children)) {\n\t\t\t// const pf = this.getPropertyClassFrame(prop);\n\t\t\tfor (let i = 0; i < this.children[prop].length; i += 1) {\n\t\t\t\tconst kid = this.children[prop][i];\n\t\t\t\tif (typeof children[prop] === 'undefined') children[prop] = [];\n\t\t\t\tconst kidclone = kid.clone(FrameHelper.genBNID());\n\t\t\t\tchildren[prop].push(kidclone);\n\t\t\t}\n\t\t}\n\t}\n\tcloned.dataframes = dataframes;\n\tcloned.children = children;\n\treturn cloned;\n};\n\n\n/**\n * Returns an array of the child object frames for a given property\n * or false if there is no such property\n */\nObjectFrame.prototype.getChildren = function (prop) {\n\tif (prop && typeof this.children[prop] !== 'undefined') {\n\t\treturn this.children[prop];\n\t}\n\treturn false;\n};\n\n/**\n * Returns a child frame with a particular id\n * If the second parameter is included, it will only look in that specific property\n * Otherwise searches all properties for the child\n */\nObjectFrame.prototype.getChild = function (childid, prop) {\n\tif (prop && typeof this.children[prop] !== 'undefined') {\n\t\tconst kids = this.children[prop];\n\t\tfor (let i = 0; i < kids.length; i += 1) {\n\t\t\tif (kids[i].subjid === childid) return kids[i];\n\t\t}\n\t}\n\tif (!prop) {\n\t\tfor (const key of Object.keys(this.children)) {\n\t\t\tfor (let i = 0; i < this.children[key].length; i += 1) {\n\t\t\t\tif (this.children[key][i].subjid === childid) return this.children[key][i];\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.getDataFrames = function (prop) {\n\tif (prop && typeof this.dataframes[prop] !== 'undefined') {\n\t\treturn this.dataframes[prop];\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.removeProperty = function (prop) {\n\tif (typeof this.dataframes[prop] !== 'undefined') {\n\t\tdelete (this.dataframes[prop]);\n\t} else if (typeof this.children[prop] !== 'undefined') {\n\t\tdelete (this.children[prop]);\n\t}\n};\n\nObjectFrame.prototype.addProperty = function (prop, cls) {\n\tconst cframe = this.getPropertyClassFrame(prop);\n\tif (cframe.isData()) {\n\t\tconst df = cframe.copy();\n\t\tdf.set('');\n\t\tif (typeof this.dataframes[prop] === 'undefined') {\n\t\t\tthis.dataframes[prop] = [];\n\t\t}\n\t\tthis.dataframes[prop].push(df);\n\t\treturn df;\n\t}\n\tif (cframe.isObject()) {\n\t\tif (typeof this.children[prop] === 'undefined') {\n\t\t\tthis.children[prop] = [];\n\t\t}\n\t\tif (!cframe.isClassChoice()) {\n\t\t\tconst empty = cframe.createEmpty(FrameHelper.genBNID());\n\t\t\tthis.children[prop].push(empty);\n\t\t\treturn empty;\n\t\t}\n\t\tif (cls) {\n\t\t\tconst empty = cframe.createEmptyChoice(cls, FrameHelper.genBNID());\n\t\t\tthis.children[prop].push(empty);\n\t\t\treturn empty;\n\t\t}\n\n\t\tconst clss = cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst empty = cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\tthis.children[prop].push(empty);\n\t\t\treturn empty;\n\t\t}\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.addPropertyValue = function (prop, value) {\n\tconst cframe = this.getPropertyClassFrame(prop);\n\tconst df = cframe.createEmpty();\n\tdf.set(value);\n\tthis.dataframes[prop].push(df);\n\treturn df;\n};\n\nObjectFrame.prototype.removePropertyValue = function (prop, value, index) {\n\tif (typeof this.dataframes[prop] !== 'undefined') {\n\t\tconst nfvals = [];\n\t\tfor (let i = 0; i < this.dataframes[prop].length; i += 1) {\n\t\t\tif (typeof index !== 'undefined' && index !== i) {\n\t\t\t\tthis.dataframes[prop][i].index = nfvals.length;\n\t\t\t\tnfvals.push(this.dataframes[prop][i]);\n\t\t\t} else if (typeof index === 'undefined' && this.dataframes[prop][i].contents !== value) {\n\t\t\t\tthis.dataframes[prop][i].index = nfvals.length;\n\t\t\t\tnfvals.push(this.dataframes[prop][i]);\n\t\t\t}\n\t\t}\n\t\tif (nfvals.length) {\n\t\t\tthis.dataframes[prop] = nfvals;\n\t\t} else {\n\t\t\tdelete (this.dataframes[prop]);\n\t\t}\n\t} else if (typeof this.children[prop] !== 'undefined') {\n\t\tconst kids = this.children[prop];\n\t\tconst nkids = [];\n\t\tfor (let i = 0; i < kids.length; i += 1) {\n\t\t\tif (kids[i].subjid !== value) {\n\t\t\t\tnkids.push(kids[i]);\n\t\t\t}\n\t\t\tif (nkids.length) {\n\t\t\t\tthis.children[prop] = nkids;\n\t\t\t} else {\n\t\t\t\tdelete (this.children[prop]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconsole.log(`No prop ${prop}`);\n\t}\n};\n\nObjectFrame.prototype.error = function (msg) {\n\tconsole.error(msg);\n};\n\nObjectFrame.prototype.isObject = function () { return true; };\nObjectFrame.prototype.isData = function () { return false; };\n\n\nfunction DataFrame(frame, parent) {\n\tthis.err = false;\n\tthis.parent = parent;\n\t// the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tif (frame) {\n\t\tthis.load(frame);\n\t}\n}\n\nDataFrame.prototype.isValidType = function (dt) {\n\tconst vtypes = ['datatypeProperty', 'objectProperty', 'restriction '];\n\tif (vtypes.indexOf(dt) === -1) return false;\n\treturn true;\n};\n\nDataFrame.prototype.load = function (frame) {\n\tif (typeof frame !== 'object') {\n\t\tthis.error('No frame passed to load');\n\t\treturn;\n\t}\n\t// all the meta-data carried in frames:\n\tthis.type = frame.type;\n\tthis.property = frame.property;\n\tthis.range = frame.range;\n\tthis.rangeValue = frame.rangeValue;\n\tthis.domain = frame.domain;\n\tthis.domainValue = frame.domainValue;\n\tthis.frame = frame.frame;\n\tthis.label = frame.label;\n\tthis.comment = frame.comment;\n\tconst { restriction } = frame;\n\tthis.restriction = false;\n\tif (restriction && typeof restriction === 'object') {\n\t\tthis.restriction = new Restriction(restriction);\n\t}\n};\n\nDataFrame.prototype.getAsFrame = function () {\n\t const ff = { type: this.type, property: this.property };\n\t if (this.range) ff.range = this.range;\n\t if (this.rangeValue) ff.rangeValue = this.rangeValue;\n\t if (this.domain) ff.domain = this.domain;\n\t if (this.domainValue) ff.domainValue = this.domainValue;\n\t if (this.frame) ff.frame = this.frame;\n\t if (this.label) ff.label = this.label;\n\t if (this.comment) ff.comment = this.comment;\n\t return ff;\n};\n\nDataFrame.prototype.hasRestriction = function () {\n\t if (this.restriction) {\n\t\t return this.restriction.hasCardRestriction();\n\t }\n\t return false;\n};\n\nDataFrame.prototype.copy = function (newid) {\n\tconst copy = new DataFrame(this, this.parent);\n\tif (newid) copy.domainValue = newid;\n\treturn copy;\n};\n\nDataFrame.prototype.getLabel = function () {\n\tlet lab = '';\n\tif (this.label && typeof this.label === 'object') lab = this.label['@value'];\n\tif (this.label && typeof this.label === 'string') lab = this.label;\n\t// always return something\n\tif (!lab && this.property) lab = FrameHelper.labelFromURL(this.property);\n\tif (!lab) lab = FrameHelper.labelFromURL(this.cls);\n\treturn lab;\n};\n\nDataFrame.prototype.getType = function () {\n\tif (this.range) return this.range;\n\tif (this.rangeValue && this.rangeValue.type) return this.rangeValue.type;\n\treturn false;\n};\n\nObjectFrame.prototype.getLabel = DataFrame.prototype.getLabel;\n\nDataFrame.prototype.getComment = function () {\n\tlet comment = '';\n\tif (this.comment && typeof this.comment === 'object') comment = this.comment['@value'];\n\tif (this.comment && typeof this.comment === 'string') comment = this.comment;\n\treturn comment;\n};\n\nObjectFrame.prototype.getComment = DataFrame.prototype.getComment;\n\n\nDataFrame.prototype.error = function (msg) {\n\tif (msg)\tthis.err = msg;\n\treturn this.err;\n};\n\nDataFrame.prototype.isValid = function () {\n\tif (!(this.type && this.isValidType(this.type))) {\n\t\tthis.error(`Missing or Illegal Frame Type ${this.type}`);\n\t\treturn false;\n\t}\n\tif (!(this.property)) {\n\t\tthis.error('Missing Frame Property');\n\t\treturn false;\n\t}\n\tif (!(this.domain)) {\n\t\tthis.error('Missing Frame Domain');\n\t\treturn false;\n\t}\n\tif (!(this.range)) {\n\t\tthis.error('Missing Frame Range');\n\t\treturn false;\n\t}\n\tif (this.isObjectProperty() && !(this.frame && typeof this.frame === 'object')) {\n\t\tthis.error('Missing Object Frame');\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nDataFrame.prototype.isObjectProperty = function () {\n\treturn this.type === 'objectProperty';\n};\n\nDataFrame.prototype.isDatatypeProperty = function () {\n\treturn this.type === 'datatypeProperty';\n};\n\nDataFrame.prototype.isLogic = function () {\n\tif (this.type === 'and' || this.type === 'or' || this.type === 'xor') {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nDataFrame.prototype.isRestriction = function () {\n\treturn this.type === 'restriction';\n};\n\nDataFrame.prototype.ftype = function () {\n\tif (this.isDocument()) return 'document';\n\tif (this.isDatatypeProperty()) return 'data';\n\tif (this.isChoice()) return 'oneOf';\n\tif (this.isObject()) return 'object';\n\tif (this.isLogic()) return 'logic';\n\tif (this.isClassChoice()) return 'class_choice';\n\treturn undefined;\n};\n\n\nDataFrame.prototype.isClassChoice = function () {\n\treturn (this.frame && this.frame.type === 'class_choice');\n};\n\nDataFrame.prototype.isString = function () {\n\tif (this.range === FrameHelper.getStdURL('xsd', 'string')) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nDataFrame.prototype.getChoiceOptions = function () {\n\tconst opts = [];\n\tfor (let i = 0; i < this.frame.elements.length; i += 1) {\n\t\tconst option = {};\n\t\tif (this.frame.elements[i].label) {\n\t\t\toption.label = this.frame.elements[i].label['@value'];\n\t\t} else {\n\t\t\toption.label = FrameHelper.labelFromURL(this.frame.elements[i].class);\n\t\t}\n\t\toption.value = this.frame.elements[i].class;\n\t\topts.push(option);\n\t}\n\treturn opts;\n};\n\nDataFrame.prototype.lang = function () {\n\treturn 'en';\n};\n\nDataFrame.prototype.isChoice = function () {\n\treturn (this.frame && this.frame.type === 'oneOf');\n};\n\nDataFrame.prototype.isDocument = function () {\n\treturn (this.frame && this.frame.type === 'document');\n};\n\nDataFrame.prototype.isData = function () {\n\treturn (this.isDocument() || this.isChoice() || this.isDatatypeProperty());\n};\n\nDataFrame.prototype.isObject = function () {\n\treturn (this.isObjectProperty() && this.frame && !(this.isChoice() || this.isDocument()));\n};\n\nDataFrame.prototype.getTypeShorthand = function () {\n\tif (this.isDocument()) return 'document';\n\tif (this.isChoice()) return 'choice';\n\tconst sh = FrameHelper.getShorthand(this.getType());\n\treturn (sh || this.getType());\n};\n\nDataFrame.prototype.get = function () {\n\tif (this.contents) {\n\t\treturn this.contents;\n\t}\n\tif (this.isDatatypeProperty() && this.rangeValue && typeof this.rangeValue['@value'] !== 'undefined') {\n\t\treturn this.rangeValue['@value'];\n\t}\n\tif (this.isChoice() || this.isDocument()) {\n\t\treturn this.frame.domainValue;\n\t}\n\treturn '';\n};\n\nDataFrame.prototype.set = function (value, normalizer) {\n\tif (normalizer) value = normalizer(value, this);\n\tthis.contents = value;\n\tif (this.isChoice() || this.isDocument()) {\n\t\tthis.frame.domainValue = value;\n\t}\n\tif (this.isDatatypeProperty() && this.rangeValue) {\n\t\tthis.rangeValue['@value'] = value;\n\t}\n};\n\nDataFrame.prototype.clear = function () {\n\tif (this.isDocument() || this.isChoice() || this.isDatatypeProperty()) {\n\t\tthis.set('');\n\t}\n};\n\nfunction ClassFrame(frame, parent) {\n\tthis.err = false;\n\tthis.parent = parent;\n\tthis.children = {};\n\t// the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tif (frame) {\n\t\tthis.load(frame);\n\t}\n}\n\nClassFrame.prototype = DataFrame.prototype;\n\nClassFrame.prototype.loadFromObjectFrame = function (par, child) {\n\t// all the meta-data carried in frames:\n\tthis.type = 'objectProperty';\n\tthis.property = par.property;\n\tthis.range = par.range;\n\tthis.rangeValue = child.subjid;\n\tthis.domain = par.cls;\n\tthis.domainValue = par.subjid;\n\tthis.label = par.getLabel();\n\tthis.comment = par.getComment();\n\tthis.restriction = par.restriction;\n};\n\nClassFrame.prototype.createEmptyChoice = function (cls, newid) {\n\tconst cf = this.getChosenClassFrames(cls);\n\tconst objframe = new ObjectFrame(cls);\n\tif (newid) objframe.subjid = newid;\n\tobjframe.loadClassFrames(cf);\n\tconst fframe = objframe.fillFromSchema();\n\treturn fframe;\n};\n\nClassFrame.prototype.getChosenClassFrames = function (chosen) {\n\tlet nc = [];\n\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\tfor (let j = 0; j < this.frame.operands[i].length; j += 1) {\n\t\t\tif (chosen === this.frame.operands[i][j].domain) {\n\t\t\t\tnc = nc.concat(this.frame.operands[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\treturn nc;\n};\n\nClassFrame.prototype.createEmpty = function (newid) {\n\tif (this.isObject()) {\n\t\tconst objframe = new ObjectFrame(this.range);\n\t\tif (newid) objframe.subjid = newid;\n\t\tobjframe.loadClassFrames(this.frame);\n\t\tconst fframe = objframe.fillFromSchema();\n\t\treturn fframe;\n\t}\n\tif (this.isData()) {\n\t\tconst dataframe = this.copy();\n\t\tdataframe.set('');\n\t\treturn dataframe;\n\t}\n\treturn undefined;\n};\n\nClassFrame.prototype.cloneDataFrame = function (newid, other) {\n\treturn other;\n};\n\nClassFrame.prototype.clone = function (newid, other) {\n\tif (this.isObject()) {\n\t\tconsole.log('cannot clone class frame');\n\t} else if (this.isData()) {\n\t\treturn this.cloneDataFrame(newid, other);\n\t}\n\treturn undefined;\n};\n\nClassFrame.prototype.getClassChoices = function () {\n\tconst choices = [];\n\tif (this.frame.operands) {\n\t\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\t\tfor (let j = 0; j < this.frame.operands[i].length; j += 1) {\n\t\t\t\tconst domcls = this.frame.operands[i][j].domain;\n\t\t\t\tif (domcls && choices.indexOf(domcls) === -1) {\n\t\t\t\t\tchoices.push(domcls);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn choices;\n};\n\nClassFrame.prototype.getChosenClassFrame = function (chosen) {\n\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\tconst operand = this.frame.operands[i];\n\t\tif (operand.length) {\n\t\t\tfor (let j = 0; j < operand.length; j += 1) {\n\t\t\t\tif (operand[j] && (chosen === operand[j].domain)) {\n\t\t\t\t\tconst cf = new ClassFrame(operand);\n\t\t\t\t\treturn cf;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (operand.range && chosen === operand.range) {\n\t\t\tconst cf = new ClassFrame(operand);\n\t\t\treturn cf;\n\t\t}\n\t}\n\treturn false;\n};\n\nClassFrame.prototype.getChosenFrame = function (dataframe) {\n\treturn dataframe;\n};\n\n\nfunction Restriction(restriction) {\n\tthis.min = 0;\n\tthis.max = 0;\n\tif (restriction) this.loadRestriction(restriction);\n}\n\nRestriction.prototype.hasCardRestriction = function () {\n\tif (this.min === 0 && this.max === 0) return false;\n\treturn true;\n};\n\nRestriction.prototype.loadRestriction = function (restriction) {\n\tif (typeof restriction.cardinality !== 'undefined') {\n\t\tthis.max = restriction.cardinality;\n\t\tthis.min = restriction.cardinality;\n\t} else if (typeof restriction.maxCardinality !== 'undefined') {\n\t\tthis.max = restriction.maxCardinality;\n\t} else if (typeof restriction.minCardinality !== 'undefined') {\n\t\tthis.min = restriction.minCardinality;\n\t} else if (typeof restriction.type !== 'undefined' && restriction.type === 'and' && typeof restriction.operands === 'object') {\n\t\tfor (let i = 0; i < restriction.operands.length; i += 1) {\n\t\t\tconst nrest = new Restriction(restriction.operands[i]);\n\t\t\tif (this.max === 0 && nrest.max > 0) this.max = nrest.max;\n\t\t\telse if (this.max > 0 && nrest.max > 0 && nrest.max < this.max) this.max = nrest.max;\n\t\t\tif (this.min === 0 && nrest.min > 0) this.min = nrest.min;\n\t\t\telse if (this.min > 0 && nrest.min > 0 && nrest.min > this.min) this.min = nrest.min;\n\t\t}\n\t}\n};\n\nmodule.exports = ObjectFrame;\n","function Codemirror(text, format, config){\r\n  this.textdom = text;\r\n  this.mode = format;\r\n  this.darkMode = config.darkMode;\r\n  if(this.jsonldCheck(format)) this.mode = 'javascript';\r\n}\r\n\r\n/*\r\ntxtar    : editor is attached to textar\r\nmode     : format for highlighting, ex: json, html etc.\r\neditable : readOnly false/ nocursor is special value in code editor to set readonly true */\r\nCodemirror.prototype.colorizeTextArea = function(mode){\r\n    //initize auto complete\r\n    /*CodeMirror.commands.autocomplete = function(cm) {\r\n    cm.showHint({hint: CodeMirror.hint.anyword});\r\n    }*/\r\n\r\n    // initialise code editor on text area\r\n    var editor = CodeMirror.fromTextArea(this.textdom, {\r\n        mode                : this.mode,\r\n        firstLineNumber     : 1,\r\n        lineNumbers         : true,\r\n        styleActiveLine     : true,\r\n        lineWrapping        : true,\r\n        smartIndent         : true,\r\n        indentWithTabs      : true,\r\n        newlineAndIndent    : true,\r\n        autoCloseBrackets   : true,\r\n        matchBrackets       : {afterCursor: true},\r\n        extraKeys           : {\"Ctrl-F\": \"find\", \"Tab\": \"autocomplete\" },\r\n        refresh             : true\r\n    });\r\n\r\n    this.setCodemirrorSize(editor, mode);\r\n    editor.defaultCharWidth('20px');\r\n    if(this.darkMode) editor.setOption(\"theme\", 'erlang-dark');\r\n    else editor.setOption(\"theme\", 'neo');\r\n\r\n    return editor;\r\n} // colorizeTextArea()\r\n\r\n/*\r\n  set editor size according to screens\r\n  editor : code mirror editor Object\r\n  mode   : editor being viewed from schema/ doc/ query page*/\r\nCodemirror.prototype.setCodemirrorSize = function(editor, mode){\r\n  switch(mode){\r\n    case 'query':\r\n      editor.setSize('800', '400');\r\n    break;\r\n    case 'schema':\r\n      editor.setSize('1200', '1550');\r\n    break;\r\n    case 'document':\r\n     editor.setSize('765', '500');\r\n    break;\r\n    case 'api-doc':\r\n        editor.setSize('800', '500');\r\n    break;\r\n  } // switch(mode)\r\n} // setCodemirrorSize()\r\n\r\n// updateTextArea(): highlights new changes on editor\r\nCodemirror.prototype.updateTextArea = function(editor){\r\n  editor.save();\r\n  setTimeout(function() {\r\n      editor.refresh();\r\n  },1);\r\n  // save changes of code mirror editor\r\n  editor.on('change', function(){\r\n    editor.save();\r\n  });\r\n} //updateTextArea()\r\n\r\n/*\r\ncolorizePre() to colorise pre tags (read only mode)\r\ntext (string)    : The document to run through the highlighter.\r\nmode (mode spec) : format to highlight color\r\noutput (DOM node): The tokens will be converted to spans as in an editor,\r\n                   and inserted into the node (through innerHTML).*/\r\nCodemirror.prototype.colorizePre = function(){\r\n  CodeMirror.runMode(this.textdom.innerText, this.mode, this.textdom);\r\n  if(this.darkMode)\r\n      var theme = 'cm-s-erlang-dark';\r\n  else var theme = 'cm-s-neo';\r\n  this.textdom.setAttribute('class', 'CodeMirror CodeMirror-wrap ' + theme + ' terminus-wrap-text terminus-wrapper-height ');\r\n  return this.textdom;\r\n} // colorizePre()\r\n\r\nCodemirror.prototype.jsonldCheck = function(format){\r\n  if(format == 'jsonld') return true;\r\n}\r\n\r\nmodule.exports=Codemirror\r\n","/**\r\n * object renderer binds to object frame - provides filters, sorts and manipulations of underlying object frame\r\n * and coordinates viewer to draw updates\r\n\r\n * Object Renderer - provides sorting / filtering / state management of objects\r\n * @param obj ObjectFrame object - contains underlying data and frame structure\r\n * @param parent PropertyRenderer - property that owns this object (if any)\r\n * @param options options json\r\n * @returns\r\n */\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\nconst RenderingMap = require('./RenderingMap');\r\nconst ValueRenderer = require('./ValueRenderer');\r\nconst ObjectViewer = require('./ObjectViewer');\r\nconst PropertyViewer = require('./PropertyViewer');\r\nconst HTMLDataViewer = require('./DataViewer');\r\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\r\n\r\nfunction PropertyRenderer(prop, parent, options){\r\n\tthis.predicate = prop;\r\n\tthis.parent = parent;\r\n\tthis.cframe = this.parent.objframe.getPropertyClassFrame(this.predicate);\r\n\tthis.originalValues = false;\r\n\tthis.changed = false;\r\n\tthis.values = [];\r\n\tthis.renderer_type = \"property\";\r\n\tthis.options = this.setOptions(options);\r\n}\r\n\r\nPropertyRenderer.prototype.setOptions = function(options){\r\n\treturn TerminusDashboard.RenderingMap.decorateRenderer(options, this);\r\n}\r\n\r\nPropertyRenderer.prototype.getOptionsForChild = function(){\r\n\tvar opts = {};\r\n\tif(this.options.features){ opts.features = this.options.features };\r\n\tif(this.options.controls){ opts.controls = this.options.controls};\r\n\treturn this.options;\r\n}\r\n\r\nPropertyRenderer.prototype.getOptionsForValue = function(df, index){\r\n\treturn this.getOptionsForChild();\r\n}\r\n\r\nPropertyRenderer.prototype.getOptionsForObject = function(objframe){\r\n\treturn this.getOptionsForChild();\r\n}\r\n\r\n\r\nPropertyRenderer.prototype.render = function(viewer){\r\n \tthis.buildValueRenderers();\r\n \tif(this.cframe && this.cframe.property){\r\n \t\tthis.viewer = (viewer ? viewer : this.getViewerForProperty());\r\n \t\tfor(var i = 0; i<this.values.length; i++){\r\n \t\t\tvar renderedval = this.values[i].render();\r\n \t\t\tif(renderedval && this.showFeature(\"body\")) this.viewer.addRenderedValue(renderedval);\r\n \t\t}\r\n \t\treturn this.viewer.render();\r\n \t}\r\n} \r\n\r\n/*\r\n * Creates the array of object renderer or value renderer objects corresponding to the property values. \r\n */\r\nPropertyRenderer.prototype.buildValueRenderers = function(){\r\n \tvar adorig = (this.originalValues === false ? true : false);\r\n \tthis.cframe = this.parent.objframe.getPropertyClassFrame(this.predicate);\r\n \tif(!this.cframe){\r\n \t\tconsole.error(\"No frame for \" + this.property() + \" id: \" + this.subject());\r\n \t\treturn false;\r\n \t}\r\n \tif(this.cframe && this.cframe.isData()){\r\n \t\tvar dataframes = this.getDataFramesToRender();\r\n \t\tif(dataframes.length == 0){\r\n \t\t\talert(this.predicate);\r\n \t\t}\r\n \t\tvar vals = [];\r\n \t\tfor(var i = this.values.length; i<dataframes.length; i++){\r\n \t\t\tvar vr = new ValueRenderer(dataframes[i], i, this, this.getOptionsForValue(dataframes[i], i));\r\n \t\t\tthis.values.push(vr);\r\n \t\t\tvals.push(vr.value());\r\n \t\t}\r\n \t\tif(adorig) this.originalValues = vals;\r\n \t}\r\n \telse {\r\n \t\tif(adorig) this.originalValues = [];\r\n \t\tvar kids = this.getChildrenToRender();\r\n \t\tif(kids && kids.length){\r\n \t\t\tfor(var i = this.values.length; i<kids.length; i++){\r\n \t\t\t\tvar kidf = new ObjectRenderer(kids[i], this, this.getOptionsForObject(kids[i]));\r\n \t\t\t\tif(adorig) this.originalValues.push(kidf.subject());\r\n \t\t\t\tthis.values.push(kidf);\r\n \t\t\t}\r\n \t\t}\r\n \t}\r\n}\r\n\r\n/*\r\n * Returns the array of values that should be rendered (enables value filtering)\r\n */\r\nPropertyRenderer.prototype.getDataFramesToRender = function(options){\r\n \tvar allvals = this.parent.objframe.getDataFrames(this.property());\r\n \treturn allvals;\r\n}\r\n\r\n/*\r\n * Returns the array of child / objects that should be rendered (enables value filtering)\r\n */\r\nPropertyRenderer.prototype.getChildrenToRender = function(options){\r\n \tif(TerminusClient.FrameHelper.viewIncludesChildren(this.view, \"property\")){\r\n \t\tvar allkids = this.parent.objframe.getChildren(this.property());\r\n \t}\r\n \telse {\r\n \t\tvar allkids = [];\r\n \t}\r\n \treturn allkids;\r\n}\r\n\r\nPropertyRenderer.prototype.redraw = function(){\r\n \tthis.viewer.clear();\r\n \tthis.render(this.viewer, \"x\");\r\n \t//alert(this.values.length);\r\n}\r\n\r\nPropertyRenderer.prototype.extract = function(){\r\n \tvar extracts = [];\r\n \tfor(var i = 0; i<this.values.length; i++){\r\n \t\tvar val = this.values[i].extract();\r\n \t\tif(val !== \"\" && val !== false && typeof val != \"undefined\") extracts.push(val);\r\n \t}\r\n \tif(this.cframe.isData()){\r\n \t\treturn extracts;\r\n \t}\r\n \telse {\r\n \t\treturn extracts;\r\n \t\tvar extr = {};\r\n \t\tfor(var i = 0; i<extracts.length; i++){\r\n \t\t\tfor(var subjid in extracts[i]){\r\n \t\t\t\textr[subjid] = extracts[i][subjid];\r\n \t\t\t}\r\n \t\t}\r\n \t\treturn extr;\r\n \t}\r\n}\r\n\r\n/*\r\n * simple wrapper functions\r\n */\r\nPropertyRenderer.prototype.currentViewer = function(){return this.viewerType;}\r\nPropertyRenderer.prototype.property = function(){return this.predicate;}\r\nPropertyRenderer.prototype.subject = function(){return (this.parent ? this.parent.subject() : false);};\r\nPropertyRenderer.prototype.depth = function(){return (this.parent ? this.parent.depth() : false);};\r\nPropertyRenderer.prototype.subjectClass = function(){return (this.parent ? this.parent.subjectClass() : false);};\r\nPropertyRenderer.prototype.updated = function(){ return (this.parent ? this.parent.childUpdated() : false);};\r\nPropertyRenderer.prototype.range = function(){\treturn (this.cframe ? this.cframe.range : \"\");};\r\nPropertyRenderer.prototype.getLabel = function(){ return (this.cframe ? this.cframe.getLabel() : \"\" );};\r\nPropertyRenderer.prototype.getComment = function(){ return (this.cframe ? this.cframe.getComment() : false);}\r\nPropertyRenderer.prototype.load = function(link){ return (this.parent ? this.parent.load(link) : false);}\r\nPropertyRenderer.prototype.hasCardinalityRestriction = function(){return (this.cframe ? this.cframe.hasRestriction() : false);};\r\nPropertyRenderer.prototype.getRestriction = function(){return (this.cframe ? this.cframe.restriction : false);};\r\nPropertyRenderer.prototype.isClassChoice = function(){\treturn (this.cframe ? this.cframe.isClassChoice() : false);};\r\nPropertyRenderer.prototype.currentFacet = function(){\treturn this.facet;} ;\r\nPropertyRenderer.prototype.save = function(){ return (this.parent ? this.parent.save() : false);};\r\n\r\nPropertyRenderer.prototype.cancel = function(){\r\n\tthis.reset();\r\n\tthis.setMode(\"view\");\r\n}\r\n\r\nPropertyRenderer.prototype.getAvailableClassChoices = function(){ \r\n\tif(this.cframe){\r\n\t\tvar cf = this.cframe.getClassChoices();\r\n\t\tif(this.parent){\r\n\t\t\tvar choices = [];\r\n\t\t\tfor(var i = 0; i < cf.length; i++){\r\n\t\t\t\tvar clsmeta = this.parent.getClassMeta(cf[i]);\r\n\t\t\t\tvar lab = (clsmeta ? HTMLFrameHelper.getVariableValueFromBinding(\"Label\", clsmeta) : false);\r\n\t\t\t\tvar lab = (lab ? lab : TerminusClient.FrameHelper.labelFromURL(cf[i]));\r\n\t\t\t\tchoices.push({value: cf[i], label: lab});\r\n\t\t\t}\r\n\t\t\treturn choices;\r\n\t\t}\r\n\t\treturn cf;\r\n\t\t\r\n\t}\r\n\treturn false;\r\n};\r\n\r\n\r\nPropertyRenderer.prototype.delete = function(){\r\n\tvar prop = this.predicate;\r\n\tif(prop){\r\n\t\tthis.reset();\r\n\t\tthis.parent.deleteProperty(prop);\t\r\n\t\tthis.parent.redraw();\r\n\t}\r\n}\r\n\r\nPropertyRenderer.prototype.add = function(view){\r\n\tthis.parent.addProperty(this.property(), view);\r\n\tthis.updated();\r\n\tif(view) {\r\n\t\tthis.values[this.values.length-1].setMode(view);\r\n\t\tthis.values[this.values.length-1].setNew();\r\n\t}\r\n\tthis.redraw();\r\n}\r\n\r\nPropertyRenderer.prototype.goToValue = function(index){\r\n\tthis.viewer.goTo(this.subject(), this.property(), index);\r\n}\r\n\r\nPropertyRenderer.prototype.addClass = function(cls){\r\n\tthis.parent.addPropertyClass(this.property(), cls);\r\n\tthis.updated();\r\n\tvar newb = this.values[this.values.length-1];\r\n\tif(newb){\r\n\t\tnewb.setNew();\r\n\t\tnewb.setMode(\"edit\");\r\n\t}\r\n\tthis.redraw();\r\n\tif(newb) this.viewer.goTo(newb.subject());\r\n}\r\n\r\nPropertyRenderer.prototype.reset = function(){\r\n\tthis.parent.objframe.reset(this.predicate);\r\n\tif(this.cframe && this.cframe.isData()){\r\n\t\tfor(var i = 0; i<this.values.length; i++){\r\n\t\t\tthis.values[i].reset();\r\n\t\t}\r\n\t\tthis.values = [];\r\n\t}\r\n\telse {\r\n\t\tvar nvals = [];\r\n\t\tfor(var i = 0; i<this.originalValues.length; i++){\r\n\t\t\tfor(var j = 0; j<this.values.length; j++){\r\n\t\t\t\tthis.values[j].reset();\r\n\t\t\t\tif(this.values[j].subject() == this.originalValues[i]){\r\n\t\t\t\t\tnvals.push(this.values[j]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.values = nvals;\r\n\t}\r\n\tthis.redraw();\t\r\n\tthis.parent.childUpdated();\r\n}\r\n\r\nPropertyRenderer.prototype.deletePropertyValue = function(value, index){\r\n\tthis.parent.objframe.removePropertyValue(this.property(), value, index);\r\n\tvar nvals = [];\r\n\tfor(var i = 0; i<this.values.length; i++){\r\n\t\tif(typeof index == \"undefined\"){\r\n\t\t\tif(this.values[i].subject() == value){\r\n\t\t\t\tthis.values[i].reset();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnvals.push(this.values[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(i != index){\r\n\t\t\tthis.values[i].index = nvals.length;\r\n\t\t\tnvals.push(this.values[i]);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.values[i].reset();\r\n\t\t}\r\n\t}\r\n\tthis.values = nvals;\r\n\tthis.parent.childUpdated();\r\n\tthis.parent.redraw();\r\n}\r\n\r\nPropertyRenderer.prototype.addPropertyValue = function(value){\r\n\tthis.updated();\r\n\treturn this.parent.objframe.addPropertyValue(this.property(), value);\r\n}\r\n\r\n/*\r\n * Checks to see if an action (add, clone, delete) which affects the cardinality of the property is allowed by cardinality rules.\r\n */\r\nPropertyRenderer.prototype.cardControlAllows = function(action){\r\n\tif(this.cframe.hasRestriction()){\r\n\t\tvar rest = this.cframe.restriction;\r\n\t\tvar currentnum = this.values.length;\r\n\t\tif(action == \"add\" || action == \"clone\"){\r\n\t\t\tif(rest.max && currentnum >= rest.max){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(action == \"delete\" && (rest.min)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nPropertyRenderer.prototype.isNew = function(){\r\n\tif(this.new_property){\r\n\t\treturn true;\r\n\t}\r\n\treturn this.parent.isNew();\r\n}\r\n\r\nPropertyRenderer.prototype.setNew = function(){\r\n\tthis.new_property = true;\r\n}\r\n\r\n\r\nPropertyRenderer.prototype.isUpdated = function(){\r\n\tif(this.values.length != this.originalValues.length) return true;\r\n\tfor(var i = 0 ; i < this.values.length; i++){\r\n\t\tif(this.cframe && this.cframe.isData()){\r\n\t\t\tif(this.values[i].value() != this.originalValues[i]){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif(this.values[i].subject() != this.originalValues[i]) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif(this.values[i].isUpdated()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nPropertyRenderer.prototype.childUpdated = function(){\r\n\tthis.viewer.redrawHeader();\r\n\tif(this.parent) this.parent.childUpdated();\r\n}\r\n\r\n\r\n/**\r\n * Sets mode of viewer to either \"view\" or \"edit\"\r\n */\r\nPropertyRenderer.prototype.setMode = function(mode){\r\n\tthis.mode = mode;\r\n\tfor(var i = 0; i<this.values.length; i++){\r\n\t\tthis.values[i].setMode(mode);\r\n\t}\r\n\tthis.redraw();\r\n}\r\n\r\n/*\r\n * Jump to property value\r\n */\r\nPropertyRenderer.prototype.getViewableValues = function(){\r\n\tvar viewables = [];\r\n\tif(this.cframe && this.cframe.isData())\r\n\tfor(var i = 0; i<this.values.length; i++){\r\n\t\tvar sum = this.values[i].getSummary();\r\n\t\tvar lab = sum.long;\r\n\t\tviewables.push({label: lab, value: i});\r\n\t}\r\n\treturn viewables;\r\n}\r\n\r\nPropertyRenderer.prototype.hideDisabledControls = function(){\r\n\treturn this.hide_disabled_controls;\r\n}\r\n\r\nPropertyRenderer.prototype.setFacet = function(facet, nocascade){\r\n\tthis.facet = facet;\r\n\tif(!nocascade){\r\n\t\tfor(var i = 0; i<this.values.length; i++){\r\n\t\t\tthis.values[i].parentFacetChange(facet);\r\n\t\t}\r\n\t}\r\n\tthis.redraw();\r\n}\r\n\r\nPropertyRenderer.prototype.parentFacetChange = function(facet){\r\n\tif(facet == 'page'){\r\n\t\tif(!(this.facet == \"page\" || this.facet == \"multiline\")){\r\n\t\t\tthis.setFacet('multiline');\r\n\t\t}\r\n\t}\r\n\tif(facet == 'line'){\r\n\t\tthis.setFacet(\"label\");\r\n\t}\r\n\t\t\r\n}\r\n\r\n\r\n\r\nPropertyRenderer.prototype.getDefaultFacets = function(){\r\n\tvar defs = {\r\n\t\tpage: {\r\n\t\t\tlabel: \"Full Page\", value: \"page\", \r\n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"view\", \"viewer\"], \r\n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\r\n\t\t},\r\n\t\tmultiline: {\r\n\t\t\tlabel: \"Multiple Lines\", value: \"multiline\",\r\n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"view\", \"viewer\"], \r\n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\r\n\t\t},\r\n\t\tline: {\r\n\t\t\tlabel: \"Single Line\", value: \"line\",\r\n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\"], \r\n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\r\n\t\t},\r\n\t\tsummary: {\r\n\t\t\tlabel: \"Summary\", value: \"summary\",\r\n\t\t\tfeatures: [\"facet\", \"satus\", \"label\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\"], \r\n\t\t\tcontrols: [] \r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\tlabel: \"Label\", value: \"label\",\r\n\t\t\tfeatures: [\"facet\", \"status\", \"label\", \"summary\"],\r\n\t\t\tcontrols: []\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\tlabel: \"Snippet\", value: \"icon\",\r\n\t\t\tfeatures: [\"facet\", \"summary\"],\r\n\t\t\tcontrols: []\r\n\t\t}\r\n\t}\r\n\treturn defs;\t\r\n}\r\n\r\nPropertyRenderer.prototype.getAvailableFacets = function(){\r\n\treturn Object.values(this.facets);\r\n\tvar facets = [];\r\n\tfacets.push({label: \"Full Page\", value: \"page\"});\r\n\tfacets.push({label: \"Multiple Lines\", value: \"multiline\"});\r\n\tfacets.push({label: \"Single Line\", value: \"line\"});\r\n\tfacets.push({label: \"Summary\", value: \"summary\"});\r\n\tfacets.push({label: \"Label\", value: \"label\"});\r\n\tfacets.push({label: \"Snippet\", value: \"icon\"});\r\n\treturn facets;\r\n}\r\n\r\nPropertyRenderer.prototype.getContentOrientation = function(facet){\r\n\tif(this.currentFacet() == \"page\" || this.containsPage()){\r\n\t\treturn \"page\";\r\n\t}\r\n\tif(this.currentFacet() == \"line\" || this.currentFacet() == \"multiline\" || this.currentFacet() == \"summary\"){\r\n\t\treturn \"line\";\r\n\t}\r\n\treturn \"label\";\r\n}\r\n\r\n\r\nPropertyRenderer.prototype.getDefaultFacet = function(){\r\n\tif(this.cframe && this.cframe.isObject()){\r\n\t\treturn \"page\";\r\n\t}\r\n\treturn \"multiline\";\r\n}\r\n\r\n/*\r\n * Viewers for specific properties\r\n */\r\n\r\nPropertyRenderer.prototype.hide = function(){\r\n\tthis.setView(\"hidden\");\r\n}\r\n\r\nPropertyRenderer.prototype.show = function(){\r\n\tthis.setView(\"full\");\r\n}\r\n\r\nPropertyRenderer.prototype.setView = function(view){\r\n\tthis.view = view;\r\n\tthis.redraw();\r\n}\r\n\r\nPropertyRenderer.prototype.getAvailableViewers = function(){\r\n\tif(this.mode == \"view\"){\r\n\t\treturn TerminusDashboard.RenderingMap.getAvailablePropertyViewers(this);\t\t\r\n\t}\r\n\treturn TerminusDashboard.RenderingMap.getAvailablePropertyEditors(this);\t\t\t\t\r\n}\r\n\r\nPropertyRenderer.prototype.nukeViewer = function(){\r\n\tthis.viewer.remove();\r\n}\r\n\r\nPropertyRenderer.prototype.containsPage = function(){\r\n\t//collapsed facets do not show their values\r\n\tif(this.currentFacet() == \"icon\" || this.currentFacet() == \"label\") return false;\r\n\tfor(var i = 0; i<this.values.length; i++){\r\n\t\tif(this.values[i].facet == \"page\") {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nPropertyRenderer.prototype.getViewerForProperty = function(ptype){\r\n\tif(this.mode == \"edit\"){\r\n\t\treturn new PropertyViewer.HTMLPropertyViewer(this);\r\n\t}\r\n\treturn new PropertyViewer.HTMLPropertyViewer(this);\r\n}\r\n\r\nPropertyRenderer.prototype.getPropertyHeaderViewer = function(){\r\n\treturn new PropertyViewer.HTMLPropertyHeaderViewer();\r\n}\r\n\r\nPropertyRenderer.prototype.getSummary = function(){\r\n\tvar status = \"ok\";\r\n\tif(this.isNew()) status = \"new\";\r\n\telse if(this.isUpdated()) status = \"updated\";\r\n\tvar ret = {\r\n\t\tstatus: status,\r\n\t\tvalcount: this.values.length\r\n\t};\r\n\tret.long = ((ret.valcount != 1) ? \"(\" + ret.valcount + \") \" : \"\");\r\n\tfor(var i = 0; i<this.values.length; i++){\r\n\t\tvsum = this.values[i].getSummary();\r\n\t\tret.long += vsum.long;\r\n\t\tif(i < this.values.length-1) ret.long += \", \";\r\n\t}\r\n\treturn ret;\t\r\n}\r\n\r\nPropertyRenderer.prototype.getFeaturesForFacet = function(facet){\r\n\treturn this.facets[facet].features.concat(this.facets[facet].controls);\r\n}\r\n \r\nPropertyRenderer.prototype.showFeature = function(which){\r\n\tif(this.features.indexOf(which) == -1 && this.controls.indexOf(which) == -1) {\r\n\t\treturn false;\r\n\t}\r\n\tvar cardcontrols = [\"delete\", \"clone\", \"add\"];\r\n\tif(cardcontrols.indexOf(which) != -1){\r\n\t\tif(!this.cardControlAllows(which)) return false;\r\n\t}\r\n\tvar updcontrols = [\"update\", \"reset\"];\r\n\tif(this.hideDisabledControls() && updcontrols.indexOf(which) != -1 ){\r\n\t\tif(!this.isUpdated()){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tif(which == 'hide' && this.view == \"hidden\") return false;\r\n\tif(which == 'show' && this.view != \"hidden\") return false;\r\n\tvar fets = this.getFeaturesForFacet(this.facet);\r\n\treturn (fets.indexOf(which) != -1);\r\n}\r\n\r\nfunction ObjectRenderer(obj, parent, options){\r\n\tthis.objframe = obj;\r\n\tthis.parent = parent;\r\n\tthis.properties = {};\r\n\tthis.originalProperties = false;\r\n\tthis.newProperties = [];\r\n\tthis.renderer_type = \"object\";\r\n\tthis.options = this.setOptions(options);\r\n}\r\n\r\n//options has to include mode, viewer, facet, controls, features, hide_disabled_controls\r\n\r\nObjectRenderer.prototype.setOptions = function(options){\r\n\treturn TerminusDashboard.RenderingMap.decorateRenderer(options, this);\r\n}\r\n\r\nObjectRenderer.prototype.getOptionsForProperty = function(prop){\r\n\treturn this.options;\r\n}\r\n\r\nObjectRenderer.prototype.render = function(viewer){\r\n\tthis.buildPropertyRenderers();\r\n\tthis.viewer = (viewer ? viewer: this.getViewerForObject());\r\n\tfor(var prop in this.properties){\r\n\t\tvar renderedprop = this.properties[prop].render();\r\n\t\tif(renderedprop && this.showFeature(\"body\")) this.viewer.addRenderedProperty(prop, renderedprop);\r\n\t}\r\n\treturn this.viewer.render(this.view);\r\n}\r\n\r\nObjectRenderer.prototype.buildPropertyRenderers = function(){\r\n\tvar props = this.getPropertiesToRender();\r\n\tif(this.originalProperties === false) this.originalProperties = props;\r\n\tvar renders = {};\r\n\tfor(var j = 0; j<props.length; j++){\r\n\t\tif(typeof this.properties[props[j]] == \"undefined\"){\r\n\t\t\trenders[props[j]] = new PropertyRenderer(props[j], this, this.getOptionsForProperty(props[j]));\r\n\t\t}\r\n\t\telse {\r\n\t\t\trenders[props[j]] = this.properties[props[j]];\r\n\t\t}\r\n\t\tif(this.newProperties.indexOf(props[j]) != -1) {\r\n\t\t\trenders[props[j]].setNew(); \r\n\t\t\trenders[props[j]].mode = \"edit\"; \r\n\t\t}\r\n\t}\r\n\tthis.properties = renders;\r\n}\r\n\r\nObjectRenderer.prototype.subject = function(){\r\n\tif(this.objframe) return this.objframe.subjid;\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.subjectClass = function(){\r\n\tif(this.objframe) return this.objframe.cls;\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.getAvailableViewers = function(){\r\n\t//if(this.mode == \"view\"){\r\n\t//\treturn RenderingMap.getAvailableObjectViewers(this);\t\t\r\n\t//}\r\n\t//return RenderingMap.getAvailableObjectEditors(this);\t\t\t\t\r\n\treturn [\"html\", \"json\"];\r\n}\r\n\r\nObjectRenderer.prototype.depth = function(){\r\n\tif(this.parent) return (this.parent.depth() + 1);\r\n\treturn 0;\r\n}\r\n\r\n\r\nObjectRenderer.prototype.property = function(){\r\n\tif(this.parent) return this.parent.property();\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.parentObject = function(){\r\n\tif(this.parent && this.parent.parent && this.parent.parent.objframe){\r\n\t\treturn this.parent.parent.objframe;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.root = function(){\r\n\tif(this.parent) return false;\r\n\treturn true;\r\n}\r\n\r\nObjectRenderer.prototype.load = function(link){\r\n\tvar self = this;\r\n\tif(this.controller){\r\n\t\tthis.controller.ui.showDocument(link);\r\n\t}\r\n\telse if(this.parent) {\r\n\t\tthis.parent.load(link);\r\n\t}\r\n}\r\n\r\nObjectRenderer.prototype.copy = function(nkid){\r\n\tnkid = (nkid ? nkid : this.objframe);\r\n\tvar other = new ObjectRenderer(nkid, this.parent, this.options);\r\n\treturn other;\r\n}\r\n\r\nObjectRenderer.prototype.clone = function(){\r\n\tif(this.root()){\r\n\t\tthis.objframe = this.objframe.clone(\"_:\");\r\n\t\tthis.objframe.newDoc = true;\r\n\t\tthis.setMode(\"edit\");\r\n\t}\r\n\telse {\r\n\t\tvar nkid = this.objframe.clone(TerminusClient.FrameHelper.genBNID());\r\n\t\tvar parentobj = this.parentObject();\r\n\t\tvar prop = this.property();\r\n\t\tif(parentobj && prop){\r\n\t\t\tif(typeof parentobj.children[prop] == \"undefined\"){\r\n\t\t\t\tparentobj.children[prop] = [];\r\n\t\t\t}\r\n\t\t\tparentobj.children[prop].push(nkid);\r\n\t\t\tvar newrend = this.copy(nkid);\r\n\t\t\tthis.parent.values.push(newrend);\r\n\t\t}\r\n\t\tthis.parent.redraw();\r\n\t}\r\n}\r\n\r\nObjectRenderer.prototype.cancel = function(){\r\n\tthis.reset();\r\n\tthis.setMode(\"view\");\r\n}\r\n\r\nObjectRenderer.prototype.save = function(){\r\n\tif(this.controller){\r\n\t\tif(this.isNewDocument()){\r\n\t\t\tvar demandid = this.inputID();\r\n\t\t\tif(demandid == \"_:\") demandid = \"\";\r\n\t\t\tthis.controller.createDocument(demandid);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.controller.updateDocument();\r\n\t\t}\r\n\t}\r\n\telse if(this.parent) {\r\n\t\tthis.parent.save();\r\n\t}\r\n}\r\n\r\nObjectRenderer.prototype.delete = function(){\r\n\tvar dval = this.subject();\r\n\tif(this.controller && this.root()){\r\n\t\tif(!this.isNewDocument()){\r\n\t\t\tthis.controller.deleteDocument(dval);\r\n\t\t}\r\n\t\tthis.nukeViewer();\r\n\t}\r\n\telse {\r\n\t\tif(this.parent){\r\n\t\t\tthis.parent.deletePropertyValue(dval);\t\t\r\n\t\t\tthis.parent.redraw();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nObjectRenderer.prototype.reset = function(){\r\n\tthis.objframe.reset();\r\n\tvar nprops = {};\r\n\tfor(var i = 0; i<this.originalProperties.length; i++){\r\n\t\tvar prop = this.originalProperties[i];\r\n\t\tif(typeof this.properties[prop] == \"object\"){\r\n\t\t\tthis.properties[prop].reset();\r\n\t\t\tnprops[prop] = this.properties[prop];\r\n\t\t}\r\n\t}\r\n\tthis.properties = nprops;\r\n\tthis.redraw();\r\n}\r\n\r\nObjectRenderer.prototype.deleteProperty = function(prop){\r\n\tthis.objframe.removeProperty(prop);\r\n\tdelete(this.properties[prop]);\r\n\tthis.updated();\r\n}\r\n\r\nObjectRenderer.prototype.addProperty = function(prop){\r\n\tthis.objframe.addProperty(prop);\r\n\tthis.updated();\r\n\tthis.redraw();\r\n}\r\n\r\nObjectRenderer.prototype.addNewProperty = function(prop){\r\n\tthis.objframe.addProperty(prop);\r\n\tthis.updated();\r\n\tthis.newProperties.push(prop);\r\n\tthis.redraw();\r\n\tthis.goToProperty(prop);\r\n}\r\n\r\nObjectRenderer.prototype.addPropertyClass = function(prop, cls){\r\n\tthis.objframe.addProperty(prop, cls);\r\n\tthis.updated();\r\n}\r\n\r\nObjectRenderer.prototype.changeClass = function(cls){\r\n\tif(this.parent){\r\n\t\tthis.parent.addClass(cls);\t\t\r\n\t\tthis.parent.deletePropertyValue(this.subject());\t\t\r\n\t}\r\n}\r\n\r\nObjectRenderer.prototype.getClassMeta = function(cls){\r\n\tvar ctl = this.getController();\r\n\tif(ctl && ctl.classmeta && ctl.classmeta[cls]){\r\n\t\treturn ctl.classmeta[cls];\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.getController = function(){\r\n\tif(this.controller){\r\n\t\treturn this.controller;\r\n\t}\r\n\tif(this.parent && this.parent.parent){\r\n\t\treturn this.parent.parent.getController();\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.getClient = function(){\r\n\tif(this.controller){\r\n\t\treturn this.controller.getClient();\r\n\t}\r\n\telse {\r\n\t\tif(this.parent && this.parent.parent){\r\n\t\t\treturn(this.parent.parent.getClient())\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.inputID = function(){\r\n\tif(this.idDOM){\r\n\t\treturn this.idDOM.value;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.isNew = function(){\r\n\tif(this.new_object){\r\n\t\treturn true;\r\n\t}\r\n\tif(this.isPartOfNewDocument()){\r\n\t\treturn true;\r\n\t}\r\n\tif(this.parent) return this.parent.isNew();\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.setNew = function(){\r\n\tthis.new_object = true;\r\n}\r\n\r\nObjectRenderer.prototype.isUpdated = function(){\r\n\tvar i = 0;\r\n\tfor(var prop in this.properties){\r\n\t\tif(this.originalProperties[i] != prop) return true;\r\n\t\tif(this.properties[prop].isUpdated()) return true;\r\n\t\ti++;\t\t\r\n\t}\r\n\tif(i != this.originalProperties.length) return true;\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.childUpdated = function(){\r\n\tthis.viewer.redrawHeader();\r\n\tif(this.parent) this.parent.childUpdated();\r\n}\r\n\r\nObjectRenderer.prototype.updated = ObjectRenderer.prototype.childUpdated;\r\n\r\nObjectRenderer.prototype.isNewDocument = function(){\r\n\tif(this.root() && this.objframe.isnew()) return true;\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.isPartOfNewDocument = function(){\r\n\tif(this.isNewDocument()) return true;\r\n\tif(this.parent && this.parent.parent){\r\n\t\treturn this.parent.parent.isPartOfNewDocument();\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.setFacet = function(facet, nocascade){\r\n\tthis.facet = facet;\r\n\tif(!nocascade){\r\n\t\tfor(var prop in this.properties){\r\n\t\t\tthis.properties[prop].parentFacetChange(facet);\r\n\t\t}\r\n\t}\r\n\tif(this.parent){\r\n\t\tthis.parent.redraw();\r\n\t}\r\n\telse {\r\n\t\tthis.redraw();\r\n\t}\r\n}\r\n\r\nObjectRenderer.prototype.getDefaultFacets = function(){\r\n\tvar defs = {\r\n\t\tpage: {\r\n\t\t\tlabel: \"Full Page\", value: \"page\", \r\n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"body\", \"status\", \"facet\", \"view\", \"viewer\"],\r\n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"] \r\n\t\t},\r\n\t\tline: {\r\n\t\t\tlabel: \"Single Line\", value: \"line\",\r\n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"type\", \"body\", \"status\", \"facet\"], \r\n\t\t\tcontrols: [] \r\n\t\t},\r\n\t\tsummary: {\r\n\t\t\tlabel: \"Summary\", value: \"summary\",\r\n\t\t\tfeatures: [\"facet\", \"satus\", \"label\", \"type\", \"summary\", \"status\", \"facet\"], \r\n\t\t\tcontrols: [] \r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\tlabel: \"Label\", value: \"label\",\r\n\t\t\tfeatures: [\"facet\", \"status\", \"label\"],\r\n\t\t\tcontrols: []\r\n\t\t}\r\n\t}\r\n\treturn defs;\r\n}\r\n\r\nObjectRenderer.prototype.getAvailableFacets = function(){\r\n\treturn Object.keys(this.facets);\r\n}\r\n\r\nObjectRenderer.prototype.currentFacet = function(){\r\n\treturn this.facet;\r\n}\r\n\r\nObjectRenderer.prototype.getDefaultFacet = function(){\r\n\tif(!this.parent) return \"page\";\r\n\tvar pfacet = this.parent.currentFacet();\r\n\tif(pfacet == \"page\"){\r\n\t\treturn \"page\";\r\n\t}\r\n\tif(pfacet == \"multiline\") return \"line\";\r\n\tif(pfacet == \"line\") return \"summary\";\r\n\treturn \"label\";\r\n}\r\n\r\nObjectRenderer.prototype.parentFacetChange = function(pfacet){\r\n\tif(pfacet == \"page\") this.setFacet(\"page\");\r\n\tif(pfacet == \"multiline\") this.setFacet(\"summary\");\r\n\tif(pfacet == \"line\") this.setFacet(\"summary\");\r\n\tif(pfacet == \"summary\") this.setFacet(\"summary\");\r\n}\r\n\r\nObjectRenderer.prototype.getContentOrientation = function(){\r\n\tif(this.currentFacet() == \"page\"){\r\n\t\treturn \"page\";\r\n\t}\r\n\tif(this.currentFacet() == \"line\"){\r\n\t\treturn \"line\";\r\n\t}\r\n\treturn \"label\";\r\n}\r\n\r\nObjectRenderer.prototype.getLabel = function(){\r\n\tfor(var prop in this.properties){\r\n\t\tif(TerminusClient.FrameHelper.getShorthand(prop) == \"rdfs:label\" || prop == \"rdfs:label\"){\r\n\t\t\tvar prend = this.properties[prop];\r\n\t\t\tvar vrend = prend.values[0];\r\n\t\t\tif(vrend){\r\n\t\t\t\tvar sum = vrend.getSummary();\r\n\t\t\t\tif(sum.long != \"empty\") return sum.long;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar s = this.subject();\r\n\tif(s && s.substring(0, 2) == \"_:\"){\r\n\t\tvar ty = this.subjectClass();\r\n\t\tvar sh = TerminusClient.FrameHelper.getShorthand(ty);\r\n\t\tif(!sh) sh = ty;\r\n\t\tvar b = sh.split(\":\");\r\n\t\tif(b.length > 1){\r\n\t\t\treturn \"New \" + b[1];\r\n\t\t}\r\n\t\treturn \"New Object\";\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.getSummary = function(){\r\n\tvar ret = { status: \"ok\" };\r\n\tif(this.isUpdated()) ret.status = \"updated\";\r\n\tif(this.isNew()) ret.status = \"new\";\r\n\tret.propcount = 0;\r\n\tfor(var prop in this.properties){\r\n\t\tret.propcount++;\r\n\t}\r\n\tret.long = ret.propcount + \" properties\";\r\n\treturn ret;\t\r\n}\r\n\r\nObjectRenderer.prototype.getObjectHeaderViewer = function(){\r\n\treturn this.header_viewer;\r\n}\r\n\r\nObjectRenderer.prototype.getViewerForObject = function(format){\r\n\tif(format == \"json\"){\r\n\t\treturn new ObjectViewer.JSONObjectViewer(this);\r\n\t}\r\n\treturn new ObjectViewer.HTMLObjectViewer(this);\r\n}\r\n\r\nObjectRenderer.prototype.getFeaturesForFacet = function(facet){\r\n\treturn this.facets[facet].features.concat(this.facets[facet].controls);\r\n}\r\n \r\nObjectRenderer.prototype.hideDisabledControls = function(){\r\n\treturn this.hide_disabled_controls;\r\n}\r\n\r\nObjectRenderer.prototype.showFeature = function(which){\r\n\tif(this.features.indexOf(which) == -1 && this.controls.indexOf(which) == -1) {\r\n\t\treturn false;\r\n\t}\r\n\tvar cardcontrols = [\"delete\", \"clone\", \"add\"];\r\n\tif(cardcontrols.indexOf(which) != -1){\r\n\t\tif(!this.cardControlAllows(which)) return false;\r\n\t}\r\n\tvar updcontrols = [\"update\", \"reset\"];\r\n\tif(this.hideDisabledControls() && updcontrols.indexOf(which) != -1 ){\r\n\t\tif(!this.isUpdated()){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tif(this.isNewDocument() && which == \"clone\") return false;\r\n\tif(which == 'hide' && this.view == \"hidden\") return false;\r\n\tif(which == 'show' && this.view != \"hidden\") return false;\r\n\tvar fets = this.getFeaturesForFacet(this.facet);\r\n\tif (fets.indexOf(which) != -1){\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nObjectRenderer.prototype.cardControlAllows = function(action){\r\n\tif(!this.parent) return true;\r\n\tif(this.parent.cframe.hasRestriction()){\r\n\t\tvar rest = this.parent.cframe.restriction;\r\n\t\tvar currentnum = this.parent.values.length;\r\n\t\tif(action == \"add\" || action == \"clone\"){\r\n\t\t\tif(rest.max && currentnum >= rest.max){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nObjectRenderer.prototype.goToProperty = function(prop){\r\n\tthis.viewer.goTo(this.subject(), prop);\r\n}\r\n\r\nObjectRenderer.prototype.setMode = function(mode){\r\n\tthis.mode = mode;\r\n\tfor(var prop in this.properties){\r\n\t\tthis.properties[prop].setMode(mode);\r\n\t}\r\n\tthis.viewer.redraw();\r\n}\r\n\r\nObjectRenderer.prototype.currentViewer = function(){return this.viewerType;}\r\n\r\n\r\nObjectRenderer.prototype.setViewer = function(viewer){\r\n\tvar nviewer = this.getViewerForObject(viewer);\r\n\tif(nviewer){\r\n\t\tthis.viewerType = viewer;\r\n\t\tthis.viewer = nviewer;\r\n\t\tthis.viewer.redraw();\r\n\t}\r\n}\r\n\r\n\r\nObjectRenderer.prototype.setView = function(view){\r\n\tvar views = {\r\n\t\t\"full\": {\r\n\t\t\t\r\n\t\t},\r\n\t\t\"hidden\": {\r\n\t\t\t\r\n\t\t}\r\n\t};\r\n\tthis.view = view;\r\n\tthis.viewer.redraw();\r\n}\r\n\r\n\r\nObjectRenderer.prototype.hide = function(){\r\n\tthis.setView(\"hidden\");\r\n}\r\n\r\nObjectRenderer.prototype.show = function(){\r\n\tthis.setView(\"full\");\r\n}\r\n\r\nObjectRenderer.prototype.nukeViewer = function(){\r\n\tthis.viewer.remove();\r\n}\r\n\r\nObjectRenderer.prototype.getViewableProperties = function(){\r\n\treturn this.objframe.getFilledPropertyList();\t\r\n}\r\n\r\nObjectRenderer.prototype.getAddableProperties = function(){\r\n\tvar props = this.objframe.getMissingPropertyList();\t\r\n\treturn props;\r\n}\r\n\r\nObjectRenderer.prototype.getPropertiesToRender = function(options){\r\n\tvar sort = this.standardSort;\r\n\tvar filter = function(){return true};\r\n\tif(options && options.map && options.map.patterns){\r\n\t\t/*for(var i = 0; i<options.map.patterns.length; i++){\r\n\t\t\tif(this.objframe.matchesPattern({property: this.property(), action: \"sort\"}, options.map.patterns[i])){\r\n\t\t\t\tsort = options.map.patterns[i].sort;\r\n\t\t\t}\r\n\t\t\tif(this.objframe.matchesPattern({property: this.property(), action: \"filter\"}, options.map.patterns[i])){\r\n\t\t\t\tfilter = options.map.patterns[i].filter;\r\n\t\t\t}\r\n\t\t}*/\r\n\t}\r\n\treturn sort(this.objframe, filter);\r\n}\r\n\r\nObjectRenderer.prototype.standardSort = function(objframe, filter){\r\n\tvar sorted = [];\r\n\tvar rdft = TerminusClient.FrameHelper.getStdURL(\"rdfs\", \"label\");\r\n\tif(objframe.dataframes[rdft] && filter(objframe, rdft, objframe.dataframes[rdft])){\r\n\t\tsorted.push(rdft);\r\n\t}\r\n\tvar rdfc = TerminusClient.FrameHelper.getStdURL(\"rdfs\", \"comment\");\r\n\tif(objframe.dataframes[rdfc]){\r\n\t\tsorted.push(rdfc);\r\n\t}\r\n\tfor(var prop in objframe.dataframes){\r\n\t\tif(sorted.indexOf(prop) == -1) sorted.push(prop);\r\n\t}\r\n\tfor(var prop in objframe.children){\r\n\t\tif(sorted.indexOf(prop) == -1) sorted.push(prop);\t\t\r\n\t}\r\n\treturn sorted;\r\n}\r\n\r\n\r\nObjectRenderer.prototype.redraw = function(){\r\n\tthis.viewer.clear();\r\n\tthis.render(this.viewer);\r\n}\r\n\r\nObjectRenderer.prototype.extractLDO = function(extracts){\r\n\textracts[\"rdf:type\"] = this.objframe.cls;\r\n\tvar full = {};\r\n\tfull[this.subject()] = extracts;\r\n\treturn full;\t\r\n}\r\n\r\nObjectRenderer.prototype.extractJSONLD = function(extracts){\r\n\textracts[\"@type\"] = this.objframe.cls;\r\n\tif(this.subject() != \"_:\")\textracts[\"@id\"] = this.subject();\r\n\tif(this.objframe.jsonld_context) extracts['@context'] = this.objframe.jsonld_context;\r\n\treturn extracts;\r\n}\r\n\r\nObjectRenderer.prototype.extract = function(){\r\n\tvar extracts = {};\r\n\tfor(var i in this.properties){\r\n\t\tvar extracted = this.properties[i].extract();\r\n\t\tif(!TerminusClient.FrameHelper.empty(extracted)){\r\n\t\t\textracts[i] = extracted;\r\n\t\t}\r\n\t}\r\n\tif(TerminusClient.FrameHelper.empty(extracts) && this.parent){\r\n\t\treturn false;\r\n\t}\r\n\telse {\r\n\t\tvar ext = this.extractJSONLD(extracts);\r\n\t\treturn ext;\r\n\t\t//return this.extractLDO(extracts);\r\n\t}\r\n}\r\n\r\nmodule.exports={ObjectRenderer,PropertyRenderer}\r\n\r\n","const TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction HTMLStringEditor(options){\r\n\tthis.css = ((options && options.css) ? \"terminus-literal-value \" + options.css : \"terminus-literal-value\");\r\n\tthis.options = options; \r\n}\r\n\r\nHTMLStringEditor.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\r\n\tty = (ty ? ty : renderer.frame.getType());\r\n\tvar value = renderer.value();\r\n\tvar big = ((this.options && typeof this.options.big != \"undefined\") ? this.options.big : this.isBigType(ty, value));\r\n\tif(big){\r\n\t\tvar input = document.createElement(\"textarea\");\r\n\t\tthis.css += \" terminus-literal-big-value\";\t\t\r\n\t}\r\n\telse {\r\n\t\tvar size = ((this.options && typeof this.options.size != \"undefined\") ? this.options.size : this.getTypeSize(ty, value));\r\n\t\tvar input = document.createElement(\"input\");\r\n\t\tinput.setAttribute('type', \"text\");\r\n\t\tinput.setAttribute('size', size);\r\n\t}\r\n\tinput.setAttribute('class', this.css);\r\n\tinput.value = value;\r\n\tvar self = this;\r\n\tinput.addEventListener(\"input\", function(){\r\n\t\trenderer.set(this.value);\r\n\t});\r\n\treturn input;\r\n}\r\n\r\nHTMLStringEditor.prototype.isBigType = function(ty, value){\r\n\tif(value && value.length && value.length > 100) return true;\r\n\tvar longs = [\"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\", \"xsd:base64Binary\", \"xdd:html\", \"xdd:json\", \"rdf:XMLLiteral\"];\r\n\tif(longs.indexOf(ty) == -1) return false;\r\n\treturn true;\r\n}\r\n\r\nHTMLStringEditor.prototype.getTypeSize = function(ty, value){\r\n\tif(value && value.length && value.length > 40) return 80;\r\n\tvar bigs = [\"xdd:url\", \"xdd:coordinate\", \"xsd:anyURI\"];\r\n\tvar smalls = [\"xsd:gYearMonth\", \"xdd:gYearRange\", \"xsd:decimal\", \"xsd:float\", \"xsd:time\", \"xsd:date\", \r\n\t\t\"xsd:dateTimeStamp\",\"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:duration\", \"xsd:yearMonthDuration\", \"xsd:dayTimeDuration\", \r\n\t\t\"xsd:nonNegativeInteger\", \"xsd:positiveInteger\", \"xsd:negativeInteger\",\t\"xsd:nonPositiveInteger\", \"xsd:integer\",\"xsd:unsignedInt\"];\r\n\tvar tinys = [\"xsd:boolean\", \"xsd:gYear\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:byte\", \"xsd:short\", \"xsd:unsignedByte\", \"xsd:language\"];\r\n\tif(bigs.indexOf(ty) != -1) return 80;\r\n\tif(smalls.indexOf(ty) != -1) return 16;\r\n\tif(tinys.indexOf(ty) != -1) return 8;\r\n\treturn 32;\r\n}\r\n\r\nmodule.exports={HTMLStringEditor}\r\n\r\n\r\n","function HTMLBooleanViewer(options){\r\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\r\n}\r\n\r\nHTMLBooleanViewer.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar input = document.createElement(\"span\");\r\n\tinput.setAttribute('class', this.css);\r\n\tif(value){\r\n\t\tvar vallab = document.createTextNode(value);\r\n\t\tinput.appendChild(vallab);\r\n\t}\r\n\treturn input;\r\n}\r\n\r\nmodule.exports={HTMLBooleanViewer}\r\n\r\n","function HTMLBooleanEditor(options){\r\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\r\n}\r\n\r\nHTMLBooleanEditor.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar input = document.createElement(\"input\");\r\n\tinput.setAttribute('type', \"checkbox\");\r\n\tif(value){\r\n\t\tinput.setAttribute(\"checked\", \"checked\");\t\t\t\t\t\r\n\t}\r\n\tinput.addEventListener(\"change\", function(){\r\n\t\tif(value){\r\n\t\t\trenderer.set(\"\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\trenderer.set(\"true\");\r\n\t\t}\r\n\t});\r\n\treturn input;\r\n}\r\n\r\nmodule.exports={HTMLBooleanEditor}\r\n\r\n","function HTMLChoiceViewer(options){};\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nHTMLChoiceViewer.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar input = document.createElement(\"span\");\r\n\tinput.setAttribute('class', \"terminus-literal-value terminus-choice-value\");\r\n\tinput.setAttribute('data-value', value);\r\n\tif(value){\r\n\t\tvar els = renderer.frame.frame.elements;\r\n\t\tfor(var i = 0; i<els.length; i++){\r\n\t\t\tif(els[i].class == value){\r\n\t\t\t\tif(els[i].label && els[i].label[\"@value\"]){\r\n\t\t\t\t\tvar lab = els[i].label[\"@value\"];\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlab = TerminusClient.FrameHelper.labelFromURL(value);\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tinput.appendChild(document.createTextNode(lab));\r\n\t\t\t\tcontinue;\r\n\t\t\t}\t\t\t\t\r\n\t\t}\r\n\t}\r\n\treturn input;\r\n}\r\n\r\nmodule.exports={HTMLChoiceViewer}\r\n\r\n\r\n","const HTMLFrameHelper = require('../HTMLFrameHelper');\r\n\r\nfunction HTMLChoiceEditor(options){};\r\n\r\nHTMLChoiceEditor.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar optInput = document.createElement(\"select\");\r\n\toptInput.setAttribute('class', \"terminus-choice-picker\");\r\n\tvar foptions = renderer.frame.getChoiceOptions();\r\n\tfoptions.unshift({ value: \"\", label: \"Not Specified\"});\r\n\tvar callback = function(val){\r\n\t\trenderer.set(val);\r\n\t}\r\n\tvar sel = HTMLFrameHelper.getSelectionControl(\"select-choice\", foptions, value, callback);\r\n\treturn sel;\r\n}\r\n\r\nmodule.exports={HTMLChoiceEditor}\r\n\r\n","const TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction HTMLCoordinateViewer(options){\r\n\tthis.inputs = [];\r\n}\r\n\r\nHTMLCoordinateViewer.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\r\n\tty = (ty ? ty : renderer.frame.getType());\r\n\tvar value = renderer.value();\r\n\tvar input = document.createElement(\"span\");\r\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-coordinate\");\r\n\tinput.setAttribute('data-value', value);\r\n\ttry {\r\n\t\tvar parsed = (value ? JSON.parse(value) : false);\r\n\t}\r\n\tcatch(e){\r\n\t\trenderer.badData(ty + \" failed to parse as json\", e.toString());\r\n\t\tvar parsed = false;\r\n\t\tvalue = false;\r\n\t}\r\n\tif(value){\r\n\t\tif(ty == \"xdd:coordinate\"){\r\n\t\t\tparsed = [parsed];\r\n\t\t}\r\n\t\tfor(var i = 0; i < parsed.length; i++){\r\n\t\t\tvar lldom = document.createElement(\"span\");\r\n\t\t\tlldom.setAttribute(\"class\", \"latlong\");\r\n\t\t\tlldom.appendChild(document.createTextNode(\"Latitude: \"));\r\n\t\t\tlldom.appendChild(document.createTextNode(parsed[i][0] + \" \" + \" \"));\r\n\t\t\tlldom.appendChild(document.createTextNode(\"Longitude: \"));\r\n\t\t\tlldom.appendChild(document.createTextNode(parsed[i][1] + \" \" ));\r\n\t\t\tinput.appendChild(lldom);\r\n\t\t}\r\n\t}\r\n\treturn input;\r\n}\r\n\r\nmodule.exports={HTMLCoordinateViewer}\r\n\r\n","function HTMLCoordinateEditor(options){\r\n\tthis.inputs = [];\r\n}\r\n\r\nHTMLCoordinateEditor.prototype.getInputDOMs = function(lat, long, change){\r\n\tvar latdom = document.createElement(\"input\");\r\n\tlatdom.setAttribute(\"type\", \"text\");\r\n\tlatdom.value = lat;\r\n\tvar longdom = document.createElement(\"input\");\r\n\tlongdom.setAttribute(\"type\", \"text\");\r\n\tlongdom.value = long;\r\n\tlatdom.addEventListener(\"change\", change);\r\n\tlongdom.addEventListener(\"change\", change);\r\n\treturn [latdom, longdom];\r\n}\r\n\r\nHTMLCoordinateEditor.prototype.getLatLongDOM = function(lat, long, ty, index, parent){\r\n\tvar lldom = document.createElement(\"span\");\r\n\tlldom.setAttribute(\"class\", \"terminus-lat-long\");\r\n\tvar firstcol = document.createElement(\"span\");\r\n\tfirstcol.setAttribute(\"class\", \"terminus-lat-long-col\");\r\n\tlldom.appendChild(firstcol);\r\n\tif(index > 2 || (ty == \"xdd:coordinatePolyline\" && index > 1)){\r\n\t\tvar delbut = document.createElement(\"button\");\r\n\t\tdelbut.setAttribute(\"class\", \"delete-coordinate\");\r\n\t\tdelbut.appendChild(document.createTextNode(\"Remove\"));\r\n\t\tdelbut.addEventListener(\"click\", function(){\r\n\t\t\tlong.value = \"\";\r\n\t\t\tlat.value = \"\";\r\n\t\t\tparent.removeChild(lldom);\r\n\t\t});\r\n\t\tfirstcol.appendChild(delbut);\r\n\t}\r\n\tlldom.appendChild(document.createTextNode(\"Latitude: \"));\r\n\tlldom.appendChild(lat);\r\n\tlldom.appendChild(document.createTextNode(\" \" + \" \"));\r\n\tlldom.appendChild(document.createTextNode(\"  Longitude: \"));\r\n\tlldom.appendChild(long);\r\n\tlldom.appendChild(document.createTextNode(\"  \" ));\r\n\treturn lldom;\r\n}\r\n\r\n\r\nHTMLCoordinateEditor.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar ty = renderer.frame.getTypeShorthand();\r\n\tvar value = renderer.value();\r\n\tvar input = document.createElement(\"span\");\r\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-coordinate\");\r\n\tinput.setAttribute('data-value', value);\r\n\ttry {\r\n\t\tvar parsed = (value ? JSON.parse(value) : false);\r\n\t}\r\n\tcatch(e){\r\n\t\trenderer.badData(ty + \" failed to parse as json\", e.toString());\r\n\t\tvar parsed = false;\r\n\t\tvalue = false;\r\n\t}\r\n\tvar self = this;\r\n\tvar updateValueFromForm = function(){\r\n\t\tvar vals = [];\r\n\t\tfor(var i = 0; i<self.inputs.length; i++){\r\n\t\t\tif(self.inputs[i][0].value && self.inputs[i][1].value){\r\n\t\t\t\tvar val = \"[\" + self.inputs[i][0].value + \",\" + self.inputs[i][1].value + \"]\";\r\n\t\t\t\tvals.push(val);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(vals.length == 0){\r\n\t\t\trenderer.set(\"\");\r\n\t\t}\r\n\t\telse if(ty == \"xdd:coordinate\"){\r\n\t\t\trenderer.set(vals[0]);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar op = \"[\";\r\n\t\t\tfor(var i = 0; i<vals.length; i++){\r\n\t\t\t\top += vals[i];\r\n\t\t\t\tif(i+1 < vals.length) op += \",\";\r\n\t\t\t}\r\n\t\t\top += \"]\";\r\n\t\t\trenderer.set(op);\r\n\t\t}\r\n\t};\r\n\tif(!parsed){\r\n\t\tif(ty == \"xdd:coordinate\") parsed = [\"\",\"\"];\r\n\t\telse {\r\n\t\t\tparsed = [[\"\",\"\"],[\"\",\"\"]];\r\n\t\t\tif(ty == \"xdd:coordinatePolygon\") parsed.push([\"\",\"\"]);\r\n\t\t}\r\n\t}\r\n\tif(ty == \"xdd:coordinate\"){\r\n\t\tparsed = [parsed];\r\n\t}\r\n\tfor(var i = 0; i < parsed.length; i++){\r\n\t\tthis.inputs.push(this.getInputDOMs(parsed[i][0], parsed[i][1], updateValueFromForm))\r\n\t}\r\n\tvar lldoms = document.createElement(\"span\");\r\n\tfor(var i = 0; i < this.inputs.length; i++){\r\n\t\tvar lldom = this.getLatLongDOM(this.inputs[i][0], this.inputs[i][1], ty, i, lldoms);\r\n\t\tlldoms.appendChild(lldom);\r\n\t}\r\n\tinput.appendChild(lldoms);\r\n\tvar self = this;\r\n\tif(ty != \"xdd:coordinate\"){\r\n\t\tvar butspan = document.createElement(\"span\");\r\n\t\tbutspan.setAttribute(\"class\", \"terminus-add-coordinate\")\r\n\t\tvar addbut = document.createElement(\"button\");\r\n\t\taddbut.setAttribute(\"class\", \"terminus-add-coordinate\");\r\n\t\taddbut.appendChild(document.createTextNode(\"Add\"));\r\n\t\taddbut.addEventListener(\"click\", function(){\r\n\t\t\tvar ipdoms = self.getInputDOMs(\"\", \"\", updateValueFromForm);\r\n\t\t\tvar lldom = self.getLatLongDOM(ipdoms[0], ipdoms[1], ty, self.inputs.length, lldoms);\r\n\t\t\tlldoms.appendChild(lldom);\r\n\t\t\tself.inputs.push(ipdoms);\r\n\t\t});\r\n\t\tbutspan.appendChild(addbut);\r\n\t\tinput.appendChild(butspan);\t\t\t\r\n\t}\r\n\treturn input;\r\n}\r\n\r\nmodule.exports={HTMLCoordinateEditor}","const DateHelper = require('./DateHelper');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction HTMLDateViewer(options){\r\n\tthis.max = (options && options.max ? options.max : false);\r\n\tthis.min = (options && options.min ? options.min : false);\r\n\tthis.allowbce = (options && options.allowbce ? options.allowbce : false);\r\n\tthis.date_spacer = \"/\";\r\n\tthis.time_spacer = \":\";\r\n\tthis.datetime_separator = \", \";\r\n\tthis.helper = new DateHelper.HTMLDateHelper();\r\n}\r\n\r\nHTMLDateViewer.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\r\n\tty = (ty ? ty : renderer.frame.getType());\r\n\tvar value = renderer.value();\r\n\tvar input = document.createElement(\"span\");\r\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-date\");\r\n\tinput.setAttribute('data-value', value);\r\n\tif(value){\r\n\t\tvar parsed = TerminusClient.FrameHelper.parseDate(ty, value);\r\n\t\tvar datepart = this.getDateComponentDOM(parsed);\r\n\t\tvar timepart = this.getTimeComponentDOM(parsed);\r\n\t\tif(timepart) input.appendChild(timepart);\r\n\t\tif(timepart && datepart) input.appendChild(document.createTextNode(this.datetime_separator));\r\n\t\tif(datepart) input.appendChild(datepart);\r\n\t}\r\n\treturn input;\r\n}\r\n\r\nHTMLDateViewer.prototype.getTimeComponentDOM = function(parsed, ty){\r\n\tvar hdom = (parsed.hour ? document.createElement(\"span\") : false);\r\n\tif(hdom){\r\n\t\thdom.setAttribute(\"class\", \"terminus-time-hour\");\r\n\t\thdom.appendChild(document.createTextNode(parsed.hour));\r\n\t}\r\n\tvar mdom = (typeof parsed.minute != \"undefined\" ? document.createElement(\"span\") : false);\r\n\tif(mdom){\r\n\t\tmdom.setAttribute(\"class\", \"terminus-time-minute\");\r\n\t\tvar mlab = (parsed.minute < 10 ? parsed.minute : parsed.minute);\r\n\t\tmdom.appendChild(document.createTextNode(mlab));\r\n\t}\r\n\tvar sdom = (typeof parsed.second != \"undefined\" ? document.createElement(\"span\") : false);\r\n\tif(sdom){\r\n\t\tsdom.setAttribute(\"class\", \"terminus-time-second\");\r\n\t\tvar slab = (parsed.second < 10 ? parsed.second : parsed.second);\r\n\t\tsdom.appendChild(document.createTextNode(slab));\r\n\t}\r\n\tvar tz = (parsed.timezone ? document.createElement(\"span\") : false);\r\n\tif(tz){\r\n\t\tsdom.setAttribute(\"class\", \"terminus-time-timezone\");\r\n\t\tsdom.appendChild(document.createTextNode(parsed.timezone));\r\n\t}\r\n\tif(hdom || mdom || sdom || tz){\r\n\t\tvar dadom = document.createElement(\"span\");\r\n\t\tdadom.setAttribute(\"class\", \"terminus-time-components time-\"+ty);\r\n\t\tif(hdom) dadom.appendChild(hdom); \r\n\t\tif(mdom) {\r\n\t\t\tif(hdom) dadom.appendChild(document.createTextNode(this.time_spacer));\r\n\t\t\tdadom.appendChild(mdom); \r\n\t\t}\r\n\t\tif(sdom) {\r\n\t\t\tif(mdom || hdom) dadom.appendChild(document.createTextNode(this.time_spacer));\r\n\t\t\tdadom.appendChild(sdom); \r\n\t\t}\r\n\t\tif(tz){\r\n\t\t\tdadom.appendChild(document.createTextNode(\" (Timezone: \")); \r\n\t\t\tdadom.appendChild(sdom); \r\n\t\t\tdadom.appendChild(document.createTextNode(\")\")); \t\t\t\r\n\t\t}\r\n\t\treturn dadom;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nHTMLDateViewer.prototype.getDateComponentDOM = function(parsed, ty){\r\n\tvar ydom = (parsed.year ? document.createElement(\"span\") : false);\r\n\tif(ydom){\r\n\t\tydom.setAttribute(\"class\", \"terminus-date-year\");\r\n\t\tydom.appendChild(document.createTextNode(parsed.year));\r\n\t}\r\n\tvar mdom = (parsed.month ? document.createElement(\"span\") : false);\r\n\tif(mdom){\r\n\t\tmdom.setAttribute(\"class\", \"terminus-date-month\");\r\n\t\tmdom.appendChild(document.createTextNode(this.helper.getMonthName(parsed.month)));\t\t\r\n\t}\r\n\tvar ddom = (parsed.day ? document.createElement(\"span\") : false );\r\n\tif(ddom){\r\n\t\tddom.setAttribute(\"class\", \"terminus-date-day\");\r\n\t\tddom.appendChild(document.createTextNode(parsed.day));\t\t\r\n\t}\r\n\tif(ydom || mdom || ddom){\r\n\t\tvar dadom = document.createElement(\"span\");\r\n\t\tif(ddom) dadom.appendChild(ddom); \r\n\t\tif(mdom) {\r\n\t\t\tif(ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\r\n\t\t\tdadom.appendChild(mdom); \r\n\t\t}\r\n\t\tif(ydom) {\r\n\t\t\tif(mdom || ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\r\n\t\t\tdadom.appendChild(ydom); \r\n\t\t}\r\n\t\treturn dadom;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports={HTMLDateViewer}","const DateHelper = require('./DateHelper');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction HTMLDateEditor(options){\r\n\tthis.max = (options && options.max ? options.max : false);\r\n\tthis.min = (options && options.min ? options.min : false);\r\n\tthis.allowbce = (options && options.allowbce ? options.allowbce : false);\r\n\tthis.date_spacer = \"/\";\r\n\tthis.time_spacer = \":\";\r\n\tthis.datetime_separator = \", \";\r\n\tthis.helper = new DateHelper.HTMLDateHelper();\r\n}\r\n\r\nHTMLDateEditor.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\r\n\tty = (ty ? ty : renderer.frame.getType())\r\n\tvar value = renderer.value();\r\n\tvar input = document.createElement(\"span\");\r\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-date\");\r\n\tinput.setAttribute('data-value', value);\r\n\tif(value){\r\n\t\tthis.parsed = TerminusClient.FrameHelper.parseDate(ty, value);\r\n\t}\r\n\telse this.parsed = {};\r\n\tvar datepart = this.getDateComponentDOM(this.parsed, ty, renderer);\r\n\tvar timepart = this.getTimeComponentDOM(this.parsed, ty, renderer);\r\n\tif(timepart) input.appendChild(timepart);\r\n\tif(timepart && datepart) input.appendChild(document.createTextNode(this.datetime_separator));\r\n\tif(datepart) input.appendChild(datepart);\r\n\treturn input;\r\n}\r\n\r\nHTMLDateEditor.prototype.set = function(part, val, renderer, ty){\r\n\tthis.parsed[part] = val;\r\n\tvar xsd = TerminusClient.FrameHelper.xsdFromParsed(this.parsed, ty);\r\n\tif(xsd){\r\n\t\trenderer.set(xsd);\r\n\t}\r\n}\r\n\r\nHTMLDateEditor.prototype.getTimeComponentDOM = function(parsed, ty, renderer){\r\n\tif([\"xsd:dateTime\", \"xsd:dateTimeStamp\", \"xsd:time\"].indexOf(ty) == -1){\r\n\t\treturn false;\r\n\t}\r\n\tvar self = this;\r\n\tvar hdom = document.createElement(\"input\");\r\n\thdom.setAttribute(\"class\", \"terminus-hour-input terminus-hour-\"+ty);\r\n\thdom.setAttribute(\"size\", 2);\r\n\thdom.setAttribute(\"placeholder\", \"HH\");\r\n\thdom.value = (parsed.hour ? parsed.hour : \"\");\r\n\thdom.addEventListener(\"input\", function(){\r\n\t\tself.set(\"hour\", this.value, renderer, ty);\r\n\t});\r\n\tvar mdom = document.createElement(\"input\");\r\n\tmdom.setAttribute(\"class\", \"terminus-minute-input terminus-minute-\"+ty);\r\n\tmdom.setAttribute(\"size\", 2);\r\n\tmdom.setAttribute(\"placeholder\", \"MM\");\r\n\tmdom.value = (parsed.minute ? parsed.minute: \"\");\r\n\tmdom.addEventListener(\"input\", function(){\r\n\t\tself.set(\"minute\", this.value, renderer, ty);\r\n\t});\r\n\tvar sdom = document.createElement(\"input\");\r\n\tsdom.setAttribute(\"class\", \"terminus-second-input terminus-second-\"+ty);\r\n\tsdom.setAttribute(\"size\", 8);\r\n\tsdom.setAttribute(\"placeholder\", \"SS.sss...\");\r\n\tsdom.value = (parsed.second ? parsed.second: \"\");\r\n\tsdom.addEventListener(\"input\", function(){\r\n\t\tself.set(\"second\", this.value, renderer, ty);\r\n\t})\r\n\tvar tdom = document.createElement(\"span\");\r\n\ttdom.appendChild(hdom);\r\n\ttdom.appendChild(document.createTextNode(this.time_spacer));\r\n\ttdom.appendChild(mdom);\r\n\ttdom.appendChild(document.createTextNode(this.time_spacer));\r\n\ttdom.appendChild(sdom);\r\n\treturn tdom;\r\n}\r\n\r\nHTMLDateEditor.prototype.getDateComponentDOM = function(parsed, ty, renderer){\r\n\tvar self = this;\r\n\tif([\"xsd:date\", \"xsd:dateTime\", \"xsd:gYear\", \"xsd:gYearMonth\", \"xsd:dateTimeStamp\"].indexOf(ty) != -1){\r\n\t\tvar ydom = document.createElement(\"input\");\r\n\t\tydom.setAttribute(\"class\", \"terminus-year-input terminus-year-\"+ty);\r\n\t\tydom.setAttribute(\"size\", 6);\r\n\t\tydom.setAttribute(\"placeholder\", \"YYYY\");\r\n\t\tydom.value = (parsed.year ? parsed.year : \"\");\r\n\t\tydom.addEventListener(\"input\", function(){\r\n\t\t\tself.set(\"year\", this.value, renderer, ty);\r\n\t\t})\r\n\t}\r\n\tif([\"xsd:date\", \"xsd:dateTime\", \"xsd:gYearMonth\", \"xsd:dateTimeStamp\", \"xsd:gMonth\", \"xsd:gMonthDay\"].indexOf(ty) != -1){\r\n\t\tvar mdom = document.createElement(\"select\");\r\n\t\tmdom.setAttribute(\"class\", \"terminus-month-input terminus-month-\"+ty);\r\n\t\tfor(var i = 0; i<this.helper.months.length; i++){\r\n\t\t\tvar opdom = document.createElement(\"option\");\r\n\t\t\topdom.value = i+1;\r\n\t\t\topdom.appendChild(document.createTextNode(this.helper.months[i]));\r\n\t\t\tif(parsed.month && parsed.month == i+1){\r\n\t\t\t\topdom.selected = true;\r\n\t\t\t}\r\n\t\t\tmdom.appendChild(opdom);\r\n\t\t}\r\n\t\tmdom.addEventListener(\"change\", function(){\r\n\t\t\tself.set(\"month\", this.value, renderer, ty);\r\n\t\t})\r\n\t}\t\r\n\tif([\"xsd:date\", \"xsd:dateTime\", \"xsd:dateTimeStamp\", \"xsd:gDay\", \"xsd:gMonthDay\"].indexOf(ty) != -1){\r\n\t\tvar ddom = document.createElement(\"input\");\r\n\t\tddom.setAttribute(\"class\", \"terminus-day-input terminus-day-\"+ty);\r\n\t\tddom.setAttribute(\"size\", 2);\r\n\t\tddom.setAttribute(\"placeholder\", \"DD\");\r\n\t\tddom.value = (parsed.day ? parsed.day : \"\");\t\r\n\t\tddom.addEventListener(\"input\", function(){\r\n\t\t\tself.set(\"day\", this.value, renderer, ty);\r\n\t\t})\r\n\t}\t\r\n\tif(ydom || mdom || ddom){\r\n\t\tvar dadom = document.createElement(\"span\");\r\n\t\tif(ddom) dadom.appendChild(ddom); \r\n\t\tif(mdom) {\r\n\t\t\tif(ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\r\n\t\t\tdadom.appendChild(mdom); \r\n\t\t}\r\n\t\tif(ydom) {\r\n\t\t\tif(mdom || ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\r\n\t\t\tdadom.appendChild(ydom); \r\n\t\t}\r\n\t\treturn dadom;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports={HTMLDateEditor}","const HTMLFrameHelper = require('../HTMLFrameHelper');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction HTMLEntityViewer(options){}\r\nHTMLEntityViewer.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar value = TerminusClient.FrameHelper.unshorten(value);\r\n\tvar holder = document.createElement(\"span\");\r\n\tholder.setAttribute(\"class\", \"terminus-literal-value terminus-entity-reference-value\");\r\n\tvar self = this;\r\n\tif(this.holder){\r\n\t\treturn this.holder;\r\n\t}\r\n\tif(value){\r\n\t\tvar dom = this.getEntityViewHTML(value, renderer, dataviewer);\t\t\r\n\t\tholder.appendChild(dom);\r\n\t}\r\n\treturn holder;\r\n}\r\n\r\nHTMLEntityViewer.prototype.getEntityViewHTML = function(value, renderer, dataviewer){\r\n\tvar span = document.createElement(\"span\");\r\n\tvar self = this;\r\n\tspan.setAttribute(\"class\", \"terminus-internal-link\");\r\n\tspan.appendChild(dataviewer.internalLink(value));\r\n\tif(controller = renderer.getController()){\r\n\t\tcontroller.getInstanceMeta(value).then(function(response){\r\n\t\t\tvar lab = self.getEntityLabel(value, response, dataviewer);\r\n\t\t\tif(lab){ \r\n\t\t\t\tTerminusClient.FrameHelper.removeChildren(span);\r\n\t\t\t\tspan.appendChild(lab);\r\n\t\t\t}\t\r\n\t\t});\r\n\t}\r\n\treturn span;\r\n}\r\n\r\nHTMLEntityViewer.prototype.getEntityLabel = function(url, response, dv){\r\n\tvar nspan = document.createElement(\"span\");\r\n\tif(response && (il = HTMLFrameHelper.getVariableValueFromBinding(\"InstanceLabel\", response))){\r\n\t\tnspan.appendChild(dv.internalLink(url, il));\r\n\t\tvar rt = HTMLFrameHelper.getVariableValueFromBinding(\"InstanceType\", response);\r\n\t\tvar tit = url + \" Type: \" + rt;\r\n\t\tvar ic = HTMLFrameHelper.getVariableValueFromBinding(\"InstanceComment\", response);\r\n\t\tif(typeof ic == \"object\" && ic[\"@value\"]){\r\n\t\t\ttit += \" \" + ic[\"@value\"];\r\n\t\t}\r\n\t\tnspan.setAttribute(\"title\", tit);\r\n\t\treturn nspan;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports={HTMLEntityViewer}","function HTMLEntityEditor(options){}\r\nHTMLEntityEditor.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar input = document.createElement(\"input\");\r\n\tinput.setAttribute(\"class\", \"terminus-literal-value terminus-entity-reference-value\");\r\n\tinput.setAttribute(\"type\", \"text\");\r\n\tinput.setAttribute('size', 80);\r\n\tinput.value = value;\r\n\tvar self = this;\r\n\tinput.addEventListener(\"change\", function(){\r\n\t\tvar url = this.value;\r\n\t\tif(url.indexOf(\"/\") == -1 && url.indexOf(\":\") == -1){\r\n\t\t\turl = \"doc:\" + url;\r\n\t\t}\r\n\t\trenderer.set(url);\r\n\t});\r\n\treturn input;\r\n}\r\n\r\nmodule.exports={HTMLEntityEditor}","const TerminusClient = require('@terminusdb/terminus-client');\r\nfunction HTMLImageViewer(options){}\r\nHTMLImageViewer.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\r\n\tty = (ty ? ty : renderer.frame.getType());\r\n\tvar input = document.createElement(\"span\");\r\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-image-value\");\r\n\tinput.setAttribute('data-value', value);\r\n\tif(value){\r\n\t\tvar img = document.createElement(\"a\");\r\n\t\timg.setAttribute('src', value);\r\n\t\tinput.appendChild(img);\r\n\t}\r\n\treturn input;\r\n}\r\n\r\nmodule.exports={HTMLImageViewer}\r\n\r\n\r\n","const TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction HTMLImageEditor(options){}\r\nHTMLImageEditor.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\r\n\tty = (ty ? ty : renderer.frame.getType());\r\n\tif(ty == \"xsd:base64Binary\"){\r\n\t\tvar input = document.createElement(\"textarea\");\r\n\t\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-b64image-value\");\r\n\t\tinput.value = value;\r\n\t\tinput.addEventListener(\"change\", function(){\r\n\t\t\trenderer.set(this.value);\r\n\t\t});\r\n\t\treturn input;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports={HTMLImageEditor}","function HTMLLinkViewer(options){\r\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\r\n}\r\n\r\nHTMLLinkViewer.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar input = document.createElement(\"span\");\r\n\tinput.setAttribute('class', this.css);\r\n\tinput.setAttribute('size', 80);\r\n\tinput.setAttribute('data-value', value);\r\n\tif(value){\r\n\t\tvar a = document.createElement(\"a\");\r\n\t\ta.setAttribute('href', value);\r\n\t\ta.appendChild(document.createTextNode(value));\r\n\t\tinput.appendChild(a);\r\n\t}\r\n\treturn input;\r\n}\r\n\r\nmodule.exports={HTMLLinkViewer}\r\n\r\n","const TerminusClient = require('@terminusdb/terminus-client');\r\nfunction HTMLNumberViewer(options){\r\n\tthis.commas = (options && options.commas ? options.commas : true);\r\n}\r\n\r\nHTMLNumberViewer.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tif(value === 0) value = \"0\";\r\n\tvar input = document.createElement(\"span\");\r\n\tinput.setAttribute('class', 'terminus-number-value terminus-literal-value');\r\n\tinput.setAttribute('data-value', value);\r\n\tvalue = (this.commas ? TerminusClient.FrameHelper.numberWithCommas(value) : value);\r\n\tinput.appendChild(document.createTextNode(value));\r\n\treturn input;\r\n}\r\n\r\nmodule.exports={HTMLNumberViewer}\r\n","const TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction HTMLRangeViewer(options){\r\n\tthis.commas = (options && options.commas ? options.commas : true);\r\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\r\n\tthis.delimiter = (options && options.delimiter ? options.delimiter : false);\r\n}\r\n\r\nHTMLRangeViewer.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar vals = TerminusClient.FrameHelper.parseRangeValue(value, this.delimiter);\r\n\tvar d = document.createElement(\"span\");\r\n\td.setAttribute(\"class\", this.css);\r\n\tvar rvals = document.createElement(\"span\");\r\n\trvals.setAttribute(\"class\", \"terminus-range-value-left\");\r\n\tvar svals = document.createElement(\"span\");\r\n\tsvals.setAttribute(\"class\", \"terminus-range-value-right\");\r\n\tvar x = (this.useCommas(renderer) ? TerminusClient.FrameHelper.numberWithCommas(vals[0]) : vals[0]);\r\n\tvar tnode = document.createTextNode(x);\r\n\trvals.appendChild(tnode);\r\n\td.appendChild(rvals);\t\r\n\tif(vals.length == 2){\r\n\t\td.appendChild(getRangeSymbolDOM());\r\n\t\tvar x2 = (this.useCommas(renderer) ? TerminusClient.FrameHelper.numberWithCommas(vals[1]) : vals[1]);\r\n\t\tvar t2node = document.createTextNode(x2);\r\n\t\tsvals.appendChild(t2node);\r\n\t\td.appendChild(svals);\t\r\n\t}\r\n\treturn d;\r\n}\r\n\r\nHTMLRangeViewer.prototype.useCommas = function(renderer){\r\n\tif([\"xdd:gYearRange\", \"xdd:dateRange\"].indexOf(renderer.frame.getTypeShorthand()) != -1) return false;\r\n\treturn this.commas;\r\n}\r\n\r\nfunction getRangeSymbolDOM(){\r\n\tvar d = document.createElement(\"span\");\r\n\td.setAttribute(\"class\", \"terminus-range-indicator\");\r\n\td.setAttribute(\"title\", \"The value is uncertain, it lies somewhere in this range\");\r\n\td.appendChild(document.createTextNode(\" ... \"));\r\n\treturn d;\r\n}\r\n\r\nmodule.exports={HTMLRangeViewer}\r\n","const TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction HTMLRangeEditor(options){\r\n\tthis.commas = (options && options.commas ? options.commas : true);\r\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\r\n\tthis.delimiter = (options && options.delimiter ? options.delimiter : false);\r\n}\r\n\r\nHTMLRangeEditor.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar vals = TerminusClient.FrameHelper.parseRangeValue(value, this.delimiter);\r\n\tvar d = document.createElement(\"span\");\r\n\td.setAttribute(\"class\", this.css);\r\n\tvar rvals = document.createElement(\"span\");\r\n\tvar svals = document.createElement(\"span\");\r\n\tvar data1 = (vals.length > 0 ? vals[0] : \"\");\r\n\tvar data2 = (vals.length > 1 ? vals[1] : \"\");\r\n\tvar firstip = document.createElement(\"input\");\r\n\tfirstip.setAttribute('type', \"text\");\r\n\tfirstip.setAttribute('size', 16);\r\n\tif(data1){\r\n\t\tfirstip.value = data1;\r\n\t}\r\n\tvar secondip = document.createElement(\"input\");\r\n\tsecondip.setAttribute('type', \"text\");\r\n\tsecondip.setAttribute('size', 16);\r\n\tif(data2){\r\n\t\tthis.showing_range = true;\r\n\t\tsecondip.value = data2;\r\n\t}\r\n\trvals.appendChild(firstip);\r\n\td.appendChild(rvals);\t\r\n\tif(this.showing_range){\r\n\t\tsvals.appendChild(getRangeSymbolDOM());\r\n\t\tsvals.appendChild(secondip);\r\n\t}\r\n\td.appendChild(svals);\t\r\n\tvar but = document.createElement(\"button\");\r\n\tbut.setAttribute(\"class\", \"terminus-change-range\");\r\n\tvar txt = this.showing_range ? \"Change to Simple Value\" : \"Change to Uncertain Range\";\r\n\tbut.appendChild(document.createTextNode(txt));\r\n\td.appendChild(but);\t\r\n\tvar self = this;\r\n\tbut.addEventListener(\"click\", function(){\r\n\t\tif(self.showing_range){\r\n\t\t\tself.showing_range = false;\r\n\t\t\tsecondip.value = \"\";\t\t\t\t\r\n\t\t\tTerminusClient.FrameHelper.removeChildren(svals);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.showing_range = true;\r\n\t\t\tsecondip.value = \"\";\t\t\t\t\r\n\t\t\tsvals.appendChild(getRangeSymbolDOM());\r\n\t\t\tsvals.appendChild(secondip);\r\n\t\t}\r\n\t\tvar txt = self.showing_range ? \"Change to Simple Value\" : \"Change to Uncertain Range\";\r\n\t\tbut.innerText = txt;\r\n\t\tchangeHandler();\r\n\t});\r\n\tvar changeHandler = function(){\r\n\t\tif(self.showing_range && secondip.value){\r\n\t\t\tif(firstip.value) renderer.set(\"[\" + firstip.value + \",\" + secondip.value + \"]\");\t\t\t\t\r\n\t\t\telse renderer.set(secondip.value);\t\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\trenderer.set(firstip.value);\r\n\t\t}\r\n\t}\r\n\tfirstip.addEventListener(\"change\", changeHandler);\r\n\tsecondip.addEventListener(\"change\", changeHandler);\r\n\treturn d;\r\n}\r\n\r\nfunction getRangeSymbolDOM(){\r\n\tvar d = document.createElement(\"span\");\r\n\td.setAttribute(\"class\", \"terminus-range-indicator\");\r\n\td.setAttribute(\"title\", \"The value is uncertain, it lies somewhere in this range\");\r\n\td.appendChild(document.createTextNode(\" ... \"));\r\n\treturn d;\r\n}\r\n\r\nmodule.exports={HTMLRangeEditor}\r\n","function SantizedHTMLViewer(options){\r\n\tthis.css = ((options && options.css) ? \"literal-value \" + options.css : \"literal-value\");\r\n}\r\n\r\nSantizedHTMLViewer.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar val = renderer.value();\r\n\tvar input = document.createElement(\"span\");\r\n\tinput.setAttribute('class', this.css);\r\n\tinput.setAttribute('data-value', val);\r\n\tinput.innerHTML = val;\r\n\treturn input;\r\n}\r\n\r\nmodule.exports={SantizedHTMLViewer}\r\n","const GoogleMapHelper = require(\"./GoogleMapHelper\")\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\nfunction GoogleMapEditor(options){}\r\n\r\nGoogleMapEditor.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\r\n\tty = (ty ? ty : renderer.frame.getType())\r\n\tvar mapcontainer = document.createElement(\"div\");\r\n\tmapcontainer.setAttribute('class', \"gmap-window gmap-editor\");\r\n\tvar self = this;\r\n\tvar ghelper = new GoogleMapHelper();\r\n\tvar map = ghelper.initMap(mapcontainer, renderer, value, ty);\r\n    if(ty == \"xdd:coordinate\"){\r\n\t    google.maps.event.addListener(map, 'click', function(event) {\r\n\t    \tvar position = event.latLng;\r\n\t    \tvar coo = \"[\" + position.lat() + \",\" + position.lng() + \"]\";\r\n\t    \trenderer.set(coo);\r\n\t        ghelper.clearMarkers();\r\n\t        var init = {\r\n\t    \t\tposition: position, \r\n\t    \t\tmap: map\r\n\t    \t}\r\n\t    \tvar marker = new google.maps.Marker(init);\r\n\t    \tghelper.markers.push(marker);\r\n\t  \t});\r\n\t}\r\n    else {\r\n    \tgoogle.maps.event.addListener(map, 'click', function(event) {\r\n        \tvar path = ghelper.polyline.getPath();\r\n        \tpath.push(event.latLng);\r\n      \t    var position = event.latLng;\r\n      \t    ghelper.addMarker(position, map, renderer, '#' + path.getLength(), ty);\r\n      \t});\r\n    }\r\n    return mapcontainer;\r\n}\r\n\r\nmodule.exports={GoogleMapEditor};","const GoogleMapHelper = require(\"./GoogleMapHelper\")\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction GoogleMapViewer(options){}\r\n\r\nGoogleMapViewer.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\r\n\tty = (ty ? ty : renderer.frame.getType())\r\n\t\tvar map = document.createElement(\"div\");\r\n\tmap.setAttribute('class', \"gmap-window gmap-viewer\");\r\n\tvar self = this;\r\n\tvar ghelper = new GoogleMapHelper();\r\n\tghelper.initMap(map, renderer, value, ty);\t\t\r\n    return map;\r\n}\r\n\r\nmodule.exports={GoogleMapViewer};","const TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction HTMLMarkupEditor(options){}\r\nHTMLMarkupEditor.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\r\n\tty = (ty ? ty : renderer.frame.getType());\r\n\tvar input = document.createElement(\"div\");\r\n\tinput.setAttribute('class', \"html-wysiwyg\");\r\n\tvar inner = document.createElement(\"span\");\r\n\tinner.setAttribute('class', \"html-literal literal-value\");\r\n\tinner.innerHTML=value;\r\n\tinput.appendChild(inner);\r\n\tif(typeof Quill != \"undefined\"){\r\n\t\tvar quill = new Quill(inner, { theme: 'snow' });\r\n\t\tquill.on(\"text-change\", function(){\r\n\t\t\trenderer.set(quill.root.innerHTML);\r\n\t\t});\r\n\t}\r\n\treturn input;\r\n}\r\n\r\nmodule.exports={HTMLMarkupEditor}","function S2EntityEditor(options){}\r\n\r\nS2EntityEditor.prototype.getDOM = function(renderer, dataviewer){\r\n\tvar value = renderer.value();\r\n\tvar cls = renderer.frame.range;\r\n\tvar cback = renderer.set;\r\n\tvar ctl = renderer.getController();\r\n\tvar d2ch = new TerminusDocumentChooser(ctl.ui, cls, value);\r\n\td2ch.change = function(val){\r\n\t\trenderer.set(val);\r\n\t}\r\n\td2ch.view = \"label\";\r\n\tvar d2dom = d2ch.getAsDOM();\r\n\treturn d2dom;\r\n}\r\n\r\n\r\nmodule.exports={S2EntityEditor}","const HTMLPropertyViewer = require('./PropertyViewer');\r\nconst RenderingMap = require('./RenderingMap');\r\nconst HTMLDataViewer = require('./DataViewer');\r\n\r\nfunction ValueRenderer(dataframe, index, parent, options){\r\n\tthis.frame = dataframe;\r\n\tthis.index = index;\r\n\tthis.parent = parent;\r\n\tthis.originalValue = this.value();\r\n\tthis.renderer_type = \"value\";\r\n\tthis.options = this.setOptions(options);\r\n}\r\n\r\nValueRenderer.prototype.depth = function(){return (this.parent ? this.parent.depth() : false);};\r\nValueRenderer.prototype.property = function(){ return (this.parent ? this.parent.property() : false);};\r\nValueRenderer.prototype.subject = function(){ return (this.parent ? this.parent.subject() : false);};\r\nValueRenderer.prototype.subjectClass = function(){ return (this.parent ? this.parent.subjectClass() : false);};\r\nValueRenderer.prototype.type = function(){\treturn (this.frame ? this.frame.range : false);};\r\nValueRenderer.prototype.range = function(){\treturn (this.frame ? this.frame.range : false);};\r\nValueRenderer.prototype.value = function(){\treturn (this.frame ? this.frame.get() : false);};\r\nValueRenderer.prototype.isDocument = function(){\treturn (this.frame ? this.frame.isDocument() : false);};\r\nValueRenderer.prototype.currentViewer = function(){\treturn this.viewerType;}\r\n\r\nValueRenderer.prototype.copy = function(nf){\r\n\tvar nvr = new ValueRenderer(nf, false, this.parent, this.options);\r\n\tnvr.mode = this.mode;\r\n\tnvr.view = this.view;\r\n\treturn nvr;\r\n}\r\n\r\nValueRenderer.prototype.setFacet = function(facet){\r\n\tthis.facet = facet;\r\n\tthis.parent.redraw();\r\n}\r\n\r\nValueRenderer.prototype.parentFacetChange = function(pfacet){\r\n\tif(pfacet == \"page\") this.setFacet(\"page\");\r\n\tif(pfacet == \"multiline\") this.setFacet(\"line\");\r\n\tif(pfacet == \"line\") this.setFacet(\"inline\");\r\n\tif(pfacet == \"summary\") this.setFacet(\"icon\");\r\n}\r\n\r\nValueRenderer.prototype.getDefaultFacet = function(){\r\n\tif(this.parent.currentFacet() == \"page\" || this.parent.currentFacet() == \"multiline\"){\r\n\t\treturn \"line\";\r\n\t}\r\n\treturn \"inline\";\r\n}\r\n\r\nValueRenderer.prototype.getAvailableFacets = function(){\r\n\treturn Object.values(this.facets);\r\n}\r\n\r\nValueRenderer.prototype.getDefaultFacets = function(){\r\n\tvar defs = {\r\n\t\tpage: {\r\n\t\t\tlabel: \"Full Page\", value: \"page\",\r\n\t\t\tfeatures: [\"facet\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\", \"control\"],\r\n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\r\n\t\t},\r\n\t\tline: {\r\n\t\t\tlabel: \"Single Line\", value: \"line\",\r\n\t\t\tfeatures: [\"facet\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\", \"control\"],\r\n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\r\n\t\t},\r\n\t\tinline: {\r\n\t\t\tlabel: \"Inline\", value: \"inline\",\r\n\t\t\tfeatures: [\"facet\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\", \"control\"],\r\n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\tlabel: \"Label\", value: \"label\",\r\n\t\t\tfeatures: [\"facet\", \"status\", \"body\"],\r\n\t\t\tcontrols: []\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\tlabel: \"Snippet\", value: \"icon\",\r\n\t\t\tfeatures: [\"facet\", \"summary\"],\r\n\t\t\tcontrols: []\r\n\t\t}\r\n\t}\r\n\treturn defs;\r\n}\r\n\r\nValueRenderer.prototype.currentFacet = function(){\r\n\treturn this.facet;\r\n}\r\n\r\nValueRenderer.prototype.setOptions = function(options){\r\n\treturn TerminusDashboard.RenderingMap.decorateRenderer(options, this);\r\n}\r\n\r\nValueRenderer.prototype.hideDisabledControls = function(){\r\n\treturn this.hide_disabled_controls;\r\n}\r\n\r\nValueRenderer.prototype.setMode = function(mode){\r\n\tthis.mode = mode;\r\n\tthis.options.mode = mode;\r\n\tthis.viewerType = false;\r\n\tthis.redraw();\r\n}\r\n\r\nValueRenderer.prototype.setView = function(view){\r\n\tthis.view = view;\r\n\tthis.options.view = view;\r\n\tthis.redraw();\r\n}\r\n\r\nValueRenderer.prototype.getAPIURL = function(a, b){\r\n\tif(this.parent && this.parent.parent){\r\n\t\tif(client = this.parent.parent.getClient()){\r\n\t\t\tvar apiurl = client.dbURL() + a + \"/\" + b;\r\n\t\t\treturn apiurl;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nValueRenderer.prototype.getClient = function(){\r\n\tif(this.parent && this.parent.parent){\r\n\t\treturn this.parent.parent.getClient();\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nValueRenderer.prototype.getController = function(){\r\n\tif(this.parent && this.parent.parent){\r\n\t\treturn this.parent.parent.getController();\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nValueRenderer.prototype.DBURL = function(){\r\n\tif(this.parent && this.parent.parent){\r\n\t\tif(client = this.parent.parent.getClient()){\r\n\t\t\treturn client.dbURL();\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nValueRenderer.prototype.getEntityReference = function(url, cls, entities, opts){\r\n\tif(this.parent && this.parent.parent){\r\n\t\tif(client = this.parent.parent.getClient()){\r\n\t\t\treturn client.getEntityReference(url, cls, entities, opts);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nValueRenderer.prototype.badData = function(bd){\r\n\talert(\"bad data \" + bd);\r\n}\r\n\r\nValueRenderer.prototype.setNew = function(){\r\n\tthis.new_value = true;\r\n}\r\n\r\nValueRenderer.prototype.isNew = function(){\r\n\tif(this.new_value){\r\n\t\treturn true;\r\n\t}\r\n\treturn this.parent.isNew();\r\n}\r\n\r\n\r\nValueRenderer.prototype.isUpdated = function(){\r\n\tif(this.frame.get() != this.originalValue){\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nValueRenderer.prototype.getSummary = function(){\r\n\tvar ret = { status: \"ok\" };\r\n\tif(this.isNew()) ret.status = \"new\";\r\n\telse if(this.isUpdated()) ret.status = \"updated\";\r\n\tvar val = this.frame.get();\r\n\tif(val){\r\n\t\tif(val.length && val.length > this.text_summary_length){\r\n\t\t\tret.long = val.substring(0, this.text_summary_length) + \"...\" + \" (\" + val.length + \" characters)\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tret.long = val;\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tret.long = \"empty\";\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\nValueRenderer.prototype.cardControlAllows = function(action){\r\n\tif(this.parent.cframe.hasRestriction()){\r\n\t\tvar rest = this.parent.cframe.restriction;\r\n\t\tvar currentnum = this.parent.values.length;\r\n\t\tif(action == \"add\" || action == \"clone\"){\r\n\t\t\tif(rest.max && currentnum >= rest.max){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nValueRenderer.prototype.set = function(v){\r\n\tthis.frame.set(v);\r\n\tthis.viewer.redrawHeader();\r\n\tthis.parent.childUpdated();\r\n}\r\n\r\nValueRenderer.prototype.delete = function(){\r\n\tthis.parent.deletePropertyValue(this.value(), this.index);\r\n\tthis.parent.parent.redraw();\r\n}\r\n\r\nValueRenderer.prototype.load = function(link){\r\n\tthis.parent.load(link);\r\n}\r\n\r\nValueRenderer.prototype.hide = function(){\r\n\tthis.setView(\"hidden\");\r\n}\r\n\r\nValueRenderer.prototype.show = function(){\r\n\tthis.setView(\"full\");\r\n}\r\n\r\nValueRenderer.prototype.cancel = function(){\r\n\tthis.reset();\r\n\tthis.setMode(\"view\");\r\n}\r\n\r\nValueRenderer.prototype.save = function(){\r\n\tif(this.parent) {\r\n\t\tthis.parent.save();\r\n\t}\r\n}\r\n\r\nValueRenderer.prototype.reset = function(){\r\n\tthis.set(this.originalValue);\r\n\tthis.redraw();\r\n}\r\n\r\nValueRenderer.prototype.clone = function(){\r\n\tvar newb = this.parent.addPropertyValue(this.value());\r\n\tvar nrend = this.copy(newb);\r\n\tnrend.setNew();\r\n\tnrend.mode = \"edit\";\r\n\tnrend.index = this.parent.values.length;\r\n\tthis.parent.values.push(nrend);\r\n\tthis.parent.childUpdated();\r\n\tthis.parent.redraw();\r\n\tthis.parent.goToValue(this.parent.values.length-1);\r\n}\r\n\r\nValueRenderer.prototype.getViewerForValue = function(){\r\n\treturn new HTMLDataViewer.HTMLDataViewer(this);\r\n}\r\n\r\nValueRenderer.prototype.getFeaturesForFacet = function(facet){\r\n\treturn this.facets[facet].features.concat(this.facets[facet].controls);\r\n}\r\n\r\nValueRenderer.prototype.showFeature = function(which){\r\n\tif(this.features.indexOf(which) == -1 && this.controls.indexOf(which) == -1) {\r\n\t\treturn false;\r\n\t}\r\n\tvar cardcontrols = [\"delete\", \"clone\", \"add\"];\r\n\tif(cardcontrols.indexOf(which) != -1){\r\n\t\tif(!this.cardControlAllows(which)) return false;\r\n\t}\r\n\tvar updcontrols = [\"update\", \"reset\"];\r\n\tif(this.hideDisabledControls() && updcontrols.indexOf(which) != -1 ){\r\n\t\tif(!this.isUpdated()){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tif(which == 'hide' && this.view == \"hidden\") return false;\r\n\tif(which == 'show' && this.view != \"hidden\") return false;\r\n\tvar fets = this.getFeaturesForFacet(this.facet);\r\n\treturn (fets.indexOf(which) != -1);\r\n}\r\n\r\n\r\nValueRenderer.prototype.render = function(viewer){\r\n\tthis.viewer = (viewer ? viewer : this.getViewerForValue());\r\n\treturn this.viewer.render();\r\n}\r\n\r\nValueRenderer.prototype.extract = function(){\r\n\tvar val = this.value();\r\n\tif(val !== \"\" && val !== false){\r\n\t\tif(this.frame.isDatatypeProperty()){\r\n\t\t\tvar objlit = { \"@value\": this.value()}\r\n\t\t\t//var objlit = { data: this.value()}\r\n\t\t\tif(this.frame.isString()) objlit[\"@language\"] = this.frame.lang();\r\n\t\t\telse objlit[\"@type\"] = this.type();\r\n\t\t\treturn objlit;\r\n\t\t}\r\n\t\telse if(this.frame.isChoice() || this.frame.isDocument()){\r\n\t\t\treturn {\"@id\": val}\r\n\t\t}\r\n\t}\r\n\telse return val;\r\n}\r\n\r\nValueRenderer.prototype.getValueHeaderViewer = function(){\r\n\treturn new HTMLDataViewer.HTMLDataHeaderViewer();\r\n}\r\n\r\nValueRenderer.prototype.getDataValueViewer = function(){\r\n\tif(!this.viewerType) {\r\n\t\tthis.viewerType = this.getViewerForDataValue();\r\n\t}\r\n\treturn TerminusDashboard.RenderingMap.getViewer(this.viewerType, this.viewerOptions);\r\n}\r\n\r\nValueRenderer.prototype.getAvailableViewers = function(){\r\n\tvar dt = this.frame.getTypeShorthand();\r\n\tvar ft = this.frame.ftype();\r\n\tif(this.mode == \"view\"){\r\n\t\treturn TerminusDashboard.RenderingMap.getAvailableDataViewers(dt, ft);\r\n\t}\r\n\treturn TerminusDashboard.RenderingMap.getAvailableDataEditors(dt, ft);\r\n}\r\n\r\nValueRenderer.prototype.setViewer = function(viewer){\r\n\tthis.viewerType = viewer;\r\n\tthis.redraw();\r\n}\r\n\r\nValueRenderer.prototype.getViewerForDataValue = function(){\r\n\tvar dt = this.frame.getTypeShorthand();\r\n\tvar ft = this.frame.ftype();\r\n\tif(this.mode == \"edit\"){\r\n\t\treturn TerminusDashboard.RenderingMap.getEditorForDataFrame(dt, ft);\r\n\t}\r\n\treturn TerminusDashboard.RenderingMap.getViewerForDataFrame(dt, ft);\r\n}\r\n\r\nValueRenderer.prototype.redraw = function(){\r\n\tthis.viewer.clear();\r\n\tthis.render(this.viewer);\r\n}\r\n\r\n\r\n\r\n\r\n\r\nmodule.exports=ValueRenderer\r\n","/*\r\n * User Interface elements dealing with database level functions - view, delete, create, db\r\n * view document etc\r\n */\r\nconst WOQLResultsViewer = require('../query/WOQLResultsViewer');\r\nconst TerminusClassChooser = require('./TerminusClassChooser');\r\nconst TerminusDocumentChooser = require('./TerminusDocumentChooser');\r\nconst WOQLQuery=require('../query/WOQLQuery');\r\nconst UTILS=require('../Utils');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\n/*\r\n * User Interface elements dealing with database level functions - view, delete, create, db\r\n * view document etc\r\n */\r\nfunction TerminusDBController(ui){\r\n\t this.ui = ui;\r\n}\r\n\r\n/*\r\n * Controller provides access to the server level functions (create/delete db) and db-level functions (schema, query, document)\r\n */\r\nTerminusDBController.prototype.getAsDOM = function(){\r\n\tvar self = this;\r\n\tvar dbc = document.createElement(\"div\");\r\n\tdbc.setAttribute(\"class\", \"terminus-db-controller\");\r\n\tif(this.ui && this.ui.db()){\r\n\t\tvar scd = document.createElement(\"div\");\r\n\t\tscd.setAttribute(\"class\", \"terminus-field terminus-db-connection\");\r\n\t\tvar lab = document.createElement(\"span\");\r\n\t\tlab.setAttribute(\"class\", \"terminus-label terminus-db-label terminus-control-panel-label\");\r\n\t\tlab.appendChild(document.createTextNode(\"DB \"));\r\n\t\tvar val = document.createElement(\"span\");\r\n\t\tval.setAttribute(\"class\", \"terminus-value terminus-db-value terminus-control-panel-value\");\r\n\t\tvar dbrec = this.ui.client.connection.getDBRecord();\r\n\t\tvar nm = (dbrec && dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.ui.db());\r\n\t\tval.appendChild(document.createTextNode(nm));\r\n\t\tscd.appendChild(lab);\r\n\t\tscd.appendChild(val);\r\n\t\t//dbc.appendChild(scd);\r\n\t\tvar nav = document.createElement('div');\r\n\t\tnav.setAttribute('class', 'span3');\r\n\t\tdbc.appendChild(nav);\r\n\t\tvar ul = document.createElement('ul');\r\n\t\tul.setAttribute('class','terminus-ul' );\r\n\t\tnav.appendChild(ul);\r\n\t\t// connected to db\r\n\t\tvar a = document.createElement('a');\r\n        a.setAttribute('class', 'terminus-dashboard-info terminus-list-group-a terminus-nav-width');\r\n        var txt = 'Database: ' + nm;\r\n        a.appendChild(document.createTextNode(txt));\r\n        ul.appendChild(a);\r\n\t\tif(this.ui.showControl(\"db\")){\r\n\t\t\tvar item = this.getControlHTML(\"Database Home\", \"fa-home\");\r\n\t\t\titem.classList.add(\"terminus-selected\");\r\n\t\t    item.addEventListener(\"click\", function(){\r\n\t\t\t\tUTILS.activateSelectedNav(this, self);\r\n\t\t\t\tself.ui.showDBMainPage();\r\n\t\t\t });\r\n\t        ul.appendChild(item);\r\n\t    }\r\n\t\tif(this.ui.showControl(\"delete_database\")){\r\n\t\t\tvar item = this.getControlHTML(\"Delete Database\", \"fa-trash-alt\");\r\n\t\t    item.addEventListener(\"click\", function(){\r\n\t\t\t\tUTILS.activateSelectedNav(this, self);\r\n\t\t\t\tself.ui.deleteDatabase();\r\n\t\t\t });\r\n\t        ul.appendChild(item);\r\n\t\t}\r\n\t\tif(this.ui.showControl(\"woql_select\")){\r\n\t\t\tvar item = this.getControlHTML(\"Query\", \"fa-search\");\r\n\t\t    item.addEventListener(\"click\", function(){\r\n\t\t\t\tUTILS.activateSelectedNav(this, self);\r\n\t\t\t\tself.ui.showQueryPage();\r\n\t\t\t});\r\n\t        ul.appendChild(item);\r\n\t\t}\r\n\t\tif(this.ui.showControl(\"woql_update\")){\r\n\t\t\tvar item = this.getControlHTML(\"Mapping\", \"fa-file-import\");\r\n\t        item.addEventListener(\"click\", function(){\r\n\t\t\t\tUTILS.activateSelectedNav(this, self);\r\n\t\t\t\tself.ui.showMappingPage();\r\n\t\t\t})\r\n\t        ul.appendChild(item);\r\n\t\t}\r\n\t\tif(this.ui.showControl(\"get_schema\")){\r\n\t\t\tvar item = this.getControlHTML(\"Schema\", \"fa-cog\");\r\n\t        item.addEventListener(\"click\", function(){\r\n\t\t\t\tUTILS.activateSelectedNav(this, self);\r\n\t\t\t\tself.ui.showSchemaPage();\r\n\t\t\t})\r\n\t        ul.appendChild(item);\r\n\t\t}\r\n\t\tif((this.ui.showControl(\"get_document\") || this.ui.showControl(\"create_document\"))){\r\n\t\t\tvar item = this.getControlHTML(\"Document\", \"fa-book\");\r\n\t\t\titem.classList.add('terminus-document-nav');\r\n\t        item.addEventListener(\"click\", function(){\r\n\t\t\t\tUTILS.removeSelectedNavClass(\"terminus-selected\");\r\n                this.classList.add(\"terminus-selected\");\r\n\t\t\t\tUTILS.displayDocumentSubMenus(self.ui);\r\n\t\t\t})\r\n\t        ul.appendChild(item);\r\n\t\t}\r\n\t\t// hidden submenus\r\n\t\tif(this.ui.showControl(\"get_document\")) {\r\n\t\t\tvar a = document.createElement('a');\r\n\t\t\ta.setAttribute('class', 'terminus-hide terminus-get-doc');\r\n\t\t\ta.appendChild(self.getDocumentChooserDOM());\r\n\t\t\ta.classList.add();\r\n\t\t\tul.appendChild(a);\r\n\t\t}\r\n\t\t// hidden submenus\r\n\t\tif(this.ui.showControl(\"create_document\")) {\r\n\t\t\tvar a = document.createElement('a');\r\n\t\t\ta.setAttribute('class', 'terminus-hide terminus-create-doc');\r\n\t\t\ta.appendChild(self.getDocumentCreatorDOM());\r\n\t\t\tul.appendChild(a);\r\n\t\t}\r\n\t}\r\n\treturn dbc;\r\n}\r\n\r\n\r\nTerminusDBController.prototype.getControlHTML = function(text, ic, css){\r\n    var self = this;\r\n    var a = document.createElement('a');\r\n\ta.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\r\n    var icon = document.createElement('i');\r\n    icon.setAttribute('class', 'terminus-menu-icon fa ' + ic);\r\n    a.appendChild(icon);\r\n    var txt = document.createTextNode(text);\r\n    a.appendChild(txt);\r\n    return a;\r\n}\r\n\r\nTerminusDBController.prototype.getDocumentChooserDOM = function(){\r\n\tvar self = this;\r\n\tvar scd = document.createElement(\"span\");\r\n\tscd.setAttribute(\"class\", \"terminus-document-chooser terminus-form-horizontal terminus-control-group terminus-choose-by-id\");\r\n\tvar lab = document.createElement(\"span\");\r\n\tlab.setAttribute(\"class\", \"terminus-document-chooser-label terminus-control-label terminus-control-label-padding\");\r\n\t//lab.appendChild(document.createTextNode(\"ID \"));\r\n\tvar dcip = document.createElement(\"input\");\r\n\tdcip.setAttribute(\"class\", \"terminus-form-doc-value terminus-document-chooser terminus-doc-input-text\");\r\n\tdcip.setAttribute(\"placeholder\", \"Enter Document ID\");\r\n\tvar nbut = document.createElement(\"button\");\r\n\tnbut.setAttribute('class', \"terminus-control-button terminus-document-button terminus-doc-btn\")\r\n\tnbut.appendChild(document.createTextNode(\"View\"));\r\n\tnbut.addEventListener(\"click\", function(){\r\n\t\tif(dcip.value) self.ui.showDocument(dcip.value);\r\n\t})\r\n\tif(this.ui.client.connectionConfig.platformEndpoint() && this.ui.pluginAvailable(\"select2\")){\r\n\r\n\t\tvar mcls = TerminusClient.FrameHelper.unshorten(\"tcs:Document\");\r\n\t\tvar d2ch = new TerminusDocumentChooser(this.ui, mcls);\r\n\t\td2ch.change = function(val){\r\n\t\t\tself.ui.showDocument(val);\r\n\t\t}\r\n\t\td2ch.view = \"label\";\r\n\t\tvar sdom = d2ch.getAsDOM('terminus-class-select');\r\n\t\tjQuery(dcip).hide();\r\n\t\tjQuery(nbut).hide();\r\n\t\tvar nlab = document.createElement(\"a\");\r\n\t\tnlab.setAttribute(\"href\", \"#\");\r\n\t\tnlab.setAttribute(\"class\", \"terminus-document-which-chooser\");\r\n\t\tnlab.appendChild(document.createTextNode(\"Choose by ID\"));\r\n\t\tvar show = \"label\";\r\n\t\tjQuery(nlab).click(function(){\r\n\t\t\tif(show == \"label\"){\r\n\t\t\t\tshow = \"id\";\r\n\t\t\t\tjQuery(dcip).show();\r\n\t\t\t\tjQuery(nbut).show();\r\n\t\t\t\tjQuery(sdom).hide();\r\n\t\t\t\tjQuery(nlab).text(\"Choose by Label\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tshow = \"label\";\r\n\t\t\t\tjQuery(dcip).hide();\r\n\t\t\t\tjQuery(nbut).hide();\r\n\t\t\t\tjQuery(sdom).show();\r\n\t\t\t\tjQuery(nlab).text(\"Choose by ID\");\r\n\t\t\t}\r\n\t\t})\r\n\t\tscd.appendChild(sdom);\r\n\t\tscd.prepend(nlab);\r\n\t}\r\n\tvar nbuts = document.createElement(\"span\");\r\n\tnbuts.setAttribute(\"class\", \"terminus-control-buttons terminus-document-chooser-buttons\");\r\n\tnbuts.appendChild(nbut);\r\n\tscd.appendChild(lab);\r\n\tscd.appendChild(dcip);\r\n\tscd.appendChild(nbuts);\r\n\treturn scd;\r\n};\r\n\r\nTerminusDBController.prototype.getDocumentCreatorDOM = function(){\r\n\tvar self = this;\r\n\tvar scd = document.createElement(\"div\");\r\n\tscd.setAttribute(\"class\", \"terminus-document-creator terminus-form-horizontal terminus-control-group terminus-choose-by-id\");\r\n\r\n\tvar dcip = document.createElement(\"input\");\r\n\tdcip.setAttribute(\"class\", \"terminus-form-doc-value terminus-document-creator terminus-doc-input-text\");\r\n\tdcip.setAttribute(\"placeholder\", \"Enter Document Type\");\r\n\tvar nbut = document.createElement(\"button\");\r\n\tvar lab = document.createElement(\"span\");\r\n\tlab.setAttribute(\"class\", \"document-creator-label terminus-control-label terminus-control-label-padding\");\r\n\t//lab.appendChild(document.createTextNode(\"Type \"));\r\n\tnbut.setAttribute('class', \"terminus-control-button create-document-button terminus-doc-btn\")\r\n\tnbut.appendChild(document.createTextNode(\"Create\"));\r\n\tnbut.addEventListener(\"click\", function(){\r\n\t\tif(dcip.value) self.ui.showCreateDocument(dcip.value);\r\n\t})\r\n\tvar nbuts = document.createElement(\"div\");\r\n\tnbuts.setAttribute(\"class\", \"terminus-control-buttons terminus-document-creator-buttons\");\r\n\tvar wq = new WOQLQuery(this.ui.client, {}, this.ui);\r\n\tvar filter = wq.getConcreteDocumentClassPattern(\"v:Element\");\r\n\tvar termcc = new TerminusClassChooser(this.ui, filter);\r\n\ttermcc.empty_choice = \"Create Document of Type\";\r\n\tvar self = this;\r\n\ttermcc.change = function(new_class){\r\n\t\tif(new_class){\r\n\t\t\tself.ui.showCreateDocument(new_class);\r\n\t\t\ttermcc.choice = false;\r\n\t\t}\r\n\t}\r\n\tvar tcdom = termcc.getAsDOM('terminus-class-select');\r\n\r\n\tvar gb = document.createElement('div');\r\n\tgb.setAttribute('class', 'terminus-doc-btn-group');\r\n\tvar bi = document.createElement('button');\r\n\tbi.setAttribute('class', 'terminus-doc-btn-selected terminus-doc-toggle-btn');\r\n\tbi.appendChild((document.createTextNode('D')));\r\n\tvar tds = document.createElement('span');\r\n\ttds.setAttribute('class', 'terminus-tooltiptext');\r\n\ttds.appendChild(document.createTextNode('Dropdown List'));\r\n\tbi.appendChild(tds);\r\n\tvar bt = document.createElement('button');\r\n\tbt.setAttribute('class', 'terminus-doc-toggle-btn');\r\n\tbt.appendChild((document.createTextNode('T')));\r\n\tvar tts = document.createElement('span');\r\n\ttts.setAttribute('class', 'terminus-tooltiptext');\r\n\ttts.appendChild(document.createTextNode('Text Input'));\r\n\tbt.appendChild(tts);\r\n\tgb.appendChild(bt);\r\n\tgb.appendChild(bi);\r\n\tvar nlabs = document.createElement(\"div\");\r\n\tnlabs.setAttribute('class', 'terminus-doc-btn-gp-align');\r\n\tnlabs.appendChild(gb);\r\n\tscd.appendChild(nlabs);\r\n\tvar ccDOM = document.createElement(\"span\");\r\n\tnlabs.appendChild(ccDOM);\r\n\tccDOM.setAttribute(\"class\", \"create-document-list\");\r\n\tccDOM.appendChild(tcdom);\r\n\tvar which = \"select\";\r\n\tbt.addEventListener(\"click\", function(){\r\n\t\t// create document of TerminusClient.FrameHelper.removeChildren(nlabs);\r\n\t\tTerminusClient.FrameHelper.removeChildren(ccDOM);\r\n\t\tUTILS.removeSelectedNavClass(\"terminus-doc-btn-selected\");\r\n\t\tthis.classList.add(\"terminus-doc-btn-selected\");\r\n\t\tccDOM.appendChild(dcip);\r\n\t\tccDOM.appendChild(nbut);\r\n\t});\r\n\r\n\tbi.addEventListener(\"click\", function(){\r\n\t\t// create document from dropdown\r\n\t\tTerminusClient.FrameHelper.removeChildren(ccDOM);\r\n\t\tUTILS.removeSelectedNavClass(\"terminus-doc-btn-selected\");\r\n\t\tthis.classList.add(\"terminus-doc-btn-selected\");\r\n\t\tccDOM.appendChild(tcdom);\r\n\t});\r\n\treturn scd;\r\n};\r\n\r\nfunction TerminusDBViewer(ui){\r\n\tthis.ui = ui;\r\n\tthis.wquery = new WOQLQuery(ui.client, this.options, ui);\r\n}\r\n\r\nTerminusDBViewer.prototype.getAsDOM = function(selected){\r\n\tvar pd = document.createElement(\"span\");\r\n\tpd.setAttribute(\"class\", \"terminus-db-home-page\");\r\n\tvar sth = document.createElement('div');\r\n\tvar banner = document.createElement('div');\r\n\t//pd.appendChild(banner);\r\n\tbanner.setAttribute('class', 'terminus-banner');\r\n\tvar dhp = document.createElement(\"span\");\r\n\tdhp.setAttribute('class', 'terminus-home-heading');\r\n\tdhp.appendChild(document.createTextNode(\"DB Home Page - \"));\r\n\tsth.appendChild(dhp);\r\n\tvar scd = document.createElement(\"span\");\r\n\tscd.setAttribute(\"class\", \"terminus-db-details\");\r\n\tvar scs = document.createElement(\"span\");\r\n\tscs.setAttribute(\"class\", \"terminus-db-details-value \");\r\n\tvar dbrec = this.ui.getDBRecord();\r\n\tif(dbrec){\r\n\t\tvar nm = (dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.db);\r\n\t\tscs.appendChild(document.createTextNode(nm));\r\n\t\tscs.setAttribute('class', 'terminus-home-heading');\r\n\t}\r\n\tscd.appendChild(scs);\r\n\tsth.appendChild(scd);\r\n\tbanner.appendChild(sth);\r\n\t//pd.appendChild(sth);\r\n\t//pd.appendChild(UTILS.getHeaderDom('Summary'));\r\n\tthis.getDeleteOnHomePage(pd);\r\n\t//this.getDBSummary(pd);\r\n\tpd.appendChild(pd.appendChild(UTILS.getHeaderDom('List of Documents')));\r\n\tthis.getClassesDOM(pd);\r\n\treturn pd;\r\n}\r\n\r\nTerminusDBViewer.prototype.getDbInfoBox = function(r, module){\r\n\tvar sp = document.createElement('span');\r\n    sp.setAttribute('class', 'terminus-db-info-box');\r\n\tvar info = document.createElement('div');\r\n\tinfo.appendChild(document.createTextNode(module.charAt(0).toUpperCase() + module.slice(1)));\r\n\tinfo.setAttribute('class', 'terminus-db-info');\r\n\tsp.appendChild(info);\r\n\r\n    var i = document.createElement('i');\r\n\tswitch(module){\r\n\t\tcase 'size':\r\n\t\t\ti.setAttribute('class', 'terminus-icon fa fa-balance-scale');\r\n\t\t    var txt = document.createTextNode('2 Gb');\r\n\t\tbreak;\r\n\t\tcase 'created':\r\n\t\t\ti.setAttribute('class', 'terminus-icon fa fa-calendar');\r\n\t\t    var txt = document.createTextNode('16 July 2015');\r\n\t\tbreak;\r\n\t\tcase 'modified':\r\n\t\t\ti.setAttribute('class', 'terminus-icon fa fa-clock');\r\n\t\t    var txt = document.createTextNode('22 Dec 2019');\r\n\t\tbreak;\r\n\t}\r\n    sp.appendChild(i);\r\n\tif(txt) sp.appendChild(txt);\r\n    r.appendChild(sp);\r\n}\r\n\r\nTerminusDBViewer.prototype.getDeleteOnHomePage = function(d){\r\n\t// delete database\r\n\tif(this.ui.db() == \"terminus\") return;\r\n    var del = document.createElement('button');\r\n    del.setAttribute('class', 'terminus-btn terminus-btn-float-right terminus-home-del');\r\n    del.setAttribute('type', 'button');\r\n    del.innerHTML = 'Delete Database';\r\n\tvar dbrec = this.ui.getDBRecord();\r\n\tif(dbrec)\r\n\t\tvar nm = (dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.ui.db());\r\n    var self = this;\r\n    var dbdel = this.ui.db();\r\n\r\n    del.addEventListener(\"click\", function(){\r\n      \tvar deleteConfirm = confirm(`Do you want to delete ${dbdel} Database?`);\r\n\t\tif (deleteConfirm == true) {\r\n\t\t\tself.ui.deleteDatabase(dbdel);\r\n\t\t}\r\n    });\r\n    d.appendChild(del);\r\n}\r\n\r\nTerminusDBViewer.prototype.getDBSummary = function(d){\r\n    var r = document.createElement('span');\r\n    r.setAttribute('class', 'terminus-db-info-box-display');\r\n    d.appendChild(r);\r\n\r\n    /* getDbInfoBox() calls can change according to further requirments */\r\n    this.getDbInfoBox(r, 'size');\r\n    this.getDbInfoBox(r, 'created');\r\n    this.getDbInfoBox(r, 'modified');\r\n}\r\n\r\nTerminusDBViewer.prototype.getClassesDOM = function(d){\r\n\tvar q = this.wquery.getClassesQuery();\r\n\tvar self = this;\r\n\tthis.wquery.execute(q)\r\n\t.then(function(result){\r\n\t\tself.result = new WOQLResultsViewer.WOQLResultsViewer(self.ui, result, self.wquery, {}, {}, false);\r\n\t\tif(self.result){\r\n\t\t\tvar nd = self.result.getAsDOM(d, false);\r\n\t\t\tif(nd){\r\n\t\t\t\tnd.setAttribute('class', 'terminus-margin-box');\r\n\t        }\r\n\t\t\telse{\r\n\t\t\t\tnor = document.createElement('div');\r\n\t\t\t\tnor.setAttribute('class', 'terminus-no-res-alert');\r\n\t\t\t\tnor.appendChild(document.createTextNode(\"No results available, create new ones to view them here...\"));\r\n\t\t\t\td.appendChild(nor);\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t.catch(function(err){\r\n\t\tconsole.error(err);\r\n\t\tself.ui.showError(err);\r\n\t});\r\n\treturn d;\r\n}\r\n\r\n\r\nfunction TerminusDBCreator(ui){\r\n\tthis.ui = ui;\r\n}\r\n\r\nTerminusDBCreator.prototype.getAsDOM = function(selected){\r\n\tvar scd = document.createElement(\"div\");\r\n\t/* test delete when over var txtHolder = document.createElement(\"div\");\r\n\ttxtHolder.appendChild(document.createTextNode('expecting laoder herer'));\r\n\tscd.appendChild(txtHolder);\r\n\tthis.ui.getLoader(scd);*/\r\n\tscd.setAttribute(\"class\", \"terminus-db-creator\");\r\n\tvar sct = document.createElement(\"h3\");\r\n\tsct.setAttribute(\"class\", \"terminus-db-creator-title terminus-module-head\");\r\n\tsct.appendChild(document.createTextNode(\"Create New Database\"));\r\n\tscd.appendChild(sct);\r\n\tvar mfd = document.createElement('div');\r\n\tmfd.setAttribute('class', 'terminus-form-border');\r\n\tscd.appendChild(mfd);\r\n\tvar sci = document.createElement(\"div\");\r\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\r\n\tvar slab = document.createElement(\"span\");\r\n\tslab.setAttribute(\"class\", \"terminus-id-label terminus-form-label terminus-control-label\");\r\n\tslab.appendChild(document.createTextNode(\"ID\"));\r\n\tsci.appendChild(slab);\r\n\tvar idip = document.createElement(\"input\");\r\n\tidip.setAttribute(\"type\", \"text\");\r\n\tidip.setAttribute(\"class\", \"terminus-form-value terminus-input-text\");\r\n\tidip.setAttribute(\"placeholder\", \"No spaces or special characters allowed in IDs\");\r\n\tsci.appendChild(idip);\r\n\tmfd.appendChild(sci);\r\n\tvar sci = document.createElement(\"div\");\r\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\r\n\tvar slab = document.createElement(\"span\");\r\n\tslab.setAttribute(\"class\", \"terminus-title-label terminus-form-label terminus-control-label\");\r\n\tslab.appendChild(document.createTextNode(\"Title\"));\r\n\tvar titip = document.createElement(\"input\");\r\n\ttitip.setAttribute(\"type\", \"text\");\r\n\ttitip.setAttribute(\"placeholder\", \"A brief title for the Database\");\r\n\ttitip.setAttribute(\"class\", \"terminus-form-value terminus-input-text\");\r\n\tsci.appendChild(slab);\r\n\tsci.appendChild(titip);\r\n\tmfd.appendChild(sci);\r\n\tvar sci = document.createElement(\"div\");\r\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\r\n\tvar slab = document.createElement(\"span\");\r\n\tslab.setAttribute(\"class\", \"terminus-title-label terminus-form-label terminus-control-label\");\r\n\tslab.appendChild(document.createTextNode(\"Description\"));\r\n\tsci.appendChild(slab);\r\n\tvar descip = document.createElement(\"textarea\");\r\n\tdescip.setAttribute(\"class\", \"terminus-textarea terminus-db-description terminus-textarea \");\r\n\tdescip.setAttribute(\"placeholder\", \"A short text describing the database and its purpose\");\r\n\tsci.appendChild(descip);\r\n\tmfd.appendChild(sci);\r\n\tvar sci = document.createElement(\"div\");\r\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\r\n\tvar slab = document.createElement(\"span\");\r\n\tslab.setAttribute(\"class\", \"terminus-schema-label terminus-form-label terminus-control-label\");\r\n\tslab.appendChild(document.createTextNode(\"Import Schema\"));\r\n\tsci.appendChild(slab);\r\n\tvar schem = document.createElement(\"input\");\r\n\tschem.setAttribute(\"placeholder\", \"Terminus DB URL\");\r\n\tschem.setAttribute(\"type\", \"text\");\r\n\tschem.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-input-text\");\r\n\tsci.appendChild(schem);\r\n\tmfd.appendChild(sci);\r\n\r\n\tvar sci = document.createElement(\"div\");\r\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\r\n\tvar slab = document.createElement(\"span\");\r\n\tslab.setAttribute(\"class\", \"terminus-schema-label terminus-form-label terminus-control-label\");\r\n\tslab.appendChild(document.createTextNode(\"Key\"));\r\n\tsci.appendChild(slab);\r\n\tvar kip = document.createElement(\"input\");\r\n\tkip.setAttribute(\"placeholder\", \"Server API Key\");\r\n\tkip.setAttribute(\"type\", \"text\");\r\n\tkip.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-input-text\");\r\n\tsci.appendChild(kip);\r\n\tmfd.appendChild(sci);\r\n\r\n\tvar sci = document.createElement(\"div\");\r\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\r\n\tvar slab = document.createElement(\"span\");\r\n\tslab.setAttribute(\"class\", \"terminus-data-label terminus-form-label terminus-control-label\");\r\n\tslab.appendChild(document.createTextNode(\"Import Data\"));\r\n\tsci.appendChild(slab);\r\n\tvar datip = document.createElement(\"input\");\r\n\tdatip.setAttribute(\"type\", \"text\");\r\n\tdatip.setAttribute(\"placeholder\", \"Terminus DB URL\");\r\n\tdatip.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-input-text\");\r\n\tsci.appendChild(datip);\r\n\t//mfd.appendChild(sci);\r\n\tvar butfield = document.createElement(\"div\");\r\n\tbutfield.setAttribute(\"class\", \"terminus-control-buttons\");\r\n\tvar cancbut = document.createElement(\"button\");\r\n\tcancbut.setAttribute(\"class\", \"terminus-control-button terminus-cancel-db-button terminus-btn\");\r\n\tcancbut.appendChild(document.createTextNode(\"Cancel\"));\r\n\tvar loadbut = document.createElement(\"button\");\r\n\tloadbut.setAttribute(\"class\", \"terminus-control-button terminus-create-db-button terminus-btn\");\r\n\tloadbut.appendChild(document.createTextNode(\"Create\"));\r\n\tvar self = this;\r\n\tvar gatherips = function(){\r\n\t\tvar input = {};\r\n\t\tinput.id = idip.value;\r\n\t\tinput.title = titip.value;\r\n\t\tinput.description = descip.value;\r\n\t\tinput.schema = schem.value;\r\n\t\tinput.key = kip.value;\r\n\t\tinput.data = datip.value;\r\n\t\treturn input;\r\n\t}\r\n\tvar self = this;\r\n\tloadbut.addEventListener(\"click\", function(){\r\n\t\tvar input = gatherips();\r\n\t\tself.ui.createDatabase(input);\r\n\t})\r\n\tcancbut.addEventListener(\"click\", function(){\r\n\t\tself.ui.showServerMainPage();\r\n\t})\r\n\tbutfield.appendChild(cancbut);\r\n\tbutfield.appendChild(loadbut);\r\n\tmfd.appendChild(butfield);\r\n\r\n\treturn scd;\r\n}\r\nmodule.exports={TerminusDBViewer:TerminusDBViewer,\r\n\t            TerminusDBController:TerminusDBController,\r\n\t            TerminusDBCreator:TerminusDBCreator}\r\n","function TerminusViolations(vios, ui){\r\n\tthis.ui = ui;\r\n\tthis.vios = [];\r\n\tvar nvios = [];\r\n\tfor(var i = 0; i<vios.length; i++){\r\n\t\tfor(var j = 0; j<nvios.length; j++){\r\n\t\t\tif(JSON.stringify(vios[i]) == JSON.stringify(nvios[j])) continue;\r\n\t\t}\r\n\t\tnvios.push(vios[i]);\r\n\t}\r\n\tfor(var i = 0; i<nvios.length; i++){\r\n\t\tthis.vios.push(new TerminusViolation(nvios[i], this.ui));\r\n\t}\r\n}\r\n\r\nTerminusViolations.prototype.getAsDOM = function(context_msg){\r\n\tvar vdom = document.createElement(\"div\");\r\n\tvdom.setAttribute(\"class\", \"terminus-violations terminus-show-msg-vio\");\r\n\tvar vioHeading = document.createElement(\"div\");\r\n\tvioHeading.setAttribute('class', 'terminus-violations-heading');\r\n\tvdom.appendChild(vioHeading);\r\n\tvar msg = this.vios.length + (this.vios.length > 1 ? \" Violations Detected\" : \" Violation Detected\");\r\n\tif(context_msg) msg += \" \" + context_msg;\r\n\tvioHeading.appendChild(document.createTextNode(msg));\r\n\tfor(var i = 0; i<this.vios.length; i++){\r\n\t\tvdom.appendChild(this.vios[i].getAsDOM());\r\n\t}\r\n\treturn vdom;\r\n}\r\n\r\n/*\r\n * Class for displaying violation reports as HTML\r\n */\r\nfunction TerminusViolation(vio, ui){\r\n\tthis.ui = ui;\r\n\tthis.vio = vio;\r\n}\r\n\r\nTerminusViolation.prototype.getAsDOM = function(){\r\n\tvar vdom = document.createElement(\"div\");\r\n\tvdom.setAttribute(\"class\", \"terminus-violation\");\r\n\tif(this.vio['@type']){\r\n\t\tvar msg = this.vio['vio:message'] || {\"@value\": \"\"};\r\n\t\tvdom.appendChild(this.getPropertyAsDOM(this.vio[\"@type\"], msg));\r\n\t}\r\n\tfor(var prop in this.vio){\r\n\t\tif(prop != \"vio:message\" && prop != \"@type\"){\r\n\t\t\tvdom.appendChild(this.getPropertyAsDOM(prop, this.vio[prop]));\r\n\t\t}\r\n\t}\r\n\treturn vdom;\r\n}\r\n\r\nTerminusViolation.prototype.getPropertyAsDOM = function(prop, val){\r\n\tvar pdom = document.createElement(\"div\");\r\n\tpdom.setAttribute(\"class\", \"terminus-violation-property\");\r\n\tvar ldom = document.createElement(\"span\");\r\n\tldom.setAttribute(\"class\", \"terminus-label terminus-violation-property-label\");\r\n\tldom.appendChild(document.createTextNode(prop));\r\n\tvar vdom = document.createElement(\"span\");\r\n\tvdom.setAttribute(\"class\", \"terminus-violation-property-value\");\r\n\tvdom.appendChild(document.createTextNode(val[\"@value\"]));\r\n\tpdom.appendChild(ldom);\r\n\tpdom.appendChild(vdom);\r\n\treturn pdom;\r\n}\r\n\r\nmodule.exports=TerminusViolations\r\n","const WOQLQuery = require('../query/WOQLQuery');\r\nconst WOQLResultsViewer = require('../query/WOQLResultsViewer');\r\nconst WOQLTextboxGenerator = require('../query/WOQLTextboxGenerator');\r\nconst TerminusPluginManager = require('../plugins/TerminusPlugin');\r\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction TerminusQueryViewer(ui, options){\r\n\tthis.ui = ui;\r\n\tthis.options = options;\r\n\tthis.meta = {};\r\n\tthis.init();\r\n\tthis.generator = false;\r\n\tthis.result = false;\r\n\tthis.wquery = new WOQLQuery(ui.client, this.options, this.ui);\r\n\tthis.pman = new TerminusPluginManager();\r\n\tthis.gentype = (options && options.generator ? options.generator : \"textbox\");\r\n\tthis.generators = {\r\n\t\t\"textbox\" : { label: \"Simple Text Box\", value: \"textbox\"},\r\n\t}\r\n\tthis.loadGenerator();\r\n}\r\n\r\nTerminusQueryViewer.prototype.hasGeneratorOptions = function(){\r\n\treturn false;\r\n\tvar yup = false;\r\n\tfor(var gen in this.generators){\r\n\t\tif(yup) return true;\r\n\t\telse yup = true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nTerminusQueryViewer.prototype.changeGenerator = function(ng){\r\n\tif(this.gentype != ng){\r\n\t\tthis.gentype = ng;\r\n\t\tthis.loadGenerator();\r\n\t\tthis.redrawGenerator();\r\n\t}\r\n}\r\nTerminusQueryViewer.prototype.redrawGenerator = function(q){\r\n\tTerminusClient.FrameHelper.removeChildren(this.inputDOM);\r\n\tthis.inputDOM.appendChild(this.getQueryButtonsDOM(q));\r\n}\r\n\r\nTerminusQueryViewer.prototype.loadGenerator = function(){\r\n\tvar self = this;\r\n\tvar nquery = function(q, settings){\r\n\t\tself.query(q, settings)\r\n\t}\r\n\tif(this.gentype == \"textbox\"){\r\n\t\tthis.generator = new WOQLTextboxGenerator(nquery, this, this.ui);\r\n\t}\r\n}\r\n\r\nTerminusQueryViewer.prototype.init = function(){\r\n\tvar wq = new WOQLQuery(this.ui.client, this.options, this.ui);\r\n\tvar woql = wq.getElementMetaDataQuery();\r\n\tvar self = this;\r\n\tself.meta = {};\r\n\twq.execute(woql).then(function(wresult){\r\n\t\tvar wqlR = new WOQLResultsViewer.WOQLResult(wresult, null ,null, self.ui);\r\n\t\tif(wqlR.hasBindings(wresult)){\r\n\t\t\tfor(var i = 0; i<wresult.bindings.length; i++){\r\n\t\t\t\tvar el = HTMLFrameHelper.getVariableValueFromBinding(\"Element\", wresult.bindings[i]);\r\n\t\t\t\tif(el && typeof self.meta[el] == \"undefined\"){\r\n\t\t\t\t\tself.meta[el] = wresult.bindings[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t.catch(function(e){\r\n\t\tconsole.error(e);\r\n\t});\r\n}\r\n\r\n\r\nTerminusQueryViewer.prototype.query = function(val, settings, tab){\r\n\tvar self = this;\r\n\tTerminusClient.FrameHelper.removeChildren(this.resultDOM);\r\n\tthis.wquery.execute(val)\r\n\t.then(function(result){\r\n\t\tself.result = new WOQLResultsViewer.WOQLResultsViewer(self.ui, result, self.wquery, self.options, settings, true);\r\n\t\tvar nd = self.result.getAsDOM(self.resultDOM, true);\r\n\t\tif(nd){\r\n\t\t\t self.resultDOM.appendChild(nd);\r\n\t\t}\r\n\t})\r\n\t.catch(function(err){\r\n\t\tself.ui.showError(err);\r\n\t});\r\n}\r\n\r\nTerminusQueryViewer.prototype.getResultViewDom = function(){\r\n\tthis.resultDOM = document.createElement(\"div\");\r\n\tthis.resultDOM.setAttribute(\"class\", \"terminus-query-results\");\r\n}\r\n\r\nTerminusQueryViewer.prototype.getAsDOM = function(q){\r\n\tvar qbox = document.createElement(\"div\");\r\n\tqbox.setAttribute(\"class\", \"terminus-query-page\");\r\n\tif(this.hasGeneratorOptions()){\r\n\t\tqbox.appendChild(this.getQueryCreatorChoiceDOM(q));\r\n\t}\r\n\tthis.resultDOM = document.createElement(\"div\");\r\n\tthis.resultDOM.setAttribute(\"class\", \"terminus-query-results terminus-query-section\");\r\n\r\n\tvar qtHolder = document.createElement('span');\r\n\tqtHolder.setAttribute('style', 'display: flex;');\r\n\r\n\tthis.qTextBox = this.getQueryTextAreaDOM(q, qtHolder);\r\n\tthis.buttonsDOM = document.createElement(\"span\");\r\n\tthis.buttonsDOM.setAttribute(\"class\", \"terminus-query-input\");\r\n\tthis.buttonsDOM.appendChild(this.getQueryButtonsDOM(q, this.qTextBox));\r\n\r\n\tqtHolder.appendChild(this.buttonsDOM);\r\n\r\n\tqbox.appendChild(qtHolder);\r\n\tqbox.appendChild(this.resultDOM);\r\n\treturn qbox;\r\n}\r\n\r\nTerminusQueryViewer.prototype.getQueryCreatorChoiceDOM = function(){\r\n\tvar qcc = document.createElement(\"select\");\r\n\tqcc.setAttribute(\"class\", \"terminus-query-generator-selector\");\r\n\tfor(var c in this.generators){\r\n\t\tvar gen = this.generators[c];\r\n\t\tvar opt = document.createElement(\"option\");\r\n\t\topt.value = (gen.value ? gen.value : c);\r\n\t\tvar lab = (gen.label ? gen.label : c);\r\n\t\topt.appendChild(document.createTextNode(lab));\r\n\t\tqcc.appendChild(opt);\r\n\t}\r\n\tvar self = this;\r\n\tqcc.addEventListener(\"change\", function(){\r\n\t\tself.changeGenerator(this.value);\r\n\t});\r\n\treturn qcc;\r\n}\r\n\r\nTerminusQueryViewer.prototype.getQueryButtonsDOM = function(q, qip){\r\n\treturn this.generator.getAsDOM(q, qip);\r\n}\r\n\r\nTerminusQueryViewer.prototype.getQueryTextAreaDOM = function(q, box){\r\n\treturn this.generator.getQueryTextAreaDOM(q, box);\r\n}\r\n\r\nmodule.exports=TerminusQueryViewer\r\n","const TerminusClassChooser = require('../client/TerminusClassChooser');\r\nconst TerminusPropertyChooser = require('../client/TerminusPropertyChooser');\r\nconst TerminusDocumentChooser = require('../client/TerminusDocumentChooser');\r\nconst UTILS= require('../Utils')\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction WOQLTextboxGenerator(tq, qman, ui){\r\n\tthis.query = tq;\r\n\tthis.wquery = qman.wquery;\r\n\tthis.ui = ui;\r\n\t// default datatable settings if datatable plug in available\r\n\tthis.datatable = {};\r\n\tthis.datatable.pageLength = 20;\r\n\tthis.datatable.start = 0;\r\n}\r\n\r\nWOQLTextboxGenerator.prototype.gatherDatatableSettings = function(txtArea, queryName){\r\n\tthis.datatable.qTextDom =  txtArea;\r\n\tthis.datatable.query =  queryName;\r\n\tthis.datatable.chosenValue = null;\r\n}\r\n\r\nWOQLTextboxGenerator.prototype.getQueryButtonGroups = function(qbox){\r\n\tvar row = document.createElement('div');\r\n\trow.setAttribute('class', 'terminus-query-group-row');\r\n\tqbox.appendChild(row);\r\n\treturn row;\r\n}\r\n\r\nWOQLTextboxGenerator.prototype.qGroupQueries = function(qrow, header, descr){\r\n\tvar g = document.createElement('button');\r\n\tvar self = this;\r\n\tg.addEventListener('click', function(e){\r\n\t\tself.ui.clearMessages();\r\n\t\tif(header == 'Data Queries'){ // to ensure click event is not on button but on select instead so no need to hide\r\n\t\t\tvar target = e.target || e.srcElement,\r\n        \ttext = target.textContent || target.innerText;\r\n\t\t\tif((target.nodeName == 'SELECT')) return;\r\n\t\t}\r\n\t\telse if(header == 'Document Queries'){\r\n\t\t\tvar target = e.target || e.srcElement,\r\n        \ttext = target.textContent || target.innerText;\r\n\t\t\tif((target.nodeName == 'INPUT')) return;\r\n\t\t}\r\n\t\tfor(var i=0; i<this.children.length ; i++){\r\n\t\t\tUTILS.toggleVisibility(this.children[i]);\r\n\t\t}\r\n\t\tvar qeb = document.getElementsByClassName('query-example-buttons');\r\n\t\tfor(var i=0; i<qeb.length ; i++){\r\n\t\t\tif(this != qeb[i]){\r\n\t\t\t\tfor(var j=0; j<qeb[i].children.length ; j++){\r\n\t\t\t\t\tif(qeb[i].children[j].classList.contains('terminus-display')){\r\n\t\t\t\t\t\tqeb[i].children[j].classList.remove('terminus-display');\r\n\t\t\t\t\t\tqeb[i].children[j].classList.add('terminus-hide');\r\n\t\t\t\t    }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\tg.setAttribute('class', 'terminus-group-box terminus-pointer query-example-buttons');\r\n\r\n\tvar cd = document.createElement('div');\r\n\tcd.setAttribute('class', 'terminus-group');\r\n\tg.appendChild(cd);\r\n\r\n\tvar ch = document.createElement('div');\r\n\tch.setAttribute('class', 'terminus-group-header');\r\n\tcd.appendChild(ch);\r\n\r\n\tvar d = document.createElement('div');\r\n\td.setAttribute('class', 'terminus-query-block-headers')\r\n\td.appendChild(document.createTextNode(header));\r\n\tch.appendChild(d);\r\n\tic = document.createElement('i');\r\n    ic.setAttribute('class', 'terminus-hand-pointer-float fa fa-hand-pointer');\r\n\td.appendChild(ic);\r\n\r\n\tvar t = document.createElement('h5');\r\n\tt.setAttribute('class', 'terminus-group-sub-title terminus-hide');\r\n\tt.appendChild(document.createTextNode(descr));\r\n\tg.appendChild(t);\r\n\r\n\tqrow.appendChild(g);\r\n\r\n\treturn g;\r\n}\r\n\r\nWOQLTextboxGenerator.prototype.setDatatableSettings = function(query){\r\n\tif(query.limit){\r\n\t\tthis.datatable.pageLength = query.limit[0];\r\n\t\tthis.datatable.start = query.limit[1].start[0];\r\n\t}\r\n\t/*\r\n\tvar newQuery = query.replace(/\\s/g,'');  // remove spaces\r\n\tvar searchStr = 'limit(';\r\n\tif(newQuery.indexOf(searchStr) !== -1){\r\n\t\tvar remString = newQuery.substring(searchStr.length, newQuery.length);\r\n\t\tvar limit = remString.substr(0, remString.indexOf(','));\r\n\t\tthis.datatable.pageLength = limit;\r\n\t\tthis.datatable.start = 0;\r\n\t}*/\r\n}\r\n\r\nWOQLTextboxGenerator.prototype.getQueryTextAreaDOM = function(q, box){\r\n\tvar qbox = document.createElement(\"span\");\r\n\tqbox.setAttribute(\"class\", \"terminus-query-textbox-input terminus-query-section\");\r\n\r\n\tvar eqh = document.createElement(\"H3\");\r\n\teqh.appendChild(document.createTextNode(\"Enter Query\"));\r\n\teqh.setAttribute('class', 'terminus-full-css-margin-top terminus-module-head');\r\n\tqbox.appendChild(eqh);\r\n\r\n\tvar qip = document.createElement(\"textarea\");\r\n\tqip.setAttribute(\"class\", \"terminus-query-box\");\r\n\tqip.setAttribute(\"placeholder\", \"Enter new query or load queries from example buttons provided below ...\");\r\n\tqip.setAttribute(\"style\", \"min-width: 400px; min-height: 60px;\");\r\n\tif(q) qip.value = JSON.stringify(q,undefined, 2);\r\n\tqbox.appendChild(qip);\r\n\tUTILS.stylizeEditor(this.ui, qip, 'query', 'javascript');\r\n\tvar self = this;\r\n\tvar qbut = document.createElement(\"button\");\r\n\tqbut.setAttribute(\"class\", \"terminus-control-button terminus-btn\")\r\n\tqbut.appendChild(document.createTextNode(\"Send Query\"));\r\n\tqbut.addEventListener(\"click\", function(){\r\n\t\tself.ui.clearMessages();\r\n\t\ttry {\r\n\t\t\tvar qval = JSON.parse(qip.value);\r\n\t\t\tif(self.ui.pluginAvailable(\"datatables\")){\r\n\t\t\t\t// pass current Example query scope while editing the text editor\r\n\t\t\t\tself.gatherDatatableSettings(qip, self.datatable.query);\r\n\t\t\t\tself.setDatatableSettings(qval);\r\n\t\t\t\tself.query(qval, self.datatable);\r\n\t\t\t}\r\n\t\t\telse self.query(qval);\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\talert(\"Failed to parse Query \" + e.toString());\r\n\t\t}\r\n\t})\r\n\tqbox.appendChild(qbut);\r\n\tbox.appendChild(qbox);\r\n\treturn qip;\r\n}\r\n\r\nWOQLTextboxGenerator.prototype.getAsDOM = function(q, qip){\r\n\tvar qbox = document.createElement(\"div\");\r\n\tqbox.setAttribute(\"class\", \"terminus-query-textbox-input\");\r\n\tvar qbuts = document.createElement(\"div\");\r\n\tqbuts.setAttribute(\"class\", \"terminus-control-buttons\");\r\n\t//qbuts.appendChild(qbut);\r\n\tqbox.appendChild(qbuts);\r\n\tvar qexs = document.createElement(\"div\");\r\n\tqexs.setAttribute(\"class\", \"terminus-query-examples terminus-db-list-title\");\r\n\tvar qh = document.createElement(\"H3\");\r\n\tqh.appendChild(document.createTextNode(\"Saved Queries\"));\r\n\tqh.setAttribute('class', 'terminus-full-css-margin-top terminus-module-head');\r\n\tqexs.appendChild(qh);\r\n\r\n\tvar qrow = this.getQueryButtonGroups(qexs);\r\n\tqexs.appendChild(qrow);\r\n\r\n\t/* grouping class queries */\r\n\tvar qcGroup = this.qGroupQueries(qrow, 'Schema Queries', '');\r\n\r\n\tvar nqbut = document.createElement(\"button\");\r\n\tnqbut.appendChild(document.createTextNode(\"Show All Classes\"));\r\n\tnqbut.setAttribute(\"class\", \"terminus-control-button terminus-q-btn\");\r\n\tnqbut.addEventListener(\"click\", function(){\r\n\t\tself.ui.clearMessages();\r\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\r\n\t\tvar qval = self.wquery.getClassMetaDataQuery(null, self.datatable.pageLength, self.datatable.start);\r\n\t\tqip.value = JSON.stringify(qval,undefined, 2);\r\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\r\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\r\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Classes');\r\n\t\t\tself.query(qval, self.datatable);\r\n\t\t}\r\n\t\telse self.query(qval);\r\n\t})\r\n\r\n\tvar aqbut = document.createElement(\"button\");\r\n\taqbut.appendChild(document.createTextNode(\"Show Document Classes\"));\r\n\taqbut.setAttribute(\"class\", \"terminus-control-button terminus-q-btn\");\r\n\taqbut.addEventListener(\"click\", function(){\r\n\t\tself.ui.clearMessages();\r\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\r\n\t\tvar qvalue = self.wquery.getClassMetaDataQuery(self.wquery.getConcreteDocumentClassPattern(\"v:Element\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tself.datatable.pageLength, self.datatable.start);\r\n\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\r\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\r\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\r\n\t\t\tself.gatherDatatableSettings(qip, 'Show_Document_Classes');\r\n\t\t\tself.query(qvalue, self.datatable);\r\n\t\t}\r\n\t\telse self.query(qvalue);\r\n\t})\r\n\r\n\tvar ebut = document.createElement(\"button\");\r\n\tebut.appendChild(document.createTextNode(\"Show All Schema Elements\"));\r\n\tebut.setAttribute(\"class\", \"terminus-control-button terminus-q-btn\");\r\n\tvar self = this;\r\n\tebut.addEventListener(\"click\", function(){\r\n\t\tself.ui.clearMessages();\r\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\r\n\t\tvar qval = self.wquery.getElementMetaDataQuery(null, self.datatable.pageLength, self.datatable.start);\r\n\t\tqip.value = JSON.stringify(qval,undefined, 2);\r\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\r\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\r\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Schema_Elements');\r\n\t\t\tself.query(qval, self.datatable);\r\n\t\t}\r\n\t\telse self.query(qval);\r\n\t})\r\n\tvar dbut = document.createElement(\"button\");\r\n\tdbut.appendChild(document.createTextNode(\"Show All Documents\"));\r\n\tdbut.setAttribute(\"class\", \"terminus-control-button terminus-q-btn\");\r\n\tdbut.addEventListener(\"click\", function(){\r\n\t\tself.ui.clearMessages();\r\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\r\n\t\tvar qvalue = self.wquery.getAllDocumentQuery(null, self.datatable.pageLength, self.datatable.start);\r\n\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\r\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\r\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\r\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Documents');\r\n\t\t\tself.query(qvalue, self.datatable);\r\n\t\t}\r\n\t\telse self.query(qvalue);\r\n\t})\r\n\tvar pbut = document.createElement(\"button\");\r\n\tpbut.appendChild(document.createTextNode(\"Show All Data\"));\r\n\tpbut.setAttribute(\"class\", \"terminus-control-button terminus-q-btn\");\r\n\tpbut.addEventListener(\"click\", function(){\r\n\t\tself.ui.clearMessages();\r\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\r\n\t\tvar qvalue = self.wquery.getEverythingQuery(null, self.datatable.pageLength, self.datatable.start);\r\n\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\r\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\r\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\r\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Data');\r\n\t\t\tself.query(qvalue, self.datatable);\r\n\t\t}\r\n\t\telse self.query(qvalue);\r\n\t})\r\n\r\n\tvar prbut = document.createElement(\"button\");\r\n\tprbut.appendChild(document.createTextNode(\"Show All Properties\"));\r\n\tprbut.setAttribute(\"class\", \"terminus-control-button terminus-q-btn\");\r\n\tprbut.addEventListener(\"click\", function(){\r\n\t\tself.ui.clearMessages();\r\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\r\n\t\tvar qvalue = self.wquery.getPropertyListQuery(null, self.datatable.pageLength, self.datatable.start);\r\n\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\r\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\r\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\r\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Properties');\r\n\t\t\tself.query(qvalue, self.datatable);\r\n\t\t}\r\n\t\telse self.query(qvalue);\r\n\t})\r\n\r\n\t/* grouping data queries */\r\n\tvar qdGroup = this.qGroupQueries(qrow, 'Data Queries', '');\r\n\r\n\tvar termcc = new TerminusClassChooser(this.ui);\r\n\ttermcc.empty_choice = \"Show data of type\";\r\n\tvar self = this;\r\n\ttermcc.change = function(new_class){\r\n\t\tself.ui.clearMessages();\r\n\t\tif(new_class){\r\n\t\t\tUTILS.deleteStylizedEditor(self.ui, qip);\r\n\t\t\tvar qvalue = self.wquery.getDataOfChosenClassQuery(new_class, self.datatable.pageLength, self.datatable.start);\r\n\t\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\r\n\t\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\r\n\t\t\tif(self.ui.pluginAvailable(\"datatables\")){\r\n\t\t\t\tself.gatherDatatableSettings(qip, 'Show_Data_Class');\r\n\t\t\t\tself.datatable.chosenValue = new_class; // set chosen val from drop down\r\n\t\t\t\tself.query(qvalue, self.datatable);\r\n\t\t\t}\r\n\t\t\telse self.query(qvalue);\r\n\t\t}\r\n\t}\r\n\tvar tcdom = termcc.getAsDOM('terminus-query-select');\r\n\r\n\tvar termpc = new TerminusPropertyChooser(this.ui);\r\n\ttermpc.empty_choice = \"Show property data\";\r\n\tvar self = this;\r\n\ttermpc.change = function(new_property){\r\n\t\tif(new_property){\r\n\t\t\tUTILS.deleteStylizedEditor(self.ui, qip);\r\n\t\t\tvar qvalue = self.wquery.getDataOfChosenPropertyQuery(new_property, self.datatable.pageLength, self.datatable.start);\r\n\t\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\r\n\t\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\r\n\t\t\tif(self.ui.pluginAvailable(\"datatables\")){\r\n\t\t\t\tself.gatherDatatableSettings(qip, 'Show_Property_Class');\r\n\t\t\t\tself.datatable.chosenValue = new_property; // set chosen val from drop down\r\n\t\t\t\tself.query(qvalue, self.datatable);\r\n\t\t\t}\r\n\t\t\telse self.query(qvalue);\r\n\t\t}\r\n\t}\r\n\r\n\t/* grouping document queries */\r\n\tvar qdocGroup = this.qGroupQueries(qrow, 'Document Queries', '');\r\n\r\n\tvar pdom = termpc.getAsDOM();\r\n\r\n\tvar docch = new TerminusDocumentChooser(this.ui);\r\n\tdocch.change = function(val){\r\n\t\tself.ui.clearMessages();\r\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\r\n\t\tvar qvalue = self.wquery.getDocumentQuery(val, self.datatable.pageLength, self.datatable.start);\r\n\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\r\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\r\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\r\n\t\t\tself.gatherDatatableSettings(qip, 'Show_Document_Info_by_Id');\r\n\t\t\tself.datatable.chosenValue = val;\r\n\t\t\tself.query(qvalue, self.datatable);\r\n\t\t}\r\n\t\telse self.query(qvalue);\r\n\t}\r\n\tvar docdom = docch.getAsDOM('terminus-query-select');\r\n\r\n\tvar d2ch = new TerminusDocumentChooser(this.ui, TerminusClient.FrameHelper.unshorten(\"tcs:Document\"));\r\n\td2ch.view = \"label\";\r\n\td2ch.change = docch.change;\r\n\tvar d2dom = d2ch.getAsDOM('terminus-query-select');\r\n\tvar p = document.createElement(\"p\");\r\n\tp.appendChild(d2dom);\r\n\r\n\t/* class queries */\r\n\tvar clGroup = document.createElement('div');\r\n\tclGroup.setAttribute('class', 'terminus-hide ');\r\n\tclGroup.appendChild(ebut);\r\n\tvar br = document.createElement('BR');\r\n\tclGroup.appendChild(br);\r\n\tclGroup.appendChild(nqbut);\r\n\tvar br = document.createElement('BR');\r\n\tclGroup.appendChild(br);\r\n\tclGroup.appendChild(aqbut);\r\n\tvar br = document.createElement('BR');\r\n\tclGroup.appendChild(br);\r\n\tclGroup.appendChild(prbut);\r\n\tvar br = document.createElement('BR');\r\n\tclGroup.appendChild(br);\r\n\tqcGroup.appendChild(clGroup);\r\n\r\n\tqbox.appendChild(qexs);\r\n\r\n\t/* data queries */\r\n\tvar dtGroup = document.createElement('div');\r\n\tdtGroup.setAttribute('class', 'terminus-hide');\r\n\tdtGroup.appendChild(tcdom);\r\n\tdtGroup.appendChild(pdom);\r\n\r\n\tvar br = document.createElement('BR');\r\n\tdtGroup.appendChild(br);\r\n\tdtGroup.appendChild(pbut);\r\n\tqdGroup.appendChild(dtGroup);\r\n\r\n\r\n\t/* document queries */\r\n\tvar docGroup = document.createElement('div');\r\n\tdocGroup.setAttribute('class', 'terminus-hide');\r\n\tdocGroup.appendChild(docdom);\r\n\tdocGroup.appendChild(dbut);\r\n\t//docGroup.appendChild(p);\r\n\tqdocGroup.appendChild(docGroup);\r\n\r\n\treturn qbox;\r\n}\r\n\r\nmodule.exports=WOQLTextboxGenerator\r\n","/*\r\n * Utility Property which runs a query against the schema and presents the returned Propertyes as a drop-down / Property filter list\r\n */\r\nconst WOQLQuery = require('../query/WOQLQuery');\r\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nTerminusPropertyChooser = function(ui, filter){\r\n\tthis.ui = ui;\r\n\tthis.choice = false;\r\n\tthis.filter = filter;\r\n}\r\n\r\nTerminusPropertyChooser.prototype.setRoot = function(root){\r\n\tthis.root = root;\r\n}\r\n\r\nTerminusPropertyChooser.prototype.setFilter = function(filter){\r\n\tthis.filter = filter;\r\n}\r\n\r\nTerminusPropertyChooser.prototype.change = function(cls){\r\n\talert(\"Need to specify Property chooser function (\" + cls + \")\");\r\n}\r\n\r\nTerminusPropertyChooser.prototype.getAsDOM = function(){\r\n\tvar ccdom = document.createElement(\"span\");\r\n\tccdom.setAttribute(\"Class\", \"terminus-Class-chooser\");\r\n\tvar ccsel = document.createElement(\"select\");\r\n\tccsel.setAttribute(\"Class\", \" terminus-type-select terminus-query-select\");\r\n\tvar self = this;\r\n\tccsel.addEventListener(\"change\", function(){\r\n\t\tif(this.value != this.choice){\r\n\t\t\tthis.choice = this.value;\r\n\t\t\tself.change(this.value);\r\n\t\t}\r\n\t});\r\n\tccdom.appendChild(ccsel);\r\n\tvar wq = new WOQLQuery(this.ui.client, false, this.ui);\r\n\tvar woql = wq.getPropertyListQuery(this.filter);\r\n\tvar self = this;\r\n\twq.execute(woql)\r\n\t.then(function(response){\r\n\t\tvar opts = self.getResultsAsOptions(response);\r\n\t\tfor(var i = 0; i<opts.length; i++){\r\n\t\t\tccsel.appendChild(opts[i]);\r\n\t\t}\r\n\t});\r\n\treturn ccdom;\r\n}\r\n\r\nTerminusPropertyChooser.prototype.getResultsAsOptions = function(clist){\r\n\tvar choices = [];\r\n\tif(this.empty_choice){\r\n\t\tvar opt1 = document.createElement(\"option\");\r\n\t\topt1.setAttribute(\"Class\", \"terminus-class-choice terminus-empty-choice\");\r\n\t\topt1.value = \"\";\r\n\t\topt1.appendChild(document.createTextNode(this.empty_choice));\r\n\t\tchoices.push(opt1);\r\n\t}\r\n\tvar labopt = document.createElement(\"option\");\r\n\tlabopt.setAttribute(\"Class\", \"terminus-class-choice\");\r\n\tlabopt.value = \"rdfs:label\";\r\n\tlabopt.appendChild(document.createTextNode(\"Label\"));\r\n\tchoices.push(labopt);\r\n\r\n\tvar comopt = document.createElement(\"option\");\r\n\tcomopt.setAttribute(\"Class\", \"terminus-class-choice\");\r\n\tcomopt.value = \"rdfs:comment\";\r\n\tcomopt.appendChild(document.createTextNode(\"Comment\"));\r\n\tchoices.push(comopt);\r\n\r\n\tif(clist.bindings){\r\n\t\tvar added = [];\r\n\t\tfor(var i = 0; i<clist.bindings.length; i++){\r\n\t\t\tvar cprop = HTMLFrameHelper.getVariableValueFromBinding(\"Property\", clist.bindings[i]);\r\n\t\t\tif(cprop && added.indexOf(cprop) == -1){\r\n\t\t\t\tadded.push(cprop);\r\n\t\t\t\tvar opt = document.createElement(\"option\");\r\n\t\t\t\topt.setAttribute(\"Class\", \"terminus-class-choice\");\r\n\t\t\t\topt.value = cprop;\r\n\t\t\t\tvar lab = HTMLFrameHelper.getVariableValueFromBinding(\"Label\", clist.bindings[i]);\r\n\t\t\t\tif(!lab || lab == \"unknown\"){\r\n\t\t\t\t\tlab = TerminusClient.FrameHelper.labelFromURL(cprop);\r\n\t\t\t\t}\r\n\t\t\t\tif(lab[\"@value\"]) lab = lab[\"@value\"];\r\n\t\t\t\topt.appendChild(document.createTextNode(lab));\r\n\t\t\t\tchoices.push(opt);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn choices;\r\n}\r\n\r\n\r\n\r\nmodule.exports=TerminusPropertyChooser\r\n","function TerminusMappingViewer(ui, mode){\r\n\tthis.ui = ui;\r\n\tthis.mode = (mode ? mode : \"data\");\r\n}\r\n\r\nTerminusMappingViewer.prototype.getAsDOM = function(){\r\n\tvar scd = document.createElement(\"div\");\r\n\tscd.setAttribute(\"class\", \"terminus-mapping-page terminus-page\");\r\n\tvar tsel = document.createElement(\"select\");\r\n\tvar o1 = document.createElement(\"option\");\r\n\to1.value = \"data\";\r\n\to1.appendChild(document.createTextNode(\"Data Map\"))\r\n\ttsel.appendChild(o1);\r\n\tvar o2 = document.createElement(\"option\");\r\n\to2.value = \"model\";\r\n\to2.appendChild(document.createTextNode(\"Model Map\"))\r\n\ttsel.appendChild(o2);\r\n\tvar ff = this.getFormFieldDOM(\"Map Type\");\r\n\tff.appendChild(tsel);\r\n\tscd.appendChild(ff);\r\n\tvar source = this.getFormField(scd, \"Map Source\");\r\n\tvar target = this.getFormField(scd, \"Map Target\");\r\n\tvar queries = this.getFormField(scd, \"Queries\");\r\n\tvar options = this.getFormField(scd, \"Options\");\r\n\t\r\n\tvar mdom = this.getFormFieldDOM(\"Existing Mapping\");\r\n\tvar mapping = document.createElement(\"input\");\r\n\tmapping.setAttribute(\"type\", \"text\");\r\n\tmapping.setAttribute(\"size\", 80);\r\n\tmdom.appendChild(mapping);\r\n\tscd.appendChild(mdom);\r\n\t\r\n\tvar submit = document.createElement(\"button\");\r\n\tsubmit.setAttribute(\"class\", \"terminus-btn terminus-control-button\");\r\n\tsubmit.appendChild(document.createTextNode(\"Execute Mapping\"));\r\n\tvar self = this;\r\n\tsubmit.addEventListener(\"click\", function(){\r\n\t\tvar jsonip = {\r\n\t\t\tmap_source: JSON.parse(source.value),\r\n\t\t};\r\n\t\tif(tsel.value == \"data\"){\r\n\t\t\tjsonip[\"rdf:type\"] = \"dcogmodel:DataMap\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tjsonip[\"rdf:type\"] = \"dcogmodel:ModelMap\";\t\t\t\r\n\t\t}\r\n\t\tif(target.value) jsonip.map_target = target.value;\r\n\t\tif(queries.value) jsonip.queries = queries.value;\r\n\t\tif(options.value) jsonip.options = options.value;\r\n\t\tif(mapping.value) jsonip.mapping = mapping.value;\r\n\t\tself.ui.client.update(false, jsonip);\r\n\t})\r\n\tscd.appendChild(submit);\r\n\treturn scd;\r\n}\r\n\r\nTerminusMappingViewer.prototype.getFormFieldDOM = function(label){\r\n\tvar sci = document.createElement(\"div\");\r\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-mapping-field\");\r\n\tvar lab = document.createElement(\"span\");\r\n\tlab.setAttribute(\"class\", \"terminus-form-label terminus-mapping-label\");\r\n\tlab.appendChild(document.createTextNode(label));\r\n\tsci.appendChild(lab);\r\n\treturn sci;\r\n}\r\n\r\nTerminusMappingViewer.prototype.getFormField = function(holder, label){\r\n\tvar ff = this.getFormFieldDOM(label);\r\n\tvar source = document.createElement(\"textarea\");\r\n\tsource.setAttribute(\"class\", \"terminus-form-value terminus-textarea\");\r\n\tff.appendChild(source);\r\n\tholder.appendChild(ff);\r\n\treturn source;\r\n}\r\n\r\nmodule.exports=TerminusMappingViewer\r\n","/*\r\n * Draws the screen for viewing and updating the schema\r\n * and provides wrappers around the client's schema API\r\n */\r\nconst TerminusClassChooser = require('./TerminusClassChooser');\r\nconst TerminusDocumentViewer = require('./TerminusDocument');\r\nconst UTILS=require('../Utils')\r\nconst TerminusClient = require('@terminusdb/terminus-client');\r\n\r\nfunction TerminusSchemaViewer(ui){\r\n\tthis.ui = ui;\r\n\tthis.mode = \"view\";\r\n\tthis.format = \"turtle\";\r\n\tthis.confirm_before_update = false;\r\n}\r\n\r\n/*\r\n * Retrieves schema from API and writes the response into the page\r\n */\r\nTerminusSchemaViewer.prototype.getAsDOM = function(){\r\n\tthis.holder = document.createElement(\"div\");\r\n\tthis.controldom = document.createElement(\"div\");\r\n\tthis.controldom.setAttribute(\"class\", \"terminus-schema-controls\");\r\n\tthis.pagedom = document.createElement(\"div\");\r\n\tthis.pagedom.setAttribute(\"class\", \"terminus-schema-viewer\");\r\n\tthis.loadSchema();\r\n\tthis.holder.appendChild(this.controldom);\r\n\tthis.holder.appendChild(this.pagedom);\r\n\treturn this.holder;\r\n}\r\n\r\nTerminusSchemaViewer.prototype.loadSchema = function(msg, msgtype){\r\n\tvar self = this;\r\n\tthis.ui.showBusy(\"Fetching Database Schema\");\r\n\tthis.ui.client.getSchema(false, {\"terminus:encoding\": \"terminus:\" + this.format})\r\n\t.then(function(response){\r\n\t\tself.ui.clearBusy();\r\n\t\tself.schema = response;\r\n\t\tself.refreshPage(msg, msgtype);\r\n\t})\r\n\t.catch(function(error){\r\n\t\tself.ui.clearBusy();\r\n\t\tself.ui.showError(error);\r\n\t});\r\n}\r\n\r\nTerminusSchemaViewer.prototype.resetControlDOM = function(){\r\n\tTerminusClient.FrameHelper.removeChildren(this.controldom);\r\n\tif(this.mode == \"edit\"){\r\n\t\tthis.controldom.appendChild(this.getSchemaSaveButtons());\r\n\t}\r\n\telse if(this.mode == \"import\"){\r\n\t\tthis.controldom.appendChild(this.getSchemaImportActionButtons());\r\n\t}\r\n\telse if(this.mode == \"class_frame\"){\r\n\t\tif(this.ui.showControl(\"get_schema\")){\r\n\t\t\tthis.controldom.appendChild(this.getShowSchemaButton());\r\n\t\t}\r\n\t\tif(this.ui.showControl(\"class_frame\")){\r\n\t\t\tthis.controldom.appendChild(this.getClassFrameChooser());\r\n\t\t}\r\n\t}\r\n\telse if(this.mode == \"view\"){\r\n\t\tif(this.ui.showControl(\"update_schema\")){\r\n\t\t\tthis.controldom.appendChild(this.getSchemaEditButton());\r\n\t\t}\r\n\t\tif(this.ui.showControl(\"import_schema\")){\r\n\t\t\tthis.controldom.appendChild(this.getImportButton());\r\n\t\t}\r\n\t\tif(this.ui.showControl(\"schema_format\")){\r\n\t\t\tthis.controldom.appendChild(this.getFormatChoices());\r\n\t\t}\r\n\t\tif(this.ui.showControl(\"class_frame\")){\r\n\t\t\tthis.controldom.appendChild(this.getClassFrameChooser());\r\n\t\t}\r\n\t}\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getFormatChoices = function(){\r\n\tvar fc = document.createElement(\"select\");\r\n\tfc.setAttribute(\"class\", \"terminus-form-select terminus-schema-format terminus-type-select\");\r\n\tvar tc = document.createElement(\"option\");\r\n\ttc.setAttribute(\"class\", \"terminus-schema-turtle\");\r\n\ttc.value = \"turtle\";\r\n\ttc.appendChild(document.createTextNode(\"Turtle\"));\r\n\tif(this.format == \"turtle\") tc.selected = true;\r\n\tfc.appendChild(tc);\r\n\tvar tj = document.createElement(\"option\");\r\n\ttj.setAttribute(\"class\", \"terminus-schema-jsonld\");\r\n\ttj.value = \"jsonld\";\r\n\ttj.appendChild(document.createTextNode(\"Json LD\"));\r\n\tif(this.format == \"jsonld\") tj.selected = true;\r\n\tfc.appendChild(tj);\r\n\tvar self = this;\r\n\tfc.addEventListener(\"change\", function(e){\r\n\t\tself.format = this.value;\r\n\t\tself.loadSchema();\r\n\t});\r\n\treturn fc;\r\n}\r\n\r\n\r\nTerminusSchemaViewer.prototype.refreshPage = function(msg, msgtype){\r\n\tif(this.controldom) this.resetControlDOM();\r\n\tif(this.pagedom) this.refreshMainPage(msg, msgtype);\r\n}\r\n\r\nTerminusSchemaViewer.prototype.refreshMainPage = function(msg, msgtype){\r\n\tTerminusClient.FrameHelper.removeChildren(this.pagedom);\r\n\tif(this.mode == 'view'){\r\n\t\tthis.pagedom.appendChild(this.getSchemaViewDOM());\r\n\t}\r\n\telse if(this.mode == \"edit\"){\r\n\t\tthis.pagedom.appendChild(this.getSchemaEditDOM());\r\n\t}\r\n\telse if(this.mode == \"import\"){\r\n\t\tthis.pagedom.appendChild(this.getSchemaImportDOM());\r\n\t}\r\n\telse if(this.mode == \"class_frame\"){\r\n\t\tthis.pagedom.appendChild(this.getClassFrameDOM());\r\n\t}\r\n\tif(msg){\r\n\t\tthis.ui.showMessage(msg, msgtype);\r\n\t}\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getSchemaSaveButtons = function(){\r\n\tvar ssb = document.createElement(\"span\");\r\n\tssb.setAttribute(\"class\", \"terminus-schema-save-buttons\");\r\n\tssb.appendChild(this.getCancelButton());\r\n\tssb.appendChild(this.getSaveButton());\r\n\treturn ssb;\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getSchemaImportActionButtons = function(){\r\n\tvar ssb = document.createElement(\"span\");\r\n\tssb.setAttribute(\"class\", \"terminus-schema-import-buttons\");\r\n\tssb.appendChild(this.getCancelButton(true));\r\n\tssb.appendChild(this.getImportSaveButton());\r\n\treturn ssb;\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getShowSchemaButton = function(){\r\n\tvar self = this;\r\n\tvar func = function(){\r\n\t\tself.ui.clearMessages();\r\n\t\tself.mode = \"view\";\r\n\t\tself.refreshPage();\r\n\t}\r\n\treturn this.getSchemaButton(\"View Schema\", \"get_schema\", func);\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getImportPreviewButton = function(){\r\n\tvar self = this;\r\n\tvar func = function(){\r\n\t\tself.ui.clearMessages();\r\n\t\tself.mode = \"preview\";\r\n\t\tself.refreshPage();\r\n\t}\r\n\treturn this.getSchemaButton(\"Preview\", \"preview\", func);\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getCancelButton = function(is_import){\r\n\tvar self = this;\r\n\tvar func = function(){\r\n\t\tself.ui.clearMessages();\r\n\t\tself.mode = \"view\";\r\n\t\tif(is_import){\r\n\t\t\tself.ui.redraw();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.refreshPage();\r\n\t\t}\r\n\t}\r\n\treturn this.getSchemaButton(\"Cancel\", \"cancel_update\", func);\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getImportSaveButton = function(){\r\n\tvar self = this;\r\n\tvar func = function(){\r\n\t\tself.ui.clearMessages();\r\n\t\tif(typeof self.doImport == \"function\"){\r\n\t\t\tself.doImport();\r\n\t\t}\r\n\t}\r\n\treturn this.getSchemaButton(\"Import\", \"import_schema\", func)\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getSaveButton = function(){\r\n\tvar self = this;\r\n\tvar func = function(){\r\n\t\tself.ui.clearMessages();\r\n\t\tvar text = self.schema_edit_dom.value;\r\n\t\tif(typeof(self.schema) == \"object\"){\r\n\t\t\ttext = JSON.parse(text);\r\n\t\t}\r\n\t\treturn self.updateSchema(text, {\"terminus:encoding\": \"terminus:\" + self.format});\r\n\t}\r\n\treturn this.getSchemaButton(\"Save\", \"update_schema\", func);\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getSchemaEditButton = function(){\r\n\tvar self = this;\r\n\tvar func = function(){\r\n\t\tself.mode = \"edit\";\r\n\t\tself.refreshPage();\r\n\t}\r\n\treturn this.getSchemaButton(\"Edit\", \"update_schema\", func);\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getImportButton = function(){\r\n\tvar self = this;\r\n\tvar func = function(){\r\n\t\tself.ui.clearMessages();\r\n\t\tself.mode = \"import\";\r\n\t\tself.refreshPage();\r\n\t}\r\n\treturn this.getSchemaButton(\"Import New Schema\", \"import_schema\", func);\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getSchemaButton = function(label, action, func){\r\n\tvar opt = document.createElement(\"button\");\r\n\topt.appendChild(document.createTextNode(label));\r\n\topt.setAttribute(\"class\", \"terminus-btn terminus-control-button terminus-schema-\" + action);\r\n\topt.addEventListener(\"click\", func);\r\n\treturn opt;\r\n}\r\n\r\n/*\r\n * Updates schema, then fetches updated version and updates the page with it\r\n */\r\nTerminusSchemaViewer.prototype.updateSchema  = function(text, opts){\r\n\tthis.ui.showBusy(\"Updating Database Schema\");\r\n\tvar self = this;\r\n\treturn this.ui.client.updateSchema(false, text, opts)\r\n\t.then(function(response){\r\n\t\tif(response['terminus:status'] && response['terminus:status'] == \"terminus:success\"){\r\n\t\t\tself.ui.showBusy(\"Retrieving updated schema\");\r\n\t\t\tself.mode = \"view\";\r\n\t\t\tself.loadSchema(\"Successfully Updated Schema\");\r\n\t\t\tself.ui.redraw();\r\n\t\t}\r\n\t\telse if(response['terminus:status'] && response['terminus:status'] == \"terminus:failure\"){\r\n\t\t\tself.ui.clearBusy();\r\n\t\t\tself.ui.showViolations(response['terminus:witnesses'], \"schema\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error(\"Update Schema returned no terminus:status code\");\r\n\t\t}\r\n\t})\r\n\t.catch(function(error){\r\n\t\tself.ui.clearBusy();\r\n\t\tif(error.data && error.data['terminus:witnesses']){\r\n\t\t\tself.ui.showViolations(error.data['terminus:witnesses'], \"schema\");\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.ui.showError(error);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/*\r\n * Imports a schema from the passed url\r\n * mode: replace | append\r\n */\r\nTerminusSchemaViewer.prototype.load  = function(url, key, mode){\r\n\tvar self = this;\r\n\tmode = (mode ? mode : \"replace\");\r\n\tthis.ui.showBusy(\"Loading schema from \" + url);\r\n\tvar origurl = this.ui.client.connectionConfig.schemaURL();\r\n\treturn this.ui.client.getSchema(url, {\"terminus:user_key\": key, \"terminus:encoding\" : \"terminus:\" + this.format})\r\n\t.then(function(response){\r\n\t\tvar newschema = (mode == \"append\") ? self.appendSchema(response) : response;\r\n\t\tif(self.confirm_before_update){\r\n\t\t\t//reconnect to original db\r\n\t\t\tself.ui.showResult(\"Schema retrieved - click save to deploy\");\r\n\t\t\tself.ui.client.connectionConfig.setSchemaURL(origurl);\r\n\t\t\tself.showConfirmPage(newschema);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.ui.showBusy(\"Updating schema\");\r\n\t\t\tself.ui.client.connectionConfig.setSchemaURL(origurl);\r\n\t\t\tself.updateSchema(newschema, {\"terminus:encoding\": \"terminus:\" + self.format}).then(function(response){\r\n\t\t\t\tself.mode = \"view\";\r\n\t\t\t\tself.ui.clearBusy();\r\n\t\t\t\tself.ui.redraw();\r\n\t\t\t\tself.ui.showResult(\"Successfully deployed new schema from \" + url);\r\n\t\t\t\treturn response;\r\n\t\t\t});\r\n\t\t}\r\n\t}).catch(function(error){\r\n\t\tself.ui.clearBusy();\r\n\t\tself.ui.showError(error);\r\n\t});\r\n}\r\n\r\nTerminusSchemaViewer.prototype.appendSchema = function(s2){\r\n\tvar nschema = this.schema;\r\n\tif(this.format == 'turtle'){\r\n\t\tnschema = this.schema + s2;\r\n\t}\r\n\telse if(this.format == 'jsonld'){\r\n\t\tfor(var i in s2){\r\n\t\t\tnschema[i] = s2[i];\r\n\t\t}\r\n\t}\r\n\treturn nschema;\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getClassFrameChooser = function(){\r\n\tvar np = document.createElement(\"span\");\r\n\tnp.setAttribute(\"class\", \"terminus-class frame-chooser\");\r\n\tvar termcc = new TerminusClassChooser(this.ui);\r\n\ttermcc.empty_choice = \"View Individual Class Frames\";\r\n\tvar self = this;\r\n\ttermcc.change = function(new_class){\r\n\t\tif(new_class){\r\n\t\t\tself.cls = new_class;\r\n\t\t\tif(self.mode != \"class_frame\"){\r\n\t\t\t\tself.mode = \"class_frame\";\r\n\t\t\t\tself.refreshPage();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tself.refreshMainPage();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar tcdom = termcc.getAsDOM();\r\n\tnp.appendChild(tcdom);\r\n\treturn np;\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getClassFrameDOM = function(){\r\n\tvar np = document.createElement(\"div\");\r\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-classframe-page\");\r\n\tvar docviewer = new TerminusDocumentViewer(this.ui, \"model\");\r\n\tdocviewer.loadCreateDocument(this.cls);\r\n\tdocviewer.page_config = \"model\";\r\n\tnp.appendChild(docviewer.getAsDOM());\r\n\treturn np;\r\n}\r\n\r\nTerminusSchemaViewer.prototype.showConfirmPage = function(newschema){\r\n\tthis.schema = newschema;\r\n\tthis.confirm_before_update = false;\r\n\tthis.mode = \"edit\";\r\n\tthis.refreshPage(\"Confirm new schema\");\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getSchemaEditDOM = function(){\r\n\tvar np = document.createElement(\"div\");\r\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-edit-page\");\r\n\tvar ipval = document.createElement(\"textarea\");\r\n\tipval.setAttribute(\"class\", \"terminus-schema-edit terminus-schema-textarea\");\r\n\tipval.setAttribute(\"width\", \"100%\");\r\n\tipval.setAttribute(\"style\", \"min-width: 400px; min-height: 400px;\");\r\n\tif(typeof(this.schema) == \"string\"){\r\n\t\tipval.innerHTML = this.schema;\r\n\t}\r\n\telse if(typeof (this.schema) == \"object\") {\r\n\t\tipval.innerHTML = JSON.stringify(this.schema, 0, 4);\r\n\t}\r\n\tthis.schema_edit_dom = ipval;\r\n\tnp.appendChild(ipval);\r\n\tUTILS.stylizeEditor(this.ui, ipval, 'schema', 'turtle');\r\n\treturn np;\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getSchemaViewDOM = function(){\r\n\tvar self = this;\r\n\tvar np = document.createElement(\"div\");\r\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-view-page\");\r\n\tvar ipval = document.createElement(\"pre\");\r\n\tipval.setAttribute(\"class\", \"terminus-schema-view terminus-scheme-pre\");\r\n\tif(typeof(this.schema) == \"string\"){\r\n\t\tvar txt = this.schema.replace(/&/g, \"&amp;\")\r\n         .replace(/</g, \"&lt;\")\r\n         .replace(/>/g, \"&gt;\")\r\n         .replace(/\"/g, \"&quot;\")\r\n         .replace(/'/g, \"&#039;\");\r\n\t\tipval.innerHTML = txt;\r\n\t}\r\n\telse if(typeof (this.schema) == \"object\") {\r\n\t\tipval.innerHTML = JSON.stringify(this.schema, 0, 4);\r\n\t}\r\n\tvar cm = UTILS.stylizeCodeDisplay(this.ui, ipval, np, 'turtle');\r\n\tif(!cm) np.appendChild(ipval);\r\n\treturn np;\r\n}\r\n\r\nTerminusSchemaViewer.prototype.getSchemaImportDOM = function(){\r\n\tvar scd = document.createElement(\"div\");\r\n\tscd.setAttribute(\"class\", \"terminus-form-border terminus-schema-page terminus-schema-import-page\");\r\n\r\n\r\n\tvar sci = document.createElement(\"div\");\r\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\r\n\tvar slab = document.createElement(\"span\");\r\n\tslab.setAttribute(\"class\", \"terminus-url-loader-input terminus-form-label terminus-control-label\");\r\n\tslab.appendChild(document.createTextNode(\"URL\"));\r\n\tsci.appendChild(slab);\r\n\tvar inpUrl  = document.createElement(\"input\");\r\n\tinpUrl.setAttribute(\"type\", \"text\");\r\n\tinpUrl.setAttribute(\"class\", \"terminus-form-value terminus-input-text terminus-form-url terminus-url-connect\");\r\n\tinpUrl.setAttribute(\"placeholder\", \"Enter URL of DB to import from\");\r\n\tsci.appendChild(inpUrl);\r\n\tscd.appendChild(sci);\r\n\r\n\tvar sci = document.createElement(\"div\");\r\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\r\n\tvar klab = document.createElement(\"span\");\r\n\tklab.setAttribute(\"class\", \"terminus-url-loader-input terminus-form-label  terminus-control-label terminus-import_mode-input\");\r\n\tklab.appendChild(document.createTextNode(\"Import Mode\"));\r\n\tsci.appendChild(klab);\r\n\tvar modes = document.createElement(\"select\");\r\n\tmodes.setAttribute(\"class\", \"terminus-form-select\");\r\n\r\n\tvar overwrite = document.createElement(\"option\");\r\n\toverwrite.value = \"replace\";\r\n\toverwrite.appendChild(document.createTextNode(\"Replace Mode\"))\r\n\tmodes.appendChild(overwrite);\r\n\tvar append = document.createElement(\"option\");\r\n\tappend.value = \"append\";\r\n\tappend.appendChild(document.createTextNode(\"Append Mode\"))\r\n\tmodes.appendChild(append);\r\n\tmodes.setAttribute(\"class\", \"terminus-form-select terminus-import-mode\");\r\n\tsci.appendChild(klab);\r\n\tsci.appendChild(modes);\r\n\tscd.appendChild(sci);\r\n\r\n\tvar sci = document.createElement(\"div\");\r\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\r\n\tvar klab = document.createElement(\"span\");\r\n\tklab.setAttribute(\"class\", \"terminus-form-label terminus-url-key-input terminus-control-label\");\r\n\tklab.appendChild(document.createTextNode(\"Key\"))\r\n\tvar key = document.createElement(\"input\");\r\n\tkey.setAttribute(\"type\", \"text\");\r\n\tkey.setAttribute(\"class\", \"terminus-form-value terminus-input-text terminus-url-key\");\r\n\tsci.appendChild(klab);\r\n\tsci.appendChild(key);\r\n\tscd.appendChild(sci);\r\n\tvar self = this;\r\n\tthis.doImport = function(){\r\n\t\tif(inpUrl.value){\r\n\t\t\tself.load(inpUrl.value, key.value, modes.value);\r\n\t\t}\r\n\t}\r\n\treturn scd;\r\n}\r\n\r\nmodule.exports=TerminusSchemaViewer\r\n","/* User interface elements that relate to server context\r\n *\r\n * TerminusServerController is a control widget that invokes server actions\r\n * TerminusServerViewer is a window that displays server actions and server screens\r\n *\r\n */\r\n const Datatables = require('../plugins/datatables.terminus');\r\n const UTILS =require('../Utils');\r\n const HTMLFrameHelper = require('./HTMLFrameHelper');\r\n \r\n function TerminusServerController(ui){\r\n\t this.ui = ui;\r\n }\r\n\r\nTerminusServerController.prototype.getAsDOM = function(){\r\n\tvar rsc = document.createElement(\"div\");\r\n\trsc.setAttribute(\"class\", \"terminus-server-controller\");\r\n\tvar self = this;\r\n\tif(this.ui && this.ui.server()){\r\n\t\tvar scd = document.createElement(\"div\");\r\n\t\tscd.setAttribute(\"class\", \"terminus-server-connectiAlso, the title / hover stuff should include the full entry when it is shortened (for urls / comments) so when I hover over it I should see the full texton\");\r\n        var nav = document.createElement('div');\r\n        nav.setAttribute('class', 'span3');\r\n        var ul = document.createElement('ul');\r\n        ul.setAttribute('class', 'terminus-ul');\r\n        nav.appendChild(ul);\r\n        rsc.appendChild(nav);\r\n        // connected to server\r\n        var a = document.createElement('a');\r\n        a.setAttribute('class', 'terminus-dashboard-info terminus-list-group-a terminus-nav-width');\r\n        var txt = 'Server: ' + this.ui.server();\r\n        a.appendChild(document.createTextNode(txt));\r\n        ul.appendChild(a);\r\n        // change server\r\n        if(this.ui.showControl(\"change-server\")){\r\n            var a = document.createElement('a');\r\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\r\n            var self = this;\r\n            a.addEventListener(\"click\", function(){\r\n                UTILS.activateSelectedNav(this, self);\r\n                self.ui.showLoadURLPage();\r\n            })\r\n            var icon = document.createElement('i');\r\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-link');\r\n            a.appendChild(icon);\r\n            var txt = document.createTextNode('Change Server');\r\n            a.appendChild(txt);\r\n            ul.appendChild(a);\r\n        }\r\n        // view databases\r\n        if(this.ui.showControl(\"db\")){\r\n            var a = document.createElement('a');\r\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\r\n            var self = this;\r\n            a.addEventListener(\"click\", function(){\r\n                UTILS.activateSelectedNav(this, self);\r\n                if(self.ui.db()){\r\n                    //self.ui.clearDB();\r\n                }\r\n                self.ui.showServerMainPage();\r\n            })\r\n            var icon = document.createElement('i');\r\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-eye');\r\n            a.appendChild(icon);\r\n            var txt = document.createTextNode('View Databases');\r\n            a.appendChild(txt);\r\n            ul.appendChild(a);\r\n        }\r\n        if(this.ui.showControl(\"create_database\")){\r\n            var a = document.createElement('a');\r\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\r\n            var self = this;\r\n            a.addEventListener(\"click\", function(){\r\n               UTILS.activateSelectedNav(this, self);\r\n                if(self.ui.db()){\r\n                    //self.ui.clearDB();\r\n                }\r\n                self.ui.showCreateDBPage();\r\n            })\r\n            var icon = document.createElement('i');\r\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-plus');\r\n            a.appendChild(icon);\r\n            var txt = document.createTextNode('Create New Database');\r\n            a.appendChild(txt);\r\n            ul.appendChild(a);\r\n        }\r\n\t}\r\n\treturn rsc;\r\n}\r\n\r\nTerminusServerController.prototype.getServerLabelDOM = function(){\r\n\tvar srec = this.ui.client.connection.getServerRecord();\r\n\tvar lab = (srec && srec['rdfs:label'] && srec['rdfs:label'][\"@value\"] ? srec['rdfs:label'][\"@value\"] : this.ui.server());\r\n\tvar desc = (srec && srec['rdfs:comment'] && srec['rdfs:comment'][\"@value\"] ? srec['rdfs:comment'][\"@value\"] : \"\");\r\n\tdesc += \" Server URL: \"+ this.ui.server();\r\n\tvar val = document.createElement(\"span\");\r\n\tval.setAttribute(\"class\", \"terminus-server-value\");\r\n\tval.setAttribute(\"title\", desc);\r\n\tval.appendChild(document.createTextNode(lab));\r\n    val =  document.createElement('div');\r\n\treturn val;\r\n}\r\n\r\nfunction TerminusServerViewer(ui){\r\n\tthis.ui = ui;\r\n\tthis.server = this.ui.server();\r\n\tthis.max_cell_size = 500;\r\n\tthis.max_word_size = 40;\r\n}\r\n\r\nTerminusServerViewer.prototype.getAsDOM = function(selected){\r\n\tvar self = this;\r\n\tvar pd = document.createElement(\"span\");\r\n\tpd.setAttribute(\"class\", \"terminus-server-home-page\");\r\n\tif(this.ui.server()){\r\n\t\tvar scd = document.createElement(\"span\");\r\n\t\tscd.setAttribute(\"class\", \"terminus-server-home\");\r\n\t\tif(this.ui.showView(\"server\")){\r\n\t\t\t// 11092019 scd.appendChild(this.getServerDetailsDOM());\r\n\t\t}\r\n\t\tif(this.ui.showView(\"change-server\")){\r\n\t\t\tvar csbut = document.createElement(\"button\");\r\n\t\t\tcsbut.setAttribute(\"class\", \"terminus-control-button terminus-change-server-button terminus-btn\")\r\n\t\t\tcsbut.appendChild(document.createTextNode(\"Disconnect\"));\r\n\t\t\tcsbut.addEventListener(\"click\", function(){\r\n\t\t\t\t//self.ui.clearDB();\r\n\t\t\t\t//self.ui.clearServer();\r\n\t\t\t\tself.ui.showLoadURLPage();\r\n\t\t\t})\r\n\t\t\t// 11092019 scd.appendChild(csbut);\r\n\t\t}\r\n\t\tif(this.ui.showView(\"create_database\")){\r\n\t\t\tvar crbut = document.createElement(\"button\");\r\n\t\t\tcrbut.setAttribute(\"class\", \"terminus-control-button terminus-create-db-button terminus-btn\")\r\n\t\t\tcrbut.appendChild(document.createTextNode(\"Create New Database\"));\r\n\t\t\tcrbut.addEventListener(\"click\", function(){\r\n\t\t\t\tif(self.ui.db()){\r\n\t\t\t\t\t//self.ui.clearDB();\r\n\t\t\t\t}\r\n\t\t\t\tself.ui.clearMessages();\r\n\t\t\t\tself.ui.showCreateDBPage();\r\n\t\t\t})\r\n\t\t\t// 11092019 scd.appendChild(crbut);\r\n\t\t}\r\n\t\tif(this.ui.showView(\"db\")){\r\n\t\t\tscd.appendChild(this.getDBListDOM());\r\n\t\t}\r\n\t\tpd.appendChild(scd);\r\n\t}\r\n\telse {\r\n\t\tself.ui.showLoadURLPage();\r\n\r\n\t\t//pd.appendChild(this.getLoadURLPage());\r\n\t}\r\n\treturn pd;\r\n}\r\n\r\nTerminusServerViewer.prototype.getServerDetailsDOM = function(){\r\n\tvar scd = document.createElement(\"span\");\r\n\tscd.setAttribute(\"class\", \"terminus-server-details terminus-server-banner\");\r\n\tvar scl = document.createElement(\"span\");\r\n\tscl.setAttribute(\"class\", \"terminus-label terminus-server-info\");\r\n\tscl.appendChild(document.createTextNode(\"Connected to Server - \"))\r\n\tvar scs = document.createElement(\"span\");\r\n\tscs.setAttribute(\"class\", \"terminus-value terminus-server-info\");\r\n\tscs.appendChild(document.createTextNode(this.ui.server()))\r\n\tscd.appendChild(scl);\r\n\tscd.appendChild(scs);\r\n\treturn scd;\r\n}\r\n\r\nTerminusServerViewer.prototype.wrapTableLinkCell = function(tdElement,dbid, text){\r\n\tvar self = this;\r\n\tvar wrap = document.createElement(\"p\");\r\n//\twrap.setAttribute(\"href\", \"#\");\r\n\twrap.setAttribute(\"class\", \"terminus-table-content\");\r\n\tHTMLFrameHelper.wrapShortenedText(wrap, text, this.max_cell_size, this.max_word_size);\r\n\ttdElement.addEventListener(\"click\", function(){\r\n\t\tself.ui.connectToDB(dbid);\r\n\t\tself.ui.showDBMainPage();\r\n\t});\r\n\treturn wrap;\r\n}\r\n\r\nTerminusServerViewer.prototype.getDBListDOM = function(){\r\n\tvar self = this;\r\n\tvar sec = document.createElement(\"div\");\r\n\tvar lihed = document.createElement(\"h3\");\r\n\tlihed.setAttribute(\"class\", \"terminus-db-list-title terminus-module-head\");\r\n\tlihed.appendChild(document.createTextNode(\"Available Databases\"));\r\n\tsec.appendChild(lihed);\r\n\tvar scd = document.createElement(\"table\");\r\n\tscd.setAttribute(\"class\", \"terminus-db-list terminus-db-size terminus-hover-table\");\r\n\tvar thead = document.createElement(\"thead\");\r\n\tvar thr = document.createElement(\"tr\");\r\n\tvar th1 = document.createElement(\"th\");\r\n\tth1.appendChild(document.createTextNode(\"ID\"));\r\n\tth1.setAttribute(\"class\", \"terminus-db-id terminus-table-header-full-css\");\r\n\tvar th2 = document.createElement(\"th\");\r\n\tth2.appendChild(document.createTextNode(\"Title\"));\r\n\tth2.setAttribute(\"class\", \"terminus-db-title terminus-table-header-full-css\");\r\n\tvar th3 = document.createElement(\"th\");\r\n\tth3.appendChild(document.createTextNode(\"Description\"));\r\n\tth3.setAttribute(\"class\", \"terminus-db-description terminus-table-header-full-css\");\r\n\tvar th4 = document.createElement(\"th\");\r\n\tth4.setAttribute(\"class\", \"terminus-db-size terminus-table-header-full-css\");\r\n\tth4.appendChild(document.createTextNode(\"Size\"));\r\n\tvar th5 = document.createElement(\"th\");\r\n\tth5.setAttribute(\"class\", \"terminus-db-created terminus-table-header-full-css\");\r\n\tth5.appendChild(document.createTextNode(\"Created\"));\r\n\tvar th6 = document.createElement(\"th\");\r\n\tth6.appendChild(document.createTextNode(\"Delete\"));\r\n\tth6.setAttribute(\"class\", \"terminus-db-delete terminus-table-header-full-css\");\r\n\tthr.appendChild(th1);\r\n\tthr.appendChild(th2);\r\n\tthr.appendChild(th3);\r\n\t//thr.appendChild(th4);\r\n\t//thr.appendChild(th5);\r\n\tthr.appendChild(th6);\r\n\tthead.appendChild(thr);\r\n\tscd.appendChild(thead);\r\n\tvar tbody = document.createElement(\"tbody\");\r\n\tvar dbrecs = this.ui.client.connection.getServerDBRecords();\r\n\tfor(let fullid in dbrecs){\r\n\t\tlet dbrec = dbrecs[fullid];\r\n\t\tconst dbid = fullid.split(\":\")[1];\r\n\t\tlet tr = document.createElement(\"tr\");\r\n\t\tvar td1 = document.createElement(\"td\");\r\n\t\ttd1.appendChild(this.wrapTableLinkCell(td1,dbid, dbid));\r\n\t\ttd1.setAttribute(\"class\", \"terminus-db-id terminus-db-pointer\");\r\n\t\tvar td2 = document.createElement(\"td\");\r\n\t\ttd2.setAttribute(\"class\", \"terminus-db-title terminus-db-pointer\");\r\n\t\tvar txt = (dbrec && dbrec['rdfs:label'] && dbrec['rdfs:label']['@value'] ? dbrec['rdfs:label']['@value'] : \"\");\r\n\t\ttd2.appendChild(this.wrapTableLinkCell(td2,dbid, txt));\r\n\t\tvar td3 = document.createElement(\"td\");\r\n\t\ttd3.setAttribute(\"class\", \"terminus-db-description terminus-db-pointer\");\r\n\t\tvar txt = (dbrec && dbrec['rdfs:comment'] && dbrec['rdfs:comment']['@value'] ? dbrec['rdfs:comment']['@value'] : \"\");\r\n\t\ttd3.appendChild(this.wrapTableLinkCell(td3,dbid, txt));\r\n\t\tvar td4 = document.createElement(\"td\");\r\n\t\ttd4.setAttribute(\"class\", \"terminus-db-size terminus-db-pointer\");\r\n\t\tvar txt = (dbrec && dbrec['terminus:size'] && dbrec['terminus:size']['@value'] ? dbrec['terminus:size']['@value'] : \"\");\r\n\t\ttd4.appendChild(this.wrapTableLinkCell(td4,dbid, txt));\r\n\t\tvar td5 = document.createElement(\"td\");\r\n\t\ttd5.setAttribute(\"class\", \"terminus-db-created terminus-db-pointer\");\r\n\t\tvar txt = (dbrec && dbrec['terminus:last_updated'] && dbrec['terminus:last_updated']['@value'] ? dbrec['terminus:last_updated']['@value'] : \"\");\r\n\t\ttd5.appendChild(this.wrapTableLinkCell(td5,dbid, txt));\r\n\t\tvar td6 = document.createElement(\"td\");\r\n\t\ttd6.setAttribute(\"class\", \"db-delete\");\r\n        if(this.deleteDBPermitted(dbid)){\r\n            if(this.ui.pluginAvailable(\"font-awesome\")){\r\n                var delbut = document.createElement('i');\r\n        \t\tdelbut.setAttribute(\"class\", \"terminus-db-list-del-icon fa fa-times-circle\");\r\n        \t}\r\n            else{\r\n                var delbut = document.createElement(\"button\");\r\n    \t\t\tdelbut.appendChild(document.createTextNode(\"Delete\"));\r\n    \t\t\tdelbut.setAttribute(\"class\", \"terminus-control-button terminus-delete-db-button\");\r\n            }\r\n\t\t\t// function to fix db in a closure\r\n\t\t\tvar delDB = function(db){\r\n\t\t\t\treturn function(){\r\n\t\t\t\t\tlet deleteConfirm = confirm(`Do you want to delete ${db} Database?`);\r\n\t\t\t\t\tif (deleteConfirm == true) {\r\n\t\t\t  \t\t\tself.ui.deleteDatabase(db);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//self.ui.deleteDatabase(db);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tdelbut.addEventListener(\"click\", delDB(dbid));\r\n\t\t\ttd6.appendChild(delbut);\r\n\t\t}\r\n\r\n\t\ttr.appendChild(td1);\r\n\t\ttr.appendChild(td2);\r\n\t\ttr.appendChild(td3);\r\n\t\t//tr.appendChild(td4);\r\n\t\t//tr.appendChild(td5);\r\n\t\ttr.appendChild(td6);\r\n\t\ttbody.appendChild(tr);\r\n\t}\r\n\tscd.appendChild(tbody);\r\n\tsec.appendChild(scd);\r\n\r\n\tif(this.ui.pluginAvailable(\"datatables\")){\r\n        var dt = new Datatables.CspDatatables(this.ui);\r\n\t\tvar tab = dt.draw(scd);\r\n\t}\r\n\treturn sec;\r\n}\r\n\r\nTerminusServerViewer.prototype.deleteDBPermitted = function(dbid){\r\n\tif(dbid == \"terminus\") return false;\r\n\tif(this.ui.client.connection.capabilitiesPermit(\"delete_database\", dbid)) return true;\r\n\treturn false;\r\n}\r\n\r\nmodule.exports = {TerminusServerViewer,TerminusServerController}\r\n","function TerminusURLLoader(ui, val){\r\n\tthis.ui = ui;\r\n\tthis.val = val;\r\n\tthis.url_input = false;\r\n\tthis.key_input = false;\r\n}\r\n\r\nTerminusURLLoader.prototype.getLabelDOM = function(){\r\n\treturn document.createTextNode(\"Connect\");\r\n}\r\n\r\nTerminusURLLoader.prototype.getFormFieldDOM = function(ip, fname, ltxt, pholder){\r\n\tvar sci = document.createElement(\"div\");\r\n\tsci.setAttribute(\"class\", \"terminus-form-horizontal terminus-control-group terminus-form-field-spacing terminus-form-field terminus-field-\"+fname);\r\n\tvar lab = document.createElement(\"span\");\r\n\tlab.setAttribute(\"class\", \"terminus-control-label terminus-form-label terminus-form-field-label terminus-label-\"+fname);\r\n\tlab.appendChild(document.createTextNode(ltxt))\r\n\tip.setAttribute(\"type\", \"text\");\r\n\tip.setAttribute(\"placeholder\", pholder);\r\n\tsci.appendChild(lab);\r\n\tsci.appendChild(ip);\r\n\treturn sci;\r\n}\r\n\r\nTerminusURLLoader.prototype.getAsDOM = function(){\r\n\tvar scd = document.createElement(\"div\");\r\n\tscd.setAttribute(\"class\", \"terminus-form terminus-url-loader\");\r\n\tvar stit = document.createElement(\"h3\");\r\n\tstit.setAttribute(\"class\", \"terminus-form-header terminus-connect-header terminus-module-head\");\r\n\tstit.appendChild(document.createTextNode(\"Connect To Terminus Server\"));\r\n\tscd.appendChild(stit);\r\n\tvar mfd = document.createElement('div');\r\n\tmfd.setAttribute('class', 'terminus-form-border');\r\n\tscd.appendChild(mfd);\r\n\tthis.url_input = document.createElement(\"input\");\r\n\tthis.url_input.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-form-field-input terminus-input-text\");\r\n\tif(this.val){\r\n\t\tthis.url_input.value = this.val;\r\n\t}\r\n\tmfd.appendChild(this.getFormFieldDOM(this.url_input, \"connect\", \"URL\", \"Terminus DB URL\"));\r\n\tthis.key_input = document.createElement(\"input\");\r\n\tthis.key_input.setAttribute(\"class\", \"terminus-form-value terminus-value terminus-input-text\");\r\n\tmfd.appendChild(this.getFormFieldDOM(this.key_input, \"connect\", \"Key\", \"Server API Key\"));\r\n\tvar loadbuts = document.createElement(\"div\");\r\n\tloadbuts.setAttribute(\"class\", \"terminus-control-buttons\");\r\n\tvar loadbut = document.createElement(\"button\");\r\n\tloadbut.setAttribute(\"class\", \"terminus-control-button terminus-url-load terminus-btn\");\r\n\tloadbut.appendChild(document.createTextNode(\"Connect\"));\r\n\tvar self = this;\r\n\tloadbut.addEventListener(\"click\", function(){\r\n\t\tif(self.url_input.value){\r\n\t\t\tself.ui.load(self.url_input.value, self.key_input.value);\r\n\t\t}\r\n\t});\r\n\tloadbuts.appendChild(loadbut);\r\n\tmfd.appendChild(loadbuts);\r\n\treturn scd;\r\n}\r\n\r\n\r\nmodule.exports=TerminusURLLoader\r\n"],"sourceRoot":""}