{"version":3,"sources":["webpack://TerminusDashboard/webpack/bootstrap","webpack://TerminusDashboard/./src/Utils.js","webpack://TerminusDashboard/./src/query/WOQLQuery.js","webpack://TerminusDashboard/./src/plugins/TerminusPlugin.js","webpack://TerminusDashboard/./src/client/RenderingMap.js","webpack://TerminusDashboard/./src/client/HTMLFrameHelper.js","webpack://TerminusDashboard/./src/client/TerminusClassChooser.js","webpack://TerminusDashboard/./src/query/WOQLResultsViewer.js","webpack://TerminusDashboard/./src/client/TerminusDocument.js","webpack://TerminusDashboard/./src/plugins/datatables.terminus.js","webpack://TerminusDashboard/./src/client/ObjectViewer.js","webpack://TerminusDashboard/./src/client/viewers/String.js","webpack://TerminusDashboard/./src/client/viewers/DateHelper.js","webpack://TerminusDashboard/./src/client/viewers/GoogleMapHelper.js","webpack://TerminusDashboard/./src/client/PropertyViewer.js","webpack://TerminusDashboard/./src/client/DataViewer.js","webpack://TerminusDashboard/./src/client/TerminusDocumentChooser.js","webpack://TerminusDashboard/./src/index.js","webpack://TerminusDashboard/./src/TerminusUI.js","webpack://TerminusDashboard/./src/ApiExplorer.js","webpack://TerminusDashboard/./src/plugins/codemirror.terminus.js","webpack://TerminusDashboard/./src/client/ObjectRenderer.js","webpack://TerminusDashboard/./src/client/viewers/StringEditor.js","webpack://TerminusDashboard/./src/client/viewers/Boolean.js","webpack://TerminusDashboard/./src/client/viewers/BooleanEditor.js","webpack://TerminusDashboard/./src/client/viewers/Choice.js","webpack://TerminusDashboard/./src/client/viewers/ChoiceEditor.js","webpack://TerminusDashboard/./src/client/viewers/Coordinate.js","webpack://TerminusDashboard/./src/client/viewers/CoordinateEditor.js","webpack://TerminusDashboard/./src/client/viewers/Date.js","webpack://TerminusDashboard/./src/client/viewers/DateEditor.js","webpack://TerminusDashboard/./src/client/viewers/Entity.js","webpack://TerminusDashboard/./src/client/viewers/EntityEditor.js","webpack://TerminusDashboard/./src/client/viewers/Image.js","webpack://TerminusDashboard/./src/client/viewers/ImageEditor.js","webpack://TerminusDashboard/./src/client/viewers/Link.js","webpack://TerminusDashboard/./src/client/viewers/Number.js","webpack://TerminusDashboard/./src/client/viewers/Range.js","webpack://TerminusDashboard/./src/client/viewers/RangeEditor.js","webpack://TerminusDashboard/./src/client/viewers/SanitizedHTML.js","webpack://TerminusDashboard/./src/client/viewers/GoogleMapEditor.js","webpack://TerminusDashboard/./src/client/viewers/GoogleMapViewer.js","webpack://TerminusDashboard/./src/client/viewers/HTMLMarkupEditor.js","webpack://TerminusDashboard/./src/client/viewers/S2EntityEditor.js","webpack://TerminusDashboard/./src/client/ValueRenderer.js","webpack://TerminusDashboard/./src/client/TerminusDB.js","webpack://TerminusDashboard/./src/client/TerminusViolation.js","webpack://TerminusDashboard/./src/client/TerminusQuery.js","webpack://TerminusDashboard/./src/query/WOQLTextboxGenerator.js","webpack://TerminusDashboard/./src/client/TerminusPropertyChooser.js","webpack://TerminusDashboard/./src/client/TerminusMapping.js","webpack://TerminusDashboard/./src/client/TerminusSchema.js","webpack://TerminusDashboard/./src/client/TerminusServer.js","webpack://TerminusDashboard/./src/client/TerminusURL.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Codemirror","require","getHeaderDom","text","hd","document","createElement","setAttribute","h","innerHTML","appendChild","stylizeCodeDisplay","ui","txt","dom","cmConfig","pluginAvailable","pr","colorizePre","removeSelectedNavClass","el","getElementsByClassName","length","classList","remove","hideDocumentSubMenus","contains","add","tolggleContent","icon","content","style","display","stylizeEditor","view","cm","ar","colorizeTextArea","updateTextArea","deleteStylizedEditor","qip","nextElementSibling","TerminusClient","FrameHelper","removeChildren","showHttpResult","response","action","currForm","terminator","br","retHttpHeaders","headers","hdres","createTextNode","json","then","rd","data","JSON","stringify","pre","getResponse","getInfoAlertDom","type","label","msg","ald","str","getFunctionSignature","which","sigs","spec","descr","result","args","server_url","options","title","description","database_url","details","format","editmode","document_url","fail_on_id_denied","woql","class","term","source","target","toggleVisibility","extractValueFromCell","cellValue","DOMParser","parseFromString","firstChild","activateSelectedNav","nav","showControl","checkDocumentSubMenus","WOQLResult","WOQLQuery","client","this","default_limit","prefixes","connectionConfig","platformEndpoint","sid","server","substring","lastIndexOf","colid","dbid","serverURL","schemaURL","dbURL","docURL","pref","standard_urls","setPrefixes","shorten","url","execute","wrapped","wrap","self","select","getConcreteDocumentClassPattern","varc","and","getSubclassQueryPattern","not","getAbstractQueryPattern","varname","quad","clsname","sub","queryWrappedWithLimit","query","limit","start","getAllDocumentQuery","constraint","triple","push","getEverythingQuery","wjson","getPropertyListQuery","opt","getElementMetaDataQuery","getClassListMetaDataQuery","getClassMetaDataQuery","getDataOfChosenClassQuery","chosen","getDataOfChosenPropertyQuery","getInstanceMeta","getDocumentQuery","id","getClassesQuery","TerminusPluginManager","preloaded","loaded","loading","precluded","plugins","css","js","requires","setPluginOptions","opts","k","init","calculatePreloaded","toload","calculateRequiredInitPlugins","loadPlugins","pins","pid","indexOf","getDefaultPlugins","needed_pins","loading_order","getAvailablePlugins","pl","plugin","version_check","pluginmeta","version","jQuery","isFunction","fn","slider","e","Quill","JSONEditor","CodeMirror","fontAwesomeCheck","dataTable","select2","google","maps","ol","Map","d3","console","log","Error","element","span","className","body","insertBefore","window","getComputedStyle","getPropertyValue","replace","removeChild","ticker","cback","loadPlugin","pug","cssid","loadDynamicCSS","scripts","splice","loadDynamicScript","loadPluginScripts","loadPageCSS","cssfid","cssdom","getElementById","parentNode","cssurl","pluginLoadable","pluginLoadedOrLoading","disabled","obj","getPluginDOM","plugid","a","cl","cbox","checked","clab","addEventListener","togglePlugin","redraw","unloadPlugin","drawPlugins","num","getAsDOM","dm","clh","showPlugins","ObjectViewer","HTMLStringViewer","HTMLStringEditor","HTMLBooleanViewer","HTMLBooleanEditor","HTMLChoiceViewer","HTMLChoiceEditor","HTMLCoordinateViewer","HTMLCoordinateEditor","HTMLDateViewer","HTMLDateEditor","HTMLEntityViewer","HTMLEntityEditor","HTMLImageViewer","HTMLImageEditor","HTMLLinkViewer","HTMLNumberViewer","HTMLRangeViewer","HTMLRangeEditor","SantizedHTMLViewer","GoogleMapEditor","GoogleMapViewer","HTMLMarkupEditor","S2EntityEditor","RenderingMap","registeredDataViewers","registeredDataEditors","registeredPropertyViewers","registeredPropertyEditors","registeredObjectViewers","registeredObjectEditors","getValidDataViewerList","frametype","valids","concat","getValidDataEditorList","nftypes","getValidPropertyViewerList","proptype","proprange","propdom","getValidPropertyEditorList","getViewer","vi","renderers","viewer","eval","alert","toString","getAvailablePropertyViewers","renderer","viewers","nviewers","sets","getAvailablePropertyEditors","getAvailableDataViewers","getAvailableDataEditors","getViewerForDataFrame","vals","getEditorForDataFrame","registerViewerForTypes","types","registerEditorForTypes","registerEditorForFrameType","registerViewerForFrameType","registerViewerForProperties","properties","registerEditorForProperties","HTMLPropertyViewer","patternMatchesRenderer","pattern","FramePattern","checkRenderer","compiled_options","compileOptions","parent","facets","getDefaultFacets","facet","deffacet","getDefaultFacet","hide_disabled_buttons","features","controls","viewerType","viewerOptions","header","header_viewer","HTMLObjectHeaderViewer","filter","sort","rules","output","frame_type","subject","subjectClass","range","children","depth","index","status","rtype","getRendererType","illegalRuleType","checkFrameType","checkLabel","checkSubject","checkSubjectClass","checkProperty","checkDepth","checkRange","checkValue","checkParent","checkChildren","checkIndex","checkStatus","rsubj","IDsMatch","found","prop","j","values","isUpdated","isNew","numberMatch","propertyIDsMatch","valuesMatch","rangeIDsMatch","rcls","classIDsMatch","frame","ftype","renderder","getLabel","stringMatch","ida","idb","compareIDs","vala","valb","RegExp","test","constructor","renderer_type","HTMLFrameHelper","control","callback","dpropDOM","button","objId","background","selected","sel","labelFromURL","viewsDOM","setMode","getActionControl","cancel","location","href","loc","split","sh","getShorthand","bits","htmlid","help","input","infoDOM","linfo","lspacer","lval","TerminusClassChooser","choice","show_single","setRoot","root","setFilter","change","cls","ccdom","ccsel","wq","getResultsAsOptions","clist","choices","bindings","empty_choice","opt1","added","bclass","getVariableValueFromBinding","lab","Datatables","res","WOQLResultsViewer","wresult","wQuery","settings","queryPage","qPage","pman","count","hasBindings","showTable","show_table","orderColumns","sample","ordered","unshift","resultDOM","displayResultHeader","rs","rh","getTableDOM","nor","dtResult","getTable","tab","draw","getDtTableDOMOnChange","pageInfo","formatResultsForDatatableDisplay","columns","colDataData","formattedResult","ordered_headings","validURL","getDocumentLocalLink","outerHTML","recordsTotal","recordsFiltered","getTableBody","tbody","tr","td","showDocument","dtPlugin","thead","thr","th","Renderers","TerminusDocumentViewer","db","editor","load_schema","config_options","getBuiltInViewerOptions","classmeta","instancemeta","Class","refreshPage","elid","getClassMeta","loadCreateDocument","showBusy","page_config","loadDocumentSchema","clearBusy","setLabel","error","showError","loadDocument","getDocument","loadDataFrames","ncls","unshorten","getClassFrame","loadSchemaFrames","deleteDocument","URL","createDocument","extr","extract","showViolations","updateDocument","durl","subjid","dataframes","domain","ObjectFrame","classframes","loadClassFrames","newDoc","fillFromSchema","render","getOptionsFromPageConfig","ObjectRenderer","controller","FrameConfig","pageconf","getClient","docid","labdom","dfs","getDataFrames","getStdURL","pagedom","rends","holder","controldom","keys","getDocumentPageControls","dpc","UTILS","CspDatatables","wResViewer","wrViewer","convertToDatatable","dt","table","DataTable","searching","pageLength","lengthMenu","paging","initComplete","oInstance","api","$","each","html","columnDefs","targets","createdRow","row","find","attr","on","cell","column","showDBMainPage","dbInfo","parents","dbId","deleteDatabase","executeQuery","err","getQueryOnPagination","sqp","chosenValue","generateNewQueryOnPageChange","qTextDom","undefined","getCallbackSettings","len","setUp","dtdom","getNewDataOnChange","drawnTab","aSettings","_iDisplayLength","_iDisplayStart","getDataFromServer","serverSide","processing","ajax","entries","buttons","extend","scrollX","HTMLObjectViewer","headerViewer","getObjectHeaderViewer","renderedDOM","getObjectDOM","replaceWith","getObjectIDMarker","getObjectBodyDOM","orientation","getContentOrientation","pcls","sp","vholder","getFeatureDOM","feature","hasFeatureViewer","featureViewer","redrawHeader","nheader","redrawBody","nbody","addRenderedProperty","renderedprop","clear","goTo","subj","goToName","idm","sumDOM","controlsDOM","objDOM","showFeature","facetDOM","getObjectFacetDOM","getObjectLabelDOM","idDOM","getObjectIDDOM","typeDOM","getObjectTypeDOM","getObjectStatusDOM","viewDOM","getViewPropertyDOM","hideDOM","getViewerSelectorDOM","getObjectControlsDOM","getObjectSummaryDOM","sum","getSummary","getInfoboxDOM","addDOM","getAddPropertyDOM","getModeSelectorDOM","getObjectDeleteDOM","cpropDOM","getObjectCloneDOM","rpropDOM","getObjectResetDOM","upropDOM","getObjectUpdateDOM","showDOM","getObjectShowDOM","getObjectHideDOM","viewables","getAvailableFacets","mpropDOM","getSelectionControl","currentFacet","val","setFacet","isNewDocument","required","isClassChoice","cs","getAvailableClassChoices","mlabDOM","changeClass","cmt","Label","Comment","addables","getAddableProperties","cardControlAllows","addNewProperty","getViewableProperties","goToProperty","clone","reset","getAvailableViewers","currentViewer","setViewer","hide","show","save","size","getDOM","dataviewer","HTMLDateHelper","months","getMonthName","GoogleMapHelper","polygon","polyline","markers","config","width","height","mapLat","mapLong","zoom","stroke","color","opacity","weight","fill","line","destroy","translatePolygonToArray","vertices","getPath","seenValue","getLength","xy","getAt","lat","lng","translateArrayToPolygon","array","jsonified","parse","latlong","createPolygon","coords","map","Polygon","paths","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","setMap","createPolyline","Polyline","clearMarkers","addMarker","position","ty","marker","Marker","addListener","getCoordsFromMarkers","set","x","initMap","mapContainer","center","parseFloat","setPath","event","trigger","getPropertyHeaderViewer","HTMLPropertyHeaderViewer","block","propDOM","npropDOM","getPropertyDOM","getPropertyIDMarker","getPropertyBodyDOM","addRenderedValue","renderedval","wrapper","expModeMenu","getPropertyControlsDOM","getPropertyLabelDOM","statDOM","getPropertyStatusDOM","prepend","getPropertySummaryDOM","prelude","getPropertyFacetDOM","getViewValueDOM","getPropertyIDDOM","getPropertyRangeDOM","hasCardinalityRestriction","getPropertyCardinalityDOM","getPropertyCommentDOM","getComment","restriction","getRestriction","min","max","getActionControlDOM","settingsDOM","getPropertyDeleteDOM","getAddValueDOM","getPropertyResetDOM","getPropertyUpdateDOM","getPropertyShowDOM","getPropertyHideDOM","getSettingsControlDOM","addClass","getViewableValues","goToValue","showValue","HTMLDataViewer","getValueHeaderViewer","HTMLDataHeaderViewer","JSONObjectViewer","valDOM","nvalDOM","getValueDOM","getValueIDMarker","getValueBodyDOM","vdom","getDataValueViewer","getSummaryDOM","HTMLTerminusClient","internalLink","link","onclick","preventDefault","load","onClick","getValueFacetDOM","getValueTypeDOM","getValueStatusDOM","getValueControlsDOM","getValueDeleteDOM","getValueCloneDOM","getValueResetDOM","getValueUpdateDOM","getValueShowDOM","getValueHideDOM","TerminusDocumentChooser","show_button","getS2DOM","getIDDOM","docchooser","cfilter","termcc","new_class","tdom","s2config","dataType","params","contentType","delay","cache","placeholder","dcip","keyCode","dbut","toggleView","getChangeViewText","TerminusUI","TerminusConfig","pconfig","messages","explorer","nlocation","ApiExplorer","TerminusDBsdk","TerminusViolations","TerminusQueryViewer","TerminusMappingViewer","TerminusSchemaViewer","TerminusServersdk","TerminusURLLoader","WOQLClient","setOptions","connect","getDBRecord","connectToDB","showView","schema","showSchemaPage","showQueryPage","showExplorer","showServerMainPage","createDatabase","dbdets","Promise","reject","getBadArguments","myserver","dbdoc","generateNewDatabaseDocument","getSchema","updateSchema","refreshDBList","crec","connection","getCrashString","showMessage","delrec","lid","dbn","removeDB","dets","doc","rdfs","terminus","fname","getConnectionEndpoint","clearServer","clearDB","TerminusServerViewer","redrawMainPage","showLoadURLPage","TerminusDBViewer","showCreateDBPage","TerminusDBCreator","showMappingPage","mapping","getDocViewerOptions","showCreateDocument","getDocCreatorOptions","main","showResult","clearMessages","clearMainPage","setMessageDOM","setbuttonControls","setControllerDOM","setExplorerDOM","setPluginsDOM","setViewerDOM","comps","slocation","toggleControl","drawControls","toggleDashboardWidget","widget","drawExplorer","loadControls","ncontrol","nd","exp","ae","sc","TerminusServerController","TerminusDBController","show_controls","pseudoCapability","capabilitiesPermit","show_views","busy","getBusyLoader","bsyDom","pd","pbc","pbsa","pbia","md","msgHolder","vios","nvios","cmsg","views","document_options","schema_options","piman","addPlugin","getClassFrameOptions","viewdoc_options","apiNavConfig","mainNav","navText","defaultSelected","database","subNav","getClassFrames","viewDocument","update","use_fetch","return_full_response","aec","getApiNav","getApiExplorerDom","setSelectedNavMenu","setSelectedSubMenu","navOnSelect","createNavs","navConfig","ul","navDom","cont","apiCont","getConnectExplorer","getDatabaseExplorer","getSchemaApi","getDocumentApi","getQueryApi","changeSubApiDom","curSubMenu","getDatabaseDom","getShowApiDom","getQueryApiDom","subNavOnSelect","subMenuConfig","createSubNavs","b","getSignature","getForm","getServerForm","form","fd","inpLabel","cd","inpId","keyLabel","resd","gatherips","curApi","urlPlaceholder","formDoc","urlLabel","inpUrl","docUrlLabel","inpDocUrl","inpKey","docLabel","inpDoc","inp","docUrl","getApiSendButton","getApiForm","enc","schurl","buttonSelf","connected_mode","gtxtar","txtar","dcurl","schemaUrlDom","payload","htmlEditor","getValue","sg","ic","sig","textdom","darkMode","jsonldCheck","fromTextArea","firstLineNumber","lineNumbers","styleActiveLine","lineWrapping","smartIndent","indentWithTabs","newlineAndIndent","autoCloseBrackets","matchBrackets","afterCursor","extraKeys","refresh","setCodemirrorSize","defaultCharWidth","setOption","setSize","setTimeout","runMode","innerText","theme","ValueRenderer","PropertyViewer","PropertyRenderer","predicate","cframe","objframe","getPropertyClassFrame","originalValues","changed","originalProperties","newProperties","TerminusDashboard","decorateRenderer","getOptionsForChild","getOptionsForValue","df","getOptionsForObject","buildValueRenderers","getViewerForProperty","adorig","isData","getDataFramesToRender","vr","kids","getChildrenToRender","kidf","viewIncludesChildren","allkids","getChildren","extracts","updated","childUpdated","hasRestriction","cf","getClassChoices","clsmeta","deleteProperty","addProperty","setNew","addPropertyClass","newb","nvals","deletePropertyValue","removePropertyValue","addPropertyValue","rest","currentnum","new_property","hideDisabledControls","hide_disabled_controls","nocascade","parentFacetChange","page","multiline","summary","containsPage","isObject","setView","nukeViewer","ptype","ret","valcount","vsum","getFeaturesForFacet","getOptionsForProperty","buildPropertyRenderers","getViewerForObject","props","getPropertiesToRender","renders","parentObject","copy","nkid","genBNID","parentobj","newrend","demandid","inputID","dval","nprops","removeProperty","ctl","getController","new_object","isPartOfNewDocument","isnew","pfacet","vrend","propcount","nviewer","getFilledPropertyList","getMissingPropertyList","standardSort","patterns","sorted","rdft","rdfc","extractLDO","full","extractJSONLD","jsonld_context","extracted","empty","getType","big","isBigType","getTypeSize","vallab","els","elements","foptions","getChoiceOptions","inputs","parsed","badData","lldom","getInputDOMs","long","latdom","longdom","getLatLongDOM","firstcol","delbut","getTypeShorthand","updateValueFromForm","op","lldoms","butspan","addbut","ipdoms","DateHelper","allowbce","date_spacer","time_spacer","datetime_separator","helper","parseDate","datepart","getDateComponentDOM","timepart","getTimeComponentDOM","hdom","hour","mdom","minute","mlab","sdom","second","slab","tz","timezone","dadom","ydom","year","month","ddom","day","part","xsd","xsdFromParsed","opdom","getEntityViewHTML","getEntityLabel","dv","nspan","InstanceLabel","tit","InstanceType","InstanceComment","img","commas","numberWithCommas","delimiter","parseRangeValue","rvals","svals","useCommas","tnode","getRangeSymbolDOM","x2","t2node","data1","data2","firstip","secondip","showing_range","but","changeHandler","mapcontainer","ghelper","latLng","coo","path","inner","quill","d2ch","dataframe","originalValue","isDocument","nf","nvr","inline","getAPIURL","DBURL","getEntityReference","entities","bd","new_value","text_summary_length","v","nrend","getViewerForValue","isDatatypeProperty","objlit","isString","lang","isChoice","getViewerForDataValue","ft","wquery","dbc","scd","dbrec","nm","item","getControlHTML","displayDocumentSubMenus","getDocumentChooserDOM","getDocumentCreatorDOM","showSubMenus","gd","nbut","mcls","nlab","click","nbuts","tcdom","gb","bi","tds","bt","tts","nlabs","ccDOM","sth","banner","dhp","scs","getDeleteOnHomePage","getClassesDOM","getDbInfoBox","info","charAt","toUpperCase","slice","del","dbdel","confirm","getDBSummary","q","sct","mfd","sci","idip","titip","descip","schem","datip","butfield","cancbut","loadbut","TerminusViolation","vio","context_msg","vioHeading","getPropertyAsDOM","pdom","ldom","WOQLTextboxGenerator","meta","generator","gentype","generators","loadGenerator","hasGeneratorOptions","changeGenerator","ng","redrawGenerator","inputDOM","getQueryButtonsDOM","Element","getResultViewDom","qbox","getQueryCreatorChoiceDOM","qtHolder","qTextBox","getQueryTextAreaDOM","buttonsDOM","qcc","gen","box","TerminusPropertyChooser","tq","qman","datatable","gatherDatatableSettings","txtArea","queryName","getQueryButtonGroups","qGroupQueries","qrow","g","srcElement","textContent","nodeName","qeb","ch","setDatatableSettings","eqh","qbut","qval","qbuts","qexs","qh","qcGroup","nqbut","aqbut","qvalue","ebut","pbut","prbut","qdGroup","termpc","qdocGroup","docch","docdom","d2dom","clGroup","dtGroup","docGroup","labopt","comopt","cprop","tsel","o1","o2","ff","getFormFieldDOM","getFormField","queries","submit","jsonip","map_source","map_target","confirm_before_update","loadSchema","msgtype","resetControlDOM","getSchemaSaveButtons","getSchemaImportActionButtons","getShowSchemaButton","getClassFrameChooser","getSchemaEditButton","getImportButton","getFormatChoices","fc","tc","tj","refreshMainPage","getSchemaViewDOM","getSchemaEditDOM","getSchemaImportDOM","getClassFrameDOM","ssb","getCancelButton","getSaveButton","getImportSaveButton","getSchemaButton","getImportPreviewButton","is_import","doImport","schema_edit_dom","func","origurl","newschema","appendSchema","setSchemaURL","showConfirmPage","s2","nschema","np","docviewer","ipval","klab","modes","overwrite","append","max_cell_size","max_word_size","rsc","getServerLabelDOM","srec","getServerRecord","desc","csbut","crbut","getDBListDOM","getServerDetailsDOM","scl","wrapTableLinkCell","tdElement","replacements","words","word","newstr","sec","lihed","th1","th2","th3","th4","th5","th6","dbrecs","getServerDBRecords","fullid","td1","td2","td3","td4","td5","td6","deleteDBPermitted","delDB","url_input","key_input","getLabelDOM","ip","ltxt","pholder","stit","loadbuts"],"mappings":"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","file":"terminus-dashboard.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","/**\n * @file Javascript Api explorer tool\n * @author Kitty Jose\n * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more\n *\n * @summary Set of functions used across scripts\n */\nconst Codemirror= require('./plugins/codemirror.terminus');\n// function to read Files\nfunction readFile(file){\n    if (window.XMLHttpRequest){\n        // code for IE7+, Firefox, Chrome, Opera, Safari\n        xmlhttp=new XMLHttpRequest();\n    }\n    else{\n        // code for IE6, IE5\n        xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\");\n    }\n    xmlhttp.open(\"GET\",file,false);\n    xmlhttp.send();\n    xmlDoc=xmlhttp.responseText;\n    return xmlDoc;\n} // readFile()\n\n// function to write api call signatures from woql client\nfunction getFunctionSignature(which){\n  var sigs = {};\n  sigs.connect = {\n    spec   : \"WOQLClient.connect(surl, key)\",\n    descr  : \"\\n\\nConnect to a Terminus server at the given URI with an API key\"\n                + \"Stores the terminus:ServerCapability document returned in the connection register\"\n                + \"which stores, the url, key, capabilities, and database meta-data for the connected server\"\n                + \"If the curl argument is false or null, the this.server will be used if present,\"\n                + \" or the promise will be rejected.\"\n                + \"\\n1)The first (surl) argument: {string} argument it is the Server Url\"\n                + \"\\n2)The second(key) argument: {string} argument contains an API key\",\n    result : \"HTTP 200 on success, 409 for already existing database, otherwise error code\",\n    args   : {server_url : 'url', key: 'Api key'},\n    options: { title: \"\", description: \"\" }\n  };\n  sigs.create = {\n    spec    : \"WOQLClient.createDatabase(dburl, details, key)\",\n    descr   : \"\\n\\nCreate a Terminus Database\"\n                + \"\\n1)The first (dburl) argument:{string}, it is a terminusDB Url or a terminusDB Id \"\n                + \"\\n2)The second(details) argument:{object}, details which is the payload\"\n                + \"\\n which included information of the new database to be created\"\n                +  \"\\n3)The third (key) argument:{string}, contains an API key \",\n    result : \"HTTP 200 on success, 409 for already existing database, otherwise error code\",\n    args   : {database_url : 'url', details: '', key: ' Api key'},\n    options: { title: \"\", description: \"\" }\n  };\n  sigs.delete = {\n      spec  : \"WOQLClient.deleteDatabase(dburl, key)\",\n      descr : \"\\n\\nDeletes a Database\"\n                + \"\\n1)The first (dburl) argument: {string}, it is a terminusDB Url or a terminusDB Id \"\n                + \"\\n2)The second(key) argument: {string}, contains an API key\",\n      result: \"HTTP 200 on success, otherwise error code\",\n  };\n  sigs.getSchema = {\n    spec   : \"WOQLClient.getSchema(surl, options)\",\n    descr  : \"\\n\\nGets the schema of a database.\"\n             +\"\\n1)The first (surl) argument: {string}, it is a dbUrl/schema\"\n             + \"\\n2)The second(key) argument: {string}, contains an API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    options: { format: \"turtle\" }\n  };\n  sigs.getClassFrames = {\n    spec   : \"WOQLClient.getClassFrame = function(cfurl, cls, opts)\",\n    descr  : \"\\n\\nRetrieves a WOQL query on the specified database which updates the state and returns the results\"\n              +  \"\\nThe first (cfurl) argument can be\"\n              + \"\\n1) a valid URL of a terminus database or\"\n              +  \"\\n2) omitted - the current database will be used\"\n              +  \"\\nthe second argument (cls) is the URL / ID of a document class that exists in the database schema\"\n              +  \"\\nthe third argument (opts) is an options json - opts.key is an optional API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    options: { format: \"turtle\" }\n  };\n  sigs.updateSchema = {\n    spec    : \"WOQLClient.updateSchema(schurl, docs, options)\",\n    descr   : \"\\n\\nUpdates the Schema of the specified database\"\n                +\"\\n1)The first (surl) argument :{string}, is a dbUrl/schema\"\n                + \"\\n2)The second(docs) argument:{object}, is a valid owl ontology (new schema to be updated) in turtle format\"\n                + \"\\n3)The third (key) argument:{string}, contains an API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    args   : {document : 'doc'},\n    options: { format: \"turtle\", editmode: \"replace\"}\n  };\n  sigs.createDocument = {\n    spec   : \"WOQLClient.createDocument(docurl, document, options)\",\n    descr  : \"\\n\\nCreates a new document in the specified database\"\n              + \"\\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\"\n              + \"\\n2)The second(document) argument: {object}, is a valid document in json-ld\"\n              + \"\\n3)The third (key) argument:{string}, contains an API key\",\n    result : \"Created Document on success (HTTP 200), Violation Report Otherwise (HTTP 400+)\",\n    args   : {document_url : 'url', document: \"doc\"},\n    options: { format: \"turtle\", fail_on_id_denied: false}\n  };\n  sigs.viewDocument = {\n    spec    : \"WOQLClient.getDocument(docurl, options)\",\n    descr   : \"\\n\\nRetrieves a document from the specified database\"\n              + \"\\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\"\n              + \"\\n2)The second (key) argument: {string}, contains an API key\",\n    result : \"Document (HTTP 200), Violation Report Otherwise (HTTP 400+)\",\n    args   : {document_url : 'url'},\n    options: { format: \"turtle\"}\n  };\n  sigs.updateDocument = {\n    spec   : \"WOQLClient.updateDocument(docurl, document, options)\",\n    descr  : \"\\n\\nUpdates a document in the specified database with a new version\"\n                + \"\\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\"\n                + \"\\n2)The second(document) argument: {object}, is a valid document in json-ld\"\n                + \"\\n3)The third (key) argument:{string} argument contains an API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    args   : {document_url : 'url', document: \"doc\"},\n    options: { format: \"turtle\", editmode: \"replace\"}\n  };\n  sigs.deleteDocument = {\n    spec  : \"WOQLClient.deleteDocument(docurl, key)\",\n    descr : \"\\n\\nDeletes a document from the specified database\"\n            + \"\\n1)The first (docurl) argument: {string},is a dbUrl/document/document_id\"\n            + \"\\n2)The second (key) argument: {string}, contains an API key\",\n    result: \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    args  : {document_url : 'url'},\n  };\n  sigs.select = {\n    spec: \"WOQLClient.select(dburl, query, options)\",\n    descr: \"\\n\\nExecutes a read-only WOQL query on the specified database and returns the results\"\n              + \"\\n1)The first (docurl) argument: {string}, is a terminusDB Url or a terminusDB Id\"\n              + \"\\n2)The second (query) argument: {object}, a valid query in json-ld format \"\n              + \"\\n3)The third (key) argument:{string}, contains an API key\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {woql: 'woql'},\n  };\n  sigs.update = {\n    spec  : \"WOQLClient.update(dburl, query, options)\",\n    descr : \"\\n\\nExecutes a WOQL query on the specified database which updates the state and returns the results\"\n              + \"\\n1)The first (dburl) argument: {string}, is a terminusDB Url or a terminusDB Id\"\n              + \"\\n2)The second (query) argument: {object}, a valid query in json-ld format \"\n              + \"\\n3)The third (key) argument:{string}, contains an API key\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args  : {woql: 'woql'},\n  };\n  sigs.lookup = {\n    spec: \"WOQLClient.lookup(database_url, woql, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url', term: 'string'},\n  };\n  sigs.map = {\n    spec: \"WOQLClient.lookup(source, target, woql, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {source: 'json', target: \"json\", woql: 'json'},\n  };\n  sigs.getClassFrame = {\n    spec: \"WOQLClient.getClassFrame(class, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url'},\n  };\n  sigs.getPropertyFrame = {\n    spec: \"WOQLClient.getPropertyFrame(class, property, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url', property: 'url'},\n  };\n  sigs.getFilledPropertyFrame = {\n    spec: \"WOQLClient.getPropertyFrame(document_url, property, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {document_url: 'url', property: 'url'},\n  };\n  sigs.getSubClasses = {\n    spec: \"WOQLClient.getSubClasses(class, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url'},\n  };\n  return sigs[which];\n}//getFunctionSignature\n\n// returns dom element for header text\nfunction getHeaderDom(text){\n  var hd = document.createElement('div');\n  hd.setAttribute('class', 'terminus-module-head');\n  var h = document.createElement('h3');\n  h.innerHTML = text;\n  hd.appendChild(h);\n  return hd;\n} // getHeaderTextDom\n\n// returns dom for alert banner\nfunction getInfoAlertDom(type, label, msg){\n  var ald = document.createElement('div');\n  if(type == 'info') ald.setAttribute('class', 'terminus-alert terminus-alert-success');\n  else ald.setAttribute('class', 'alert');\n  var str = document.createElement('STRONG');\n  str.innerHTML = label;\n  ald.appendChild(str);\n  var txt = document.createTextNode(msg);\n  ald.appendChild(txt);\n  return ald;\n} // getInfoAlertDom()\n\n// formats response results from platform\nfunction getResponse(currForm, action, response, terminator){\n\n  var rd = document.createElement('div');\n\n  // get header result\n  rd.appendChild(getHeaderDom('Result'));\n  var br = document.createElement('BR');\n  rd.appendChild(br);\n\n  var data = JSON.stringify(response, 0, 4);\n\n  var pre = document.createElement('pre');\n  pre.setAttribute('class', 'terminus-api-view terminus-scheme-pre');\n  pre.innerHTML = data;\n\n  var cm = stylizeCodeDisplay(terminator, pre, rd, 'javascript');\n  if(!cm) rd.appendChild(pre);\n\n  var br = document.createElement('BR');\n  rd.appendChild(br);\n\n  currForm.appendChild(rd);\n\n  return currForm;\n}\n\n// formats the response from fetch call and spits out Http header and result\nfunction showHttpResult(response, action, currForm, terminator){\n    //var currForm = document.createElement('div');\n\n    var br = document.createElement('BR');\n    currForm.appendChild(br);\n    var br = document.createElement('BR');\n    currForm.appendChild(br);\n\n    // get header result\n    currForm.appendChild(getHeaderDom('HTTP Header'));\n\n    var br = document.createElement('BR');\n    currForm.appendChild(br);\n\n     var retHttpHeaders  = '';\n\n     // iterate over all headers\n     for (let [key, value] of response.headers) {\n       retHttpHeaders = retHttpHeaders +  `${key} = ${value}` + '\\n';\n     }\n\n    // http header result\n    var hdres = document.createElement('pre');\n    hdres.setAttribute('class', 'terminus-api-signature-pre');\n    var txt = document.createTextNode(retHttpHeaders);\n    hdres.appendChild(txt);\n\n    var cm = stylizeCodeDisplay(terminator, hdres, currForm, 'message/http');\n    if(!cm) currForm.appendChild(hdres);\n\n    return response.json()\n    .then(function(response){\n      getResponse(currForm, action, response, terminator); // get return response\n    })\n\n} // UTILS.showHttpResult()\n\n\nfunction deleteStylizedEditor(ui, qip){\n    if(ui.pluginAvailable(\"codemirror\")){\n\t\tvar cm = qip.nextElementSibling;\n\t\tcm.setAttribute('class', 'terminus-hide');\n\t\tTerminusClient.FrameHelper.removeChildren(cm);\n\t}\n}\n\n/* ui: terminus ui reference\n   txt: text area to be stylized\n   view: defines the size of editor to appear in pages (schema/ query)\n   mode: format to be displayed in\n*/\nfunction stylizeEditor(ui, txt, view, mode){\n    var cmConfig = ui.pluginAvailable(\"codemirror\");\n    if(!(cmConfig)) return;\n\tvar cm = new Codemirror(txt, mode, cmConfig);\n\tvar ar = cm.colorizeTextArea(view);\n\tcm.updateTextArea(ar);\n}\n\n/* ui: terminus ui reference\n   txt: text area to be stylized\n   dom: stylized pre area is appended to dom\n   mode: format to be displayed in\n*/\nfunction stylizeCodeDisplay(ui, txt, dom, mode){\n    var cmConfig = ui.pluginAvailable(\"codemirror\");\n    if(!(cmConfig)) return false;\n    var cm = new Codemirror(txt, mode, cmConfig);\n    var pr = cm.colorizePre();\n    dom.appendChild(pr);\n    return true;\n}\n\n/* name: classname to find and remove classes from elements\n*/\nfunction removeSelectedNavClass(name){\n    var el = document.getElementsByClassName(name);\n    for(var i=0; i<el.length; i++){\n        el[i].classList.remove(name);\n    }\n}\n\n// toggles between contents\nfunction tolggleContent(icon, content){\n    if (content.style.display === \"block\"){\n        removeSelectedNavClass(\"fa-chevron-up\");\n        icon.classList.add(\"fa-chevron-down\");\n        content.style.display = \"none\";\n    }\n    else{\n        removeSelectedNavClass(\"fa-chevron-down\");\n        icon.classList.add(\"fa-chevron-up\");\n        content.style.display = \"block\";\n    }\n}\n\n// controls current selected nav bar\nfunction activateSelectedNav(nav, terminator){\n    removeSelectedNavClass(\"terminus-selected\");\n\tcheckDocumentSubMenus(terminator);\n\tnav.classList.add(\"terminus-selected\");\n}\n\nfunction hideDocumentSubMenus(el){\n\tif(el.classList.contains('terminus-display')){\n\t\tel.classList.remove('terminus-display');\n\t\tel.classList.add('terminus-hide');\n\t}\n}\n\nfunction checkDocumentSubMenus(terminator){\n\tif(terminator.ui.showControl(\"get_document\")) {\n\t\tvar gd = document.getElementsByClassName('terminus-get-doc');\n\t\thideDocumentSubMenus(gd[0]);\n\t}\n\tif(terminator.ui.showControl(\"create_document\")) {\n\t\tvar cd = document.getElementsByClassName('terminus-create-doc');\n\t\thideDocumentSubMenus(cd[0]);\n\t}\n}\n\nfunction toggleVisibility(el){\n\tif(el.classList.contains('terminus-display')){\n\t\tel.classList.remove('terminus-display');\n\t\tel.classList.add('terminus-hide');\n\t}\n    else if(el.classList.contains('terminus-hide')){\n        el.classList.remove('terminus-hide');\n\t\tel.classList.add('terminus-display');\n\t}\n}\n\nfunction extractValueFromCell(cellValue){\n    var ihtml = new DOMParser().parseFromString(cellValue, \"text/xml\");\n    return ihtml.firstChild.innerHTML;\n}\n\nmodule.exports={tolggleContent,\n               removeSelectedNavClass,\n               stylizeCodeDisplay,\n               stylizeEditor,\n               deleteStylizedEditor,\n               showHttpResult,\n               getHeaderDom,\n               getInfoAlertDom,\n               getFunctionSignature,\n               toggleVisibility,\n               extractValueFromCell,\n               activateSelectedNav}\n","const WOQLResult = require('./WOQLResultsViewer');\n\nfunction WOQLQuery(client, options, ui){\n\tthis.client = client;\n\tthis.options = options;\n\tthis.ui = ui;\n\tthis.default_limit = 1000;\n\tthis.prefixes = {};\n\tif(client.connectionConfig.platformEndpoint()){\n\t\tvar sid = client.connectionConfig.server.substring(0, client.connectionConfig.server.lastIndexOf(\"platform\"));\n\t\tthis.sid = sid;\n\t\tvar colid = client.connectionConfig.server.substring(0, client.connectionConfig.server.lastIndexOf(\"platform\")) + client.connectionConfig.dbid;\n\t\tthis.prefixes['s'] = colid + \"/ontology/main#\";\n\t\tthis.prefixes['g'] = sid;\n\t\tthis.prefixes['db'] = colid + \"/\";\n\t\tthis.prefixes['doc'] = colid + \"/candidate/\";\n\t\tthis.prefixes['dg'] = colid + \"/graph/main/\";\n\t}\n\telse {\n\t\tthis.sid = client.connectionConfig.serverURL();\n\t\tthis.prefixes['s'] = client.connectionConfig.schemaURL() + \"#\";\n\t\tthis.prefixes['dg'] = client.connectionConfig.dbURL() + \"/schema\";\n\t\tthis.prefixes['doc'] = client.connectionConfig.docURL();\n\t\tthis.prefixes['db'] = client.connectionConfig.dbURL() + \"/\";\n\t\tthis.prefixes['g'] = client.connectionConfig.serverURL();\n\t}\n\tfor(var pref in TerminusClient.FrameHelper.standard_urls){\n\t\tthis.prefixes[pref] = TerminusClient.FrameHelper.standard_urls[pref];\n\t}\n}\n\nWOQLQuery.prototype.setPrefixes = function(prefixes){\n\tthis.prefixes = prefixes;\n}\n\n\nWOQLQuery.prototype.shorten = function(url){\n\tfor(var pref in this.prefixes){\n\t\tif(this.prefixes[pref] == url.substring(0, this.prefixes[pref].length)){\n\t\t\treturn ( pref + \":\" + url.substring(this.prefixes[pref].length));\n\t\t}\n\t}\n\treturn url;\n}\n\nWOQLQuery.prototype.execute = function(woql){\n\tvar wrapped = this.wrap(woql);\n\tvar self = this;\n\treturn this.client.select(false, wrapped)\n\t.then(function(response){\n\t\tvar res = new WOQLResult.WOQLResult(response, self, self.options, self.ui);\n\t\treturn res;\n\t});\n}\n\nWOQLQuery.prototype.wrap = function(woql){\n\tvar wjson = {\n\t\t\"@context\" : this.prefixes,\n\t\t\"from\": [\n\t\t\tthis.client.connectionConfig.dbURL(),\n\t\t\twoql\n\t\t]\n\t};\n\treturn wjson;\n}\n\nWOQLQuery.prototype.getConcreteDocumentClassPattern = function(varc){\n\tvar varc = varc || \"v:Class\";\n\tvar pat = {\n\t\tand: [\n\t\t\tthis.getSubclassQueryPattern(varc, \"tcs:Document\"),\n\t\t\t{\n\t\t\t\tnot: [this.getAbstractQueryPattern(varc)]\n\t\t\t}\n\t\t]\n\t}\n\treturn pat;\n}\n\nWOQLQuery.prototype.getAbstractQueryPattern = function(varname){\n\tvar qp = {\n\t\tquad: [varname, \"tcs:tag\", \"tcs:abstract\", \"db:schema\"]\n\t}\n\treturn qp;\n}\n\nWOQLQuery.prototype.getSubclassQueryPattern = function(varname, clsname){\n\tvar sqp = {sub: [varname, clsname]};\n\treturn sqp;\n}\n\nWOQLQuery.prototype.queryWrappedWithLimit = function(query, limit, start){\n\tlimit = limit ? limit : this.default_limit ;\n\tstart = start ? start : 0;\n\tvar wjson = {\n\t\tlimit: [limit, {\n\t\t\tstart: [start, query]\n\t\t}]\n\t};\n\treturn wjson;\n}\n\n\nWOQLQuery.prototype.getAllDocumentQuery = function(constraint, limit, start){\n\tvar query = {\n\t\tand: [\n\t\t\t{\n\t\t\t\ttriple: [\"v:Document\", \"rdf:type\", \"v:Type\"]\n\t\t\t},\n\t\t\tthis.getSubclassQueryPattern(\"v:Type\", \"tcs:Document\")\n\t\t]\n\t}\n\tif(constraint){\n\t\tquery.and.push(constraint);\n\t}\n\treturn this.queryWrappedWithLimit(query, limit, start);\n}\n\nWOQLQuery.prototype.getEverythingQuery = function(constraint, limit, start){\n\tvar wjson = {triple: [\"v:Subject\", \"v:Predicate\", \"v:Object\"]};\n\tif(constraint){\n\t\twjson = {and: [wjson, constraint]};\n\t}\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\n}\n\nWOQLQuery.prototype.getPropertyListQuery = function(constraint, limit, start){\n\tvar wjson = {\n\t\tand: [{quad: [\"v:Property\", \"rdfs:range\", \"v:Range\", \"db:schema\"]},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Property\", \"rdf:type\", \"v:Type\", \"db:schema\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Property\", \"rdfs:label\", \"v:Label\", \"db:schema\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Property\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Property\", \"rdfs:domain\", \"v:Domain\", \"db:schema\"]}]\n\t\t\t},\n\t\t]\n\t}\n\tif(constraint){\n\t\twjson = {and: [wjson, constraint]};\n\t}\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\n}\n\n\nWOQLQuery.prototype.getElementMetaDataQuery = function(constraint, limit, start){\n\tvar wjson = {\n\t\tand: [{quad: [\"v:Element\", \"rdf:type\", \"v:Type\", \"db:schema\"]},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Element\", \"tcs:tag\", \"v:Abstract\", \"db:schema\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Element\", \"rdfs:domain\", \"v:Domain\", \"db:schema\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Element\", \"rdfs:range\", \"v:Range\", \"db:schema\"]}]\n\t\t\t},\n\t\t]\n\t}\n\tif(constraint){\n\t\twjson = {and: [wjson, constraint]};\n\t}\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\n}\n\nWOQLQuery.prototype.getClassListMetaDataQuery = function(constraint, limit, start){\n\tvar wjson = {\n\t\tand: [{quad: [\"v:Element\", \"rdf:type\", \"owl:Class\", \"db:schema\"]},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Element\", \"tcs:tag\", \"v:Abstract\", \"db:schema\"]}]\n\t\t\t}\n\t\t]\n\t}\n\tif(constraint){\n\t\twjson = {and: [wjson, constraint]};\n\t}\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\n}\n\nWOQLQuery.prototype.getClassMetaDataQuery = WOQLQuery.prototype.getClassListMetaDataQuery;\n\nWOQLQuery.prototype.getDataOfChosenClassQuery = function(chosen, limit, start){\n\tvar wjson = {\n\t\tand: [{triple: [\"v:Document\", \"rdf:type\", chosen]},\n\t\t\t{\n\t\t\t\topt: [{triple: [\"v:Document\", \"v:Property\", \"v:Value\"]}]\n\t\t\t}\n\t\t]\n\t}\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\n}\n\nWOQLQuery.prototype.getDataOfChosenPropertyQuery = function(chosen, limit, start){\n\tvar wjson = {\n\t\tand: [{triple: [\"v:Document\", chosen, \"v:Value\"]},\n\t\t\t{\n\t\t\t\topt: [{triple: [\"v:Document\", \"rdfs:label\", \"v:Label\"]}]\n\t\t\t}\n\t\t]\n\t}\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\n}\n\nWOQLQuery.prototype.getInstanceMeta = function(url, limit, start){\n\tvar wjson = {\n\t\tand: [\n\t\t\t{triple: [url, \"rdfs:label\", \"v:InstanceLabel\"]},\n\t\t\t{triple: [url, \"rdf:type\", \"v:InstanceType\"]},\n\t\t\t{\n\t\t\t\topt: [{triple: [url, \"rdfs:comment\", \"v:InstanceComment\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:InstanceType\", \"rdfs:label\", \"v:ClassLabel\", \"db:schema\"]}]\n\t\t\t}\n\t\t]\n\t}\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\n}\n\n\nWOQLQuery.prototype.getDocumentQuery = function(id, limit, start){\n\tvar wjson = {\n\t\tand: [\n\t\t\t{triple: [id, \"v:Property\", \"v:Property_Value\"]},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Property\", \"rdfs:label\", \"v:Property_Label\", \"db:schema\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Property\", \"rdf:type\", \"v:Property_Type\", \"db:schema\"]}]\n\t\t\t}\n\t\t]\n\t}\n\treturn this.queryWrappedWithLimit(wjson, limit, start);\n}\n\nWOQLQuery.prototype.getClassesQuery = function(){\n\tvar wjson = {\n\t\tand: [\n\t\t\t{triple: [\"v:ID\", \"rdf:type\", \"v:Class\"]},\n\t\t\t{\n\t\t\t\topt: [{triple: [\"v:ID\", \"rdfs:label\", \"v:Label\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{triple: [\"v:ID\", \"rdfs:comment\", \"v:Comment\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\topt: [{quad: [\"v:Class\", \"rdfs:label\", \"v:Type\", \"db:schema\"]}]\n\t\t\t},\n\t\t\t{\n\t\t\t\tsub: ['v:Class', 'tcs:Document']\n\t\t\t}\n\t\t]\n\t}\n\treturn wjson;\n}\n\nmodule.exports=WOQLQuery\n","function TerminusPluginManager(){\n\tthis.preloaded = [];\n\tthis.loaded = [];\n\tthis.loading = [];\n\tthis.precluded = [];\n\tthis.plugins = {};\n\tthis.plugins[\"font-awesome\"] = {\n\t\tlabel: \"Font Awesome\",\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0-11/css/all.css\"]\n\t};\n\tthis.plugins[\"quill\"] = {\n\t\tlabel: \"Quill\",\n\t\tjs: [\"https://cdn.quilljs.com/1.3.6/quill.min.js\"],\n\t\tcss: [\"https://cdn.quilljs.com/1.3.6/quill.snow.css\"],\n\t};\n\tthis.plugins[\"codemirror\"] = {\n\t\tlabel : \"Code Mirror\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/xml/xml.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/css/css.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/turtle/turtle.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/javascript/javascript.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/anyword-hint.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/runmode/runmode.js\",\n\t\t  \t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/http/http.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/closebrackets.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/matchbrackets.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/display/placeholder.js\"\n\t  ],\n\t\tcss: [\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/neo.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/erlang-dark.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/eclipse.css\"\n\t\t]\n\t};\n\tthis.plugins[\"jquery\"] = {\n\t\tlabel: \"jQuery\",\n\t\tjs: [\"https://code.jquery.com/jquery-2.2.4.min.js\"]\n\t};\n\tthis.plugins[\"jqueryui\"] = {\n\t\tlabel: \"jQuery UI\",\n\t\tcss: [\"https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css\"],\n\t\tjs: [\"https://code.jquery.com/ui/1.12.0/jquery-ui.js\"],\n\t\trequires: ['jquery']\n\t};\n\tthis.plugins[\"datatables\"] = {\n\t\tlabel: \"Data Tables\",\n\t\tjs: [\"https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js\",\n\t\t\t \"https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.16/b-1.5.1/b-html5-1.5.1/datatables.min.js\"],\n\t\tcss: [\"https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css\"],\n\t\trequires: ['jquery']\n\t};\n\t/*this.plugins[\"prettify\"] = {\n\t\tlabel: \"Prettify\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.css\"],\n\t\trequires: ['jquery']\n\t};*/\n\tthis.plugins[\"gmaps\"] = {\n\t\tlabel: \"Google Maps\",\n\t\tjs: [\"https://maps.googleapis.com/maps/api/js\"],\n\t\t//plugin: \"gmaps.terminus.js\"\n\t};\n\tthis.plugins[\"d3\"] = {\n\t\tlabel: \"d3\",\n\t\tjs: [\"https://code.jquery.com/jquery-2.2.4.min.js\"],\n\t\trequires: ['jquery']\n\t};\n\tthis.plugins[\"select2\"] = {\n\t\tlabel: \"Select 2\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css\"],\n\t\trequires: ['jquery']\n\t};\n\t/*this.plugins[\"jsoneditor\"] = {\n\t\tlabel: \"JSON Editor\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/7.0.4/jsoneditor.min.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/7.0.4/jsoneditor.min.css\"],\n\t\t//plugin: \"jsoneditor.terminus.js\"\n\t};\n\tthis.plugins[\"bootstrap\"] = {\n\t\tlabel: \"Bootstrap\",\n\t\tjs: [\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/css/bootstrap.min.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css\"]\n\t};\n\tthis.plugins[\"flot\"] = {\n\t\tlabel: \"Flot\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.min.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.resize.min.js\"],\n\t\trequires: [\"jquery\"]\n\t};*/\n}\n\nTerminusPluginManager.prototype.setPluginOptions = function(opts){\n\tfor(var p in opts){\n\t\tif(!this.plugins[p]) continue;\n\t\tfor(var k in opts[p]){\n\t\t\tthis.plugins[p][k] = opts[p][k];\n\t\t}\n\t}\n}\n\nTerminusPluginManager.prototype.init = function(opts, then){\n\tif(opts) this.setPluginOptions(opts);\n\tthis.calculatePreloaded();\n\tvar toload = this.calculateRequiredInitPlugins(opts);\n\tif(toload && toload[0].length) {\n\t\tif(toload[1].length){\n\t\t\tvar self = this;\n\t\t\tvar nthen = function(){\n\t\t\t\tself.loadPlugins(toload[1], then);\n\t\t\t}\n\t\t\tthis.loadPlugins(toload[0], nthen);\n\t\t}\n\t\telse {\n\t\t\tthis.loadPlugins(toload[0], then);\n\t\t}\n\t}\n\telse if(then){\n\t\tthen();\n\t}\n}\n\nTerminusPluginManager.prototype.calculateRequiredInitPlugins = function(opts){\n\tif(opts){\n\t\tvar pins = [];\n\t\tfor(var pid in opts){\n\t\t\tif(opts[pid] && pins.indexOf(pid) == -1){\n\t\t\t\tif(typeof opts[pid] != \"object\" && opts[pid]){\n\t\t\t\t\tpins.push(pid);\n\t\t\t\t}\n\t\t\t\telse if(typeof opts[pid] == \"object\"){\n\t\t\t\t\tif(!(typeof opts[pid].loaded != \"undefined\" && !opts[pid].loaded)){\n\t\t\t\t\t\tpins.push(pid);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tvar pins = this.getDefaultPlugins();\n\t}\n\tvar needed_pins = [];\n\tfor(var i = 0; i<pins.length; i++){\n\t\tif(this.loaded.indexOf(pins[i]) == -1 && this.preloaded.indexOf(pins[i]) == -1 ){\n\t\t\tneeded_pins.push(pins[i])\n\t\t}\n\t}\n\tvar loading_order = [[], []];\n\tfor(var i = 0; i<needed_pins.length; i++){\n\t\tif(this.plugins[needed_pins[i]]){\n\t\t\tif(this.plugins[needed_pins[i]].requires && this.plugins[needed_pins[i]].requires.length){\n\t\t\t\tloading_order[1].push(needed_pins[i]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tloading_order[0].push(needed_pins[i]);\n\t\t\t}\n\t\t}\n\t}\n\treturn loading_order;\n}\n\nTerminusPluginManager.prototype.getAvailablePlugins = function(){\n\treturn this.plugins;\n}\n\nTerminusPluginManager.prototype.calculatePreloaded = function(){\n\tfor(var pl in this.plugins){\n\t\tif(this.pluginAvailable(pl)){\n\t\t\tthis.preloaded.push(pl);\n\t\t}\n\t}\n}\n\nTerminusPluginManager.prototype.pluginAvailable = function(plugin, version_check){\n\tif(typeof this.plugins[plugin] == \"object\"){\n\t\tvar pluginmeta = this.plugins[plugin];\n\t\tif(pluginmeta.requires && pluginmeta.requires.length){\n\t\t\tfor(var i =0 ; i < pluginmeta.requires.length; i++){\n\t\t\t\tif(!this.pluginAvailable(pluginmeta.requires[i], version_check)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar required_version = (pluginmeta.version ? pluginmeta.version : false);\n\t\tswitch(plugin){\n\t\t\tcase \"jquery\": {\n\t\t\t\tif(typeof jQuery == \"undefined\") return false;\n\t\t\t\tif(version_check && required_version){}\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"jqueryui\": {\n\t\t\t\ttry{\n\t\t\t\t\tif(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.slider )) return true;\n\t\t\t\t}\n\t\t\t\tcatch(e){}\n\t\t\t\treturn false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"quill\": {\n\t\t\t\tif(typeof Quill == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"jsoneditor\": {\n\t\t\t\tif(typeof JSONEditor == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"codemirror\": {\n\t\t\t\tif(typeof CodeMirror == \"undefined\") return false;\n\t\t\t\treturn this.plugins[plugin];  // sent plugin config with darkmode true/ false\n\t\t\t}\n\t\t\tcase \"font-awesome\": {\n\t\t\t\t//if(typeof CodeMirror != \"undefined\") return true;\n\t\t\t\treturn this.fontAwesomeCheck();\n\t\t\t}\n\t\t\tcase \"datatables\": {\n\t\t\t\t if(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.dataTable)) return true;\n\t\t\t\t return false;\n\t\t\t}\n\t\t\tcase \"select2\": {\n\t\t\t\t if(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.select2 )) return true;\n\t\t\t\t return false;\n\t\t\t}\n\t\t\tcase \"gmaps\": {\n\t\t\t\tif(typeof google == \"undefined\" || typeof google.maps == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase \"openlayers\": {\n\t\t\t\tif(typeof ol == \"undefined\" || typeof ol.Map == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase \"d3\": {\n\t\t\t\tif(typeof d3 == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(new Error(plugin + \" is not a supported plugin ID\"));\n\t}\n\treturn false;\n};\n\nTerminusPluginManager.prototype.fontAwesomeCheck = function(){\n\tvar span = document.createElement('span');\n\tspan.className = 'fa';\n\tspan.style.display = 'none';\n\tif(document.body){\n\t\tdocument.body.insertBefore(span, document.body.firstChild);\n\t\tfunction css(element, property) {\n\t\t  return window.getComputedStyle(element, null).getPropertyValue(property);\n\t\t}\n\t\tvar loaded = false;\n\t\tvar fontAwsm = css(span, 'font-family');\n\t\tif (fontAwsm.replace(/\"/g, \"\") == 'Font Awesome 5 Free') { // remove double quotes\n\t\t\tloaded = true;\n\t\t}\n\t\tdocument.body.removeChild(span);\n\t\treturn loaded;\n\t}\n\treturn false;\n}\n\nTerminusPluginManager.prototype.getDefaultPlugins = function(){\n\tvar defplugs = [\"font-awesome\"];\n\treturn defplugs;\n}\n\nTerminusPluginManager.prototype.loadPlugins = function(plugins, then){\n\tvar ticker = plugins.length;\n\tvar cback = function(){\n\t\tif(--ticker <= 1 && then){\n\t\t\tthen();\n\t\t}\n\t};\n\tfor(var i = 0; i < plugins.length; i++){\n\t\tthis.loadPlugin(plugins[i], cback);\n\t}\n}\n\nTerminusPluginManager.prototype.loadPlugin = function(plugin, then){\n\tvar pug = this.plugins[plugin];\n\tif(pug.css){\n\t\tfor(var i=0; i<pug.css.length; i++){\n\t\t\tvar cssid = plugin + \"_css_\" + i;\n\t\t\tTerminusClient.FrameHelper.loadDynamicCSS(cssid, pug.css[i]);\n\t\t}\n\t}\n\tvar scripts = (pug.js ? pug.js : []);\n\tif(plugin == \"gmaps\" && pug.key){\n\t\tscripts[0] += \"?key=\" + pug.key;\n\t}\n\tif(pug.plugin){\n\t\t//scripts.push(\"plugins/\" + pug.plugin);\n\t}\n\tif(plugin == \"codemirror\"){\n\t\tvar cm = scripts[0];\n\t\tvar sid = plugin + \"_js_\" + (scripts.length -1);\n\t\tscripts.splice(0, 1);\n\t\tvar self = this;\n\t\tvar cback = function(){\n\t\t\tself.loadPluginScripts(plugin, scripts, then);\n\t\t}\n\t\tTerminusClient.FrameHelper.loadDynamicScript(sid, cm, cback);\n\t}\n\telse {\n\t\tthis.loadPluginScripts(plugin, scripts, then);\n\t}\n}\n\nTerminusPluginManager.prototype.loadPluginScripts = function(plugin, scripts, then){\n\tvar ticker = scripts.length - 1;\n\tvar self = this;\n\tvar cback = function(){\n\t\tif(ticker == 0) {\n\t\t\tif(self.loaded.indexOf(plugin) == -1){\n\t\t\t\tself.loaded.push(plugin);\n\t\t\t}\n\t\t\tif(self.loading.indexOf(plugin) != -1){\n\t\t\t\tself.loading.splice(self.loading.indexOf(plugin), 1);\n\t\t\t}\n\t\t\tthen();\n\t\t}\n\t\tticker--;\n\t};\n\tif(scripts.length == 0){\n\t\tthis.loaded.push(plugin);\n\t}\n\telse {\n\t\tthis.loading.push(plugin);\n\t}\n\tfor(var i = 0; i<scripts.length; i++){\n\t\tvar sid = plugin + \"_js_\" + i;\n\t\tTerminusClient.FrameHelper.loadDynamicScript(sid, scripts[i], cback);\n\t}\n}\n\nTerminusPluginManager.prototype.loadPageCSS = function(css){\n\tcssfid = \"terminus_client_css\";\n\tvar cssdom = document.getElementById(cssfid);\n\tif(cssdom){\n\t\tcssdom.parentNode.removeChild(cssdom);\n\t}\n\tif(css){\n\t\tcssurl = \"css/\" + css + \".css\";\n\t\tTerminusClient.FrameHelper.loadDynamicCSS(cssfid, cssurl);\n\t}\n}\n\nTerminusPluginManager.prototype.pluginLoadable = function(pid){\n\treturn (this.precluded.indexOf(pid) !== -1 || this.pluginLoadedOrLoading(pid));\n}\n\nTerminusPluginManager.prototype.pluginLoadedOrLoading = function(pid){\n\tif(this.loaded.indexOf(pid) != -1) return true;\n\tif(this.preloaded.indexOf(pid) != -1) return true;\n\tif(this.loading.indexOf(pid) != -1) return true;\n\treturn false;\n}\n\nTerminusPluginManager.prototype.disabled = function(pid, obj){\n\tif(this.precluded.indexOf(pid) != -1) return true;\n\tif(obj.requires){\n\t\tfor(var i = 0; i<obj.requires.length; i++){\n\t\t\tif(!this.pluginLoadedOrLoading(obj.requires[i])) return true;\n\t\t}\n\t}\n\treturn false;\n}\n\nTerminusPluginManager.prototype.getPluginDOM = function(plugid, obj, ui){\n\tvar a = document.createElement(\"a\");\n\tvar cl = document.createElement(\"span\");\n\ta.appendChild(cl);\n\tcl.setAttribute(\"class\", \"terminus-plugin-control\");\n\tvar cbox = document.createElement(\"input\");\n\tcbox.id = \"terminus-plugin-control-\" + plugid;\n\tcbox.type = \"checkbox\";\n\tif(this.preloaded.indexOf(plugid) != -1){\n\t\tcbox.checked = true;\n\t\tcbox.disabled = true;\n\t}\n\telse if(this.loaded.indexOf(plugid) != -1){\n\t\tcbox.checked = true;\n\t}\n\telse if(this.loading.indexOf(plugid) != -1){\n\t\tcbox.checked = true;\n\t}\n\telse if(this.disabled(plugid, obj)){\n\t\tcbox.disabled = true;\n\t}\n\tvar clab = document.createElement(\"label\");\n\tclab.setAttribute(\"class\", \"terminus-plugin-label terminus-pointer\");\n\tclab.setAttribute(\"for\", cbox.id);\n\tclab.appendChild(document.createTextNode(obj.label));\n\tcl.appendChild(clab);\n\tcl.appendChild(cbox);\n\tvar self = this;\n\tcbox.addEventListener(\"change\", function(){\n\t\tself.togglePlugin(plugid, ui);\n\t});\n\treturn a;\n}\n\nTerminusPluginManager.prototype.togglePlugin = function(plugid, ui){\n\tif(this.loaded.indexOf(plugid) == -1){\n\t\tvar then = function(){\n\t\t\tui.redraw();\n\t\t}\n\t\tthis.loadPlugin(plugid, then);\n\t}\n\telse {\n\t\tthis.unloadPlugin(plugid);\n\t}\n\tTerminusClient.FrameHelper.removeChildren(ui.plugins);\n\tui.drawPlugins();\n}\n\nTerminusPluginManager.prototype.unloadPlugin = function(plugid){\n\tif(!this.plugins[plugid] || this.loaded.indexOf(plugid) == -1) {\n\t\tconsole.log(new Error(plugid + \" plugin unload request when it is not loaded\"));\n\t\treturn false;\n\t}\n\tvar pug = this.plugins[plugid];\n\tvar num = (pug.js) ? pug.js.length : 0;\n\tif(pug.plugin) num++;\n\tfor(var i=0; i< num; i++){\n\t\tvar cssfid = plugid + \"_js_\" + i;\n\t\tvar cssdom = document.getElementById(cssfid);\n\t\tif(cssdom){\n\t\t\tcssdom.parentNode.removeChild(cssdom);\n\t\t}\n\t}\n\tnum = (pug.css ? pug.css.length : 0);\n\tfor(var i=0; i< num; i++){\n\t\tvar cssfid = plugid + \"_css_\" + i;\n\t\tvar cssdom = document.getElementById(cssfid);\n\t\tif(cssdom){\n\t\t\tcssdom.parentNode.removeChild(cssdom);\n\t\t}\n\t}\n\tthis.loaded.splice(this.loaded.indexOf(plugid), 1);\n}\n\nTerminusPluginManager.prototype.getAsDOM = function(ui){\n\tvar dm = document.createElement(\"span\");\n\tdm.setAttribute(\"class\", \"terminus-plugin-manager\");\n\tvar clh = document.createElement(\"span\");\n\tclh.setAttribute(\"class\", \"terminus-plugin-control-header terminus-plugin-nav terminus-pointer\");\n\tclh.appendChild(document.createTextNode(\"Plugins\"));\n\tdm.appendChild(clh);\n\tvar a = document.createElement('a');\n\tthis.showPlugins(a, ui);\n\tclh.appendChild(a);\n\ta.style.display = 'none';\n\tclh.addEventListener('click', function(){\n\t\tif(a.style.display == 'none')\n\t\t\ta.style.display = 'block';\n\t\telse a.style.display = 'none';\n\t})\n\treturn dm;\n}\n\nTerminusPluginManager.prototype.showPlugins = function(a, ui){\n\ta.setAttribute('style', 'background-color: #111;');\n\tfor(var pid in this.plugins){\n\t\ta.appendChild(this.getPluginDOM(pid, this.plugins[pid], ui));\n\t}\n}\n\nmodule.exports=TerminusPluginManager\n","const ObjectViewer= require(\"./ObjectViewer\")\nconst HTMLStringViewer = require('./viewers/String');\nconst HTMLStringEditor = require('./viewers/StringEditor');\nconst HTMLBooleanViewer = require('./viewers/Boolean');\nconst HTMLBooleanEditor = require('./viewers/BooleanEditor');\nconst HTMLChoiceViewer = require('./viewers/Choice');\nconst HTMLChoiceEditor = require('./viewers/ChoiceEditor');\nconst HTMLCoordinateViewer = require('./viewers/Coordinate');\nconst HTMLCoordinateEditor = require('./viewers/CoordinateEditor');\nconst HTMLDateViewer = require('./viewers/Date');\nconst HTMLDateEditor = require('./viewers/DateEditor');\nconst HTMLEntityViewer = require('./viewers/Entity');\nconst HTMLEntityEditor = require('./viewers/EntityEditor');\nconst HTMLImageViewer = require('./viewers/Image');\nconst HTMLImageEditor = require('./viewers/ImageEditor');\nconst HTMLLinkViewer = require('./viewers/Link');\nconst HTMLNumberViewer = require('./viewers/Number');\nconst HTMLRangeViewer = require('./viewers/Range');\nconst HTMLRangeEditor = require('./viewers/RangeEditor');\nconst SantizedHTMLViewer = require('./viewers/SanitizedHTML');\nconst GoogleMapEditor = require('./viewers/GoogleMapEditor');\nconst GoogleMapViewer = require('./viewers/GoogleMapViewer');\nconst HTMLMarkupEditor = require('./viewers/HTMLMarkupEditor');\nconst S2EntityEditor = require('./viewers/S2EntityEditor');\n\n\nlet RenderingMap = {\n\tregisteredDataViewers: {},\n\tregisteredDataEditors: {},\t\n\tregisteredPropertyViewers: {},\n\tregisteredPropertyEditors: {},\n\tregisteredObjectViewers: {},\n\tregisteredObjectEditors: {},\n\tgetValidDataViewerList: function(type, frametype){\n\t\tvar valids = ['HTMLStringViewer'];\n\t\tif(frametype && typeof this.registeredDataViewers[frametype] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredDataViewers[frametype]);\n\t\t}\n\t\tif(typeof this.registeredDataViewers[type] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredDataViewers[type]);\n\t\t}\n\t\treturn valids;\n\t},\n\tgetValidDataEditorList: function(type, frametype){\n\t\tvar valids = ['HTMLStringEditor'];\n\t\tif(frametype && typeof this.registeredDataEditors[frametype] != \"undefined\"){\n\t\t\tvar nftypes = this.registeredDataEditors[frametype];\n\t\t\tif(nftypes){\n\t\t\t\tfor(var i = 0; i<nftypes.length; i++){\n\t\t\t\t\tif(valids.indexOf(nftypes[i]) == -1) valids.push(nftypes[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(typeof this.registeredDataEditors[type] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredDataEditors[type]);\n\t\t}\n\t\treturn valids;\n\t},\n\tgetValidPropertyViewerList: function(property, proptype, proprange, propdom){\n\t\tvar valids = ['HTMLPropertyViewer'];\n\t\tif(property && typeof this.registeredPropertyViewers[property] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyViewers[property]);\n\t\t}\n\t\tif(proprange && typeof this.registeredPropertyViewers[proprange] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyViewers[proprange]);\n\t\t}\n\t\tif(propdom && typeof this.registeredPropertyViewers[propdom] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyViewers[propdom]);\n\t\t}\n\t\tif(proptype && typeof this.registeredPropertyViewers[proptype] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyViewers[proptype]);\n\t\t}\n\t\treturn valids;\n\t},\n\tgetValidPropertyEditorList: function(property, proptype, proprange, propdom){\n\t\tvar valids = ['HTMLPropertyViewer'];\n\t\tif(property && typeof this.registeredPropertyEditors[property] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyEditors[property]);\n\t\t}\n\t\tif(proprange && typeof this.registeredPropertyEditors[proprange] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyEditors[proprange]);\n\t\t}\n\t\tif(propdom && typeof this.registeredPropertyEditors[propdom] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyEditors[propdom]);\n\t\t}\n\t\tif(proptype && typeof this.registeredPropertyEditors[proptype] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyEditors[proptype]);\n\t\t}\n\t\treturn valids;\n\t},\n\tgetViewer: function(type, options){\n\t\tvar vi = this.renderers[type];\n\t\toptions = (options ? options: {});\n\t\ttry {\n\t\t\tvar viewer = eval(\"new \" + type + \".\" + type + \"(\" + JSON.stringify(options) + \")\");\t\n\t\t\treturn viewer;\n\t\t}\n\t\tcatch(e){\n\t\t\talert(\"failed on create \" + e.toString());\n\t\t}\n\t},\n\tgetAvailablePropertyViewers: function(type, renderer) {\n\t\tvar viewers = [];\n\t\tvar nviewers = []\n\t\tvar opts = this.getValidPropertyViewerList(type);\n\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\n\t\t\t\tnviewers.push(opts[i]);\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i<nviewers.length; i++){\n\t\t\tif(this.renderers[nviewers[i]]){\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\n\t\t\t}\n\t\t}\n\t\treturn viewers;\n\t},\n\tgetAvailablePropertyEditors: function(type, renderer) {\n\t\tvar viewers = [];\n\t\tvar nviewers = []\n\t\tvar opts = this.getValidPropertyEditorList();\n\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\n\t\t\t\tnviewers.push(opts[i]);\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i<nviewers.length; i++){\n\t\t\tif(this.renderers[nviewers[i]]){\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\n\t\t\t}\n\t\t}\n\t\treturn viewers;\n\t\t\n\t},\n\tgetAvailableDataViewers: function(type, frametype){\n\t\tvar viewers = [];\n\t\tvar nviewers = []\n\t\tvar opts = this.getValidDataViewerList(type, frametype);\n\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\n\t\t\t\tnviewers.push(opts[i]);\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i<nviewers.length; i++){\n\t\t\tif(this.renderers[nviewers[i]]){\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\n\t\t\t}\n\t\t}\n\t\treturn viewers;\n\t},\n\tgetAvailableDataEditors: function(type, frametype){\n\t\tvar viewers = [];\n\t\tvar nviewers = []\n\t\tvar opts = this.getValidDataEditorList(type, frametype);\n\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\n\t\t\t\tnviewers.push(opts[i]);\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i<nviewers.length; i++){\n\t\t\tif(this.renderers[nviewers[i]]){\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\n\t\t\t}\n\t\t}\n\t\treturn viewers;\n\t},\n\tgetViewerForDataFrame: function(type, frametype){\n\t\tvar vals = this.getValidDataViewerList(type, frametype);\n\t\treturn vals[vals.length-1];\n\t},\n\tgetEditorForDataFrame: function(type, frametype){\n\t\tvar vals = this.getValidDataEditorList(type, frametype);\n\t\treturn vals[vals.length-1];\n\t},\n\tregisterViewerForTypes: function(viewer, label, types){\n\t\tfor(var i = 0; i < types.length; i++){\n\t\t\tif(typeof this.registeredDataViewers[types[i]] == \"undefined\"){\n\t\t\t\tthis.registeredDataViewers[types[i]] = [];\n\t\t\t}\n\t\t\tif(this.registeredDataViewers[types[i]].indexOf(viewer) == -1){\n\t\t\t\tthis.registeredDataViewers[types[i]].push(viewer);\n\t\t\t\tthis.renderers[viewer] = {label: label};\n\t\t\t}\n\t\t}\n\t},\n\tregisterEditorForTypes: function(viewer, label, types){\n\t\tfor(var i = 0; i < types.length; i++){\n\t\t\tif(typeof this.registeredDataEditors[types[i]] == \"undefined\"){\n\t\t\t\tthis.registeredDataEditors[types[i]] = [];\n\t\t\t}\n\t\t\tif(this.registeredDataEditors[types[i]].indexOf(viewer) == -1){\n\t\t\t\tthis.registeredDataEditors[types[i]].push(viewer);\n\t\t\t\tthis.renderers[viewer] = {label: label};\n\t\t\t}\t\t\t\n\t\t}\n\t},\n\tregisterEditorForFrameType: function(viewer, label, frametype){\n\t\tthis.renderers[viewer] = {label: label};\n\t\tif(typeof this.registeredDataEditors[frametype] == \"undefined\") this.registeredDataEditors[frametype] = [];\n\t\tif(this.registeredDataEditors[frametype].indexOf(viewer) == -1){\n\t\t\tthis.registeredDataEditors[frametype].push(viewer);\n\t\t}\n\t},\n\tregisterViewerForFrameType: function(viewer, label, frametype){\n\t\tthis.renderers[viewer] = {label: label};\n\t\tif(typeof this.registeredDataViewers[frametype] == \"undefined\") this.registeredDataViewers[frametype] = [];\n\t\tif(this.registeredDataViewers[frametype].indexOf(viewer) == -1){\n\t\t\tthis.registeredDataViewers[frametype].push(viewer);\n\t\t}\n\t},\n\tregisterViewerForProperties: function(viewer, label, properties){\n\t\tfor(var i = 0; i < properties.length; i++){\n\t\t\tif(typeof this.registeredPropertyViewers[properties[i]] == \"undefined\"){\n\t\t\t\tthis.registeredPropertyViewers[properties[i]] = [];\n\t\t\t}\n\t\t\tif(this.registeredPropertyViewers[properties[i]].indexOf(viewer) == -1){\n\t\t\t\tthis.registeredPropertyViewers[properties[i]].push(viewer);\n\t\t\t\tthis.renderers[viewer] = {label: label};\n\t\t\t}\n\t\t}\n\t},\n\tregisterEditorForProperties: function(viewer, label, properties){\n\t\tfor(var i = 0; i < properties.length; i++){\n\t\t\tif(typeof this.registeredPropertyEditors[properties[i]] == \"undefined\"){\n\t\t\t\tthis.registeredPropertyEditors[properties[i]] = [];\n\t\t\t}\n\t\t\tif(this.registeredPropertyEditors[properties[i]].indexOf(viewer) == -1){\n\t\t\t\tthis.registeredPropertyEditors[properties].push(viewer);\n\t\t\t\tthis.renderers[viewer] = {label: label};\n\t\t\t}\n\t\t}\n\t},\n\trenderers: {\n\t\tHTMLStringViewer: { label: \"String Viewer\"},\n\t\tHTMLStringEditor: { label: \"String Editor\"},\n\t\tHTMLPropertyViewer: { label: \"HTML Property Viewer\"}\n\t},\n\tpatternMatchesRenderer: function(pattern, renderer){\n\t\tif(typeof pattern == \"object\" && pattern.length){ //multiple patterns are ANDed\n\t\t\tfor(var i = 0 ; i<pattern.length; i++){\n\t\t\t\tvar fp = new FramePattern(pattern[i]);\n\t\t\t\tif(!fp.checkRenderer(renderer)) return false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\tvar fp = new FramePattern(pattern);\n\t\t\treturn fp.checkRenderer(renderer);\n\t\t}\n\t}\n}\n\nRenderingMap.addPlugin = function(plugin){\n\tif(plugin == \"gmaps\"){\n\t\tthis.registerEditorForTypes(\"GoogleMapEditor\", \"Google Map Editor\", [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\n\t\tthis.registerViewerForTypes(\"GoogleMapViewer\", \"Google Map Editor\", [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\n\t}\n\tif(plugin == \"quill\"){\n\t\tthis.registerEditorForTypes(\"HTMLMarkupEditor\", \"Quill WYSIWIG HTML Editor\", [\"xdd:html\"]);\n\t}\n\tif(plugin == \"select2\"){\n\t\tRenderingMap.registerEditorForFrameType(\"S2EntityEditor\", \"S2 Autocomplete Selector\", \"document\");\n\t}\n\tif(plugin == \"jsoneditor\"){\n\t\tRenderingMap.registerEditorForFrameType(\"S2EntityEditor\", \"S2 Autocomplete Selector\", \"document\");\n\t}\n}\n\nRenderingMap.getAvailableObjectViewers = function(renderer){\n\tvar entries = ['html', 'json'];\n\treturn entries;\n}\n\nRenderingMap.decorateRenderer = function(options, renderer){\n\tvar compiled_options = this.compileOptions(options, renderer);\n\tif(compiled_options && compiled_options.mode){\n\t\trenderer.mode = compiled_options.mode;\n\t}\n\telse {\n\t\tif(renderer.parent && renderer.parent.mode) renderer.mode = renderer.parent.mode;\n\t\telse renderer.mode = \"view\";\n\t}\n\tif(compiled_options && compiled_options.view){\n\t\trenderer.view = compiled_options.view;\n\t}\n\telse {\n\t\tif(renderer.parent && renderer.parent.view) renderer.view = renderer.parent.view;\n\t\telse renderer.view = \"full\";\n\t}\n\tif(compiled_options && compiled_options.facets){\n\t\trenderer.facets = compiled_options.facets;\n\t}\n\telse {\n\t\trenderer.facets = renderer.getDefaultFacets();\n\t}\n\tif(compiled_options && compiled_options.facet && typeof renderer.facets[compiled_options.facet] == \"object\"){\n\t\trenderer.facet = compiled_options.facet;\n\t}\t\n\telse {\n\t\tvar deffacet = renderer.getDefaultFacet();\n\t\tif(typeof renderer.facets[deffacet] == \"object\"){\n\t\t\trenderer.facet = deffacet;\n\t\t}\n\t\telse {\n\t\t\trenderer.facet = key(renderer.facets);\n\t\t}\n\t}\n\tif(compiled_options && compiled_options.hide_disabled_buttons){\n\t\trenderer.hide_disabled_buttons = compiled_options.hide_disabled_buttons;\n\t}\n\telse if(renderer.parent) renderer.hide_disabled_buttons = parent.hide_disabled_buttons;\n\telse renderer.hide_disabled_buttons = true;\n\tif(compiled_options && typeof compiled_options.features == \"object\"){\n\t\trenderer.features = compiled_options.features;\n\t}\n\telse {\n\t\trenderer.features = renderer.facets[renderer.facet].features;\n\t\t//renderer.features = renderer.getDefaultFeatures(renderer.facet);\n\t}\n\tif(compiled_options && typeof compiled_options.controls == \"object\"){\n\t\trenderer.controls = compiled_options.controls;\n\t}\n\telse {\n\t\trenderer.controls = renderer.facets[renderer.facet].controls;\n\t\t//renderer.controls = renderer.getDefaultControls();\n\t}\n\tif(compiled_options && typeof compiled_options.viewerType != \"undefined\"){\n\t\trenderer.viewerType = compiled_options.viewerType;\n\t\tif(compiled_options.viewerOptions)\n\t\t\trenderer.viewerOptions = compiled_options.viewerOptions;\n\t}\n\tif(compiled_options && typeof compiled_options.header != \"undefined\"){}\n\telse {\n\t\trenderer.header_viewer = new ObjectViewer.HTMLObjectHeaderViewer();\n\t}\n\tif(compiled_options && typeof compiled_options.filter != \"undefined\"){}\n\telse {}\n\tif(compiled_options && typeof compiled_options.sort != \"undefined\"){}\n\telse {}\n\treturn options;\n}\t\n\nRenderingMap.compileOptions = function(options, renderer){\n\tvar compiled_options = {};\n\tvar rules = [];\n\tfor(var key in options){\n\t\tif(key != \"rules\"){\n\t\t\tcompiled_options[key] = options[key];\n\t\t}\n\t}\n\tif(options.rules){\n\t\tfor(var i = 0; i<options.rules.length; i++){\n\t\t\tvar match = (!options.rules[i].pattern || this.patternMatchesRenderer(options.rules[i].pattern, renderer));\n\t\t\tif(match && options.rules[i].output){\n\t\t\t\tfor(var k in options.rules[i].output){\n\t\t\t\t\tcompiled_options[k] = options.rules[i].output[k];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn compiled_options;\n}\n\n\nRenderingMap.registerViewerForTypes(\"HTMLBooleanViewer\", \"Checkbox Viewer\", [\"xsd:boolean\"]);\nRenderingMap.registerEditorForTypes(\"HTMLBooleanEditor\", \"Checkbox Editor\", [\"xsd:boolean\"]);\nRenderingMap.registerViewerForFrameType(\"HTMLChoiceViewer\", \"Choice Viewer\", \"oneOf\");\nRenderingMap.registerEditorForFrameType(\"HTMLChoiceEditor\", \"Choice Selector\", \"oneOf\");\nRenderingMap.registerViewerForTypes(\"HTMLCoordinateViewer\", \"Coordinate Viewer\", [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\nRenderingMap.registerEditorForTypes(\"HTMLCoordinateEditor\", \"Coordinate Editor\", [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\nRenderingMap.registerViewerForTypes(\"HTMLDateViewer\", \"Date Viewer\", [\"xsd:time\", \"xsd:date\", \"xsd:dateTime\", \"xsd:gYear\", \n\t\"xsd:gYearRange\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:dateTimeStamp\"]);\nRenderingMap.registerEditorForTypes(\"HTMLDateEditor\", \"Date Editor\", [\"xsd:time\", \"xsd:date\", \"xsd:dateRange\" ,\"xsd:dateTime\", \"xsd:gYear\", \n\t\"xsd:gYearRange\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:dateTimeStamp\"]);\nRenderingMap.registerViewerForFrameType(\"HTMLEntityViewer\", \"Document Viewer\", \"document\");\nRenderingMap.registerEditorForFrameType(\"HTMLEntityEditor\", \"Document Selector\", \"document\");\nRenderingMap.registerViewerForTypes(\"HTMLImageViewer\", \"Image Viewer\", [\"xdd:url\", \"xsd:anyURI\", \"xsd:base64Binary\"]);\nRenderingMap.registerEditorForTypes(\"HTMLImageEditor\", \"Image Editor\", [\"xsd:base64Binary\"]);\nRenderingMap.registerViewerForTypes(\"HTMLImageViewer\", \"Image Viewer\", [\"xdd:url\", \"xsd:anyURI\", \"xsd:base64Binary\"]);\nRenderingMap.registerEditorForTypes(\"HTMLImageEditor\", \"Image Editor\", [\"xsd:base64Binary\"]);\nRenderingMap.registerViewerForTypes(\"HTMLLinkViewer\", \"Link Viewer\", [\"xdd:url\", \"xsd:anyURI\"]);\nRenderingMap.registerViewerForTypes(\"HTMLNumberViewer\", \"Number with commas\", \n\t\t[\"xsd:decimal\", \"xsd:double\", \"xsd:float\", \"xsd:short\", \"xsd:integer\", \"xsd:long\", \n\t\t\t\"xsd:nonNegativeInteger\", \"xsd:positiveInteger\", \"xsd:negativeInteger\", \"xsd:nonPositiveInteger\"]);\nRenderingMap.registerViewerForTypes(\"HTMLRangeViewer\", \"Range Viewer\", [\"xdd:gYearRange\", \"xdd:dateRange\", \"xdd:integerRange\", \"xdd:decimalRange\"]);\nRenderingMap.registerEditorForTypes(\"HTMLRangeEditor\", \"Range Editor\", [\"xdd:gYearRange\", \"xdd:dateRange\", \"xdd:integerRange\", \"xdd:decimalRange\"]);\nRenderingMap.registerViewerForTypes(\"SantizedHTMLViewer\", \"Sanitized HTML\", [\"xsd:string\", \"xdd:html\"]);\n\nFramePattern = function(pattern){\n\tthis.renderer = (pattern.renderer ? pattern.renderer : false);\n\tthis.label = (pattern.value ? pattern.value : false);\n\tthis.frame_type = (pattern.frame_type ? pattern.frame_type : false);\n\tthis.subject = (pattern.subject ? pattern.subject : false);\n\tthis.subjectClass = (pattern.subjectClass ? pattern.subjectClass : false);\n\tthis.range = (pattern.range ? pattern.range : false);\n\tthis.property = (pattern.property ? pattern.property : false);\n\tthis.value = (pattern.value ? pattern.value : false);\n\tthis.parent = (pattern.parent ? new FramePattern(pattern.parent) : false);\n\tthis.children = [];\n\tif(pattern.children){\n\t\tfor(var i = 0 ; i < pattern.children.length ; i++){\n\t\t\tthis.children.push(new FramePattern(pattern.children[i]));\n\t\t}\n\t}\n\tthis.depth = (typeof pattern.depth != \"undefined\" ? pattern.depth : false);\n\tthis.index = (pattern.index ? pattern.index : false);\n\tthis.status = (pattern.status ? pattern.status : false);\n}\n\nFramePattern.prototype.checkRenderer = function(renderer){\n\tvar rtype = this.getRendererType(renderer);\n\tif(!rtype) return false;\n\tif(this.renderer && this.renderer != rtype) return false;\n\tif(this.illegalRuleType(rtype)) return false;\n\tif(this.frame_type && !this.checkFrameType(rtype, renderer)) return false;\n\tif(this.label && !this.checkLabel(rtype, renderer)) return false;\n\tif(this.subject && !this.checkSubject(rtype, renderer)) return false;\n\tif(this.subjectClass && !this.checkSubjectClass(rtype, renderer)) return false;\n\tif(this.property && !this.checkProperty(rtype, renderer)) return false;\n\tif(this.depth !== false && !this.checkDepth(rtype, renderer)) return false;\n\tif(this.range && !this.checkRange(rtype, renderer)) return false;\n\tif(this.value && !this.checkValue(rtype, renderer)) return false;\n\tif(this.parent && !this.checkParent(rtype, renderer)) return false;\n\tif(this.children && this.children.length && !this.checkChildren(rtype, renderer)) return false;\n\tif(this.index && !this.checkIndex(rtype, renderer)) return false;\n\tif(this.status && !this.checkStatus(rtype, renderer)) return false;\n\treturn true;\n} \n\nFramePattern.prototype.illegalRuleType = function(rtype){\n\tif(rtype == 'value' && (this.children.length || this.label)) return true;\n\tif(rtype == 'object' && this.range ) return true;\n\treturn false;\n}\n\n/* subject is an id or an array of ids, \n/* match is positive if the renderer's subject appears in the array or is the id\n */\nFramePattern.prototype.checkSubject = function(subject, renderer){\n\tif(typeof this.subject != \"object\" || !this.subject.length) this.subject = [this.subject];\n\tvar rsubj = renderer.subject();\n\tfor(var i = 0 ; i<this.subject.length; i++){\n\t\tif(this.IDsMatch(subject[i], rsubj)){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\n//at least one child must match all child rules\nFramePattern.prototype.checkChildren = function(rtype, renderer){\n\tfor(var i = 0 ; i<this.children.length; i++){\n\t\tvar found = false;\n\t\tif(rtype == \"object\"){\n\t\t\tfor(var prop in renderer.properties){\n\t\t\t\tif(this.children[i].checkRenderer(renderer.properties[prop])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if(rtype == \"property\"){\n\t\t\tfor(var j = 0; j <= renderer.values.length; j++){\n\t\t\t\tif(this.children[j].checkRenderer(renderer.values[j])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(!found) return false;\n\t}\n\treturn true;\n}\n\nFramePattern.prototype.checkStatus = function(rtype, renderer){\n\tif(typeof this.status != \"object\" || this.status.length == 0) this.status = [this.status];\n\tfor(var i = 0; i<this.status.length; i++){\n\t\tif(this.status[i] == \"updated\" && !renderer.isUpdated()) return false;\n\t\tif(this.status[i] == \"new\" && !renderer.isNew()) return false;\n\t\tif(this.status[i] == \"unchanged\" && renderer.isUpdated()) return false;\n\t}\n\treturn true;\n}\n\nFramePattern.prototype.checkDepth = function(rtype, renderer){\n\treturn this.numberMatch(this.depth, renderer.depth());\n}\n\nFramePattern.prototype.checkParent = function(rtype, renderer){\n\treturn this.parent.checkRenderer(renderer.parent);\n}\n\nFramePattern.prototype.checkIndex = function(rtype, renderer){\n\tif(rtype == 'value'){\n\t\treturn this.index == renderer.index;\n\t}\n\treturn false;\n}\n\nFramePattern.prototype.checkProperty  = function(rtype, renderer){\n\tif(typeof this.property != \"object\" || !this.property.length) this.property = [this.property];\n\tfor(var i = 0 ; i<this.property.length; i++){\n\t\tif(this.propertyIDsMatch(renderer.property(), this.property[i])){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\n//returns true if any of the values are found\nFramePattern.prototype.checkValue = function(rtype, renderer){\n\tif(typeof this.value != \"object\" || !this.value.length) this.value = [this.value];\n\tfor(var i = 0 ; i<this.value.length; i++){\n\t\tif(rtype == \"value\"){\n\t\t\tif(this.valuesMatch(renderer.value(), this.value[i])){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse if(rtype == \"property\"){\n\t\t\tfor(var j = 0; j<= renderer.values.length;  j++){\n\t\t\t\tif(this.getRendererType(renderer.values[i]) == 'value' &&\n\t\t\t\t\t\tthis.valuesMatch(renderer.values[i].value(), this.value[i])){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if(rtype == \"object\"){\n\t\t\tfor(var prop in renderer.properties){\n\t\t\t\tif(this.checkValue(this.getRendererType(renderer.properties[prop]), renderer.properties[prop])){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nFramePattern.prototype.checkRange  = function(rtype, renderer){\n\tif(typeof this.range != \"object\" || !this.range.length) this.range = [this.range];\n\tfor(var i = 0 ; i<this.range.length; i++){\n\t\tif(this.rangeIDsMatch(renderer.range(), this.range[i])){ \n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nFramePattern.prototype.checkSubjectClass = function(rtype, renderer){\n\tif(typeof this.subjectClass != \"object\" || !this.subjectClass.length) this.subjectClass = [this.subjectClass];\n\tvar rcls = renderer.subjectClass();\n\tfor(var i = 0 ; i<this.subjectClass.length; i++){\n\t\tif(this.classIDsMatch(this.subjectClass[i], rcls)){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nFramePattern.prototype.checkFrameType = function (rtype, renderer){\n\tif(rtype == \"object\") return this.frame_type == \"object\";\n\tif(rtype == \"value\") {\n\t\tif(renderer.frame){\n\t\t\treturn this.frame_type == renderer.frame.ftype();\n\t\t}\n\t\telse {\n\t\t\talert(JSON.stringify(renderer));\n\t\t\talert(\"No frame\");\n\t\t}\n\t}\n\tif(rtype == \"property\") return false;\n}\n\nFramePattern.prototype.checkLabel = function(rtype, renderer){\n\tif(typeof renderder.getLabel != \"function\"){\n\t\tconsole.log(new Error(\"Rule passed to check label with broken renderer object - no getLabel\"));\n\t\treturn false;\n\t}\n\treturn this.stringMatch(this.label, renderer.getLabel());\n}\n\nFramePattern.prototype.IDsMatch = function(ida, idb){\n\treturn TerminusClient.FrameHelper.compareIDs(ida, idb);\n}\n\nFramePattern.prototype.classIDsMatch = function(ida, idb){\n\treturn this.IDsMatch(ida, idb);\n}\nFramePattern.prototype.propertyIDsMatch = function(ida, idb){\n\tvar match = this.IDsMatch(ida, idb);\n\treturn match;\n}\nFramePattern.prototype.rangeIDsMatch = function(ida, idb){\n\treturn this.IDsMatch(ida, idb);\n}\nFramePattern.prototype.valuesMatch = function(vala, valb){\n\treturn vala == valb;\n}\nFramePattern.prototype.numberMatch = function(vala, valb){\n\tif(typeof vala == \"string\"){\n\t\ttry {\n\t\t\treturn eval(valb + vala);\n\t\t}\n\t\tcatch(e){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn vala === valb;\n}\n\nFramePattern.prototype.stringMatch = function(vala, valb){\n\tvar pat = new RegExp(vala);\n\treturn pat.test(valb);\n}\n\nFramePattern.prototype.getRendererType = function(renderer){\n    if(renderer.constructor.name == \"ObjectRenderer\") return \"object\";\n    if(renderer.constructor.name == \"PropertyRenderer\") return \"property\";\n    if(renderer.constructor.name == \"ValueRenderer\") return \"value\";\n\tif(renderer.renderer_type) return renderer.renderer_type;\n\tconsole.log(new Error(\"frame configuration passed non-renderer type \" + renderer.constructor.name));\n\tconsole.log(renderer);\n\treturn false;\n}\n\n\nmodule.exports=RenderingMap\n\n\n","const TerminusPluginManager = require('../plugins/TerminusPlugin');\n\nlet HTMLFrameHelper = {};\n\nHTMLFrameHelper.getActionControl = function(type, control, label, callback, disabled){\n\tvar pman = new TerminusPluginManager();\n\tvar dpropDOM = document.createElement(\"span\");\n\tdpropDOM.setAttribute(\"class\", \"terminus-action-control terminus-save-btn \" + type + \"-\" + control);\n\tvar pman = new TerminusPluginManager();\n    /*if(pman.pluginAvailable(\"font-awesome\")){\n\t\tvar icon = document.createElement('icon');\n\t\tvar faic = this.getControlIcon(control);\n\t\tif(disabled){\n\t\t\ticon.setAttribute(\"class\", \"terminus-frame-control frame-control-action action-disabled fa fa\" + faic + \" \" + type + \"-\" + control + \"-disabled terminus-font-align\");\n\t\t\ticon.setAttribute(\"title\", disabled);\n\t\t}\n\t\telse {\n\t\t\ticon.setAttribute(\"class\", \"terminus-frame-control frame-control-action frame-control-action fa fa\" + faic + \" \" + type + \"-\" + control + \" terminus-font-align\");\n\t\t\ticon.addEventListener(\"click\", function(){\n\t\t\t\tcallback(control);\n\t\t\t});\n\t\t}\n\t\tdpropDOM.appendChild(icon);\n\t}\n\telse{*/\n\t\tvar button = document.createElement(\"button\");\n\t\tbutton.appendChild(document.createTextNode(label));\n\t\tif(disabled){\n\t\t\tbutton.setAttribute(\"class\", \"terminus-frame-control terminus-frame-btn frame-control-action action-disabled \" + type + \"-\" + control + \"-disabled\");\n\t\t\tbutton.setAttribute(\"title\", disabled);\n\t\t}\n\t\telse {\n\t\t\tbutton.setAttribute(\"class\", \"terminus-frame-control terminus-frame-btn frame-control-action \" + type + \"-\" + control);\n\t\t\tbutton.addEventListener(\"click\", function(){\n\t\t\t\tif(this.innerHTML == 'Save'){\n\t\t\t\t\tvar objId = document.getElementsByClassName('terminus-object-id-input');\n\t\t\t\t\tif(objId.length>0){\n\t\t\t\t\t\tif(!objId[0].value){\n\t\t\t\t\t\t\tobjId[0].setAttribute('placeholder', 'Required field');\n\t\t\t\t\t\t\tobjId[0].style.background = '#f8d7da';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse callback(control);\n\t\t\t\t\t}\n\t\t\t\t\telse callback(control);\n\t\t\t\t}\n\t\t\t\telse callback(control);\n\t\t\t\t//(control);\n\t\t\t});\n\t\t}\n\t\tdpropDOM.appendChild(button);\n\t//}\n\treturn dpropDOM;\n}\n\nHTMLFrameHelper.getSettingsControl = function(view){\n\tvar pman = new TerminusPluginManager();\n\tif(pman.pluginAvailable(\"font-awesome\")){\n\t\tvar icon = document.createElement('icon');\n\t\tif(view == 'property') icon.setAttribute('class', 'fa fa-cog terminus-pointer');\n\t\telse if(view == 'data') icon.setAttribute('class', 'fa fa-edit terminus-pointer');\n\t\ticon.setAttribute('style', 'margin: 10px;')\n\t\treturn icon;\n\t}\n\telse{\n\t\tvar button = document.createElement(\"button\");\n\t\tbutton.setAttribute('class', 'terminus-btn');\n\t\tbutton.appendChild(document.createTextNode('Settings'));\n\t\treturn button;\n\t}\n}\n\nHTMLFrameHelper.getControlIcon = function(control){\n\tvar icon;\n\tswitch(control){\n\t\tcase 'delete':\n\t\t\ticon = '-alt-delete';\n\t\tbreak;\n\t\tcase 'add':\n\t\t\ticon = '-plus';\n\t\tbreak;\n\t\tcase 'reset':\n\t\t\ticon = '-undo';\n\t\tbreak;\n\t\tcase 'save':\n\t\t\ticon = '-save';\n\t\tbreak;\n\t\tcase 'hide':\n\t\t\ticon = '-eye-slash';\n\t\tbreak;\n\t}\n\treturn icon;\n}\n\nHTMLFrameHelper.getSelectionControl = function(type, options, selected, callback){\n\tvar sel = document.createElement(\"select\");\n\tsel.setAttribute(\"class\", \"terminus-frame-selector frame-control-selection \" + type);\n\tfor(var i = 0; i < options.length; i++){\n\t\tvar opt = document.createElement(\"option\");\n\t\tif(typeof options[i] == \"object\"){\n\t\t\topt.value = options[i].value;\n\t\t\tvar label = (options[i].label ?  document.createTextNode(options[i].label) : document.createTextNode(TerminusClient.FrameHelper.labelFromURL(options[i].value)));\n\t\t\topt.appendChild(label);\n\t\t}\n\t\telse {\n\t\t\topt.value = options[i];\n\t\t\tlabel = TerminusClient.FrameHelper.labelFromURL(opt.value);\n\t\t\topt.appendChild(document.createTextNode(label));\n\t\t}\n\t\tif(selected == opt.value){\n\t\t\topt.setAttribute(\"selected\", \"selected\");\n\t\t}\n\t\tsel.appendChild(opt);\n\t}\n\tsel.addEventListener(\"change\", function(){\n\t\tcallback(this.value);\n\t});\n\treturn sel;\n}\n\nHTMLFrameHelper.getModeSelectorDOM = function(which, renderer){\n\tvar viewsDOM = document.createElement(\"span\");\n\tviewsDOM.setAttribute(\"class\", \"terminus-mode terminus-\"+which+\"-mode\");\n\tif(renderer.mode == \"view\"){\n\t\tvar callback = function(){ renderer.setMode(\"edit\");}\n\t\tviewsDOM.appendChild(HTMLFrameHelper.getActionControl(\"terminus-mode terminus-\"+which+\"-mode\", \"edit\", \" Edit \", callback));\n\t}\n\telse if(renderer.isNew()){\n\t\treturn false;\n\t}\n\telse {\n\t\tvar callback = function(){ renderer.cancel();}\n\t\tviewsDOM.appendChild(HTMLFrameHelper.getActionControl(which, \"cancel\", \"Cancel\", callback));\n\t}\n\treturn viewsDOM;\n}\n\nHTMLFrameHelper.goToName = function(s, p, i){\n\tvar url = window.location.href;\n\tif(url){\n\t\tvar wbits = url.split(\"#\");\n\t\tvar loc = wbits[0];\n\t\tvar sh = TerminusClient.FrameHelper.getShorthand(s);\n\t    if(!sh) sh = s;\n\t\tvar bits = sh.split(\":\");\n\t\tif(bits.length > 1) sh = bits[1];\n\t\tvar htmlid = sh;\n\t\tif(p){\n\t\t\tvar prop = TerminusClient.FrameHelper.getShorthand(p);\n\t\t\tif(!prop ) prop = p;\n\t\t\tvar bits = prop.split(\":\");\n\t\t\tif(bits.length > 1) prop = bits[1];\n\t\t\thtmlid += \"_\" + prop;\n\t\t\tif(i){\n\t\t\t\thtmlid += \"_\" + i;\n\t\t\t}\n\t\t}\n\t\twindow.location = loc + \"#\" + htmlid;\n\t}\n}\n\n\n\n/*HTMLFrameHelper.getFrameRow = function(){\n\tvar row = document.createElement('div');\n\trow.setAttribute('class', 'terminus-frame-row');\n\treturn row;\n}\n\nHTMLFrameHelper.getFrameGroup = function(frow){\n\tvar fl = document.createElement('div');\n\tfl.setAttribute('class', 'terminus-frame-length');\n\tfrow.appendChild(fl);\n\n\tvar fg = document.createElement('div');\n\tfg.setAttribute('class', 'terminus-frame-group');\n\tfl.appendChild(fg);\n\treturn fl;\n}*/\n\nHTMLFrameHelper.getInfoboxDOM = function(type, label, value, help, input){\n\t/*var frow = this.getFrameRow();\n\tvar fgroup = this.getFrameGroup(frow);*/\n\tvar infoDOM = document.createElement(\"span\");\n\tinfoDOM.setAttribute(\"class\", \"terminus-frame-infobox-box \" + \"terminus-\" +type );\n\t//fgroup.appendChild(infoDOM);\n\tif(help){\n\t\tinfoDOM.setAttribute(\"title\", help);\n\t}\n\tif(label){\n\t\tvar linfo = document.createElement(\"span\");\n\t\tlinfo.setAttribute(\"class\", \"terminus-frame-infobox-label \" + \"terminus-\" +type + \"-label\");\n\t\tlinfo.appendChild(document.createTextNode(label));\n\t\tinfoDOM.appendChild(linfo);\n\t}\n\tvar lspacer = document.createElement(\"span\");\n\tlspacer.setAttribute(\"class\", \"terminus-frame-infobox-spacer \" + \"terminus-\" +type + \"-spacer\");\n\tlspacer.appendChild(document.createTextNode(\" \"));\n\tinfoDOM.appendChild(lspacer);\n\tvar lval = document.createElement(\"span\");\n\tlval.setAttribute(\"class\", \"terminus-frame-infobox-value \" + \"terminus-\" +type + \"-value terminus-property-label-align\");\n\tif(input){\n\t\tinput.value = value;\n\t\tlval.appendChild(input);\n\t}\n\telse if(value) {\n\t\tvar sh = TerminusClient.FrameHelper.getShorthand(value);\n        if(sh){\n    \t   \tvar bits = sh.split(\":\");\n            sh = bits[1];\n   \t\t\tlval.setAttribute(\"title\", value);\n\t\t\tlval.appendChild(document.createTextNode(sh));\n\t\t}\n\t\telse {\n\t\t\tlval.appendChild(document.createTextNode(value));\n\t\t}\n\t}\n\tinfoDOM.appendChild(lval);\n\treturn infoDOM;\n}\n\nmodule.exports=HTMLFrameHelper\n","/*\n * Utility class which runs a query against the schema and presents the returned classes as a drop-down / class filter list\n */\n//const FrameHelper = require('../FrameHelper');\nconst WOQLQuery = require('../query/WOQLQuery');\n\nTerminusClassChooser = function(ui, filter, chosen){\n\tthis.ui = ui;\n\tthis.choice = (chosen ? chosen : false);\n\tthis.filter = filter;\n\tthis.show_single = true;\n}\n\nTerminusClassChooser.prototype.setRoot = function(root){\n\tthis.root = root;\n}\n\nTerminusClassChooser.prototype.setFilter = function(filter){\n\tthis.filter = filter;\n}\n\nTerminusClassChooser.prototype.change = function(cls){\n\talert(\"Need to specify class chooser function (\" + cls + \")\");\n}\n\nTerminusClassChooser.prototype.getAsDOM = function(style){\n\tvar ccdom = document.createElement(\"span\");\n\tccdom.setAttribute(\"class\", \"terminus-class-chooser\");\n\tvar ccsel = document.createElement(\"select\");\n\tccsel.setAttribute(\"class\", style + \" terminus-type-select terminus-class-select\");\n\t// ccsel.setAttribute(\"class\", \"terminus-class-select terminus-type-select terminus-query-select\");\n\tvar self = this;\n\tccsel.addEventListener(\"change\", function(){\n\t\tthis.choice = this.value;\n\t\tself.change(this.value);\n\t\tthis.value = \"\";\n\t});\n\tccdom.appendChild(ccsel);\n\tvar wq = new WOQLQuery(this.ui.client, {}, this.ui);\n\tvar woql = wq.getClassListMetaDataQuery(this.filter);\n\tvar self = this;\n\twq.execute(woql)\n\t.then(function(response){\n\t\tvar opts = self.getResultsAsOptions(response);\n\t\tif(opts){\n\t\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\t\tccsel.appendChild(opts[i]);\n\t\t\t}\n\t\t\tself.options = opts;\n\t\t}\n\t\telse {\n\t\t\tccdom.removeChild(ccsel);\n\t\t}\n\t});\n\treturn ccdom;\n}\n\nTerminusClassChooser.prototype.getResultsAsOptions = function(clist){\n\tvar choices = [];\n\tif(clist.bindings){\n\t\tif(this.show_single == false && clist.bindings.length < 2) return false;\n\t\tif(this.empty_choice){\n\t\t\tvar opt1 = document.createElement(\"option\");\n\t\t\topt1.setAttribute(\"class\", \"terminus-class-choice terminus-empty-choice\");\n\t\t\topt1.value = \"\";\n\t\t\topt1.appendChild(document.createTextNode(this.empty_choice));\n\t\t\tchoices.push(opt1);\n\t\t}\n\t\tvar added = [];\n\t\tfor(var i = 0; i<clist.bindings.length; i++){\n\t\t\tvar bclass = this.getVariableValueFromBinding(\"Element\", clist.bindings[i]);\n\t\t\tif(!bclass) bclass = this.getVariableValueFromBinding(\"Class\", clist.bindings[i]);\n\t\t\tif(bclass && added.indexOf(bclass) == -1){\n\t\t\t\tadded.push(bclass);\n\t\t\t\tvar opt = document.createElement(\"option\");\n\t\t\t\topt.setAttribute(\"class\", \"terminus-class-choice\");\n\t\t\t\topt.value = bclass;\n\t\t\t\tif(opt.value == this.choice){\n\t\t\t\t\topt.selected = true;\n\t\t\t\t}\n\t\t\t\tvar lab = this.getVariableValueFromBinding(\"Label\", clist.bindings[i]);\n\t\t\t\tif(!lab || lab == \"unknown\"){\n\n\t\t\t\t\tlab = TerminusClient.FrameHelper.labelFromURL(bclass);\n\n\t\t\t\t}\n\t\t\t\tif(lab[\"@value\"]) lab = lab[\"@value\"];\n\t\t\t\topt.appendChild(document.createTextNode(lab));\n\t\t\t\tchoices.push(opt);\n\t\t\t}\n\t\t}\n\t}\n\treturn choices;\n}\n\nTerminusClassChooser.prototype.getVariableValueFromBinding = function(varname, bind){\n\tfor(var key in bind){\n\t\tvar skey = key.substring(key.lastIndexOf(\"/\")+1);\n\t\tif(skey == varname){\n\t\t\treturn bind[key];\n\t\t}\n\t}\n\treturn false;\n}\n\nmodule.exports=TerminusClassChooser\n","const TerminusPluginManager = require('../plugins/TerminusPlugin');\nconst Datatables = require('../plugins/datatables.terminus');\n\nfunction WOQLResult(res, query, options, ui){\n\tthis.ui = ui;\n\tthis.query = query;\n\tthis.bindings = ((res && res.bindings) ? res.bindings : []);\n}\n\nWOQLResult.prototype.count = function(){\n\treturn this.bindings.length;\n}\n\nWOQLResult.prototype.shorten = function(url){\n\treturn this.query.shorten(url);\n}\n\nWOQLResult.prototype.hasBindings = function(result){\n\tif(result) return (result.bindings && result.bindings.length);\n\telse return (this.bindings && this.bindings.length);\n}\n\n\n\nfunction WOQLResultsViewer(ui, wresult, wQuery, options, settings, queryPage){\n\tthis.ui = ui;\n\tthis.result = wresult;\n\tthis.wQuery = wQuery;\n\tthis.options = options;\n\tthis.qPage = queryPage;\n\t//this.wqlRes = new WOQLResult();\n\tthis.pman = new TerminusPluginManager();\n\tthis.settings = settings;\n}\n\nWOQLResultsViewer.prototype.showTable = function(){\n\tif(this.options && typeof this.options.show_table != \"undefined\") return this.options.show_table;\n\treturn true;\n}\n\nWOQLResultsViewer.prototype.orderColumns = function(sample){\n\tvar ordered = [];\n\tfor(var h in sample){\n\t\tif(ordered.indexOf(h) == -1){\n\t\t\tordered.unshift(h);\n\t\t}\n\t}\n\treturn ordered;\n}\n\nWOQLResultsViewer.prototype.getAsDOM = function(resultDOM, displayResultHeader){\n\tvar rs = document.createElement('div');\n\tresultDOM.appendChild(rs);\n\tif(displayResultHeader){\n\t\tvar rh = document.createElement('div');\n\t\trh.setAttribute(\"class\", \"terminus-margin-top-bottom terminus-module-head\");\n\t\trh.appendChild(document.createTextNode(\"Results\"));\n\t\trs.appendChild(rh);\n\t}\n\tif(this.result && this.result.hasBindings() && this.showTable()){\n\t\tthis.getTableDOM(this.result.bindings, rs);\n\t\treturn rs;\n\t}\n\telse {\n\t\tnor = document.createElement('div');\n\t\tnor.setAttribute('class', 'terminus-no-res-alert');\n\t\tnor.appendChild(document.createTextNode(\"No results available, create new ones to view them here...\"));\n\t\trs.appendChild(nor);\n\t\treturn rs;\n\t}\n}\n\nWOQLResultsViewer.prototype.getTableDOM = function(bindings, resultDOM){\n\tif(this.pman.pluginAvailable(\"datatables\")){\n\t\tvar dtResult = this.getTable(bindings, true, {});\n\t\tresultDOM.appendChild(dtResult.tab);\n\t\tvar dt = new Datatables.Datatables(this, this.qPage);\n\t\tdt.draw(dtResult, resultDOM);\n\t\tresultDOM.classList.add('terminus-expandable');\n\t\tresultDOM.classList.add('terminus-dt-result-cont');\n\t\treturn tab;\n    }\n\telse{\n\t\tvar tab = this.getTable(bindings, false, {});\n\t\tresultDOM.appendChild(tab);\n\t}\n}\n\nWOQLResultsViewer.prototype.getDtTableDOMOnChange = function(bindings, resultDOM, pageInfo){\n\t\tvar dtResult = this.getTable(bindings, true, pageInfo);\n\t\tresultDOM.appendChild(dtResult.tab);\n\t\treturn dtResult;\n}\n\nWOQLResultsViewer.prototype.formatResultsForDatatableDisplay = function(bindings, pageInfo){\n    var columns = [], colDataData = {}, data = [], formattedResult = {}, arr = [];\n\tvar dtResult = {};\n    var ordered_headings = this.orderColumns(bindings[0]);\n\t// get columns\n\tfor(var i = 0; i<ordered_headings.length; i++){\n\t\tvar clab = TerminusClient.FrameHelper.validURL(ordered_headings[i]) ? TerminusClient.FrameHelper.labelFromURL(ordered_headings[i]) : ordered_headings[i];\n        columns.push({data: clab});\n\t}\n\t// get data for respective columns\n\tfor(var i = 0; i<bindings.length; i++){\n\t\tcolDataData = {};\n\t\tfor(var j = 0; j<ordered_headings.length; j++){\n\t\t\tif(typeof bindings[i][ordered_headings[j]] == \"object\"){\n\t\t\t\tvar lab = (bindings[i][ordered_headings[j]]['@value'] ? bindings[i][ordered_headings[j]]['@value'] : \"Object?\");\n\t\t\t}\n\t\t\telse if(typeof bindings[i][ordered_headings[j]] == \"string\") {\n\t\t\t\tvar lab = this.result.shorten(bindings[i][ordered_headings[j]]);\n\t\t\t\tif(lab == \"unknown\") lab = \"\";\n\t\t\t\tif(lab.substring(0, 4) == \"doc:\"){\n\t\t\t\t\tlab = this.getDocumentLocalLink(lab).outerHTML;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar clab = TerminusClient.FrameHelper.validURL(ordered_headings[j]) ? TerminusClient.FrameHelper.labelFromURL(ordered_headings[j]) : ordered_headings[j];\n\t\t\tcolDataData[clab] = lab;\n\t\t}\n\t\tdata.push(colDataData);\n\t}\n\tdtResult.columns = columns;\n\tformattedResult.data = data;\n\tformattedResult.recordsTotal = 65;\n\tformattedResult.recordsFiltered = 65;\n\tformattedResult.draw = 1;\n\tdtResult.data = formattedResult;\n\treturn dtResult;\n}\n\nWOQLResultsViewer.prototype.getTableBody = function(bindings, ordered_headings){\n\tvar tbody = document.createElement(\"tbody\");\n\tvar self = this;\n\tfor(var i = 0; i<bindings.length; i++){\n\t\tvar tr = document.createElement(\"tr\");\n\t\tfor(var j = 0; j<ordered_headings.length; j++){\n\t\t\tvar td = document.createElement(\"td\");\n\t\t\tif(typeof bindings[i][ordered_headings[j]] == \"object\"){\n\t\t\t\tvar lab = (bindings[i][ordered_headings[j]]['@value'] ? bindings[i][ordered_headings[j]]['@value'] : \"?\");\n\t\t\t}\n\t\t\telse if(typeof bindings[i][ordered_headings[j]] == \"string\") {\n\t\t\t\tvar lab = this.result.shorten(bindings[i][ordered_headings[j]]);\n\t\t\t}\n\t\t\tif(lab == \"unknown\") lab = \"\";\n\t\t\tif(lab.substring(0, 4) == \"doc:\"){\n\t\t\t\tvar a = this.getDocumentLocalLink(lab);\n\t\t\t\ttd.appendChild(a);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttd.appendChild(document.createTextNode(lab));\n\t\t\t}\n\t\t\ttr.appendChild(td);\n\t\t}\n\t\ttbody.appendChild(tr);\n\t}\n\treturn tbody;\n}\n\nWOQLResultsViewer.prototype.getDocumentLocalLink = function(lab){\n\tvar a = document.createElement(\"a\");\n\ta.setAttribute(\"title\", lab);\n\ta.setAttribute(\"href\", '#');\n\tvar self = this;\n\ta.addEventListener(\"click\", function(){\n\t\tif(self.result.ui) {\n\t\t\tself.result.ui.showDocument(this.title);\n\t\t\tself.result.ui.redraw();\n\t\t}\n\t});\n\ta.appendChild(document.createTextNode(lab));\n\treturn a;\n}\n\nWOQLResultsViewer.prototype.getTable = function(bindings, dtPlugin, pageInfo){\n\tvar tab = document.createElement(\"table\");\n\ttab.setAttribute(\"class\", \"terminus-hover-table\");\n\tvar thead = document.createElement(\"thead\");\n\tvar thr = document.createElement(\"tr\");\n\tvar ordered_headings = this.orderColumns(bindings[0]);\n\tfor(var i = 0; i<ordered_headings.length; i++){\n\t\tvar th = document.createElement(\"th\");\n\t\tth.setAttribute('class', 'terminus-table-header-full-css');\n\t\tvar clab = (ordered_headings[i].indexOf(\"http\") != -1) ? TerminusClient.FrameHelper.labelFromURL(ordered_headings[i]) : ordered_headings[i];\n\t\tth.appendChild(document.createTextNode(clab));\n\t\tthr.appendChild(th);\n\t}\n\tthead.appendChild(thr);\n\ttab.appendChild(thead);\n\tif(dtPlugin){\n\t\tvar tbody = document.createElement(\"tbody\");\n\t\ttab.appendChild(tbody);\n\t\tvar dtResult ={};\n\t\tdtResult.result = this.formatResultsForDatatableDisplay(bindings, pageInfo);\n\t\tdtResult.tab = tab;\n\t\treturn dtResult;\n\t}\n\telse {\n\t\tvar tbody = this.getTableBody(bindings, ordered_headings);\n\t\ttab.appendChild(tbody);\n\t\treturn tab;\n\t}\n}\n\n\nmodule.exports={WOQLResultsViewer, WOQLResult}\n","const WOQLQuery = require('../query/WOQLQuery');\nconst Renderers = require('./ObjectRenderer');\n\nfunction TerminusDocumentViewer(ui, action, options){\n\tthis.ui = ui;\n\tthis.server = this.ui.server();\n\tthis.db = this.ui.db();\n\tthis.init();\n\tthis.mode = (options && options.mode ? options.mode : \"view\");\n\tthis.editor = (options && options.editor ? options.editor : false);\n\tthis.load_schema = (options && options.load_schema ? options.load_schema : true);\n\tthis.config_options = this.getBuiltInViewerOptions();\n\tthis.options = (options ? options : this.config_options[action]);\n\tthis.action = action;\n\tthis.document = false;\n}\n\nTerminusDocumentViewer.prototype.init = function(){\n\tvar wq = new WOQLQuery(this.ui.client, this.options, this.ui);\n\tvar woql = wq.getClassMetaDataQuery();\n\tvar self = this;\n\tself.classmeta = {};\n\tself.instancemeta = {};\n\twq.execute(woql).then(function(wresult){\n\t\tif(wresult && wresult.hasBindings()){\n\t\t\tfor(var i = 0; i<wresult.bindings.length; i++){\n\t\t\t\tvar cls = wresult.bindings[i].Class;\n\t\t\t\tif(cls && typeof self.classmeta[cls] == \"undefined\"){\n\t\t\t\t\tself.classmeta[cls] = wresult.bindings[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tself.refreshPage();\n\t\t}\n\t})\n\t.catch(function(e){\n\t\tconsole.log(e);\n\t});\n}\n\nTerminusDocumentViewer.prototype.getInstanceMeta = function(elid){\n\tvar self = this;\n\tif(self.instancemeta && typeof self.instancemeta[elid] != \"undefined\") return self.instancemeta[elid] ;\n\tvar wq = new WOQLQuery(this.ui.client, this.options, this.ui);\n\tvar woql = wq.getInstanceMeta(elid);\n\treturn wq.execute(woql).then(function(wresult){\n\t\tif(wresult && wresult.hasBindings()){\n\t\t\tvar res = wresult.bindings[0];\n\t\t\treturn res;\n\t\t}\n\t\treturn false;\n\t})\n\t.catch(function(e){\n\t\tconsole.log(e);\n\t});\n}\n\nTerminusDocumentViewer.prototype.getClassMeta = function(cls){\n\tif(typeof this.classmeta[cls]){\n\t\treturn this.classmeta[cls];\n\t}\n\treturn false;\n}\n\nTerminusDocumentViewer.prototype.loadCreateDocument = function(url){\n\tif(url){\n\t\tthis.ui.showBusy(\"Fetching frame for document class \" + url);\n\t\tvar self = this;\n\t\tthis.mode = \"edit\";\n\t\tthis.page_config = \"create\";\n\t\tif(url.indexOf(\"/\") == -1 && url.indexOf(\":\") == -1) {\n\t\t\turl = \"schema:\" + url;\n\t\t}\n\t\treturn this.loadDocumentSchema(url)\n\t\t.then(function(response){\n\t\t\tself.ui.clearBusy();\n\t\t\tself.setLabel();\n\t\t})\n\t\t.catch(function(error) {\n\t\t\tconsole.error(error);\n\t\t\tself.ui.clearBusy();\n\t\t\tself.ui.showError(error);\n\t\t});\n\t}\n}\n\nTerminusDocumentViewer.prototype.loadDocument = function(url, cls){\n\tif(!url) return false;\n\tvar self = this;\n\tif(url.substring(0,4) == \"doc:\"){\n\t\turl = url.substring(4);\n\t}\n\tthis.page_config = \"view\";\n\turl = url.replace(\"/candidate\", \"/platform/document\");\n\tthis.ui.showBusy(\"Loading Document from \" + url);\n\treturn this.ui.client.getDocument(url, {\"terminus:encoding\": \"terminus:frame\"})\n\t.then(function(response){\n\t\tself.ui.clearBusy();\n\t\tself.loadDataFrames(response);\n\t\tself.setLabel();\n\t\tself.refreshPage();\n\t\tif(self.load_schema){\n\t\t\treturn self.loadDocumentSchema(self.document.cls).then(function(){ self.refreshPage()}).catch(function(e){console.error(e)});\n\t\t}\n\t\treturn response;\n\t})\n\t.catch(function(error) {\n\t\tconsole.error(error);\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\n}\n\nTerminusDocumentViewer.prototype.loadDocumentSchema = function(cls){\n\tvar self = this;\n\tvar ncls = TerminusClient.FrameHelper.unshorten(cls);\n\treturn this.ui.client.getClassFrame(false, ncls)\n\t.then(function(response){\n\t\tself.loadSchemaFrames(response, cls);\n\t\tself.refreshPage();\n\t});\n}\n\nTerminusDocumentViewer.prototype.deleteDocument = function(URL){\n\tthis.document = false;\n\tvar self = this;\n\tthis.ui.showBusy(\"Deleting Document \" + URL);\n\treturn this.ui.client.deleteDocument(URL)\n\t.then(function(response){\n\t\tself.ui.clearBusy();\n\t}).catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\n}\n\nTerminusDocumentViewer.prototype.createDocument = function(id){\n\tvar self = this;\n\tvar extr = this.renderer.extract();\n\tvar opts = { \"terminus:encoding\": \"jsonld\" };\n\tthis.ui.showBusy(\"Creating document\");\n\treturn this.ui.client.createDocument(id, extr, opts)\n\t.then(function(response){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showDocument(id);\n\t}).catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tif(error.data && error.data['terminus:witnesses']){\n\t\t\tself.ui.showViolations(error.data['terminus:witnesses'], \"instance\");\t\t\t\n\t\t}\n\t\telse {\n\t\t\tself.ui.showError(error);\n\t\t}\n\t});\n}\n\nTerminusDocumentViewer.prototype.updateDocument = function(){\n\tvar durl = this.document.subjid;\n\tvar extr = this.renderer.extract();\n\tvar self = this;\n\tvar opts = { \"terminus:encoding\": \"jsonld\" };\n\tthis.ui.showBusy(\"Updating document \" + durl);\n\treturn this.ui.client.updateDocument(durl, extr, opts)\n\t.then(function(response){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showDocument(durl);\n\t}).catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tif(error.data && error.data['terminus:witnesses']){\n\t\t\tself.ui.showViolations(error.data['terminus:witnesses'], \"instance\");\t\t\t\n\t\t}\n\t\telse {\n\t\t\tself.ui.showError(error);\n\t\t}\n\t});\n}\n\nTerminusDocumentViewer.prototype.loadDataFrames = function(dataframes, cls){\n\tif(!cls){\n\t\tif(this.document) cls = this.document.cls;\n\t\telse {\n\t\t\tif(dataframes && dataframes.length && dataframes[0] && dataframes[0].domain){\n\t\t\t\tcls = dataframes[0].domain;\n\t\t\t}\n\t\t}\n\t}\n\tif(cls){\n\t\tif(!this.document){\n\t\t\tthis.document = new TerminusClient.ObjectFrame(cls, dataframes);\n\t\t}\n\t\telse {\n\t\t\tthis.document.loadDataFrames(dataframes);\n\t\t}\n\t}\n\telse {\n\t\talert(\"Missing Class\" + \" \" + \"Failed to add dataframes due to missing class\");\n\t}\n}\n\n\nTerminusDocumentViewer.prototype.loadSchemaFrames = function(classframes, cls){\n\tif(!cls){\n\t\tif(classframes && classframes.length && classframes[0] && classframes[0].domain){\n\t\t\tcls = classframes[0].domain;\n\t\t}\n\t}\n\tif(cls){\n\t\tif(!this.document){\n\t\t\tthis.document = new TerminusClient.ObjectFrame(cls);\n\t\t}\n\t\tif(classframes){\n\t\t\tthis.document.loadClassFrames(classframes);\n\t\t\tif(!this.document.subjid){\n\t\t\t\tthis.document.newDoc = true;\n\t\t\t\tthis.document.fillFromSchema(\"_:\");\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tthis.error(\"Missing Class\", \"Failed to add class frames due to missing class\");\n\t}\n}\n\nTerminusDocumentViewer.prototype.render = function(){\n\tif(!this.renderer && this.document){\n\t\tif(this.page_config){\n\t\t\tthis.options = this.getOptionsFromPageConfig(this.page_config);\n\t\t}\n\t\ttry{\n\t\t\tthis.renderer = new Renderers.ObjectRenderer(this.document, false, this.options);\n\t\t\tthis.renderer.mode = this.mode;\n\t\t\tthis.renderer.controller = this;\n\t\t}catch(e){\n\t \t\tconsole.error('TerminusDocumentViewer render',e.toString())\n\t \t}\n\t}\n\tif(this.renderer){\n\t\treturn this.renderer.render();\n\t}\n}\n\nTerminusDocumentViewer.prototype.getBuiltInViewerOptions = function(){\n\treturn FrameConfig;\n}\n\nTerminusDocumentViewer.prototype.getOptionsFromPageConfig = function(pageconf){\n\tif(typeof this.config_options[pageconf] == \"object\") {\n\t\treturn this.config_options[pageconf];\n\t}\n\treturn this.options;\n}\n\n\nTerminusDocumentViewer.prototype.getClient = function(){\n\treturn this.ui.client;\n}\n\nTerminusDocumentViewer.prototype.extract = function(options){\n\treturn this.renderer.extract();\n}\n\nTerminusDocumentViewer.prototype.getLabel = function(){\n\tvar lab = (this.cls ? this.cls : false);\n\tif(!lab) lab = (this.docid ? this.docid : \"Void\");\n\treturn lab;\n}\n\nTerminusDocumentViewer.prototype.setLabel = function(){\n\tif(this.document && this.labdom){\n\t\tTerminusClient.FrameHelper.removeChildren(this.labdom);\n\t\tvar dfs = this.document.getDataFrames(TerminusClient.FrameHelper.getStdURL(\"rdfs\", \"label\"));\n\t\tfor(var i = 0; i< dfs.length; i++){\n\t\t\tvar lab = dfs[i].get();\n\t\t\tif(lab) {\n\t\t\t\tthis.labdom.appendChild(document.createTextNode(lab));\n\t\t\t}\n\t\t}\n\t}\n}\n\nTerminusDocumentViewer.prototype.refreshPage = function(){\n\tif(this.pagedom){\n\t\tTerminusClient.FrameHelper.removeChildren(this.pagedom);\n\t\tvar rends = this.render();\n\t\tif(rends){\n\t\t\tthis.pagedom.appendChild(rends);\n\t\t}\n\t}\n}\n\nTerminusDocumentViewer.prototype.getAsDOM = function(){\n\tvar holder = document.createElement(\"div\");\n\tholder.setAttribute(\"class\", \"terminus-document-holder\");\n\tif(this.mode !== 'edit'){ // dont provide drop down on create mode\n\t\tthis.controldom = document.createElement(\"div\");\n\t\tthis.controldom.setAttribute(\"class\", \"terminus-document-controller\");\n\t\tif(Object.keys(this.config_options).length > 1)\tthis.controldom.appendChild(this.getDocumentPageControls());\n\t\tholder.appendChild(this.controldom);\n\t}\n\tthis.pagedom = document.createElement(\"div\");\n\tthis.pagedom.setAttribute(\"class\", \"terminus-document-page\");\n\tvar rends = this.render();\n\tif(rends){\n\t\tthis.pagedom.appendChild(rends);\n\t}\n\tholder.appendChild(this.pagedom);\n\treturn holder;\n}\n\nTerminusDocumentViewer.prototype.getDocumentPageControls = function(){\n\tvar dpc = document.createElement(\"select\");\n\tdpc.setAttribute(\"class\", \"terminus-form-select terminus-document-config\");\n\tfor(var i in this.config_options){\n\t\tif(i === 'create') continue; // create docuemnt option from config is not taken in edit mode \n\t\tvar opt = document.createElement(\"option\");\n\t\topt.value = i;\n\t\tif(this.page_config == i){\n\t\t\topt.selected = true;\n\t\t}\n\t\topt.appendChild(document.createTextNode(this.config_options[i].label));\n\t\tdpc.appendChild(opt);\n\t}\n\tvar self = this;\n\tdpc.addEventListener(\"change\", function(){\n\t\tself.page_config = this.value;\n\t\tself.renderer = false;\n\t\tself.refreshPage();\n\t})\n\treturn dpc;\n}\n\nmodule.exports=TerminusDocumentViewer\n","const UTILS= require('../Utils')\n\n/*** client side processing ***/\nfunction CspDatatables(ui){\n    this.ui = ui;\n}\n\nCspDatatables.prototype.convertToDatatable = function(tab){\n    var dt = this;\n    var table = jQuery(tab).DataTable({\n         searching : false,\n         pageLength: 25,\n         lengthMenu: [10, 25, 50, 75, 100],\n         paging    : true,\n         select    : true,\n         initComplete: function(settings) {\n                        var ict =settings.oInstance.api();\n                        ict.$('td').each(function(){\n                            this.setAttribute('title', $(this).html())\n                        })},\n         columnDefs:[{targets:'_all',className:\"truncate\"}],\n         createdRow: function(row) {\n                            var td = $(row).find(\".truncate\");\n                            td.attr(\"title\", td.html());}\n    }); //jQuery(tab)\n\n    // on click of row connect to db, on click of 5th column delete db\n    jQuery(tab, 'tbody').on('click', 'td', function(){\n        if(table.cell(this).index().column == 5){\n            var dbInfo = table.row(jQuery(this).parents('tr')).data();\n            var dbId = UTILS.extractValueFromCell(dbInfo[0]);\n            dt.ui.deleteDatabase(dbId);\n            return;\n        }\n        else dt.ui.showDBMainPage();\n     }); // on click\n\n    tab.setAttribute('class'      , 'stripe dataTable terminus-db-size');\n    tab.setAttribute('cellpadding', '1');\n    tab.setAttribute('cellspacing', '0');\n    tab.setAttribute('border'     , '0');\n    return tab;\n}\n\nCspDatatables.prototype.draw = function(dtResult){\n    return(this.convertToDatatable(dtResult));\n}\n\n/*** server side processing ***/\nfunction Datatables(wResViewer, qPage){\n   this.wrViewer = wResViewer;\n   this.wQuery = wResViewer.wQuery;\n   this.ui = wResViewer.ui;\n   this.qPage = qPage;\n}\n\n/*\n    query: new woqlquery with current pagination changes\n    pageInfo: current drawCallBack page change info\n    resultDOM: result dom on veiwer page\n*/\nDatatables.prototype.executeQuery = function(query, pageInfo, resultDOM){\n    var self = this;\n    //dcb.wquery.execute(query)\n    this.wQuery.execute(query)\n      .then(function(result){\n          var dtResult = {};\n          dtResult =self.wrViewer.getDtTableDOMOnChange(result.bindings, resultDOM, pageInfo);\n          return dtResult;\n          //self.getDataFromServer(dtResult, wrViewer, ui, wQuery, resultDOM);\n      })\n      .catch(function(err){\n          console.error(err);\n          self.ui.showError(err);\n      });\n}\n\n/* get query string based on datatable pagination and current query */\nDatatables.prototype.getQueryOnPagination = function(wq, settings){\n    switch(settings.query){\n        case 'Show_All_Documents':\n            return wq.getAllDocumentQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Data':\n            return wq.getEverythingQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Schema_Elements':\n            return wq.getElementMetaDataQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_Document_Classes':\n        \tvar sqp = wq.getConcreteDocumentClassPattern(\"Class\");\n            return wq.getClassMetaDataQuery(sqp);\n        break;\n        case 'Show_All_Properties':\n            return wq.getPropertyListQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Classes':\n            return wq.getClassMetaDataQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_Data_Class':\n            return  wq.getDataOfChosenClassQuery(settings.chosenValue, settings.pageLength, settings.start);\n        break;\n        case 'Show_Property_Class':\n            return wq.getDataOfChosenPropertyQuery(settings.chosenValue, settings.pageLength, settings.start);\n        break;\n        case 'Show_Document_Info_by_Id':\n            return wq.getDocumentQuery(settings.chosenValue, settings.pageLength, settings.start);\n        break;\n        default:\n            console.log('Invalid woql option passed');\n        break;\n\n    }\n}\n\n/*\n    pageInfo: current drawCallBack page change info\n*/\nDatatables.prototype.generateNewQueryOnPageChange = function(pageInfo){\n    if(this.qPage) UTILS.deleteStylizedEditor(this.ui, pageInfo.qTextDom);\n    var query = this.getQueryOnPagination(this.wQuery, pageInfo)\n    if(this.qPage) {\n        pageInfo.qTextDom.value = JSON.stringify(query,undefined, 2);\n        UTILS.stylizeEditor(this.ui, pageInfo.qTextDom, 'query', 'javascript');\n    }\n    return query;\n}\n\n/*\n    dt: Datatable reference\n    len : current number of records to display\n*/\nDatatables.prototype.getCallbackSettings = function(dt, len, start){\n    var pageInfo = {};\n    pageInfo.pageLength = len;\n    pageInfo.start      = start;\n    pageInfo.qTextDom   = dt.qTextDom;\n    pageInfo.query      = dt.query;\n    pageInfo.chosenValue = dt.chosenValue;\n    return pageInfo;\n}\n\n/*\n    tab: datatable table dom\n    settings : settings from woql txt generator\n    resultDOM: result dom of viewer\n*/\nDatatables.prototype.setUp = function(tab, settings, resultDOM){\n    // delete previous datatable\n    TerminusClient.FrameHelper.removeChildren(this.dtdom);\n    this.dtdom = document.createElement('div');\n    this.dtdom.appendChild(tab);\n    resultDOM.appendChild(this.dtdom);\n    // saving query text box dom to change limit value on change of datatable page length\n    this.qTextDom = settings.qTextDom;\n    this.query = settings.query;\n    this.chosenValue = settings.chosenValue;\n}\n\nDatatables.prototype.getNewDataOnChange = function(drawnTab, aSettings, resultDOM){\n    var pageInfo = this.getCallbackSettings(this, aSettings._iDisplayLength, aSettings._iDisplayStart);\n    var query = this.generateNewQueryOnPageChange(pageInfo);\n    return this.executeQuery(query, pageInfo, resultDOM);\n    //return  dtResult.result.data;\n}\n\nDatatables.prototype.getDataFromServer = function(dtResult,resultDOM){\n    var dt = this;\n    var tab = dtResult.tab;\n    this.setUp(tab, this.wrViewer.settings, resultDOM);\n    // initialize datatables\n    var table = jQuery(tab).DataTable({\n         searching   : false,\n         pageLength  : dt.wrViewer.settings.pageLength,\n         serverSide  : true,\n         processing  : true,\n         lengthMenu  : [5, 10, 25, 50, 75, 100],\n         dom         : 'RBlftip',\n         columns     : dtResult.result.columns,\n         paging      : true,\n         select      : true,\n         initComplete: function(settings) {\n                        var ict =settings.oInstance.api();\n                        ict.$('td').each(function(){\n                            this.setAttribute('title', $(this).html())\n                        })},\n         ajax        : function (data, callback, settings) {\n                        if(Object.entries(dtResult.result.data).length > 0){\n                            // first draw is loaded\n                            var res = dtResult.result.data;\n                            dtResult.result.data = {};\n                        }\n                        else{\n                            var res = dt.getNewDataOnChange(this, settings, resultDOM);\n                            console.log('res', res);\n                        }\n                        callback(res);},\n         buttons     : [{ extend: 'copy', text: 'Copy to clipboard' },\n                        { extend: 'excel', text: 'Export to Excel' }],\n         columnDefs  : [{targets:'_all',className:\"truncate\"}],\n         createdRow  : function(row){\n                            var td = $(row).find(\".truncate\");\n                            td.attr(\"title\", td.html());},\n         //colReorder  : {addFixed : true, liveDrag:true},\n         scrollX     : true\n    }); //jQuery(tab)\n\n    //styling\n    tab.setAttribute('class'      , 'stripe dataTable');\n    tab.setAttribute('style'       , 'margin: 0!important');\n    tab.setAttribute('cellpadding', '1');\n    tab.setAttribute('cellspacing', '1');\n    tab.setAttribute('border'     , '0');\n\n    return tab;\n}\n\n/*\nserverside: true or false\n*/\nDatatables.prototype.draw = function(dtResult, resultDOM){\n    return(this.getDataFromServer(dtResult, resultDOM));\n}\n\nmodule.exports={Datatables, CspDatatables}\n","/**\n * Object for producing a HTML view of a given object in a frame\n */\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\n\nfunction HTMLObjectViewer(renderer){\n\tthis.renderer = renderer;\n\tthis.properties = [];\n\tthis.headerViewer = renderer.getObjectHeaderViewer();\n\t//this.featureViewers = {};\n}\n\n/**\n * Functions for rendering / re-rendering the object as header and body components\n */\nHTMLObjectViewer.prototype.render = function(){\n\tif(this.renderedDOM){\n\t\tvar renderedDOM = this.getObjectDOM();\n\t\tthis.renderedDOM.replaceWith(renderedDOM);\n\t\tthis.renderedDOM = renderedDOM;\n\t}\n\telse {\n\t\tthis.renderedDOM = this.getObjectDOM();\n\t}\n\tthis.renderedDOM.appendChild(this.getObjectIDMarker(this.renderer));\n\tif(this.headerViewer){\n\t\tthis.header = this.headerViewer.getAsDOM(this.renderer);\n\t\tif(this.header) this.renderedDOM.appendChild(this.header);\n\t}\n\tthis.body = this.getObjectBodyDOM();\n\tif(this.body) this.renderedDOM.appendChild(this.body);\n\treturn this.renderedDOM;\n}\n\nHTMLObjectViewer.prototype.getObjectDOM = function(){\n\tvar orientation = this.renderer.getContentOrientation();\n\tvar pcls = \"terminus-object-frame-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar sp = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar sp = document.createElement(\"span\");\n\t}\n\tvar css = \"terminus-object-frame \" + pcls + (this.renderer.parent ? \"\" : \" terminus-root-frame\") + \" terminus-object-frame-\" + this.renderer.mode;\n\tsp.setAttribute(\"class\", css);\n\tsp.setAttribute(\"data-class\", this.renderer.subjectClass());\n\tsp.setAttribute(\"data-id\", this.renderer.subject());\n\treturn sp;\n}\n\nHTMLObjectViewer.prototype.getObjectBodyDOM = function(){\n\tvar orientation = this.renderer.getContentOrientation();\n\tvar pcls = \"terminus-object-properties-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar vholder = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar vholder = document.createElement(\"span\");\n\t}\n    vholder.setAttribute('class', 'terminus-object-properties ' + pcls);\n    for(var prop in this.properties){\n\t\tif(this.properties[prop]) vholder.appendChild(this.properties[prop]);\n\t}\n\treturn vholder;\n}\n\nHTMLObjectViewer.prototype.getFeatureDOM = function(feature){\n\tif(this.hasFeatureViewer(feature)){\n\t\treturn this.featureViewer[feature](this.renderer, this);\n\t}\n}\n\nHTMLObjectViewer.prototype.redraw = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.renderedDOM);\n\tthis.properties = [];\n\tthis.renderer.render(this);\n}\n\nHTMLObjectViewer.prototype.redrawHeader = function(){\n\tif(this.headerViewer && this.header) {\n\t\tvar nheader = this.headerViewer.getAsDOM(this.renderer);\n\t\tthis.header.replaceWith(nheader);\n\t\tthis.header = nheader;\n\t}\n}\n\nHTMLObjectViewer.prototype.redrawBody = function(){\n\tif(this.body){\n\t\tvar nbody = this.getObjectBodyDOM();\n\t\tthis.body.replaceWith(nbody);\n\t\tthis.body = nbody;\n\t}\n}\n\n/**\n * Adds a rendered version of a property to the internal properties array\n */\nHTMLObjectViewer.prototype.addRenderedProperty = function(prop, renderedprop){\n\tthis.properties[prop] = renderedprop;\n}\n\nHTMLObjectViewer.prototype.clear = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.renderedDOM);\n\tthis.properties = {};\n}\n\n/**\n * Removes the object from the dom\n */\nHTMLObjectViewer.prototype.remove = function(){\n\tthis.renderedDOM.parentNode.removeChild(this.renderedDOM);\n}\n\nHTMLObjectViewer.prototype.goTo = function(subj, property){\n\tHTMLFrameHelper.goToName(subj, property);\n}\n\n/**\n * Generates a html anchor element to use as a marker to find the object on the page\n */\nHTMLObjectViewer.prototype.getObjectIDMarker = function(renderer){\n\tvar idm = document.createElement(\"a\");\n\tidm.setAttribute(\"class\", \"terminus-object-idmarker\");\n\tvar sh = TerminusClient.FrameHelper.getShorthand(renderer.subject());\n    if(!sh) sh = renderer.subject();\n    if(sh){\n\t\tvar bits = sh.split(\":\");\n\t\tif(bits.length > 1) sh = bits[1];\n\t\tidm.setAttribute(\"name\", sh);\n    }\n\treturn idm;\n}\n\nfunction HTMLObjectHeaderViewer(){}\n\nHTMLObjectHeaderViewer.prototype.getAsDOM = function(renderer){\n\tvar orientation = renderer.getContentOrientation();\n\tvar pcls = \"terminus-object-frame-btn terminus-object-header-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar objDOM = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar objDOM = document.createElement(\"span\");\n\t}\n\tobjDOM.setAttribute(\"class\", \"terminus-object-header \" + pcls);\n\tif(renderer.showFeature(\"facet\")){\n\t\tvar facetDOM = this.getObjectFacetDOM(renderer);\n\t\tif(facetDOM) objDOM.appendChild(facetDOM);\n\t}\n\tif(renderer.showFeature(\"label\")){\n\t\tvar sumDOM = this.getObjectLabelDOM(renderer);\n\t\tif(sumDOM) objDOM.appendChild(sumDOM);\n\t}\n\tif(renderer.showFeature(\"id\")){\n\t\tvar idDOM = this.getObjectIDDOM(renderer);\n\t\tif(idDOM) objDOM.appendChild(idDOM);\n\t}\n\tif(renderer.showFeature(\"type\")){\n\t\tvar typeDOM = this.getObjectTypeDOM(renderer);\n\t\tif(typeDOM) objDOM.appendChild(typeDOM);\n\t}\n\tif(renderer.showFeature(\"status\")){\n\t\tvar sumDOM = this.getObjectStatusDOM(renderer);\n\t\tif(sumDOM) objDOM.appendChild(sumDOM);\n\t}\n\tif(renderer.showFeature(\"view\")){\n\t\tvar viewDOM = this.getViewPropertyDOM(renderer);\n\t\tif(viewDOM) objDOM.appendChild(viewDOM);\n\t}\n\tif(renderer.showFeature(\"viewer\")){\n\t\tvar hideDOM = this.getViewerSelectorDOM(renderer);\n\t\tif(hideDOM) objDOM.appendChild(hideDOM);\n\t}\n\tif(renderer.showFeature(\"control\")){\n\t\tvar controlsDOM = this.getObjectControlsDOM(renderer);\n\t\tif(controlsDOM) objDOM.appendChild(controlsDOM);\n\t}\n\tif(renderer.showFeature(\"summary\")){\n\t\tvar controlsDOM = this.getObjectSummaryDOM(renderer);\n\t\tif(controlsDOM) objDOM.appendChild(controlsDOM);\n\t}\n\treturn objDOM;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectSummaryDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"object-summary\", false, sum.long, sum.status);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectControlsDOM = function(renderer){\n\tvar controlsDOM = document.createElement(\"span\");\n\tcontrolsDOM.setAttribute(\"class\", \"terminus-object-controls\");\n\tif(renderer.showFeature(\"add\")){\n\t\tvar addDOM = this.getAddPropertyDOM(renderer);\n\t\tif(addDOM) controlsDOM.appendChild(addDOM);\n\t}\n\tif(renderer.showFeature(\"mode\")){\n\t\tvar viewsDOM = HTMLFrameHelper.getModeSelectorDOM(\"object\", renderer);\n\t\tif(viewsDOM) controlsDOM.appendChild(viewsDOM);\n\t}\n\tif(renderer.showFeature(\"delete\")){\n\t\tvar dpropDOM = this.getObjectDeleteDOM(renderer);\n\t\tif(dpropDOM) controlsDOM.appendChild(dpropDOM);\n\t}\n\tif(renderer.showFeature(\"clone\")){\n\t\tvar cpropDOM = this.getObjectCloneDOM(renderer);\n\t\tif(cpropDOM) controlsDOM.appendChild(cpropDOM);\n\t}\n\tif(renderer.showFeature(\"reset\")){\n\t\tvar rpropDOM = this.getObjectResetDOM(renderer);\n\t\tif(rpropDOM) controlsDOM.appendChild(rpropDOM);\n\t}\n\tif(renderer.showFeature(\"update\")){\n\t\tvar upropDOM = this.getObjectUpdateDOM(renderer);\n\t\tif(upropDOM) controlsDOM.appendChild(upropDOM);\n\t}\n\tif(renderer.showFeature(\"show\")){\n\t\tvar showDOM = this.getObjectShowDOM(renderer);\n\t\tif(showDOM) controlsDOM.appendChild(showDOM);\n\t}\n\tif(renderer.showFeature(\"hide\")){\n\t\tvar hideDOM = this.getObjectHideDOM(renderer);\n\t\tif(hideDOM) controlsDOM.appendChild(hideDOM);\n\t}\n\treturn controlsDOM;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectFacetDOM = function(renderer){\n\tvar viewables = renderer.getAvailableFacets();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-facet\");\n\t\tvar callback = function(val){\n\t\t\tif(val){\n\t\t\t\trenderer.setFacet(val);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"object-facet\", viewables, renderer.currentFacet(), callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectLabelDOM = function(renderer){\n\tvar lab = renderer.getLabel();\n\tif(lab){\n\t\treturn HTMLFrameHelper.getInfoboxDOM(\"object-label\", false, lab);\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectIDDOM = function(renderer){\n\tvar val = renderer.subject();\n\tvar input = false;\n\tif(renderer.mode == \"edit\" && renderer.isNewDocument()){\n\t\tif(renderer.idDOM) val = renderer.idDOM.value;\n\t\tinput = document.createElement(\"input\");\n\t\tinput.setAttribute(\"class\", \"terminus-object-id-input\");\n\t\tinput.required  = true;\n\t\tif(val == \"_:\") val = \"\";\n\t\trenderer.idDOM = input;\n\t}\n\telse {\n\t\tif(renderer.isNewDocument() && val == \"_:\") val = \"New Document\";\n\t}\n\treturn HTMLFrameHelper.getInfoboxDOM(\"object-id\", \"ID\", val, \"Every fragment of data is identified by a unique URL\", input);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectTypeDOM = function(renderer){\n\tif(renderer.mode == \"edit\" && renderer.parent && renderer.parent.isClassChoice() && renderer.isNew()){\n\t\tvar cs = renderer.parent.getAvailableClassChoices();\n\t\tif(cs && cs.length){\n\t\t\tvar mpropDOM = document.createElement(\"span\");\n\t\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-change-class\");\n\t\t\tvar mlabDOM = document.createElement(\"span\");\n\t\t\tmlabDOM.setAttribute(\"class\", \"terminus-property-change-label\");\n\t\t\tmlabDOM.appendChild(document.createTextNode(\"Type\"));\n\t\t\tmpropDOM.appendChild(mlabDOM);\n\t\t\tvar callback = function(cls){\n\t\t\t\tif(cls){\n\t\t\t\t\trenderer.changeClass(cls);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"change-class\", cs, renderer.subjectClass(), callback);\n\t\t\tmpropDOM.appendChild(sel);\n\t\t\treturn mpropDOM;\n\t\t}\n\t}\n\tvar cm = renderer.getClassMeta(renderer.subjectClass());\n\tvar lab = renderer.subjectClass();\n\tvar cmt = \"All objects have types, identified by a unique URL\";\n\tif(cm){\n\t\tlab = (cm.Label && cm.Label[\"@value\"] ? cm.Label[\"@value\"]: lab);\n\t\tcmt = (cm.Comment && cm.Comment[\"@value\"] ? renderer.subjectClass() + \" \" + cm.Comment[\"@value\"] : cmt);\n\t}\n\treturn HTMLFrameHelper.getInfoboxDOM(\"object-type\", \"Type\", lab, cmt);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectStatusDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"status-\"+sum.status, false, sum.status, sum.status);\n}\n\nHTMLObjectHeaderViewer.prototype.getAddPropertyDOM = function(renderer){\n\tvar addables = renderer.getAddableProperties();\n\tif(addables && addables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-add-property\");\n\t\taddables.unshift({ value: \"\", label: \"Add New Property\"});\n\t\tvar callback = function(add){\n\t\t\tif(add){\n\t\t\t\trenderer.addNewProperty(add);\n\t\t\t}\n\t\t}\n\t\tvar disabled = (renderer.cardControlAllows(\"add\") ? false : \"Cardinality Rules Forbid Add\");\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"add-property\", addables, \"\", callback, disabled);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getViewPropertyDOM = function(renderer){\n\tvar viewables = renderer.getViewableProperties();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-view-property\");\n\t\tviewables.unshift({ value: \"\", label: \"View Property\"});\n\t\tvar callback = function(add){\n\t\t\tif(add){\n\t\t\t\trenderer.goToProperty(add);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"view-property\", viewables, \"\", callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectDeleteDOM = function(renderer){\n\tvar callback = function(){renderer.delete()};\n\tvar disabled = (renderer.cardControlAllows(\"delete\") ? false : \"Cardinality Rules Forbid Delete\");\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"delete\", \"Delete\", callback, disabled);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectCloneDOM = function(renderer){\n\tvar callback = function(){renderer.clone()};\n\tvar disabled = (renderer.cardControlAllows(\"clone\") ? false : \"Cardinality Rules Forbid Clone\");\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"clone\", \"Clone\", callback, disabled);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectResetDOM = function(renderer){\n\tvar callback = function(){renderer.reset()};\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to reset\");\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"reset\", \"Reset\", callback, disabled);\n}\n\nHTMLObjectHeaderViewer.prototype.getViewerSelectorDOM = function(renderer){\n\tvar viewers = renderer.getAvailableViewers();\n\tif(viewers && viewers.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-viewer\");\n\t\tvar callback = function(viewer){\n\t\t\tif(viewer){\n\t\t\t\trenderer.setViewer(viewer);\n\t\t\t}\n\t\t}\n\t\tvar selected = renderer.currentViewer();\n\t\tvar sel = HTMLFrameHelper.getSelectionControl('object-viewer', viewers, selected, callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectHideDOM = function(renderer){\n\tvar callback = function(){renderer.hide()};\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"hide\", \"Hide\", callback);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectShowDOM = function(renderer){\n\tvar callback = function(){renderer.show()};\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"show\", \"Show\", callback);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectUpdateDOM = function(renderer){\n\tvar dpropDOM = document.createElement(\"span\");\n\tdpropDOM.setAttribute(\"class\", \"terminus-object-update\");\n\tif(renderer.isNewDocument()){\n\t\tvar disabled = false;//(renderer.isUpdated() ? false : \"No changes\");\n\t}\n\telse {\n\t\tvar disabled = (renderer.isUpdated() ? false : \"No changes\");\n\t}\n\tvar saveback = function(){renderer.save()};\n\tdpropDOM.appendChild(HTMLFrameHelper.getActionControl(\"object\", \"save\", \"Save\", saveback, disabled));\n\treturn dpropDOM;\n}\n\nmodule.exports={HTMLObjectViewer,HTMLObjectHeaderViewer}\n","function HTMLStringViewer(options){\n\tthis.size = ((options && options.size) ? options.size : false);\n\tthis.css = ((options && options.css) ? \"terminus-literal-value \" + options.css : \"terminus-literal-value\");\n}\n\nHTMLStringViewer.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', this.css);\n\tinput.setAttribute('data-value', value);\n\tvalue = document.createTextNode(value);\n\tinput.appendChild(value);\n\treturn input;\n}\n\nmodule.exports={HTMLStringViewer}\n\n\n","function HTMLDateHelper(){\n\tthis.months = [\"January\", \"Februrary\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n}\n\nHTMLDateHelper.prototype.getMonthName = function(num){\n\treturn this.months[num-1];\n}\n\nmodule.exports={HTMLDateHelper}","\nfunction GoogleMapHelper(options){\n\tthis.polygon = false;\n\tthis.polyline = false;\n\tthis.markers = [];\n\tthis.init(options);\n}\n\nGoogleMapHelper.prototype.init = function(config){\n\tthis.type = ((config && config.type) ? config.type: 'Shape'); \n\tthis.width = ((config && config.width) ? config.width : '400px'); \n\tthis.height = ((config && config.height ) ? config.height : '400px'); \n\tthis.mapLat = ((config && config.mapLat) ? config.mapLat : '41.9010004'); \n\tthis.mapLong = ((config && config.mapLong ) ? config.mapLong : '12.500061500000015');\n\tthis.zoom = ((config && config.zoom) ? config.zoom : 3);\n\tthis.stroke = ((config && config.stroke) ? config.stroke : { color: '#FF0000', opacity: 0.3, weight: 3});\n\tthis.fill = ((config && config.fill) ? config.fill : { color: '#FF0000', opacity: 0.1});\n\tthis.line = ((config && config.line) ? config.line : { color: '#000000', opacity: 0.9, weight: 3});\n}\n\nGoogleMapHelper.prototype.destroy = function(){\n    this.clear();\n} \n\nGoogleMapHelper.prototype.translatePolygonToArray = function(polygon){\n   var data = \"[\";\n   var vertices = polygon.getPath();\n   var seenValue = false;\n   for (var j=0; j<vertices.getLength(); j++){\n       if(seenValue){\n           data = data + \",\";\n       }\n       var xy = vertices.getAt(j);\n       data = data + \"[\" + xy.lat() + \",\" + xy.lng() + \"]\"\n       seenValue = true;\n   }\n   data = data + \"]\";\n   return data;\n};\n\nGoogleMapHelper.prototype.translateArrayToPolygon = function(array){\n   var jsonified = JSON.parse(array);\n   var output = [];\n   for(var i=0;i<jsonified.length;i++){\n       var latlong = {}\n       latlong.lat = jsonified[i][0];\n       latlong.lng = jsonified[i][1];\n       output.push(latlong);\n   }\n   return output;\n}\n\nGoogleMapHelper.prototype.createPolygon = function(coords, map) {\n\tvar polygon = new google.maps.Polygon({\n        paths: coords,\n        strokeColor: this.stroke.color,\n        strokeOpacity: this.stroke.opacity,\n        strokeWeight: this.stroke.weight,\n        fillColor: this.fill.color,\n        fillOpacity: this.fill.opacity\n\t});\n    polygon.setMap(map);\n\treturn polygon;\n}\n\nGoogleMapHelper.prototype.createPolyline = function(coords){\n\tvar init = {\n\t      strokeColor: this.line.color,\n\t      strokeOpacity: this.line.opacity,\n\t      strokeWeight: this.line.weight\n\t};\n\tif(coords){\n\t\tinit.paths = coords;\n\t}\n\tvar poly = new google.maps.Polyline(init);\n\treturn poly;\n}\n\nGoogleMapHelper.prototype.clearMarkers = function() {\n\tfor (var i = 0; i < this.markers.length; i++ ) {\n\t\tthis.markers[i].setMap(null);\n\t}\n\tthis.markers.length = 0;\n}\n\n\nGoogleMapHelper.prototype.addMarker = function(position, map, renderer, title, ty) {\n\tvar init = {\n\t\tposition: position, \n\t\tmap: map\n\t}\n\tif(title){\n\t\tinit.title = title;\n\t}\n\tvar marker = new google.maps.Marker(init);\n\tvar self = this;\n\tif(this.markers.length == 0 && ty == \"xdd:coordinatePolygon\"){\n     \tmarker.addListener('click', function() {\n\t\t\tvar coords = self.getCoordsFromMarkers();\n    \t\tself.polygon = self.createPolygon(coords, map);\n            self.clearMarkers();\n            self.polyline.setMap(null);\n            renderer.set(self.translatePolygonToArray(self.polygon));\n        });                \t\n    }\n\tthis.markers.push(marker);\n\tif(ty == \"xdd:coordinatePolyline\"){\n\t\tvar x = this.translatePolygonToArray(this.polyline);\n\t\trenderer.set(x);\n\t}\n\treturn marker;\n}\n\nGoogleMapHelper.prototype.getCoordsFromMarkers = function(){\n\treturn this.polyline.getPath();\n}\n\nGoogleMapHelper.prototype.clear = function(){\n\tif(this.polygon) {\n\t\tthis.polygon.setMap(null);\n\t\tthis.polygon = false;\n\t}\n\tif(this.polyline) {\n\t\tthis.clearMarkers();\n\t\tthis.polyline.setMap(null);\n\t}\n}\n\nGoogleMapHelper.prototype.initMap = function(mapContainer, renderer, value, type){\n\tmapContainer.style.width = this.width;\n\tmapContainer.style.height = this.height;\n\tif(typeof google == \"undefined\"){\n\t\talert(\"google is not effing loaded\");\n\t\treturn false;\n\t}\n\tvar map = new google.maps.Map(mapContainer, {\n\t    zoom: this.zoom,\n\t\tcenter: {lat: parseFloat(this.mapLat), lng: parseFloat(this.mapLong)}  \n\t});\n\tif(type == \"xdd:coordinatePolygon\"){\n\t    this.polyline = this.createPolyline();\n\t\tthis.polyline.setMap(map);\n\t\tvar coords = (value ? this.translateArrayToPolygon(value) : []);\n\t\tif(value){\n\t    \tthis.polygon = this.createPolygon(coords, map);\n\t    }\n\t}\n\telse if(type == \"xdd:coordinatePolyline\"){\n\t\tvar coords = (value ? this.translateArrayToPolygon(value) : []);\n\t    this.polyline = this.createPolyline();\n\t\tthis.polyline.setMap(map);\t\t\n\t\tif(value){\n\t    \tthis.polyline.setPath(coords);\n\t    }\n\t}\t\n\telse if(type == \"xdd:coordinate\"){\n\t\tif(value){\n\t\t\tthis.clearMarkers();\n            var lat = parseFloat(value.substring(1, value.indexOf(\",\")));\n\t\t\tvar long = parseFloat(value.substring(value.indexOf(\",\")+1, value.length-1));\n            var init = {\n            \tposition: {lat: lat, lng: long},\n        \t\tmap: map\n\t        }\n\t        var marker = new google.maps.Marker(init);\n\t        this.markers.push(marker);\n\t\t}\n\t}\n    google.maps.event.trigger(map, 'resize');\n    return map;\n}\n\nmodule.exports=GoogleMapHelper;","//const FrameHelper = require('../FrameHelper');\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\n\n/**\n * Property Viewer\n */\nfunction HTMLPropertyViewer(renderer){\n\tthis.renderer = renderer;\n\tthis.values = [];\n\tthis.headerViewer = renderer.getPropertyHeaderViewer();\n}\n\n\n/**\n * Draws the property as header and body components\n */\nHTMLPropertyViewer.prototype.render = function(){\n\tvar block = document.createElement('div');\n\tblock.setAttribute('style', 'display: flex; margin: 10px');\n\tvar br = document.createElement('br');\n\tblock.appendChild(br);\n\tif(this.propDOM){\n\t\tvar npropDOM = this.getPropertyDOM();\n\t\tnpropDOM.setAttribute('style', 'display: flex; margin: 10px;');\n\t\t\t//block.appendChild(npropDOM);\n\t\tthis.propDOM.replaceWith(npropDOM);\n\t\tthis.propDOM = npropDOM;\n\t\t//this.propDOM = block;\n\t}\n\telse {\n\t\t//block.appendChild(this.getPropertyDOM());\n\t\t//this.propDOM = block;\n\t\tthis.propDOM = this.getPropertyDOM();\n\t\tthis.propDOM.setAttribute('style', 'display: flex; margin: 10px;');\n\t}\n\tthis.propDOM.appendChild(this.getPropertyIDMarker(this.renderer));\n\tif(this.headerViewer){\n\t\tthis.header = this.headerViewer.getAsDOM(this.renderer);\n\t\tif(this.header) this.propDOM.appendChild(this.header);\n\t}\n\tthis.body = this.getPropertyBodyDOM();\n\tif(this.body) this.propDOM.appendChild(this.body);\n\treturn this.propDOM;\n}\n\nHTMLPropertyViewer.prototype.getPropertyDOM = function(){\n\tvar orientation = this.renderer.getContentOrientation();\n\tvar pcls = \" terminus-property-frame-display terminus-property-frame-\" + orientation;\n\tif(orientation == \"label\"){\n\t\tvar sp = document.createElement(\"span\");\n\t}\n\telse {\n\t\tvar sp = document.createElement(\"div\");\n\t}\n\t//terminus-property-frame-spacer\n\n\tsp.setAttribute(\"class\", \"terminus-property-frame terminus-zebra-frame \"+ sp + \" terminus-property-frame-\" + this.renderer.mode + \" \" + pcls);\n\tsp.setAttribute('data-property', this.renderer.property());\n\treturn sp;\n}\n\nHTMLPropertyViewer.prototype.getPropertyBodyDOM = function(){\n\tvar orientation = this.renderer.getContentOrientation();\n\tvar pcls = \"terminus-property-values-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar vholder = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar vholder = document.createElement(\"span\");\n\t}\n    vholder.setAttribute('class', 'terminus-property-values ' + pcls + ' terminus-property-values-align');\n\tfor(var i =0; i<this.values.length; i++){\n\t\tvholder.appendChild(this.values[i]);\n\t}\n\treturn vholder;\n}\n\nHTMLPropertyViewer.prototype.addRenderedValue = function(renderedval){\n\tthis.values.push(renderedval);\n}\n\nHTMLPropertyViewer.prototype.clear = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.propDOM);\n\tthis.values = [];\n}\n\n\n/**\n * Removes the property from the dom\n */\nHTMLPropertyViewer.prototype.remove = function(){\n\tthis.propDOM.parentNode.removeChild(this.propDOM);\n}\n\n/**\n * Redraws the property to reflect an updated state\n */\nHTMLPropertyViewer.prototype.redraw = function(){\n\tvar npropDOM = this.getPropertyDOM();\n\tthis.propDOM.replaceWith(npropDOM);\n\tthis.propDOM = npropDOM;\n\tthis.values = [];\n\tthis.renderer.render(this);\n}\n\nHTMLPropertyViewer.prototype.redrawHeader = function(){\n\tif(this.headerViewer && this.header) {\n\t\tvar nheader = this.headerViewer.getAsDOM(this.renderer);\n\t\tthis.header.replaceWith(nheader);\n\t\tthis.header = nheader;\n\t}\n}\n\nHTMLPropertyViewer.prototype.redrawBody = function(){\n\tif(this.body){\n\t\tvar nbody = this.getPropertyBodyDOM();\n\t\tthis.body.replaceWith(nbody);\n\t\tthis.body = nbody;\n\t}\n}\n\n/**\n * Generates a html anchor element to use as a marker to find the property on the page\n */\nHTMLPropertyViewer.prototype.getPropertyIDMarker = function(renderer){\n\tvar idm = document.createElement(\"a\");\n\tidm.setAttribute(\"class\", \"terminus-property-idmarker\");\n\tvar subj = TerminusClient.FrameHelper.getShorthand(renderer.subject());\n\tif(!subj ) subj = renderer.subject();\n\tvar bits = subj .split(\":\");\n\tif(bits.length > 1) subj = bits[1];\n\tvar prop = TerminusClient.FrameHelper.getShorthand(renderer.property());\n\tif(!prop ) prop = renderer.property();\n\tvar bits = prop.split(\":\");\n\tif(bits.length > 1) prop = bits[1];\n\tidm.setAttribute(\"name\", subj + \"_\" + prop);\n\treturn idm;\n}\n\nHTMLPropertyViewer.prototype.goTo = function(subj, property, index){\n\tHTMLFrameHelper.goToName(subj, property, index);\n}\n\nfunction HTMLPropertyHeaderViewer(){}\n\nHTMLPropertyHeaderViewer.prototype.getAsDOM = function(renderer){\n\tvar orientation = renderer.getContentOrientation();\n\tvar pcls = \"terminus-property-header-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar objDOM = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar objDOM = document.createElement(\"span\");\n\t}\n\tobjDOM.setAttribute(\"class\", \"terminus-text terminus-property-header \" + pcls);\n\tvar wrapper = document.createElement(\"span\");\n\twrapper.setAttribute(\"class\", \"terminus-property-header-wrapper\");\n\tif(renderer.showFeature(\"control\")){\n\t\tvar expModeMenu = this.getPropertyControlsDOM(wrapper, renderer);\n\t\tif(orientation == 'page') this.expModeMenu = expModeMenu;\n\t\telse this.expModeMenu = null;\n\t}\n\tif(renderer.showFeature(\"label\")){\n\t\tvar sumDOM = this.getPropertyLabelDOM(renderer);\n\t\tif(renderer.showFeature(\"status\")){\n\t\t\tvar statDOM = this.getPropertyStatusDOM(renderer);\n\t\t\tif(statDOM) sumDOM.prepend(statDOM);\n\t\t}\n\t\tif(sumDOM) wrapper.appendChild(sumDOM);\n\t}\n\telse if(renderer.showFeature(\"status\")){\n\t\tvar statDOM = this.getPropertyStatusDOM(renderer);\n\t\tif(statDOM) wrapper.appendChild(statDOM);\n\t}\n\tif(renderer.showFeature(\"summary\")){\n\t\tvar sumDOM = this.getPropertySummaryDOM(renderer);\n\t\tif(sumDOM) wrapper.appendChild(sumDOM);\n\t}\n\n\tvar prelude = document.createElement(\"span\");\n\tprelude.setAttribute(\"class\", \"terminus-property-header-info terminus-property-header-info-\"+renderer.currentFacet());\n\n\tif(renderer.showFeature(\"facet\")){\n\t\tvar facetDOM = this.getPropertyFacetDOM(renderer);\n\t\tif(facetDOM) prelude.appendChild(facetDOM);\n\t\t//if(facetDOM && this.expModeMenu) this.expModeMenu.appendChild(facetDOM);//\n\t}\n\tif(renderer.showFeature(\"view\")){\n\t\tvar viewDOM = this.getViewValueDOM(renderer);\n\t\tif(viewDOM) prelude.appendChild(viewDOM);\n\t\t//if(viewDOM && this.expModeMenu) this.expModeMenu.appendChild(viewDOM); //prelude.appendChild(viewDOM);\n\t}\n\tif(renderer.showFeature(\"id\")){\n\t\tvar idDOM = this.getPropertyIDDOM(renderer);\n\t\tif(idDOM) prelude.appendChild(idDOM);\n\t\t//if(idDOM && this.expModeMenu) this.expModeMenu.appendChild(idDOM); //\n\t}\n\tif(renderer.showFeature(\"type\")){\n\t\tvar typeDOM = this.getPropertyRangeDOM(renderer);\n\t\tif(typeDOM)\tprelude.appendChild(typeDOM);\n\t\t/*if(typeDOM && this.expModeMenu){\n\t\t\tthis.expModeMenu.appendChild(typeDOM);//\n\t\t\ttypeDOM.style.display = 'block';\n\t\t}*/\n\t}\n\tif(renderer.showFeature(\"cardinality\") && renderer.hasCardinalityRestriction()){\n\t\tvar hideDOM = this.getPropertyCardinalityDOM(renderer);\n\t\tif(hideDOM) prelude.appendChild(hideDOM);\n\t\t//\tthis.expModeMenu.appendChild(hideDOM); \t\t\thideDOM.style.display = 'block';\n\n\t}\n\tif(renderer.showFeature(\"comment\")){\n\t\tvar sumDOM = this.getPropertyCommentDOM(renderer);\n\t\tif(sumDOM) prelude.appendChild(sumDOM);\n\t\t/*if(sumDOM && this.expModeMenu){\n\t\t\tthis.expModeMenu.appendChild(sumDOM); //\n\t\t\tsumDOM.style.display = 'block';\n\t\t}*/\n\t}\n\twrapper.appendChild(prelude);\n\tobjDOM.appendChild(wrapper);\n\treturn objDOM;\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyFacetDOM = function(renderer){\n\tvar viewables = renderer.getAvailableFacets();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-facet\");\n\t\tvar callback = function(val){\n\t\t\tif(val){\n\t\t\t\trenderer.setFacet(val);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"property-facet\", viewables, renderer.currentFacet(), callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyIDDOM = function(renderer){\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-id\", \"Property\", renderer.property(), \"This property is identified by this unique URL: \" + renderer.property());\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyRangeDOM = function(renderer){\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-type\", \"Type\", renderer.range(), \"The type of arguments that this property accepts\");\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertySummaryDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-summary\", false, sum.long, sum.status);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyStatusDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"status-\"+sum.status, false, sum.status, sum.status);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyLabelDOM = function(renderer){\n\tvar lab = renderer.getLabel();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-label\", false, lab);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyCommentDOM = function(renderer){\n\tvar lab = renderer.getComment();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-comment\", false, lab);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyCardinalityDOM = function(renderer){\n\tvar restriction = renderer.getRestriction();\n\tif(restriction.min && restriction.max){\n\t\tif(restriction.min == restriction.max){\n\t\t\tvar lab = restriction.min;\n\t\t\tvar help = \"Cardinality: \" + restriction.min;\n\t\t}\n\t\telse {\n\t\t\tvar lab = restriction.min + \"-\" + restriction.max;\n\t\t\tvar help = \"Minimum Cardinality: \" + restriction.min;\n\t\t\thelp += \", Maximum Cardinality: \" + restriction.max;\n\t\t}\n\t}\n\telse if(restriction.min){\n\t\tvar lab = \">\"+(restriction.min-1);\n\t\tvar help = \"Minimum Cardinality: \" + restriction.min;\n\t}\n\telse if(restriction.max){\n\t\tvar lab = \"<\"+(restriction.max+1);\n\t\tvar help = \"Maximum Cardinality: \" + restriction.max;\n\t}\n\telse {\n\t\treturn false;\n\t}\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-cardinality\", \"Cardinality\", lab, help);\n}\n\nHTMLPropertyHeaderViewer.prototype.getActionControlDOM = function(settingsDOM, renderer){\n\tif(renderer.showFeature(\"mode\")){\n\t\tvar viewsDOM = HTMLFrameHelper.getModeSelectorDOM(\"property\", renderer);\n\t\tif (viewsDOM) settingsDOM.appendChild(viewsDOM);\n\t}\n\tif(renderer.showFeature(\"delete\")){\n\t\tvar dpropDOM = this.getPropertyDeleteDOM(renderer);\n\t\tif (dpropDOM) settingsDOM.appendChild(dpropDOM);\n\t}\n\tif(renderer.showFeature(\"add\") && !renderer.isClassChoice()){\n\t\tvar addDOM = this.getAddValueDOM(renderer);\n\t\tif(addDOM) settingsDOM.appendChild(addDOM);\n\t}\n\tif(renderer.showFeature(\"reset\")){\n\t\tvar rpropDOM = this.getPropertyResetDOM(renderer);\n\t\tif(rpropDOM) settingsDOM.appendChild(rpropDOM);\n\t}\n\tif(renderer.showFeature(\"update\")){\n\t\tvar upropDOM = this.getPropertyUpdateDOM(renderer);\n\t\tif(upropDOM) settingsDOM.appendChild(upropDOM);\n\t}\n\tif(renderer.showFeature(\"show\")){\n\t\tvar showDOM = this.getPropertyShowDOM(renderer);\n\t\tif(showDOM) settingsDOM.appendChild(showDOM);\n\t}\n\tif(renderer.showFeature(\"hide\")){\n\t\tvar hideDOM = this.getPropertyHideDOM(renderer);\n\t\tif(hideDOM) settingsDOM.appendChild(hideDOM);\n\t}\n\tif(renderer.showFeature(\"viewer\")){\n\t\tvar hideDOM = this.getViewerSelectorDOM(renderer);\n\t\tif(hideDOM) settingsDOM.appendChild(hideDOM);\n\t}\n\tif(renderer.showFeature(\"add\") && renderer.isClassChoice()){\n\t\tvar addDOM = this.getAddValueDOM(renderer);\n\t\tif(addDOM) settingsDOM.appendChild(addDOM);\n\t}\n}\n\nHTMLPropertyHeaderViewer.prototype.getSettingsControlDOM = function(controlsDOM, renderer){\n\tvar settings = document.createElement(\"div\");\n\tcontrolsDOM.appendChild(settings);\n\tvar orientation = renderer.getContentOrientation();\n\tif(false && orientation == 'page'){ // expert mode\n\t\tvar sControl = HTMLFrameHelper.getSettingsControl('property');\n\t\tvar menu = document.createElement('div');\n\t\tmenu.setAttribute('class', 'terminus-hide terminus-popup');\n\t\tmenu.appendChild(document.createTextNode('Edit property'));\n\t\tmenu.appendChild(document.createElement('BR'));\n\t\tsControl.appendChild(menu);\n\t\tsControl.addEventListener('click', function(e){\n\t\t\tvar target = e.target || e.srcElement,\n        \ttext = target.textContent || target.innerText;\n\t\t\tif((target.nodeName == 'ICON') || (target.nodeName == 'BUTTON')){\n\t\t\t\tif(this.children[0].style.display == 'none') this.children[0].style.display = 'block';\n\t\t\t\telse this.children[0].style.display = 'none';\n\t\t\t}\n\t\t});\n\t\tthis.getActionControlDOM(menu, renderer);\n\t    settings.appendChild(sControl);\n\t\treturn menu;\n\t}\n\telse this.getActionControlDOM(controlsDOM, renderer);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyControlsDOM = function(wrapper, renderer){\n\tvar controlsDOM = document.createElement(\"span\");\n\tcontrolsDOM.setAttribute(\"class\", \"terminus-property-controls\");\n\t//controlsDOM.setAttribute(\"style\", \"display: table-cell;\");\n\t// get settings icon or button\n\tvar expModeMenu = this.getSettingsControlDOM(controlsDOM, renderer);\n\twrapper.appendChild(controlsDOM);\n\treturn expModeMenu;\n}\n\nHTMLPropertyHeaderViewer.prototype.getAddValueDOM = function(renderer){\n\tif(renderer.isClassChoice()){\n\t\tvar cs = renderer.getAvailableClassChoices();\n\t\tif(cs && cs.length){\n\t\t\tvar mpropDOM = document.createElement(\"span\");\n\t\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-add-class\");\n\t\t\tcs.unshift({ value: \"\", label: \"Add Type\"});\n\t\t\tvar callback = function(cls){\n\t\t\t\tif(cls){\n\t\t\t\t\trenderer.addClass(cls);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"add-property\", cs, \"\", callback);\n\t\t\tmpropDOM.appendChild(sel);\n\t\t\treturn mpropDOM;\n\t\t}\n\t}\n\telse {\n\t\tvar callback = function(){renderer.add(\"edit\")};\n\t\tvar disabled = (renderer.cardControlAllows(\"add\") ? false : \"Cardinality Rules Forbid Add\");\n\t\treturn HTMLFrameHelper.getActionControl(\"property\", \"add\", \"Add\", callback, disabled);\n\t}\n\treturn false;\n}\n\nHTMLPropertyHeaderViewer.prototype.getViewValueDOM = function(renderer){\n\tvar viewables = renderer.getViewableValues();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-view-value\");\n\t\tviewables.unshift({ value: \"\", label: \"View Value\"});\n\t\tvar callback = function(val){\n\t\t\trenderer.goToValue(val);\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"view-values\", viewables, \"\", callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyDeleteDOM = function(renderer){\n\tvar callback = function(){renderer.delete()};\n\tvar disabled = (renderer.cardControlAllows(\"delete\") ? false : \"Cardinality Rules Forbid Delete\");\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"delete\", \"Delete\", callback, disabled);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyHideDOM = function(renderer){\n\tvar callback = function(){renderer.hide()};\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"hide\", \"Hide\", callback);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyResetDOM = function(renderer){\n\tvar callback = function(){renderer.reset()};\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to reset\");\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"reset\", \"Reset\", callback, disabled);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyShowDOM = function(renderer){\n\tvar callback = function(){renderer.show()};\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"show\", \"Show\", callback);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyUpdateDOM = function(renderer){\n\tvar dpropDOM = document.createElement(\"span\");\n\tdpropDOM.setAttribute(\"class\", \"terminus-property-update\");\n\tvar disabled = (renderer.isUpdated() ? false : \"No Change\");\n\tvar saveback = function(){renderer.save()};\n\tdpropDOM.appendChild(HTMLFrameHelper.getActionControl(\"property\", \"save\", \"Save\", saveback, disabled));\n\treturn dpropDOM;\n}\n\nHTMLPropertyHeaderViewer.prototype.getViewerSelectorDOM = function(renderer){\n\tvar viewers = renderer.getAvailableViewers();\n\tif(viewers && viewers.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-viewer\");\n\t\tvar callback = function(viewer){\n\t\t\tif(viewer){\n\t\t\t\trenderer.setViewer(viewer);\n\t\t\t}\n\t\t}\n\t\tvar selected = renderer.currentViewer();\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"property-viewers\", viewers, selected, callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLPropertyHeaderViewer.prototype.showValue = function(renderer, index){\n\tvar htmlid = renderer.subject() + \"->\" + renderer.property() + \"_\" + index;\n\twindow.location = (\"\"+window.location).replace(/#[A-Za-z0-9_]*$/,'') + \"#\" + htmlid;\n}\n\nfunction HTMLDataViewer(renderer){\n\tthis.renderer = renderer;\n\tthis.headerViewer = renderer.getValueHeaderViewer();\n}\n\nmodule.exports={HTMLPropertyViewer,HTMLPropertyHeaderViewer}\n","/**\n * Draws the property as header and body components\n */\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\nconst HTMLStringViewer = require('./viewers/String');\n\nfunction HTMLDataViewer(renderer){\n\tthis.renderer = renderer;\n\tthis.headerViewer = renderer.getValueHeaderViewer();\n}\n\nHTMLDataViewer.prototype.render = function(){\n\tif(this.valDOM){\n\t\tvar nvalDOM = this.getValueDOM();\n\t\tthis.valDOM.replaceWith(nvalDOM);\n\t\tthis.valDOM = nvalDOM;\n\t}\n\telse {\n\t\tthis.valDOM = this.getValueDOM();\n\t}\n\tthis.valDOM.appendChild(this.getValueIDMarker(this.renderer));\n\tthis.body = this.getValueBodyDOM();\n\tif(this.body) this.valDOM.appendChild(this.body);\n\tif(this.headerViewer){\n\t\tthis.header = this.headerViewer.getAsDOM(this.renderer);\n\t\tif(this.renderer.facet == 'page'){ //expert mode\n\t\t\tif(this.header && this.expModeMenu) {\n\t\t\t\tthis.expModeMenu.appendChild(this.header);\n\t\t\t\t//this.valDOM.appendChild(this.expModeMenu);\n\t\t\t}\n\t\t}\n\t\telse if(this.header) this.valDOM.appendChild(this.header);\n\t}\n\treturn this.valDOM;\n}\n\nHTMLDataViewer.prototype.getValueDOM = function(){\n\tif(this.renderer.currentFacet() == \"page\"){\n\t\tvar sp = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar sp = document.createElement(\"span\");\n\t}\n\tsp.setAttribute(\"class\", \"terminus-property-value property-value-\" + this.renderer.currentFacet() + \" property-value-\" + this.renderer.mode);\n\tif(this.renderer.mode == \"view\"){\n\t\tsp.setAttribute('data-value', this.renderer.value());\n\t}\n\treturn sp;\n}\n\nHTMLDataViewer.prototype.getValueBodyDOM = function(){\n\tif(this.renderer.currentFacet() == \"page\"){\n\t\tvar vholder = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar vholder = document.createElement(\"span\");\n\t}\n    vholder.setAttribute('class', ' terminus-property-body property-value-body property-value-body-'+this.renderer.currentFacet() + ' terminus-property-body-align');\n\tvholder.setAttribute('style', 'display: flex;');\n\tif(this.renderer.showFeature(\"body\")){\n        var valueViewer = this.renderer.getDataValueViewer();\n    \tvar vdom = valueViewer.getDOM(this.renderer, this);\n    }\n    else if(this.renderer.showFeature(\"summary\")){\n\t\tvar vdom = this.getSummaryDOM();\n    }\n    else {\n    \treturn false;\n    }\n    if(vdom) vholder.appendChild(vdom);\n\tif(false && this.renderer.currentFacet() == \"page\"){\n\t\tvar sControl = HTMLFrameHelper.getSettingsControl('data');\n\t\tvar menu = document.createElement('div');\n\t\tmenu.setAttribute('class', 'terminus-hide terminus-popup');\n\t\tmenu.appendChild(document.createTextNode('Edit property value'));\n\t\tmenu.appendChild(document.createElement('BR'));\n\t\tsControl.appendChild(menu);\n\t\tsControl.addEventListener('click', function(e){\n\t\t\tvar target = e.target || e.srcElement,\n\t\t\ttext = target.textContent || target.innerText;\n\t\t\tif((target.nodeName == 'ICON') || (target.nodeName == 'BUTTON')){\n\t\t\t\tif(this.children[0].style.display == 'none') this.children[0].style.display = 'block';\n\t\t\t\telse this.children[0].style.display = 'none';\n\t\t\t}\n\t\t});\n\t\tthis.expModeMenu = menu;\n\t\tvholder.appendChild(sControl);\n\t}\n\treturn vholder;\n}\n\n/**\n * Removes the value from the dom\n */\nHTMLDataViewer.prototype.remove = function(){\n\tthis.valDOM.parentNode.removeChild(this.valDOM);\n}\n\nHTMLDataViewer.prototype.redrawHeader = function(){\n\tif(this.headerViewer && this.header) {\n\t\tvar nheader = this.headerViewer.getAsDOM(this.renderer);\n\t\tthis.header.replaceWith(nheader);\n\t\tthis.header = nheader;\n\t}\n}\n\nHTMLDataViewer.prototype.redrawBody = function(){\n\tif(this.body){\n\t\tvar nbody = this.getValueBodyDOM();\n\t\tthis.body.replaceWith(nbody);\n\t\tthis.body = nbody;\n\t}\n}\n\n/**\n * Generates a html anchor element to use as a marker to find the property on the page\n */\nHTMLDataViewer.prototype.getValueIDMarker = function(renderer){\n\tvar idm = document.createElement(\"a\");\n\tidm.setAttribute(\"class\", \"terminus-value-idmarker\");\n\tvar subj = TerminusClient.FrameHelper.getShorthand(renderer.subject());\n\tif(!subj ) subj = renderer.subject();\n\tvar bits = subj .split(\":\");\n\tif(bits.length > 1) subj = bits[1];\n\tvar prop = TerminusClient.FrameHelper.getShorthand(renderer.property());\n\tif(!prop ) prop = renderer.property();\n\tvar bits = prop.split(\":\");\n\tif(bits.length > 1) prop = bits[1];\n\tidm.setAttribute(\"name\", subj + \"_\" + prop + \"_\" + renderer.index);\n\treturn idm;\n}\n\nHTMLDataViewer.prototype.getSummaryDOM = function(){\n\tvar sum = this.renderer.getSummary();\n\treturn HTMLTerminusClient.FrameHelper.getInfoboxDOM(\"value-summary\", false, sum.long, sum.long);\n}\n\nHTMLDataViewer.prototype.internalLink = function(link, label){\n\tvar self = this;\n\n\tvar onclick = function(e){\n\t\te.preventDefault();\n\t\tself.renderer.load(link);\n\t}\n\tvar a = document.createElement(\"a\");\n\ta.onClick = onclick;\n\ta.href=\"\";\n\ta.addEventListener(\"click\", onclick);\n\tif(label){\n\t\ta.appendChild(document.createTextNode(label));\n\t}\n\telse {\n\t\tvar sh = TerminusClient.FrameHelper.getShorthand(link);\n\t\tif(sh){\n\t\t\ta.setAttribute(\"title\", link);\n\t\t\ta.appendChild(document.createTextNode(sh));\n\t\t}\n\t\telse {\n\t\t\ta.appendChild(document.createTextNode(link));\n\t\t}\n\t}\n\treturn a;\n}\n\nHTMLDataViewer.prototype.clear = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.valDOM);\n}\n\n\nfunction HTMLDataHeaderViewer(){}\n\nHTMLDataHeaderViewer.prototype.getAsDOM = function(renderer){\n\tif(renderer.currentFacet() == \"page\"){\n\t\tvar objDOM = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar objDOM = document.createElement(\"span\");\n\t}\n\tobjDOM.setAttribute(\"class\", \"terminus-value-header terminus-value-header-\" + renderer.currentFacet());\n\tif(renderer.showFeature(\"facet\")){\n\t\tvar facetDOM = this.getValueFacetDOM(renderer);\n\t\tif(facetDOM) objDOM.appendChild(facetDOM);\n\t}\n\tif(renderer.showFeature(\"viewer\")){\n\t\tvar hideDOM = this.getViewerSelectorDOM(renderer);\n\t\tif(hideDOM) objDOM.appendChild(hideDOM);\n\t}\n\tif(renderer.showFeature(\"type\")){\n\t\tvar typeDOM = this.getValueTypeDOM(renderer);\n\t\tif(typeDOM) objDOM.appendChild(typeDOM);\n\t}\n\tif(renderer.showFeature(\"status\")){\n\t\tvar sumDOM = this.getValueStatusDOM(renderer);\n\t\tif(sumDOM) objDOM.appendChild(sumDOM);\n\t}\n\tif(renderer.showFeature(\"control\")){\n\t\tvar controlsDOM = this.getValueControlsDOM(renderer);\n\t\tif(controlsDOM) objDOM.appendChild(controlsDOM);\n\t}\n\treturn objDOM;\n}\n\nHTMLDataHeaderViewer.prototype.getValueFacetDOM = function(renderer){\n\tvar viewables = renderer.getAvailableFacets();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-value-facet\");\n\t\tvar callback = function(val){\n\t\t\tif(val){\n\t\t\t\trenderer.setFacet(val);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"value-facet\", viewables, renderer.currentFacet(), callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\n\nHTMLDataHeaderViewer.prototype.getValueTypeDOM = function(renderer){\n\treturn HTMLFrameHelper.getInfoboxDOM(\"value-type\", \"Type\", renderer.type(), \"All data values have types, identified by a unique URL\");\n}\n\nHTMLDataHeaderViewer.prototype.getValueStatusDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"status-\"+sum.status, false, sum.status, sum.status);\n}\n\n\nHTMLDataHeaderViewer.prototype.getValueControlsDOM = function(renderer){\n\tvar controlsDOM = document.createElement(\"span\");\n\tcontrolsDOM.setAttribute(\"class\", \"terminus-value-controls\");\n\tif(renderer.showFeature(\"mode\")){\n\t\tvar viewsDOM = HTMLFrameHelper.getModeSelectorDOM(\"value\", renderer);\n\t\tif(viewsDOM) controlsDOM.appendChild(viewsDOM);\n\t}\n\tif(renderer.showFeature(\"delete\")){\n\t\tvar dpropDOM = this.getValueDeleteDOM(renderer);\n\t\tif(dpropDOM) controlsDOM.appendChild(dpropDOM);\n\t}\n\tif(renderer.showFeature(\"clone\")){\n\t\tvar cpropDOM = this.getValueCloneDOM(renderer);\n\t\tif(cpropDOM) controlsDOM.appendChild(cpropDOM);\n\t}\n\tif(renderer.showFeature(\"reset\")){\n\t\tvar rpropDOM = this.getValueResetDOM(renderer);\n\t\tif(rpropDOM) controlsDOM.appendChild(rpropDOM);\n\t}\n\tif(renderer.showFeature(\"update\")){\n\t\tvar upropDOM = this.getValueUpdateDOM(renderer);\n\t\tif(upropDOM) controlsDOM.appendChild(upropDOM);\n\t}\n\tif(renderer.showFeature(\"show\")){\n\t\tvar showDOM = this.getValueShowDOM(renderer);\n\t\tif(showDOM) controlsDOM.appendChild(showDOM);\n\t}\n\tif(renderer.showFeature(\"hide\")){\n\t\tvar hideDOM = this.getValueHideDOM(renderer);\n\t\tif(hideDOM) controlsDOM.appendChild(hideDOM);\n\t}\n\treturn controlsDOM;\n}\n\nHTMLDataHeaderViewer.prototype.getValueDeleteDOM = function(renderer){\n\tvar callback = function(){renderer.delete()};\n\tvar disabled = (renderer.cardControlAllows(\"delete\") ? false : \"Cardinality Rules Forbid Delete\");\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"delete\", \"Delete\", callback, disabled);\n}\n\nHTMLDataHeaderViewer.prototype.getValueResetDOM = function(renderer){\n\tvar callback = function(){renderer.reset()};\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to reset\");\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"reset\", \"Reset\", callback, disabled);\n}\n\nHTMLDataHeaderViewer.prototype.getValueShowDOM = function(renderer){\n\tvar callback = function(){renderer.show()};\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"show\", \"Show\", callback);\n}\n\nHTMLDataHeaderViewer.prototype.getValueHideDOM = function(renderer){\n\tvar callback = function(){renderer.hide()};\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"hide\", \"Hide\", callback);\n}\n\nHTMLDataHeaderViewer.prototype.getValueCloneDOM = function(renderer){\n\tvar callback = function(){renderer.clone()};\n\tvar disabled = (renderer.cardControlAllows(\"clone\") ? false : \"Cardinality Rules Forbid Clone\");\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"clone\", \"Clone\", callback, disabled);\n}\n\nHTMLDataHeaderViewer.prototype.getValueUpdateDOM = function(renderer){\n\tvar dpropDOM = document.createElement(\"span\");\n\tdpropDOM.setAttribute(\"class\", \"terminus-value-update\");\n\tvar saveback = function(){renderer.save()};\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to save - no change\");\n\tdpropDOM.appendChild(HTMLFrameHelper.getActionControl(\"value\", \"save\", \"Save\", saveback, disabled));\n\treturn dpropDOM;\n}\n\nHTMLDataHeaderViewer.prototype.getViewerSelectorDOM = function(renderer){\n\tvar viewers = renderer.getAvailableViewers();\n\tif(viewers && viewers.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-value-viewer\");\n\t\tvar callback = function(viewer){\n\t\t\tif(viewer){\n\t\t\t\trenderer.setViewer(viewer);\n\t\t\t}\n\t\t}\n\t\tvar selected = renderer.currentViewer();\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"data-viewer\", viewers, selected, callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nfunction JSONObjectViewer(renderer){\n\tthis.renderer = renderer;\n\tthis.properties = [];\n}\n\n/**\n * Functions for rendering / re-rendering the object as header and body components\n */\nJSONObjectViewer.prototype.render = function(){\n\talert(\"render json tbd\");\n}\nJSONObjectViewer.prototype.redraw = function(){\n\talert('redraw json tbd');\n}\n\nmodule.exports={HTMLDataViewer,HTMLDataHeaderViewer,JSONObjectViewer}\n","const WOQLQuery = require('../query/WOQLQuery');\nconst TerminusClassChooser = require('./TerminusClassChooser');\n/*\n * Utility class which allows the user to choose a document by id or by label (if select2 and full text indexing is turned on)\n */\n\nTerminusDocumentChooser = function(ui, root, value, view){\n\tthis.ui = ui;\n\tthis.root = root;\n\tthis.choice = value;\n\tthis.view = (view ? view : \"id\");\n\tthis.show_button = true;\n}\n\nTerminusDocumentChooser.prototype.setRoot = function(root){\n\tthis.root = root;\n}\n\nTerminusDocumentChooser.prototype.setFilter = function(filter){\n\tthis.filter = filter;\n}\n\nTerminusDocumentChooser.prototype.change = function(docid){\n\talert(\"Need to specify doc chooser function (\" + docid + \")\");\n}\n\nTerminusDocumentChooser.prototype.getAsDOM = function(style){\n\tif(this.view == \"label\" && \tthis.ui.client.connectionConfig.platformEndpoint() && this.ui.pluginAvailable(\"select2\")){\n\t\treturn this.getS2DOM(style);\n\t}\n\treturn this.getIDDOM();\n}\n\nTerminusDocumentChooser.prototype.getS2DOM = function(style){\n\tvar docchooser = document.createElement(\"span\");\n\tdocchooser.setAttribute(\"class\", \"terminus-document-chooser terminus-doc-holder\");\n\tvar wq = new WOQLQuery(this.ui.client, {}, this.ui);\n\tvar cfilter = wq.getSubclassQueryPattern(\"v:Class\", \"'\"+this.root+\"'\");\n\tvar termcc = new TerminusClassChooser(this.ui, cfilter);\n\ttermcc.empty_choice = \"Filter by Type\";\n\ttermcc.show_single = false;\n\tvar self = this;\n\ttermcc.change = function(new_class){\n\t\tif(new_class){\n\t\t\tself.filter = new_class;\n\t\t}\n\t}\n\ttdom = termcc.getAsDOM(style);\n\tif(tdom) docchooser.appendChild(tdom);\n\tvar holder = document.createElement(\"span\");\n\tholder.setAttribute(\"class\", \"terminus-entity-reference-value\");\n\tvar sel = document.createElement(\"select\");\n\tsel.setAttribute(\"class\", \"terminus-entity-class-input\");\n\tholder.appendChild(sel);\n\tvar opt = document.createElement(\"option\");\n\tvar lookup = function (params) {\n\t\tparams.class = self.filter;\n\t\treturn JSON.stringify(params);\n    }\n\tvar searchurl = this.ui.client.dbURL() + \"/search\";\n\tvar s2config = {\n\t\tajax: {\n\t\t    url: searchurl,\n\t\t    dataType: 'json',\n\t\t    data: lookup,\n\t\t    type: \"POST\",\n\t\t\tcontentType: \"application/json; charset=utf-8\",\n\t\t    delay: 250,\n\t\t    cache: true\n\t\t},\n\t\tplaceholder: \"Enter Document Name\",\n\t\twidth: 200\n\t};\n\tjQuery(sel).select2(s2config).change(function(){\n\t\tcallback(this.value);\n\t});\n\tdocchooser.appendChild(holder);\n\treturn docchooser;\n}\n\nTerminusDocumentChooser.prototype.getIDDOM = function(){\n\tvar docchooser = document.createElement(\"span\");\n\tdocchooser.setAttribute(\"class\", \"terminus-document-chooser terminus-doc-holder\");\n\tvar dcip = document.createElement(\"input\");\n\tdcip.setAttribute(\"class\", \"terminus-document-chooser terminus-query-text\");\n\t//11092019 dcip.setAttribute(\"class\", \"terminus-form-value terminus-document-chooser\");\n\tdcip.setAttribute(\"placeholder\", \"Enter Document ID\");\n\tdcip.addEventListener('keypress', function(e){\n\t\tvar key = e.which || e.keyCode;\n\t\t// on enter\n\t\tif (key === 13 && dcip.value) {\n\t\t\tself.choice = dcip.value;\n\t\t\tself.change(dcip.value);\n\t\t}\n\t});\n\tdocchooser.appendChild(dcip);\n\tif(this.show_button){\n\t\tvar dbut = document.createElement(\"button\");\n\t\tdbut.setAttribute(\"class\", \"terminus-control-button terminus-btn\");\n\t\tvar self = this;\n\t\tdbut.addEventListener(\"click\", function(){\n\t\t\tif(dcip.value) {\n\t\t\t\tself.choice = dcip.value;\n\t\t\t\tself.change(dcip.value);\n\t\t\t}\n\t\t});\n\t\t//11092019 dbut.appendChild(document.createTextNode(\"View Document Properties\"));\n\t\tdbut.appendChild(document.createTextNode(\"Go\"));\n\t\tdocchooser.appendChild(dbut);\n\t}\n\treturn docchooser;\n}\n\nTerminusDocumentChooser.prototype.toggleView = function(){\n\tif(this.view == \"id\") this.view = \"label\";\n\telse this.view = \"id\";\n}\n\nTerminusDocumentChooser.prototype.getChangeViewText = function(){\n\tif(this.view == \"id\"){\n\t\treturn \"Document Lookup\";\n\t}\n\treturn \"Load Document ID\";\n}\n\nmodule.exports=TerminusDocumentChooser\n","const TerminusUI = require('./TerminusUI');\nconst RenderingMap = require('./client/RenderingMap');\n\nvar terminator = new TerminusUI(TerminusConfig);\nvar pconfig = {};\npconfig.buttons = {'client'   : document.getElementById(\"terminus-client-btn\"),\n\t\t\t\t   'explorer' : document.getElementById(\"terminus-explorer-btn\")}\npconfig.controller \t= document.getElementById(\"terminus-control-panel\");\npconfig.messages = document.getElementById(\"terminus-user-messages\");\npconfig.plugins = document.getElementById(\"terminus-plugin-loader\");\npconfig.explorer = document.getElementById(\"terminus-explorer\");\npconfig.viewer = document.getElementById(\"terminus-content-viewer\");\nvar nlocation = (TerminusConfig && TerminusConfig.location) ? TerminusConfig.location : false;\nterminator.draw(pconfig, nlocation);\n\nfunction showPanel(mode){\n\ttoggleHeaders(mode, document.getElementById(\"terminus-content-viewer\"));\n}\n\nmodule.exports={TerminusUI:TerminusUI,\n                RenderingMap:RenderingMap}\n","/**\n * Terminus UI object\n *\n * Traffic control of messages going between different Terminus UI pages and features\n *\n * @param opts - options array\n */\nconst ApiExplorer = require('./ApiExplorer');\nconst TerminusDocumentViewer = require('./client/TerminusDocument');\nconst TerminusDBsdk = require('./client/TerminusDB');\nconst TerminusViolations = require('./client/TerminusViolation');\nconst TerminusQueryViewer = require('./client/TerminusQuery');\nconst TerminusMappingViewer = require('./client/TerminusMapping');\nconst TerminusSchemaViewer = require('./client/TerminusSchema');\nconst TerminusServersdk = require('./client/TerminusServer');\nconst TerminusURLLoader = require('./client/TerminusURL');\nconst TerminusPluginManager = require('./plugins/TerminusPlugin');\nconst UTILS=require('./Utils');\nconst RenderingMap = require('./client/RenderingMap');\n\nfunction TerminusUI(opts){\n\tthis.client = new TerminusClient.WOQLClient();\n\tthis.controls = [];\n\tthis.setOptions(opts);\n}\n\n/*\n * Client connects to specified server and specified part\n * opts is a json with the following fields:\n * server: mandatory URL of the server to connect to\n * key: optional client API key\n * dbid: id of the database to connect to\n * schema: if set, the UI will load the schema page after connecting\n * query: if set, the query will be sent to the server and the results will be loaded on the query page\n * document: if set, the document page corresponding to this document will be loaded after connecting\n *\n * (note: schema, query, document are mutually exclusive and must also have a dbid set)\n */\nTerminusUI.prototype.connect = function(opts){\n\tvar self = this;\n\tthis.client.connectionConfig.server = false;\n\tvar key = ((opts && opts.key) ? opts.key : false);\n\tthis.showBusy(\"Connecting to server at \" + opts.server);\n\treturn this.client.connect(opts.server, key)\n\t.then( function(response) {\n\t\tself.clearBusy();\n\t\tif(opts && opts.db && self.getDBRecord(opts.db)){\n\t\t\tself.connectToDB(opts.db);\n\t\t\tif(opts.document && self.showView(\"get_document\")){\n\t\t\t\tself.showDocument(opts.document);\n\t\t\t}\n\t\t\telse if(opts.schema && self.showView(\"get_schema\")){\n\t\t\t\tself.showSchemaPage(opts.schema);\n\t\t\t}\n\t\t\telse if(opts.query && self.showView(\"woql_select\")){\n\t\t\t\tself.showQueryPage(opts.query);\n\t\t\t}\n\t\t\telse if(opts.explorer && self.showView(\"api_explorer\")){\n\t\t\t\tself.showExplorer(opts.explorer);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tself.showDBMainPage();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tself.showServerMainPage();\n\t\t}\n\t\tself.redraw();\n\t})\n\t.catch(function(err) {\n\t\tself.clearBusy();\n\t\tself.showError(err);\n\t\tthrow(err);\n\t});\n}\n\n/**\n * Sends a request to create a new database to the server and interprets the response\n *\n * dbdets is a json object with the following fields:\n * id: the id of the new database (alphanumeric, no spaces, url friendly) mandatory\n * title: the text name of the new database for tables, etc. mandatory\n * description: text description of the database (optional)\n * key: a API client key for server auth\n * schema: the url of another Terminus DB from which to import schema\n * instance: the url of another Terminus DB from which to import data\n *\n */\nTerminusUI.prototype.createDatabase = function(dbdets){\n\tvar self = this;\n\tif(!dbdets.id || !dbdets.title){\n        return Promise.reject(new Error(self.getBadArguments(\"createDatabase\", \"ID and title are mandatory fields\")));\n\t}\n\tvar dbid = dbdets.id;\n\tvar myserver = this.client.connectionConfig.server;\n\tself.showBusy(\"Creating Database \" + dbdets.title + \" with id \" + dbid);\n\tvar dbdoc = this.generateNewDatabaseDocument(dbdets);\n\treturn this.client.createDatabase(dbid, dbdoc)\n\t.then(function(response){ //import schema into newly created DB\n\t\tif(dbdets.schema){\n\t\t\tself.showBusy(\"Fetching imported schema from \" + dbdets.schema);\n\t\t\tvar opts = (dbdets.key ?  {\"terminus:user_key\": dbdets.key } : {});\n\t\t\topts['terminus:encoding'] = \"terminus:turtle\";\n\t\t\treturn self.client.getSchema(dbdets.schema, opts)\n\t\t\t.then(function(response){\n\t\t\t\tself.showBusy(\"Updating database with new schema\");\n\t\t\t\tself.client.connectionConfig.server = myserver;\n\t\t\t\tself.client.connectionConfig.dbid = dbid;\n\t\t\t\tvar nopts = {'terminus:encoding':  \"terminus:turtle\"};\n\t\t\t\treturn self.client.updateSchema(false, response, nopts);\n\t\t\t})\n\t\t\t.then(function(response){\n\t\t\t\tself.clearBusy();\n\t\t\t\tself.redraw();\n\t\t\t\treturn response;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tself.clearBusy();\n\t\t}\n\t\treturn response;\n\t})\n\t.then(function(response){ //reload list of databases in background..\n\t\treturn self.refreshDBList()\n\t\t.then(function(response){\n\t\t\tif(crec = self.client.connection.getDBRecord(dbid)){\n\t\t\t\tself.client.connectionConfig.dbid = dbid;\n\t\t\t\tself.showDBMainPage();\n\t\t\t\tself.showMessage(\"Successfully Created Database \" + dbid, \"success\");\n\t\t\t}\n\t\t\telse {\n\t\t        return Promise.reject(new Error(self.getCrashString(\"createDatabase\", \"Failed to retrieve record of created database \" + dbid)));\n\t\t\t}\n\t\t})\n\t})\n\t.catch(function(error){\n\t\tself.clearBusy();\n\t\tself.showError(error);\n\t});\n}\n\n/**\n * Deletes the database with the passed id from the currently connected server\n */\nTerminusUI.prototype.deleteDatabase = function(dbid){\n\tvar self = this;\n\tvar delrec = this.client.connection.getDBRecord();\n\tvar lid = (dbid ? dbid : this.db());\n\tvar dbn = (delrec && delrec['rdfs:label'] && delrec['rdfs:label'][\"@value\"] ? delrec['rdfs:label'][\"@value\"] + \" (id: \" + lid + \")\" : lid);\n\tthis.showBusy(\"Deleting database \" + dbn);\n\treturn this.client.deleteDatabase(dbid)\n\t.then(function(response){\n\t\tself.clearBusy();\n\t\tself.client.connectionConfig.dbid = false;\n\t\tself.removeDB(dbid);\n\t\tself.showServerMainPage();\n\t\tself.showMessage(\"Successfully Deleted Database \" + dbn, \"success\");\n\t\tself.refreshDBList();\n\t\treturn response;\n\t})\n\t.catch(function(error){\n\t\tself.clearBusy();\n\t\tself.showError(error);\n\t});\n}\n\n/*\n * Transforms a details (id, title, description) array into  json-ld document\n */\nTerminusUI.prototype.generateNewDatabaseDocument = function(dets){\n\tvar doc = {\n\t\t\"@context\" : {\n\t\t\trdfs: \"http://www.w3.org/2000/01/rdf-schema#\",\n\t\t\tterminus: \"http://terminusdb.com/schema/terminus#\"\n\t\t},\n\t\t\"@type\": \"terminus:Database\"\n\t}\n\tif(dets.title){\n\t\tdoc['rdfs:label'] = {\n\t\t\t\"@language\":  \"en\",\n\t\t\t\"@value\": dets.title\n\t\t};\n\t}\n\tif(dets.description){\n\t\tdoc['rdfs:comment'] = {\n\t\t\t\"@language\":  \"en\",\n\t\t\t\"@value\": dets.description\n\t\t};\n\t}\n\tdoc['terminus:allow_origin'] = { \"@type\" : \"xsd:string\", \"@value\" : \"*\" };\n\treturn doc;\n}\n\nTerminusUI.prototype.getBadArguments = function(fname, str){\n\treturn \"Bad arguments to \" + fname + \": \" + str;\n}\n\nTerminusUI.prototype.getCrashString = function(fname, str){\n\treturn \"Results from \" + fname + \" indicate the possibility of a system failure \" + str;\n}\n\n/*\n * Parses the passed URL and turns it into a call to the connect function - loads the appropriate endpoing\n */\nTerminusUI.prototype.load = function(url, key){\n\tvar args = {};\n\tif(url && url.indexOf(\"/document/\") != -1){\n\t\turl = url.substring(0, url.indexOf(\"/document/\"));\n\t\targs.document = url.substring(url.indexOf(\"/document/\")+10);\n\t}\n\telse if(url && url.indexOf(\"/schema\") != -1){\n\t\turl = url.substring(0, url.indexOf(\"/schema\"));\n\t\targs.schema = {};\n\t}\n\telse if(url && url.indexOf(\"/woql\") != -1){\n\t\turl = url.substring(0, url.indexOf(\"/query\"));\n\t\targs.query = url.substring(url.indexOf(\"/query\")+7);\n\t}\n\targs.server = url;\n\tif(key) args.key = key;\n\treturn this.connect(args);\n}\n\n/**\n * Fetches the DB URL from the url by chopping off the extra bits\n */\nTerminusUI.prototype.getConnectionEndpoint = function(url){\n\tif(url && url.lastIndexOf(\"/schema\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/schema\"));\n\t}\n\tif(url && url.lastIndexOf(\"/document\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/document\"));\n\t}\n\tif(url && url.lastIndexOf(\"/frame\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/frame\"));\n\t}\n\tif(url && url.lastIndexOf(\"/woql\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/woql\"));\n\t}\n\treturn url;\n}\n\nTerminusUI.prototype.server = function(){\n\treturn this.client.connectionConfig.server;\n}\n\nTerminusUI.prototype.db = function(){\n\treturn this.client.connectionConfig.dbid;\n}\n\nTerminusUI.prototype.clearServer = function(){\n\tthis.client.connectionConfig.server = false;\n}\n\nTerminusUI.prototype.connectToDB = function(dbid){\n\tthis.client.connectionConfig.dbid = dbid;\n\tTerminusClient.FrameHelper.standard_urls['doc'] = this.client.connectionConfig.dbURL() + \"/document/\";\n\tTerminusClient.FrameHelper.standard_urls['scm'] = this.client.connectionConfig.dbURL() + \"/schema#\";\n}\n\nTerminusUI.prototype.clearDB = function(){\n\tthis.client.connectionConfig.dbid = false;\n}\n\nTerminusUI.prototype.removeDB = function(db, url){\n\tthis.client.connection.removeDB(db, url);\n}\n\nTerminusUI.prototype.getDBRecord = function(db, url){\n\treturn this.client.connection.getDBRecord(db, url);\n}\n\nTerminusUI.prototype.refreshDBList = function(){\n\tvar self = this;\n\treturn this.client.connect();\n}\n\nTerminusUI.prototype.showServerMainPage = function(){\n\tthis.viewer = new TerminusServersdk.TerminusServerViewer(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showLoadURLPage = function(val){\n\tthis.viewer = new TerminusURLLoader(this, val);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showDBMainPage = function(){\n\tthis.viewer = new TerminusDBsdk.TerminusDBViewer(this);\n\tthis.redraw();\n}\n\nTerminusUI.prototype.showCreateDBPage = function(){\n\tthis.viewer = new TerminusDBsdk.TerminusDBCreator(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showSchemaPage = function(durl){\n\tthis.viewer = new TerminusSchemaViewer(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showQueryPage = function(query){\n\tthis.viewer = new TerminusQueryViewer(this, query, this.options);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showMappingPage = function(mapping){\n\tthis.viewer = new TerminusMappingViewer(this, mapping, this.options);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showDocument = function(durl){\n\tthis.viewer = new TerminusDocumentViewer(this, \"view\", this.getDocViewerOptions());\n\tthis.viewer.loadDocument(durl);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showCreateDocument = function(durl){\n\tthis.viewer = new TerminusDocumentViewer(this, \"create\", this.getDocCreatorOptions());\n\tthis.viewer.loadCreateDocument(durl);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.redrawMainPage = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.main);\n\tif(this.viewer){\n\t\tthis.main.appendChild(this.viewer.getAsDOM());\n\t}\n}\n\nTerminusUI.prototype.showResult = function(response){\n\tthis.showMessage(response, \"success\");\n};\n\nTerminusUI.prototype.showError = function(response){\n\tthis.showMessage(response, \"error\");\n};\n\nTerminusUI.prototype.clearMessages = function(response){\n\tif(this.messages) TerminusClient.FrameHelper.removeChildren(this.messages);\n};\n\nTerminusUI.prototype.clearMainPage = function(){\n\tif(this.main) TerminusClient.FrameHelper.removeChildren(this.main);\n}\n\nTerminusUI.prototype.setMessageDOM = function(dom){\n\tthis.messages = dom;\n}\n\nTerminusUI.prototype.setbuttonControls = function(dom){\n\tthis.buttons = dom;\n}\n\nTerminusUI.prototype.setControllerDOM = function(dom){\n\tthis.controller = dom;\n}\n\nTerminusUI.prototype.setExplorerDOM = function(dom){\n\tthis.explorer = dom;\n}\n\nTerminusUI.prototype.setPluginsDOM = function(dom){\n\tthis.plugins = dom;\n}\n\nTerminusUI.prototype.setViewerDOM = function(dom){\n\tthis.main = dom;\n}\n\nTerminusUI.prototype.draw = function(comps, slocation){\n\tif(comps && comps.buttons) this.setbuttonControls(comps.buttons);\n\tif(comps && comps.messages) this.setMessageDOM(comps.messages);\n\tif(comps && comps.controller) this.setControllerDOM(comps.controller);\n\tif(comps && comps.explorer) this.setExplorerDOM(comps.explorer);\n\tif(comps && comps.viewer) this.setViewerDOM(comps.viewer);\n\tif(comps && comps.plugins) this.setPluginsDOM(comps.plugins);\n\tif(this.plugins){\n\t\tthis.drawPlugins();\n\t}\n\tvar self = this;\n\tvar cdrawn = false;\n\tif(slocation && slocation.server){\n\t\tif(typeof this.client.connection.connection[slocation.server] == \"undefined\") {\n\t\t\tthis.connect(slocation)\n\t\t\t.catch(function(error){\n\t\t\t\tself.showLoadURLPage();\n\t\t\t});\n\t\t}\n\t}\n\telse {\n\t\tthis.showLoadURLPage();\n\t};\n\tif(this.buttons){\n\t\tthis.toggleControl();\n\t}\n}\n\n\n\nTerminusUI.prototype.redraw = function(msg){\n\tthis.clearMessages();\n\tif(this.controller){\n\t\tTerminusClient.FrameHelper.removeChildren(this.controller);\n\t\tthis.drawControls();\n\t}\n\tif(this.explorer){\n\t\tTerminusClient.FrameHelper.removeChildren(this.explorer);\n\t\t//this.drawExplorer();\n\t}\n\tif(this.viewer){\n\t\tthis.redrawMainPage();\n\t}\n\tif(msg) this.showMessage(msg);\n};\n\n\nTerminusUI.prototype.toggleDashboardWidget = function(widget){\n    TerminusClient.FrameHelper.removeChildren(this.controller);\n    TerminusClient.FrameHelper.removeChildren(this.explorer);\n    UTILS.removeSelectedNavClass('terminus-dashboard-selected');\n    widget.classList.add('terminus-dashboard-selected');\n}\n\nTerminusUI.prototype.toggleControl = function(){\n  var self = this;\n  this.buttons.client.addEventListener('click', function(){\n    self.toggleDashboardWidget(this);\n    self.drawControls();\n    self.showServerMainPage();\n  })\n  this.buttons.explorer.addEventListener('click', function(){\n    self.toggleDashboardWidget(this);\n    self.drawExplorer();\n  })\n}\n\nTerminusUI.prototype.drawControls = function(){\n\tthis.controls = [];\n\tthis.loadControls();\n\tfor(var i = 0; i<this.controls.length; i++){\n\t\tvar ncontrol = this.controls[i];\n\t\tif(ncontrol && (nd = ncontrol.getAsDOM())){\n\t\t\tthis.controller.appendChild(nd);\n\t\t}\n\t}\n}\n\nTerminusUI.prototype.drawExplorer = function(){\n\tif(this.explorer){\n\t\tif(this.showControl(\"api_explorer\")){\n\t\t\tvar exp = new ApiExplorer(this);\n\t\t\tae = exp.getAsDOM();\n\t\t\tthis.explorer.appendChild(ae);\n\t\t\tthis.explorer.style.display = 'block';\n\t\t}\n\t}\n}\n\nTerminusUI.prototype.loadControls = function(){\n\tif(this.showControl('server')){\n\t\tvar sc = new TerminusServersdk.TerminusServerController(this);\n\t\tif(sc) {\n\t\t\tthis.controls.push(sc);\n\t\t}\n\t\tif(this.db() && this.showControl(\"db\")){\n\t\t\tvar sc = new TerminusDBsdk.TerminusDBController(this);\n\t\t\tif(sc) this.controls.push(sc);\n\t\t}\n\t}\n}\n\nTerminusUI.prototype.showControl = function(el){\n\tif(this.show_controls.indexOf(el) == -1) return false;\n\tif(this.pseudoCapability(el)) return true;\n\tif(this.client.connection.capabilitiesPermit(el)) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.showView = function(el){\n\tif(this.show_views.indexOf(el) == -1) return false;\n\tif(this.pseudoCapability(el)) return true;\n\tif(this.client.connection.capabilitiesPermit(el)) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.clearBusy = function(response){\n\tthis.clearMessages();\n\tif(this.viewer && typeof this.viewer.busy == \"function\") this.viewer.busy(false);\n}\n\nTerminusUI.prototype.getBusyLoader = function(bsyDom){\n     var pd = document.createElement('div');\n     var pbc = document.createElement('div');\n     pbc.setAttribute('class', 'term-progress-bar-container');\n     pd.appendChild(pbc);\n\n     var pbsa = document.createElement('div');\n     pbsa.setAttribute('class', 'term-progress-bar term-stripes animated reverse slower');\n     pbc.appendChild(pbsa);\n     var pbia = document.createElement('span');\n     pbia.setAttribute('class', 'term-progress-bar-inner');\n     pbsa.appendChild(pbia);\n\n     bsyDom.appendChild(pd);\n}\n\nTerminusUI.prototype.showMessage = function(msg, type){\n\tif(this.messages){\n\t\tTerminusClient.FrameHelper.removeChildren(this.messages);\n\t\tvar md = document.createElement('div');\n        switch(type){\n            case 'busy':\n                var msgHolder = document.createElement('div');\n                msgHolder.setAttribute('class', 'terminus-busy-msg')\n                msgHolder.appendChild(document.createTextNode(msg));\n                md.appendChild(msgHolder);\n                this.getBusyLoader(md);\n            break;\n            case 'success':\n                md.setAttribute('class', 'terminus-show-msg-success');\n                md.appendChild(document.createTextNode(msg));\n            break;\n            case 'error':\n                md.setAttribute('class', 'terminus-show-msg-error');\n                md.appendChild(document.createTextNode(msg));\n            break;\n        }\n\t\tthis.messages.appendChild(md);\n\t}\n};\n\nTerminusUI.prototype.showViolations = function(vios, type){\n\tvar nvios = new TerminusViolations(vios, this);\n\tif(this.messages){\n\t\tvar cmsg = (type == \"schema\" ? \" in Schema\" : \" in Document\");\n\t\tTerminusClient.FrameHelper.removeChildren(this.messages);\n\t\tthis.messages.appendChild(nvios.getAsDOM(cmsg));\n\t}\n}\n\nTerminusUI.prototype.showBusy = function(msg){\n\tthis.showMessage(msg, \"busy\");\n\tif(this.viewer && typeof this.viewer.busy == \"function\") this.viewer.busy(msg);\n};\n\nTerminusUI.prototype.pseudoCapability = function(el){\n\tvar pseuds = [\"server\", \"db\", \"change-server\", \"api_explorer\", \"import_schema\", \"schema_format\"];\n\tif(pseuds.indexOf(el) == -1) return false;\n\treturn true;\n}\n\nTerminusUI.prototype.setOptions = function(opts){\n\tthis.show_controls = opts && opts.controls ? opts.controls :\n\t\t[\"server\", \"db\", \"change-server\", \"schema_format\",\n\t\t\t\"import_schema\", \"class_frame\", \"create_database\",\n\t\t\t\"create_document\", \"get_document\", \"update_schema\",\n\t\t\t\"get_schema\", \"woql_select\"\n\t\t];\n\tthis.show_views = opts && opts.views ? opts.views : this.show_controls;\n\tif(opts.document){\n\t\tthis.document_options = opts.document;\n\t}\n\tif(opts.schema){\n\t\tthis.schema_options = opts.schema;\n\t}\n\tthis.piman = new TerminusPluginManager();\n\tvar self = this;\n\tthis.piman.init(opts.plugins, function(){\n\t\tvar pins = [\"gmaps\", \"quill\", \"select2\"];\n\t\tfor(var i = 0; i<pins.length; i++){\n\t\t\tif(self.piman.pluginAvailable(pins[i])){\n\t\t\t\tRenderingMap.addPlugin(pins[i]);\n\t\t\t}\n\t\t}\n\t\tself.redraw();\n\t});\n\tif(opts.css && this.piman){\n\t\tthis.piman.loadPageCSS(opts.css);\n\t}\n\tthis.loadControls();\n}\n\nTerminusUI.prototype.pluginAvailable = function(p){\n\treturn this.piman.pluginAvailable(p);\n}\n\nTerminusUI.prototype.drawPlugins = function(){\n\tif(!this.piman) {\n\t\tconsole.log(new Error(\"No plugin manager initialised in UI object\"));\n\t\treturn false;\n\t}\n\tthis.plugins.appendChild(this.piman.getAsDOM(this));\n}\n\nTerminusUI.prototype.getDocViewerOptions = function(){\n\tif(this.document_options && this.document_options['view']){\n\t\treturn this.document_options['view'];\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.getDocCreatorOptions = function(){\n\tif(this.document_options && this.document_options['view']){\n\t\treturn this.document_options['view'];\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.getClassFrameOptions = function(){\n\treturn this.viewdoc_options;\n}\n\nmodule.exports=TerminusUI\n","/**\n * @file Javascript Api explorer tool\n * @author Kitty Jose\n * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more\n *\n * @summary Displays a demo and description of api calls from WOQLCLient and what happens under the hood of api calls\n */\nconst TerminusPluginManager = require('./plugins/TerminusPlugin');\nconst UTILS = require('./Utils')\n\nlet apiNavConfig = {\n    mainNav: {\n        connect: {\n    \t\tnavText: 'Connect API',\n            action : 'connect',\n            icon   : 'link',\n            defaultSelected: true\n    \t},\n        database: {\n            navText: 'Database API',\n            action : 'create',\n            icon   : 'database'\n        },\n        schema: {\n            navText: 'Schema API',\n            action : 'schema',\n            icon   : 'cog'\n        },\n        document: {\n            navText: 'Document API',\n            action : 'document',\n            icon   : 'file'\n        },\n        query: {\n            navText: 'Query API',\n            action : 'query',\n            icon   : 'search'\n        }\n    },\n    subNav: {\n        database: {\n            createDatabase: {\n                navText: 'Create database',\n                action : 'create',\n                icon   : 'plus',\n                defaultSelected: true\n            },\n            deleteDatabase: {\n                navText: 'Delete database',\n                action : 'delete',\n                icon   : 'trash-alt'\n            }\n        },\n        schema: {\n            getSchema: {\n                navText: 'View Schema',\n                action : 'getSchema',\n                icon   : 'eye',\n                defaultSelected: true\n            },\n            updateSchema: {\n                navText: 'Update Schema',\n                action : 'updateSchema',\n                icon   : 'arrow-up'\n            },\n            getClassFrames: {\n                navText: 'Get Class Frames',\n                action : 'getClassFrames',\n                icon   : 'share-alt'\n            }\n        },\n        document: {\n            viewDocument: {\n        \t\tnavText: 'View Document',\n                action : 'viewDocument',\n                icon   : 'eye',\n                defaultSelected: true\n        \t},\n            createDocument: {\n                navText: 'Create Document',\n                action : 'createDocument',\n                icon   : 'plus'\n            },\n            updateDocument: {\n                navText: 'Update Document',\n                action : 'updateDocument',\n                icon   : 'arrow-up'\n            },\n            deleteDocument:{\n                navText: 'Delete Document',\n                action : 'deleteDocument',\n                icon   : 'trash-alt'\n            }\n        },\n        query: {\n            select: {\n                navText: 'Select',\n                action : 'select',\n                icon   : 'mouse-pointer',\n                defaultSelected: true\n            },\n            update: {\n                navText: 'Update',\n                action : 'update',\n                icon   : 'arrow-up'\n            }\n        }\n    }\n}\n\nfunction ApiExplorer(ui){\n    this.ui = ui;\n    this.viewer = ui.main;\n    this.client = new TerminusClient.WOQLClient();\n    this.client.use_fetch = true;\n    this.client.return_full_response = true;\n    this.pman = new TerminusPluginManager();\n}\n\n// Controller provides access to Api explorer functions\nApiExplorer.prototype.getAsDOM = function(){\n \tvar aec = document.createElement(\"div\");\n    aec.setAttribute(\"class\", \"terminus-db-controller\");\n    if(this.ui){\n       this.getApiNav(aec, this.viewer); // nav\n       this.getApiExplorerDom('connect', this.viewer); // content dom\n    } // if this.ui\n    return aec;\n }\n\n/***** Api Nav bar *****/\n// Toggle selected nav bars\nApiExplorer.prototype.setSelectedNavMenu = function(a){\n    UTILS.removeSelectedNavClass(\"terminus-selected\");\n    a.classList.add(\"terminus-selected\");\n}\n\nApiExplorer.prototype.setSelectedSubMenu = function(a){\n    UTILS.removeSelectedNavClass(\"terminus-submenu-selected\");\n    a.classList.add(\"terminus-submenu-selected\");\n}\n\nApiExplorer.prototype.navOnSelect = function(action, nav, viewer){\n    UTILS.removeSelectedNavClass(\"terminus-selected\");\n    nav.classList.add(\"terminus-selected\");\n    this.getApiExplorerDom(action, viewer);\n}\n\n// create nav bars\nApiExplorer.prototype.createNavs = function(navConfig, viewer, ul){\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    if(navConfig.defaultSelected) a.classList.add('terminus-selected');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        self.navOnSelect(navConfig.action, this, viewer);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-' + navConfig.icon);\n    a.appendChild(icon);\n    var txt = document.createTextNode(navConfig.navText);\n    a.appendChild(txt);\n    ul.appendChild(a);\n}\n\n// gets api nav bar\nApiExplorer.prototype.getApiNav = function(navDom, viewer){\n    // list view of apis\n    var nav = document.createElement('div');\n    navDom.appendChild(nav);\n    // connect to server api\n    var ul = document.createElement('ul');\n    ul.setAttribute('class', 'terminus-ul');\n    nav.appendChild(ul);\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.mainNav){\n        if (apiNavConfig.mainNav.hasOwnProperty(key)) {\n            this.createNavs(apiNavConfig.mainNav[key], viewer, ul);\n        }\n    } // for apiNavConfig\n    return navDom;\n} // getApiNav()\n\n/***** Api sub navs  *****/\n// get schema api explorer - nav bar, alert msg, headers ...\nApiExplorer.prototype.getApiExplorerDom = function(view, viewer){\n    // clear of viewer\n    TerminusClient.FrameHelper.removeChildren(viewer);\n    // wrapper\n    var wrap = document.createElement('div');\n    //wrap.setAttribute('class', 'terminus-wrapper terminus-wrapper-height');\n    viewer.appendChild(wrap);\n    var cont = document.createElement('div');\n    cont.setAttribute('class', 'container-fluid');\n    wrap.appendChild(cont);\n    var row = document.createElement('div');\n    row.setAttribute('class', 'row-fluid');\n    cont.appendChild(row);\n    var body = document.createElement('div');\n    body.setAttribute('class', 'terminus-module-body');\n    row.appendChild(body);\n    var api = document.createElement('div');\n    api.setAttribute('class', 'terminus-module-body terminus-module-body-white-bg terminus-module-body-width');\n    body.appendChild(api);\n    // body\n    var cont = document.createElement('div');\n    var self = this;\n    switch(view){\n        case 'connect':\n            var apiCont = self.getConnectExplorer(cont);\n            api.appendChild(apiCont);\n        break;\n        case 'create':\n            var apiCont = self.getDatabaseExplorer(cont);\n            api.appendChild(apiCont);\n        break;\n        case 'schema':\n            var apiCont = self.getSchemaApi(cont);\n            api.appendChild(apiCont);\n        break;\n        case 'document':\n            var apiCont = self.getDocumentApi(cont);\n            api.appendChild(apiCont);\n        break;\n        case 'query':\n            var apiCont = self.getQueryApi(cont);\n            api.appendChild(apiCont);\n        break;\n    }// switch(api)\n    return wrap;\n} // getApiExplorerDom\n\n// on trigger of click event - change dom\nApiExplorer.prototype.changeSubApiDom = function(curSubMenu, action, cont, body){\n    TerminusClient.FrameHelper.removeChildren(body);\n    switch(curSubMenu){\n        case 'database':\n            var dom = this.getDatabaseDom(action, body);\n        break;\n        case 'schema':  // getShowApiDom() deals with schema and document\n             var dom = this.getShowApiDom(action, body);\n        break;\n        case 'document': // getShowApiDom() deals with schema and document\n             var dom = this.getShowApiDom(action, body);\n        break;\n        case 'query':\n            var dom = this.getQueryApiDom(action, body);\n        break;\n        default:\n            console.log('Invalid Api Config');\n        break;\n    }\n    cont.appendChild(dom);\n}\n\nApiExplorer.prototype.subNavOnSelect = function(curSubMenu, subMenuConfig, subNav, cont, body){\n    this.setSelectedSubMenu(subNav);\n    this.changeSubApiDom(curSubMenu, subMenuConfig.action, cont, body);\n}\n\n// create sub nav bars\nApiExplorer.prototype.createSubNavs = function(curSubMenu, subMenuConfig, cont, body, ul){\n    // comment getclassframes for api explorer time being\n    if(subMenuConfig.action == 'getClassFrames') return;\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    if(subMenuConfig.defaultSelected) a.classList.add('terminus-submenu-selected');\n    var self = this;\n    a.addEventListener(\"click\", function() {\n        self.subNavOnSelect(curSubMenu, subMenuConfig, this, cont, body);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-' + subMenuConfig.icon);\n    a.appendChild(icon);\n    var txt = document.createTextNode(subMenuConfig.navText);\n    a.appendChild(txt);\n    ul.appendChild(a);\n}\n\n// get connect to server api calls - on click of connectAPI nav bar\nApiExplorer.prototype.getConnectExplorer = function(body){\n    var self = this;\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // get signature\n    var b = this.getSignature('connect');\n    body.appendChild(b);\n    // get header Parameter\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    //form to get server url\n    this.getForm( '', body, true, 'connect', 'URL : server_url');\n    //body.appendChild(form);\n    return body;\n} // getConnectExplorer\n\n// get database api calls - on click of databaseAPI nav bar - submenus of database Api defined here\nApiExplorer.prototype.getDatabaseExplorer = function(cont){\n    var body = document.createElement('div');\n    // list view of Databse tools\n    var ul = document.createElement('ul');\n    ul.setAttribute('class','terminus-ul-horizontal');\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.subNav.database){\n        if (apiNavConfig.subNav.database.hasOwnProperty(key))\n            this.createSubNavs('database', apiNavConfig.subNav.database[key], cont, body, ul);\n    } // for apiNavConfig\n    cont.appendChild(ul);\n    // landing page\n    var dom = this.getDatabaseDom(apiNavConfig.subNav.database.createDatabase.action, body);\n    cont.appendChild(dom);\n    return cont;\n} // getDatabaseExplorer\n\n// get schema api calls - on click of SchemaAPI nav bar - submenus of schema Api defined here\nApiExplorer.prototype.getSchemaApi = function(cont){\n    var body = document.createElement('div');\n    // list view of Databse tools\n    var ul = document.createElement('ul');\n    ul.setAttribute('class','terminus-ul-horizontal');\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.subNav.schema){\n        if (apiNavConfig.subNav.schema.hasOwnProperty(key)) {\n            this.createSubNavs('schema', apiNavConfig.subNav.schema[key], cont, body, ul);\n        }\n    } // for apiNavConfig\n    cont.appendChild(ul);\n    var dom = this.getShowApiDom(apiNavConfig.subNav.schema.getSchema.action, body);\n    cont.appendChild(dom);\n    return cont;\n} // getSchemaApi\n\n// get document api calls - on click of DocumentAPI nav bar\nApiExplorer.prototype.getDocumentApi = function(cont){\n    var body = document.createElement('div');\n    // list view of Databse tools\n    var ul = document.createElement('ul');\n    ul.setAttribute('class','terminus-ul-horizontal');\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.subNav.document){\n        if (apiNavConfig.subNav.document.hasOwnProperty(key)) {\n            this.createSubNavs('document', apiNavConfig.subNav.document[key], cont, body, ul);\n        }\n    } // for apiNavConfig\n    cont.appendChild(ul);\n    var dom = this.getShowApiDom(apiNavConfig.subNav.document.viewDocument.action, body);\n    cont.appendChild(dom);\n    return cont;\n} // getDocumentApi\n\n// get query api calls - on click of QueryAPI nav bar - submenus of Query Api defined here\nApiExplorer.prototype.getQueryApi  = function(cont){\n    var body = document.createElement('div');\n    // list view of Databse tools\n    var ul = document.createElement('ul');\n    ul.setAttribute('class','terminus-ul-horizontal');\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.subNav.query){\n        if (apiNavConfig.subNav.query.hasOwnProperty(key)) {\n            this.createSubNavs('query', apiNavConfig.subNav.query[key], cont, body, ul);\n        }\n    } // for apiNavConfig\n    cont.appendChild(ul);\n    var dom = this.getQueryApiDom(apiNavConfig.subNav.query.select.action, body);\n    cont.appendChild(dom);\n    return cont;\n} //getQueryApi\n\n/***** Api Content view  *****/\n// get database dom\nApiExplorer.prototype.getDatabaseDom = function(mode, body){\n    var self = this;\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // get signature\n    var b = this.getSignature(mode);\n    body.appendChild(b);\n    // get header Parameter\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    //form to get database id\n    if(mode == 'create') this.getForm( null, body, false, mode, 'URL : server/database_id');\n    else this.getForm( null, body, true, mode, 'URL : server/database_id');\n    return body;\n} // getConnectExplorer\n\n//get create & delete db form\nApiExplorer.prototype.getServerForm = function(){\n  // form\n  var form = document.createElement('form');\n  form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n  var fd = document.createElement('div');\n  fd.setAttribute('class', 'terminus-control-group');\n  form.appendChild(fd);\n  var inpLabel = document.createElement('label');\n  inpLabel.setAttribute('class', 'terminus-control-label');\n  inpLabel.setAttribute('for', 'basicinput');\n  inpLabel.innerHTML = 'Url:';\n  fd.appendChild(inpLabel);\n  var cd = document.createElement('div');\n  cd.setAttribute('class', 'terminus-controls');\n  fd.appendChild(cd);\n  var inpId = document.createElement('input');\n  inpId.setAttribute('type', 'text');\n  inpId.setAttribute('id', 'basicinput');\n  inpId.setAttribute('class', 'terminus-input-text');\n  inpId.setAttribute('placeholder', 'URL : server_url');\n  if(this.val) inpId.value = this.val;\n  cd.appendChild(inpId);\n\n  var fd = document.createElement('div');\n  fd.setAttribute('class', 'terminus-control-group');\n  form.appendChild(fd);\n  var keyLabel = document.createElement('label');\n  keyLabel.setAttribute('class', 'terminus-control-label');\n  keyLabel.setAttribute('for', 'basicinput');\n  keyLabel.innerHTML = 'Key:';\n  fd.appendChild(keyLabel);\n  var cd = document.createElement('div');\n  cd.setAttribute('class', 'terminus-controls');\n  fd.appendChild(cd);\n  var key = document.createElement('input');\n  key.setAttribute('type', 'text');\n  key.setAttribute('id', 'basicinput');\n  key.setAttribute('class', 'span8 terminus-input-text');\n  key.setAttribute('placeholder', 'Key : key');\n  if(this.val) key.value = this.val;\n  cd.appendChild(key);\n\n  var button = document.createElement('button');\n  button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n  button.setAttribute('type', 'button');\n  button.innerHTML = 'Send Api';\n  var gatherips = function(){\n    var input = {};\n    input.url = inpId.value;\n    input.key = key.value;\n    return input;\n  }\n  var resd = document.createElement('div');\n  form.appendChild(button);\n  form.appendChild(resd);\n  var self = this;\n  button.addEventListener(\"click\", function(){\n    var buttonSelf = this;\n    //opts = {};\n    var input = gatherips();\n    self.client.connect(input.url, input.key)\n    .then(function(response){\n      TerminusClient.FrameHelper.removeChildren(resd);\n      var resultDom = UTILS.showHttpResult(response, 'connect', resd, self.ui);\n    });\n  }) // button click\n  return form;\n} // getServerForm()\n\n// get database api calls - on click of databaseAPI nav bar - submenus of database Api defined here\nApiExplorer.prototype.getDatabaseExplorer = function(cont){\n  var body = document.createElement('div');\n  // list view of Databse tools\n  var ul = document.createElement('ul');\n  ul.setAttribute('class','terminus-ul-horizontal');\n  // loop over apiNavConfig\n  for (var key in apiNavConfig.subNav.database){\n      if (apiNavConfig.subNav.database.hasOwnProperty(key)) {\n          this.createSubNavs('database', apiNavConfig.subNav.database[key], cont, body, ul);\n      }\n  } // for apiNavConfig\n  cont.appendChild(ul);\n  // landing page\n  var dom = this.getDatabaseDom(apiNavConfig.subNav.database.createDatabase.action, body);\n  cont.appendChild(dom);\n  return cont;\n} // getDatabaseExplorer\n\n\n// get schema & document dom\nApiExplorer.prototype.getShowApiDom = function(action, body){\n    var self = this;\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // signature\n    var b = this.getSignature(action);\n    body.appendChild(b);\n    // get header Parameter\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // get input\n    switch(action){\n        case 'getSchema':\n            this.getForm( 'schema', body, true, action, 'URL : server/database_id');\n        break;\n        case 'getClassFrames':\n            this.getForm( 'getClassFrames', body, true, action, 'URL : server/database_id');\n        break;\n        case 'updateSchema':\n            this.getForm( 'schema', body, false, action, 'URL : server/database_id');\n        break;\n        case 'viewDocument':\n            this.getForm('document', body, true, action, 'URL : server/database_id/document/document_id');\n        break;\n        case 'deleteDocument':\n            this.getForm('document', body, true, action, 'URL : server/database_id/document/document_id');\n        break;\n        case 'createDocument':\n            this.getForm('document', body, false, action, 'URL : server/database_id/document/document_id');\n        break;\n        case 'updateDocument':\n            this.getForm('document', body, false, action, 'URL : server/database_id/document/document_id');\n        break;\n        default:\n            console.log('Invalid Api Call on form');\n        break;\n   }// switch(action)\n\n   return body;\n } // getShowApiDom()\n\n// get query api dom\nApiExplorer.prototype.getQueryApiDom = function(action, body){\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // signature\n    var b = this.getSignature(action);\n    body.appendChild(b);\n    // get header Parameter\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    this.getForm( 'query', body, false, action, 'URL : server/database_id');\n    return body;\n} // getQueryApiDom\n\n/*ApiExplorer.prototype.getClassFramesForm = function(){\n    // form\n    var form = document.createElement('form');\n    form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var inpLabel = document.createElement('label');\n    inpLabel.setAttribute('class', 'terminus-control-label');\n    inpLabel.setAttribute('for', 'basicinput');\n    inpLabel.innerHTML = 'Url:';\n    fd.appendChild(inpLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpUrl = document.createElement('input');\n    inpUrl.setAttribute('type', 'text');\n    inpUrl.setAttribute('id', 'basicinput');\n    inpUrl.setAttribute('class', 'span8 terminus-input-text');\n    inpUrl.setAttribute('placeholder', 'URL : database_url');\n    if(this.val) inpUrl.value = this.val;\n    cd.appendChild(inpUrl);\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var inpLabel = document.createElement('label');\n    inpLabel.setAttribute('class', 'terminus-control-label');\n    inpLabel.setAttribute('for', 'basicinput');\n    inpLabel.innerHTML = 'Url/ ID:';\n    fd.appendChild(inpLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpDocUrl = document.createElement('input');\n    inpDocUrl.setAttribute('type', 'text');\n    inpDocUrl.setAttribute('id', 'basicinput');\n    inpDocUrl.setAttribute('class', 'span8 terminus-input-text');\n    inpDocUrl.setAttribute('placeholder', 'Url or ID of document class');\n    cd.appendChild(inpDocUrl);\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var optLabel = document.createElement('label');\n    optLabel.setAttribute('class', 'terminus-control-label');\n    optLabel.setAttribute('for', 'basicinput');\n    optLabel.innerHTML = 'Options:';\n    fd.appendChild(optLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var optInp = document.createElement('input');\n    optInp.setAttribute('type', 'text');\n    optInp.setAttribute('id', 'basicinput');\n    optInp.setAttribute('class', 'span8 terminus-input-text');\n    optInp.setAttribute('placeholder', 'options');\n    cd.appendChild(optInp);\n    var button = document.createElement('button');\n    button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n    button.setAttribute('type', 'button');\n    button.innerHTML = 'Send Api';\n    var gatherips = function(){\n        var input = {};\n        input.url = inpUrl.value;\n        input.docUrl = inpDocUrl.value;\n        input.options = optInp.value;\n        return input;\n    }\n    var self = this;\n    button.addEventListener(\"click\", function(form){\n      var input = gatherips();\n      var buttonSelf = this;\n      opts = {};\n      opts.explorer = true;\n      self.client.getClassFrame(input.url, input.docUrl, opts)\n      .then(function(response){\n          var currForm = buttonSelf.parentNode;\n          var resultDom = UTILS.showHttpResult(response, 'getClassFrames', currForm, self.ui);\n      });\n    }) // button click\n    form.appendChild(button);\n    return form;\n}   */\n\n// get form for all Apis\nApiExplorer.prototype.getForm = function(curApi, body, view, action, urlPlaceholder){\n    // form\n    var formDoc = document.createElement('form');\n    formDoc.setAttribute('class', 'terminus-form-horizontal row-fluid');\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    formDoc.appendChild(fd);\n    var urlLabel = document.createElement('label');\n    urlLabel.setAttribute('class', 'terminus-control-label');\n    urlLabel.setAttribute('for', 'basicinput');\n    urlLabel.innerHTML = 'Url:';\n    fd.appendChild(urlLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpUrl = document.createElement('input');\n    inpUrl.setAttribute('type', 'text');\n    inpUrl.setAttribute('id', 'basicinput');\n    inpUrl.setAttribute('class', 'span8 terminus-input-text');\n    inpUrl.setAttribute('placeholder', urlPlaceholder);\n    cd.appendChild(inpUrl);\n    // add extra form fields based on current api chosen\n    switch(curApi){\n        case 'getClassFrames':\n            var fd = document.createElement('div');\n            fd.setAttribute('class', 'terminus-control-group');\n            formDoc.appendChild(fd);\n            var docUrlLabel = document.createElement('label');\n            docUrlLabel.setAttribute('class', 'terminus-control-label');\n            docUrlLabel.setAttribute('for', 'basicinput');\n            docUrlLabel.innerHTML = 'Url/ ID:';\n            fd.appendChild(docUrlLabel);\n            var cd = document.createElement('div');\n            cd.setAttribute('class', 'terminus-controls');\n            fd.appendChild(cd);\n            var inpDocUrl = document.createElement('input');\n            inpDocUrl.setAttribute('type', 'text');\n            inpDocUrl.setAttribute('id', 'basicinput');\n            inpDocUrl.setAttribute('class', 'span8 terminus-input-text');\n            inpDocUrl.setAttribute('placeholder', 'Url or ID of document class');\n            cd.appendChild(inpDocUrl);\n        break;\n        case 'schema':\n            //encoding\n           /* var fd = document.createElement('div');\n            fd.setAttribute('class', 'terminus-control-group');\n            formDoc.appendChild(fd);\n            var encLabel = document.createElement('label');\n            encLabel.setAttribute('class', 'terminus-control-label');\n            encLabel.setAttribute('for', 'basicinput');\n            encLabel.innerHTML = 'Encoding:';\n            fd.appendChild(encLabel);\n            var cd = document.createElement('div');\n            cd.setAttribute('class', 'terminus-controls');\n            fd.appendChild(cd);\n            var inpEnc = document.createElement('select');\n            inpEnc.setAttribute('style', 'height: 50px;width: 300px;padding: 10px;');\n            inpEnc.setAttribute('placeholder', 'turtle');\n            var optTurt = document.createElement('option');\n            optTurt.setAttribute('value', 'terminus:turtle');\n            optTurt.appendChild(document.createTextNode('turtle'));\n            inpEnc.appendChild(optTurt);\n            var optJld = document.createElement('option');\n            optJld.setAttribute('value', 'terminus:jsonld');\n            optJld.appendChild(document.createTextNode('jsonLD'));\n            inpEnc.appendChild(optJld);\n            cd.appendChild(inpEnc); */\n        break;\n    }\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    formDoc.appendChild(fd);\n    var keyLabel = document.createElement('label');\n    keyLabel.setAttribute('class', 'terminus-control-label');\n    keyLabel.setAttribute('for', 'basicinput');\n    keyLabel.innerHTML = 'Key:';\n    fd.appendChild(keyLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpKey = document.createElement('input');\n    inpKey.setAttribute('type', 'text');\n    inpKey.setAttribute('id', 'basicinput');\n    inpKey.setAttribute('class', 'span8 terminus-input-text');\n    inpKey.setAttribute('placeholder', 'Key');\n    cd.appendChild(inpKey);\n    if(!view){\n        // include text area only if call is type post\n        var fd = document.createElement('div');\n        fd.setAttribute('class', 'terminus-control-group');\n        formDoc.appendChild(fd);\n        var docLabel = document.createElement('label');\n        docLabel.setAttribute('class', 'terminus-control-label');\n        docLabel.setAttribute('for', 'basicinput');\n        if(curApi == 'query') docLabel.innerHTML = 'Query:';\n        docLabel.innerHTML = 'Document:';\n        fd.appendChild(docLabel);\n        var cd = document.createElement('div');\n        cd.setAttribute('class', 'terminus-controls');\n        fd.appendChild(cd);\n        var inpDoc = document.createElement('textarea');\n        cd.appendChild(inpDoc);\n        inpDoc.setAttribute('class', 'terminus-api-explorer-text-area');\n        UTILS.stylizeEditor(this.ui, inpDoc, 'api-doc', 'javascript');\n    }\n    body.appendChild(formDoc);\n    // gather inputs\n    var inp ={};\n    inp.url = inpUrl;\n    inp.key = inpKey;\n    if(curApi == 'getClassFrames') inp.docUrl = inpDocUrl;\n    //if(curApi == 'schema') inp.enc = inpEnc;\n    if(!view) inp.doc = inpDoc;\n    var form = this.getApiSendButton(action, inp);\n    body.appendChild(form);\n}\n\n// define event listeners on send api of schema & documents\n\nApiExplorer.prototype.getApiForm = function(action, input){\n  // form\n  var form = document.createElement('form');\n  form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n  var button = document.createElement('button');\n  button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n  button.setAttribute('type', 'button');\n  button.innerHTML = 'Send Api';\n  form.appendChild(button);\n  var resd = document.createElement('div');\n  form.appendChild(resd);\n  var self = this;\n  switch(action){\n    case 'getSchema':\n      button.addEventListener(\"click\", function(){\n        var opts = {};\n        opts['terminus:encoding'] = input.enc.value;\n        opts['terminus:user_key'] = 'terminus:turtle';\n        var schurl = input.url.value;\n        var buttonSelf = this;\n        self.client.getSchema(schurl, opts)\n        .then(function(response){\n          TerminusClient.FrameHelper.removeChildren(resd);\n          var resultDom = UTILS.showHttpResult(response, 'getSchema', resd, self.ui);\n        });\n      }) // button click\n    break;\n    case 'updateSchema':\n      button.addEventListener(\"click\", function(){\n        var buttonSelf = this;\n        opts = {};\n        opts['terminus:encoding'] = input.enc.value;\n        opts['terminus:user_key'] = 'terminus:turtle';\n        var schurl = input.url.value;\n        self.client.connectionConfig.connected_mode = false;\n        self.client.updateSchema(schurl, input.doc.value, opts)\n        .then(function(response){\n          var gtxtar = document.createElement('textarea');\n          gtxtar.setAttribute('readonly', true);\n          gtxtar.innerHTML = response;\n          var currForm = buttonSelf.parentNode;\n          currForm.appendChild(gtxtar);\n          UTILS.stylizeEditor(this.ui, txtar, 'schema', 'turtle');\n        });\n      }) // button click\n    break;\n    case 'viewDocument':\n      button.addEventListener(\"click\", function(){\n      var dcurl = input.value;\n      var buttonSelf = this;\n      var opts = {};\n      opts.format = 'turtle';\n      self.client.getDocument(dcurl, opts)\n      .then(function(response){\n        TerminusClient.FrameHelper.removeChildren(resd);\n        var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n      });\n    }) // button click\n    break;\n    case 'deleteDocument':\n      button.addEventListener(\"click\", function(){\n      var dcurl = input.value;\n      var buttonSelf = this;\n      var opts = {};\n      self.client.deleteDocument(dcurl, opts)\n      .then(function(response){\n        TerminusClient.FrameHelper.removeChildren(resd);\n        var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n      });\n    }) // button click\n    break;\n    case 'createDocument':\n      button.addEventListener(\"click\", function(){\n        var dcurl = input.schemaUrlDom.value;\n        var payload = input.htmlEditor.getValue();\n        var buttonSelf = this;\n        opts = {};\n        self.client.createDocument(dcurl, payload, opts)\n        .then(function(response){\n          TerminusClient.FrameHelper.removeChildren(resd);\n          var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n        });\n      }) // button click\n    break;\n    case 'updateDocument':\n      button.addEventListener(\"click\", function(){\n        var dcurl = input.schemaUrlDom.value;\n        var payload = input.htmlEditor.getValue();\n        var buttonSelf = this;\n        opts = {};\n        opts.editmode = 'replace';\n        opts.format = 'json';\n        self.client.updateDocument(dcurl, payload, opts)\n        .then(function(response){\n          TerminusClient.FrameHelper.removeChildren(resd);\n          var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n        });\n      }) // button click\n    break;\n  } // switch(action)\n\n  var br = document.createElement('BR');\n  form.appendChild(br);\n  var br = document.createElement('BR');\n  form.appendChild(br);\n\n  return form;\n} // getApiForm()\n\n\n// define event listeners on send api of schema & documents\nApiExplorer.prototype.getApiSendButton = function(action, input){\n    // form\n    var form = document.createElement('form');\n    form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n    var button = document.createElement('button');\n    button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n    button.setAttribute('type', 'button');\n    button.innerHTML = 'Send Api';\n    form.appendChild(button);\n    var resd = document.createElement('div');\n    form.appendChild(resd);\n    var self = this;\n    switch(action){\n        case 'connect':\n            button.addEventListener(\"click\", function(){\n                self.client.connect(input.url.value, input.key.value)\n                .then(function(response){\n                \tTerminusClient.FrameHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n               });\n            }) // button click\n        break;\n        case 'create':\n            button.addEventListener(\"click\", function(form){\n              self.client.createDatabase(input.url.value, JSON.parse(input.doc.value), input.key.value)\n              .then(function(response){\n            \t  TerminusClient.FrameHelper.removeChildren(resd);\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n            }) // button click\n        break;\n        case 'delete':\n            button.addEventListener(\"click\", function(){\n              var opts ={}\n              //opts.key = input.key.value;\n              self.client.deleteDatabase(input.url.value, input.key.value)\n              .then(function(response){\n            \t  TerminusClient.FrameHelper.removeChildren(resd);\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n            }) // button click\n        break\n        case 'getSchema':\n            button.addEventListener(\"click\", function(){\n                var opts = {};\n                opts['terminus:encoding'] = 'terminus:turtle';\n                opts['terminus:user_key'] = input.key.value;\n                var schurl = input.url.value;\n                self.client.getSchema(schurl, opts)\n                .then(function(response){\n                \tTerminusClient.FrameHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n                });\n            }) // button click\n        break;\n        case 'updateSchema':\n            button.addEventListener(\"click\", function(){\n                opts = {};\n                opts['terminus:encoding'] = 'terminus:turtle';\n                opts['terminus:user_key'] = input.key.value;\n                var payload = input.doc.value;\n                var schurl = input.url.value;\n                self.client.connectionConfig.connected_mode = false;\n                self.client.updateSchema(schurl, input.doc.value, opts)\n                //self.client.updateSchema(schurl, input.doc.value, opts)\n                .then(function(response){\n                \tTerminusClient.FrameHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n                });\n            }) // button click\n        break;\n        case 'getClassFrames':\n            button.addEventListener(\"click\", function(form){\n                var schurl = input.url.value;\n                opts = {};\n                opts.explorer = true;\n                self.client.getClassFrame(input.url, JSON.parse(input.docUrl.value), opts)\n                .then(function(response){\n                    var currForm = buttonSelf.parentNode;\n                    var resultDom = UTILS.showHttpResult(response, action, currForm, self.ui);\n                });\n            }) // button click\n        break;\n        case 'viewDocument':\n          button.addEventListener(\"click\", function(){\n              var dcurl = input.url.value;\n              var opts = {};\n              opts['terminus:encoding'] = \"terminus:frame\";\n              opts['terminus:user_key'] = input.key.value;\n              self.client.getDocument(dcurl, opts)\n              .then(function(response){\n            \t    TerminusClient.FrameHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n        }) // button click\n        break;\n        case 'deleteDocument':\n          button.addEventListener(\"click\", function(){\n              var dcurl = input.url.value;\n              var opts = {};\n              opts.key = input.key.value;\n              self.client.deleteDocument(dcurl, opts)\n              .then(function(response){\n            \t  TerminusClient.FrameHelper.removeChildren(resd);\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n          }) // button click\n        break;\n        case 'createDocument':\n          button.addEventListener(\"click\", function(){\n              var dcurl = input.url.value;\n              var payload = input.doc.value;\n              opts = {};\n              opts['terminus:encoding'] = \"jsonld\";\n              opts['terminus:user_key'] = input.key.value;\n              self.client.createDocument(dcurl, JSON.parse(payload), opts)\n              .then(function(response){\n            \t   TerminusClient.FrameHelper.removeChildren(resd);\n                   var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n               });\n          }) // button click\n        break;\n        case 'updateDocument':\n          button.addEventListener(\"click\", function(){\n            var dcurl = input.url.value;\n            var payload = input.doc.value;\n            var buttonSelf = this;\n            opts = {};\n            opts['terminus:encoding'] = \"jsonld\";\n            opts['terminus:user_key'] = input.key.value;\n            self.client.updateDocument(dcurl, JSON.parse(payload), opts)\n            .then(function(response){\n            \tTerminusClient.FrameHelper.removeChildren(resd);\n                var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n            });\n          }) // button click\n        break;\n        case 'select':\n            button.addEventListener(\"click\", function(){\n                var opts = {};\n                opts.key = input.key.value;\n                var doc = JSON.parse(input.doc.value);\n                self.client.select(input.url.value, doc, opts)\n                .then(function(response){\n                \tTerminusClient.FrameHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n                });\n            }) // button click\n        break;\n        case 'update':\n            button.addEventListener(\"click\", function(){\n              var opts = {};\n              opts.key = input.key.value;\n              var doc = JSON.parse(input.doc.value);\n              self.client.update(input.url.value, doc, opts)\n              .then(function(response){\n            \t  TerminusClient.FrameHelper.removeChildren(resd);\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n            }) // button click\n        break;\n        default:\n            console.log('Invalid Api call on button');\n        break;\n    } // switch(action)\n    var br = document.createElement('BR');\n    form.appendChild(br);\n    var br = document.createElement('BR');\n    form.appendChild(br);\n    return form;\n} // getApiSendButton()\n\n// get signature of api calls\nApiExplorer.prototype.getSignature = function(action){\n    var api = document.createElement('div');\n    // get header signature\n    var sg = document.createElement('button');\n    sg.appendChild(document.createTextNode('Click to read API Signature'));\n    sg.setAttribute('class', 'terminus-collapsible');\n    ic = document.createElement('i');\n    ic.setAttribute('class', 'terminus-cheveron-float fa fa-chevron-down');\n    sg.appendChild(ic);\n    api.appendChild(sg);\n    var br = document.createElement('BR');\n    api.appendChild(br);\n    var cl = document.createElement('div');\n    cl.setAttribute('class', 'terminus-collapsible-content content');\n    var sig = UTILS.getFunctionSignature(action);\n    var txt = document.createTextNode(sig.spec);\n    var pre = document.createElement('pre');\n    pre.setAttribute('class', 'terminus-api-signature-pre');\n    pre.appendChild(txt);\n    var txt =  document.createTextNode(sig.descr);\n    pre.appendChild(txt);\n    var br = document.createElement('BR');\n    pre.appendChild(br);\n    var br = document.createElement('BR');\n    pre.appendChild(br);\n    var txt = document.createTextNode(sig.result);\n    pre.appendChild(txt);\n    cl.appendChild(pre);\n    api.appendChild(cl);\n    var br = document.createElement('BR');\n    api.appendChild(br);\n    sg.addEventListener('click', function(){\n        UTILS.tolggleContent(ic, cl);\n    });\n    return api;\n} // getSignature()\n\n// displays signature only on click\nfunction tolggleSignatureContent(content){\n    if (content.style.display === \"block\")\n        content.style.display = \"none\";\n    else content.style.display = \"block\";\n}\n\nmodule.exports=ApiExplorer\n","function Codemirror(text, format, config){\n  this.textdom = text;\n  this.mode = format;\n  this.darkMode = config.darkMode;\n  if(this.jsonldCheck(format)) this.mode = 'javascript';\n}\n\n/*\ntxtar    : editor is attached to textar\nmode     : format for highlighting, ex: json, html etc.\neditable : readOnly false/ nocursor is special value in code editor to set readonly true */\nCodemirror.prototype.colorizeTextArea = function(mode){\n    //initize auto complete\n    /*CodeMirror.commands.autocomplete = function(cm) {\n    cm.showHint({hint: CodeMirror.hint.anyword});\n    }*/\n\n    // initialise code editor on text area\n    var editor = CodeMirror.fromTextArea(this.textdom, {\n        mode                : this.mode,\n        firstLineNumber     : 1,\n        lineNumbers         : true,\n        styleActiveLine     : true,\n        lineWrapping        : true,\n        smartIndent         : true,\n        indentWithTabs      : true,\n        newlineAndIndent    : true,\n        autoCloseBrackets   : true,\n        matchBrackets       : {afterCursor: true},\n        extraKeys           : {\"Ctrl-F\": \"find\", \"Tab\": \"autocomplete\" },\n        refresh             : true\n    });\n\n    this.setCodemirrorSize(editor, mode);\n    editor.defaultCharWidth('20px');\n    if(this.darkMode) editor.setOption(\"theme\", 'erlang-dark');\n    else editor.setOption(\"theme\", 'neo');\n\n    return editor;\n} // colorizeTextArea()\n\n/*\n  set editor size according to screens\n  editor : code mirror editor Object\n  mode   : editor being viewed from schema/ doc/ query page*/\nCodemirror.prototype.setCodemirrorSize = function(editor, mode){\n  switch(mode){\n    case 'query':\n      editor.setSize('800', '400');\n    break;\n    case 'schema':\n      editor.setSize('1200', '1550');\n    break;\n    case 'document':\n     editor.setSize('765', '500');\n    break;\n    case 'api-doc':\n        editor.setSize('800', '500');\n    break;\n  } // switch(mode)\n} // setCodemirrorSize()\n\n// updateTextArea(): highlights new changes on editor\nCodemirror.prototype.updateTextArea = function(editor){\n  editor.save();\n  setTimeout(function() {\n      editor.refresh();\n  },1);\n  // save changes of code mirror editor\n  editor.on('change', function(){\n    editor.save();\n  });\n} //updateTextArea()\n\n/*\ncolorizePre() to colorise pre tags (read only mode)\ntext (string)    : The document to run through the highlighter.\nmode (mode spec) : format to highlight color\noutput (DOM node): The tokens will be converted to spans as in an editor,\n                   and inserted into the node (through innerHTML).*/\nCodemirror.prototype.colorizePre = function(){\n  CodeMirror.runMode(this.textdom.innerText, this.mode, this.textdom);\n  if(this.darkMode)\n      var theme = 'cm-s-erlang-dark';\n  else var theme = 'cm-s-neo';\n  this.textdom.setAttribute('class', 'CodeMirror CodeMirror-wrap ' + theme + ' terminus-wrap-text terminus-wrapper-height ');\n  return this.textdom;\n} // colorizePre()\n\nCodemirror.prototype.jsonldCheck = function(format){\n  if(format == 'jsonld') return true;\n}\n\nmodule.exports=Codemirror\n","/**\n * object renderer binds to object frame - provides filters, sorts and manipulations of underlying object frame\n * and coordinates viewer to draw updates\n\n * Object Renderer - provides sorting / filtering / state management of objects\n * @param obj ObjectFrame object - contains underlying data and frame structure\n * @param parent PropertyRenderer - property that owns this object (if any)\n * @param options options json\n * @returns\n */\n\nconst RenderingMap = require('./RenderingMap');\nconst ValueRenderer = require('./ValueRenderer');\nconst ObjectViewer = require('./ObjectViewer');\nconst PropertyViewer = require('./PropertyViewer');\nconst HTMLDataViewer = require('./DataViewer');\n\nfunction PropertyRenderer(prop, parent, options){\n\tthis.predicate = prop;\n\tthis.parent = parent;\n\tthis.cframe = this.parent.objframe.getPropertyClassFrame(this.predicate);\n\tthis.originalValues = false;\n\tthis.changed = false;\n\tthis.values = [];\n\tthis.renderer_type = \"property\";\n\tthis.options = this.setOptions(options);\n}\n\nPropertyRenderer.prototype.setOptions = function(options){\n\treturn TerminusDashboard.RenderingMap.decorateRenderer(options, this);\n}\n\nPropertyRenderer.prototype.getOptionsForChild = function(){\n\tvar opts = {};\n\tif(this.options.features){ opts.features = this.options.features };\n\tif(this.options.controls){ opts.controls = this.options.controls};\n\treturn this.options;\n}\n\nPropertyRenderer.prototype.getOptionsForValue = function(df, index){\n\treturn this.getOptionsForChild();\n}\n\nPropertyRenderer.prototype.getOptionsForObject = function(objframe){\n\treturn this.getOptionsForChild();\n}\n\n\nPropertyRenderer.prototype.render = function(viewer){\n \tthis.buildValueRenderers();\n \tif(this.cframe && this.cframe.property){\n \t\tthis.viewer = (viewer ? viewer : this.getViewerForProperty());\n \t\tfor(var i = 0; i<this.values.length; i++){\n \t\t\tvar renderedval = this.values[i].render();\n \t\t\tif(renderedval && this.showFeature(\"body\")) this.viewer.addRenderedValue(renderedval);\n \t\t}\n \t\treturn this.viewer.render();\n \t}\n} \n\n/*\n * Creates the array of object renderer or value renderer objects corresponding to the property values. \n */\nPropertyRenderer.prototype.buildValueRenderers = function(){\n \tvar adorig = (this.originalValues === false ? true : false);\n \tthis.cframe = this.parent.objframe.getPropertyClassFrame(this.predicate);\n \tif(!this.cframe){\n \t\tconsole.error(\"No frame for \" + this.property() + \" id: \" + this.subject());\n \t\treturn false;\n \t}\n \tif(this.cframe && this.cframe.isData()){\n \t\tvar dataframes = this.getDataFramesToRender();\n \t\tif(dataframes.length == 0){\n \t\t\talert(this.predicate);\n \t\t}\n \t\tvar vals = [];\n \t\tfor(var i = this.values.length; i<dataframes.length; i++){\n \t\t\tvar vr = new ValueRenderer(dataframes[i], i, this, this.getOptionsForValue(dataframes[i], i));\n \t\t\tthis.values.push(vr);\n \t\t\tvals.push(vr.value());\n \t\t}\n \t\tif(adorig) this.originalValues = vals;\n \t}\n \telse {\n \t\tif(adorig) this.originalValues = [];\n \t\tvar kids = this.getChildrenToRender();\n \t\tif(kids && kids.length){\n \t\t\tfor(var i = this.values.length; i<kids.length; i++){\n \t\t\t\tvar kidf = new ObjectRenderer(kids[i], this, this.getOptionsForObject(kids[i]));\n \t\t\t\tif(adorig) this.originalValues.push(kidf.subject());\n \t\t\t\tthis.values.push(kidf);\n \t\t\t}\n \t\t}\n \t}\n}\n\n/*\n * Returns the array of values that should be rendered (enables value filtering)\n */\nPropertyRenderer.prototype.getDataFramesToRender = function(options){\n \tvar allvals = this.parent.objframe.getDataFrames(this.property());\n \treturn allvals;\n}\n\n/*\n * Returns the array of child / objects that should be rendered (enables value filtering)\n */\nPropertyRenderer.prototype.getChildrenToRender = function(options){\n \tif(TerminusClient.FrameHelper.viewIncludesChildren(this.view, \"property\")){\n \t\tvar allkids = this.parent.objframe.getChildren(this.property());\n \t}\n \telse {\n \t\tvar allkids = [];\n \t}\n \treturn allkids;\n}\n\nPropertyRenderer.prototype.redraw = function(){\n \tthis.viewer.clear();\n \tthis.render(this.viewer, \"x\");\n \t//alert(this.values.length);\n}\n\nPropertyRenderer.prototype.extract = function(){\n \tvar extracts = [];\n \tfor(var i = 0; i<this.values.length; i++){\n \t\tvar val = this.values[i].extract();\n \t\tif(val !== \"\" && val !== false && typeof val != \"undefined\") extracts.push(val);\n \t}\n \tif(this.cframe.isData()){\n \t\treturn extracts;\n \t}\n \telse {\n \t\treturn extracts;\n \t\tvar extr = {};\n \t\tfor(var i = 0; i<extracts.length; i++){\n \t\t\tfor(var subjid in extracts[i]){\n \t\t\t\textr[subjid] = extracts[i][subjid];\n \t\t\t}\n \t\t}\n \t\treturn extr;\n \t}\n}\n\n/*\n * simple wrapper functions\n */\nPropertyRenderer.prototype.currentViewer = function(){return this.viewerType;}\nPropertyRenderer.prototype.property = function(){return this.predicate;}\nPropertyRenderer.prototype.subject = function(){return (this.parent ? this.parent.subject() : false);};\nPropertyRenderer.prototype.depth = function(){return (this.parent ? this.parent.depth() : false);};\nPropertyRenderer.prototype.subjectClass = function(){return (this.parent ? this.parent.subjectClass() : false);};\nPropertyRenderer.prototype.updated = function(){ return (this.parent ? this.parent.childUpdated() : false);};\nPropertyRenderer.prototype.range = function(){\treturn (this.cframe ? this.cframe.range : \"\");};\nPropertyRenderer.prototype.getLabel = function(){ return (this.cframe ? this.cframe.getLabel() : \"\" );};\nPropertyRenderer.prototype.getComment = function(){ return (this.cframe ? this.cframe.getComment() : false);}\nPropertyRenderer.prototype.load = function(link){ return (this.parent ? this.parent.load(link) : false);}\nPropertyRenderer.prototype.hasCardinalityRestriction = function(){return (this.cframe ? this.cframe.hasRestriction() : false);};\nPropertyRenderer.prototype.getRestriction = function(){return (this.cframe ? this.cframe.restriction : false);};\nPropertyRenderer.prototype.isClassChoice = function(){\treturn (this.cframe ? this.cframe.isClassChoice() : false);};\nPropertyRenderer.prototype.currentFacet = function(){\treturn this.facet;} ;\nPropertyRenderer.prototype.save = function(){ return (this.parent ? this.parent.save() : false);};\n\nPropertyRenderer.prototype.cancel = function(){\n\tthis.reset();\n\tthis.setMode(\"view\");\n}\n\nPropertyRenderer.prototype.getAvailableClassChoices = function(){ \n\tif(this.cframe){\n\t\tvar cf = this.cframe.getClassChoices();\n\t\tif(this.parent){\n\t\t\tvar choices = [];\n\t\t\tfor(var i = 0; i < cf.length; i++){\n\t\t\t\tvar clsmeta = this.parent.getClassMeta(cf[i]);\n\t\t\t\tvar lab = ((clsmeta && clsmeta.Label && clsmeta.Label[\"@value\"]) ? clsmeta.Label[\"@value\"] : TerminusClient.FrameHelper.labelFromURL(cf[i]));\n\t\t\t\tchoices.push({value: cf[i], label: lab});\n\t\t\t}\n\t\t\treturn choices;\n\t\t}\n\t\treturn cf;\n\t\t\n\t}\n\treturn false;\n};\n\n\nPropertyRenderer.prototype.delete = function(){\n\tvar prop = this.predicate;\n\tif(prop){\n\t\tthis.reset();\n\t\tthis.parent.deleteProperty(prop);\t\n\t\tthis.parent.redraw();\n\t}\n}\n\nPropertyRenderer.prototype.add = function(view){\n\tthis.parent.addProperty(this.property(), view);\n\tthis.updated();\n\tif(view) {\n\t\tthis.values[this.values.length-1].setMode(view);\n\t\tthis.values[this.values.length-1].setNew();\n\t}\n\tthis.redraw();\n}\n\nPropertyRenderer.prototype.goToValue = function(index){\n\tthis.viewer.goTo(this.subject(), this.property(), index);\n}\n\nPropertyRenderer.prototype.addClass = function(cls){\n\tthis.parent.addPropertyClass(this.property(), cls);\n\tthis.updated();\n\tvar newb = this.values[this.values.length-1];\n\tif(newb){\n\t\tnewb.setNew();\n\t\tnewb.setMode(\"edit\");\n\t}\n\tthis.redraw();\n\tif(newb) this.viewer.goTo(newb.subject());\n}\n\nPropertyRenderer.prototype.reset = function(){\n\tthis.parent.objframe.reset(this.predicate);\n\tif(this.cframe && this.cframe.isData()){\n\t\tfor(var i = 0; i<this.values.length; i++){\n\t\t\tthis.values[i].reset();\n\t\t}\n\t\tthis.values = [];\n\t}\n\telse {\n\t\tvar nvals = [];\n\t\tfor(var i = 0; i<this.originalValues.length; i++){\n\t\t\tfor(var j = 0; j<this.values.length; j++){\n\t\t\t\tthis.values[j].reset();\n\t\t\t\tif(this.values[j].subject() == this.originalValues[i]){\n\t\t\t\t\tnvals.push(this.values[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.values = nvals;\n\t}\n\tthis.redraw();\t\n\tthis.parent.childUpdated();\n}\n\nPropertyRenderer.prototype.deletePropertyValue = function(value, index){\n\tthis.parent.objframe.removePropertyValue(this.property(), value, index);\n\tvar nvals = [];\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(typeof index == \"undefined\"){\n\t\t\tif(this.values[i].subject() == value){\n\t\t\t\tthis.values[i].reset();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnvals.push(this.values[i]);\n\t\t\t}\n\t\t}\n\t\telse if(i != index){\n\t\t\tthis.values[i].index = nvals.length;\n\t\t\tnvals.push(this.values[i]);\n\t\t}\n\t\telse {\n\t\t\tthis.values[i].reset();\n\t\t}\n\t}\n\tthis.values = nvals;\n\tthis.parent.childUpdated();\n\tthis.parent.redraw();\n}\n\nPropertyRenderer.prototype.addPropertyValue = function(value){\n\tthis.updated();\n\treturn this.parent.objframe.addPropertyValue(this.property(), value);\n}\n\n/*\n * Checks to see if an action (add, clone, delete) which affects the cardinality of the property is allowed by cardinality rules.\n */\nPropertyRenderer.prototype.cardControlAllows = function(action){\n\tif(this.cframe.hasRestriction()){\n\t\tvar rest = this.cframe.restriction;\n\t\tvar currentnum = this.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nPropertyRenderer.prototype.isNew = function(){\n\tif(this.new_property){\n\t\treturn true;\n\t}\n\treturn this.parent.isNew();\n}\n\nPropertyRenderer.prototype.setNew = function(){\n\tthis.new_property = true;\n}\n\n\nPropertyRenderer.prototype.isUpdated = function(){\n\tif(this.values.length != this.originalValues.length) return true;\n\tfor(var i = 0 ; i < this.values.length; i++){\n\t\tif(this.cframe && this.cframe.isData()){\n\t\t\tif(this.values[i].value() != this.originalValues[i]){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif(this.values[i].subject() != this.originalValues[i]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(this.values[i].isUpdated()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nPropertyRenderer.prototype.childUpdated = function(){\n\tthis.viewer.redrawHeader();\n\tif(this.parent) this.parent.childUpdated();\n}\n\n\n/**\n * Sets mode of viewer to either \"view\" or \"edit\"\n */\nPropertyRenderer.prototype.setMode = function(mode){\n\tthis.mode = mode;\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tthis.values[i].setMode(mode);\n\t}\n\tthis.redraw();\n}\n\n/*\n * Jump to property value\n */\nPropertyRenderer.prototype.getViewableValues = function(){\n\tvar viewables = [];\n\tif(this.cframe && this.cframe.isData())\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tvar sum = this.values[i].getSummary();\n\t\tvar lab = sum.long;\n\t\tviewables.push({label: lab, value: i});\n\t}\n\treturn viewables;\n}\n\nPropertyRenderer.prototype.hideDisabledControls = function(){\n\treturn this.hide_disabled_controls;\n}\n\nPropertyRenderer.prototype.setFacet = function(facet, nocascade){\n\tthis.facet = facet;\n\tif(!nocascade){\n\t\tfor(var i = 0; i<this.values.length; i++){\n\t\t\tthis.values[i].parentFacetChange(facet);\n\t\t}\n\t}\n\tthis.redraw();\n}\n\nPropertyRenderer.prototype.parentFacetChange = function(facet){\n\tif(facet == 'page'){\n\t\tif(!(this.facet == \"page\" || this.facet == \"multiline\")){\n\t\t\tthis.setFacet('multiline');\n\t\t}\n\t}\n\tif(facet == 'line'){\n\t\tthis.setFacet(\"label\");\n\t}\n\t\t\n}\n\n\n\nPropertyRenderer.prototype.getDefaultFacets = function(){\n\tvar defs = {\n\t\tpage: {\n\t\t\tlabel: \"Full Page\", value: \"page\", \n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"view\", \"viewer\"], \n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\n\t\t},\n\t\tmultiline: {\n\t\t\tlabel: \"Multiple Lines\", value: \"multiline\",\n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"view\", \"viewer\"], \n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\n\t\t},\n\t\tline: {\n\t\t\tlabel: \"Single Line\", value: \"line\",\n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\"], \n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\n\t\t},\n\t\tsummary: {\n\t\t\tlabel: \"Summary\", value: \"summary\",\n\t\t\tfeatures: [\"facet\", \"satus\", \"label\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\"], \n\t\t\tcontrols: [] \n\t\t},\n\t\tlabel: {\n\t\t\tlabel: \"Label\", value: \"label\",\n\t\t\tfeatures: [\"facet\", \"status\", \"label\", \"summary\"],\n\t\t\tcontrols: []\n\t\t},\n\t\ticon: {\n\t\t\tlabel: \"Snippet\", value: \"icon\",\n\t\t\tfeatures: [\"facet\", \"summary\"],\n\t\t\tcontrols: []\n\t\t}\n\t}\n\treturn defs;\t\n}\n\nPropertyRenderer.prototype.getAvailableFacets = function(){\n\treturn Object.values(this.facets);\n\tvar facets = [];\n\tfacets.push({label: \"Full Page\", value: \"page\"});\n\tfacets.push({label: \"Multiple Lines\", value: \"multiline\"});\n\tfacets.push({label: \"Single Line\", value: \"line\"});\n\tfacets.push({label: \"Summary\", value: \"summary\"});\n\tfacets.push({label: \"Label\", value: \"label\"});\n\tfacets.push({label: \"Snippet\", value: \"icon\"});\n\treturn facets;\n}\n\nPropertyRenderer.prototype.getContentOrientation = function(facet){\n\tif(this.currentFacet() == \"page\" || this.containsPage()){\n\t\treturn \"page\";\n\t}\n\tif(this.currentFacet() == \"line\" || this.currentFacet() == \"multiline\" || this.currentFacet() == \"summary\"){\n\t\treturn \"line\";\n\t}\n\treturn \"label\";\n}\n\n\nPropertyRenderer.prototype.getDefaultFacet = function(){\n\tif(this.cframe && this.cframe.isObject()){\n\t\treturn \"page\";\n\t}\n\treturn \"multiline\";\n}\n\n/*\n * Viewers for specific properties\n */\n\nPropertyRenderer.prototype.hide = function(){\n\tthis.setView(\"hidden\");\n}\n\nPropertyRenderer.prototype.show = function(){\n\tthis.setView(\"full\");\n}\n\nPropertyRenderer.prototype.setView = function(view){\n\tthis.view = view;\n\tthis.redraw();\n}\n\nPropertyRenderer.prototype.getAvailableViewers = function(){\n\tif(this.mode == \"view\"){\n\t\treturn TerminusDashboard.RenderingMap.getAvailablePropertyViewers(this);\t\t\n\t}\n\treturn TerminusDashboard.RenderingMap.getAvailablePropertyEditors(this);\t\t\t\t\n}\n\nPropertyRenderer.prototype.nukeViewer = function(){\n\tthis.viewer.remove();\n}\n\nPropertyRenderer.prototype.containsPage = function(){\n\t//collapsed facets do not show their values\n\tif(this.currentFacet() == \"icon\" || this.currentFacet() == \"label\") return false;\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i].facet == \"page\") {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nPropertyRenderer.prototype.getViewerForProperty = function(ptype){\n\tif(this.mode == \"edit\"){\n\t\treturn new PropertyViewer.HTMLPropertyViewer(this);\n\t}\n\treturn new PropertyViewer.HTMLPropertyViewer(this);\n}\n\nPropertyRenderer.prototype.getPropertyHeaderViewer = function(){\n\treturn new PropertyViewer.HTMLPropertyHeaderViewer();\n}\n\nPropertyRenderer.prototype.getSummary = function(){\n\tvar status = \"ok\";\n\tif(this.isNew()) status = \"new\";\n\telse if(this.isUpdated()) status = \"updated\";\n\tvar ret = {\n\t\tstatus: status,\n\t\tvalcount: this.values.length\n\t};\n\tret.long = ((ret.valcount != 1) ? \"(\" + ret.valcount + \") \" : \"\");\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tvsum = this.values[i].getSummary();\n\t\tret.long += vsum.long;\n\t\tif(i < this.values.length-1) ret.long += \", \";\n\t}\n\treturn ret;\t\n}\n\nPropertyRenderer.prototype.getFeaturesForFacet = function(facet){\n\treturn this.facets[facet].features.concat(this.facets[facet].controls);\n}\n \nPropertyRenderer.prototype.showFeature = function(which){\n\tif(this.features.indexOf(which) == -1 && this.controls.indexOf(which) == -1) {\n\t\treturn false;\n\t}\n\tvar cardcontrols = [\"delete\", \"clone\", \"add\"];\n\tif(cardcontrols.indexOf(which) != -1){\n\t\tif(!this.cardControlAllows(which)) return false;\n\t}\n\tvar updcontrols = [\"update\", \"reset\"];\n\tif(this.hideDisabledControls() && updcontrols.indexOf(which) != -1 ){\n\t\tif(!this.isUpdated()){\n\t\t\treturn false;\n\t\t}\n\t}\n\tif(which == 'hide' && this.view == \"hidden\") return false;\n\tif(which == 'show' && this.view != \"hidden\") return false;\n\tvar fets = this.getFeaturesForFacet(this.facet);\n\treturn (fets.indexOf(which) != -1);\n}\n\nfunction ObjectRenderer(obj, parent, options){\n\tthis.objframe = obj;\n\tthis.parent = parent;\n\tthis.properties = {};\n\tthis.originalProperties = false;\n\tthis.newProperties = [];\n\tthis.renderer_type = \"object\";\n\tthis.options = this.setOptions(options);\n}\n\n//options has to include mode, viewer, facet, controls, features, hide_disabled_controls\n\nObjectRenderer.prototype.setOptions = function(options){\n\treturn TerminusDashboard.RenderingMap.decorateRenderer(options, this);\n}\n\nObjectRenderer.prototype.getOptionsForProperty = function(prop){\n\treturn this.options;\n}\n\nObjectRenderer.prototype.render = function(viewer){\n\tthis.buildPropertyRenderers();\n\tthis.viewer = (viewer ? viewer: this.getViewerForObject());\n\tfor(var prop in this.properties){\n\t\tvar renderedprop = this.properties[prop].render();\n\t\tif(renderedprop && this.showFeature(\"body\")) this.viewer.addRenderedProperty(prop, renderedprop);\n\t}\n\treturn this.viewer.render(this.view);\n}\n\nObjectRenderer.prototype.buildPropertyRenderers = function(){\n\tvar props = this.getPropertiesToRender();\n\tif(this.originalProperties === false) this.originalProperties = props;\n\tvar renders = {};\n\tfor(var j = 0; j<props.length; j++){\n\t\tif(typeof this.properties[props[j]] == \"undefined\"){\n\t\t\trenders[props[j]] = new PropertyRenderer(props[j], this, this.getOptionsForProperty(props[j]));\n\t\t}\n\t\telse {\n\t\t\trenders[props[j]] = this.properties[props[j]];\n\t\t}\n\t\tif(this.newProperties.indexOf(props[j]) != -1) {\n\t\t\trenders[props[j]].setNew(); \n\t\t\trenders[props[j]].mode = \"edit\"; \n\t\t}\n\t}\n\tthis.properties = renders;\n}\n\nObjectRenderer.prototype.subject = function(){\n\tif(this.objframe) return this.objframe.subjid;\n\treturn false;\n}\n\nObjectRenderer.prototype.subjectClass = function(){\n\tif(this.objframe) return this.objframe.cls;\n\treturn false;\n}\n\nObjectRenderer.prototype.getAvailableViewers = function(){\n\t//if(this.mode == \"view\"){\n\t//\treturn RenderingMap.getAvailableObjectViewers(this);\t\t\n\t//}\n\t//return RenderingMap.getAvailableObjectEditors(this);\t\t\t\t\n\treturn [\"html\", \"json\"];\n}\n\nObjectRenderer.prototype.depth = function(){\n\tif(this.parent) return (this.parent.depth() + 1);\n\treturn 0;\n}\n\n\nObjectRenderer.prototype.property = function(){\n\tif(this.parent) return this.parent.property();\n\treturn false;\n}\n\nObjectRenderer.prototype.parentObject = function(){\n\tif(this.parent && this.parent.parent && this.parent.parent.objframe){\n\t\treturn this.parent.parent.objframe;\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.root = function(){\n\tif(this.parent) return false;\n\treturn true;\n}\n\nObjectRenderer.prototype.load = function(link){\n\tvar self = this;\n\tif(this.controller){\n\t\tthis.controller.ui.showDocument(link);\n\t}\n\telse if(this.parent) {\n\t\tthis.parent.load(link);\n\t}\n}\n\nObjectRenderer.prototype.copy = function(nkid){\n\tnkid = (nkid ? nkid : this.objframe);\n\tvar other = new ObjectRenderer(nkid, this.parent, this.options);\n\treturn other;\n}\n\nObjectRenderer.prototype.clone = function(){\n\tif(this.root()){\n\t\tthis.objframe = this.objframe.clone(\"_:\");\n\t\tthis.objframe.newDoc = true;\n\t\tthis.setMode(\"edit\");\n\t}\n\telse {\n\t\tvar nkid = this.objframe.clone(TerminusClient.FrameHelper.genBNID());\n\t\tvar parentobj = this.parentObject();\n\t\tvar prop = this.property();\n\t\tif(parentobj && prop){\n\t\t\tif(typeof parentobj.children[prop] == \"undefined\"){\n\t\t\t\tparentobj.children[prop] = [];\n\t\t\t}\n\t\t\tparentobj.children[prop].push(nkid);\n\t\t\tvar newrend = this.copy(nkid);\n\t\t\tthis.parent.values.push(newrend);\n\t\t}\n\t\tthis.parent.redraw();\n\t}\n}\n\nObjectRenderer.prototype.cancel = function(){\n\tthis.reset();\n\tthis.setMode(\"view\");\n}\n\nObjectRenderer.prototype.save = function(){\n\tif(this.controller){\n\t\tif(this.isNewDocument()){\n\t\t\tvar demandid = this.inputID();\n\t\t\tif(demandid == \"_:\") demandid = \"\";\n\t\t\tthis.controller.createDocument(demandid);\n\t\t}\n\t\telse {\n\t\t\tthis.controller.updateDocument();\n\t\t}\n\t}\n\telse if(this.parent) {\n\t\tthis.parent.save();\n\t}\n}\n\nObjectRenderer.prototype.delete = function(){\n\tvar dval = this.subject();\n\tif(this.controller && this.root()){\n\t\tif(!this.isNewDocument()){\n\t\t\tthis.controller.deleteDocument(dval);\n\t\t}\n\t\tthis.nukeViewer();\n\t}\n\telse {\n\t\tif(this.parent){\n\t\t\tthis.parent.deletePropertyValue(dval);\t\t\n\t\t\tthis.parent.redraw();\n\t\t}\n\t}\n}\n\nObjectRenderer.prototype.reset = function(){\n\tthis.objframe.reset();\n\tvar nprops = {};\n\tfor(var i = 0; i<this.originalProperties.length; i++){\n\t\tvar prop = this.originalProperties[i];\n\t\tif(typeof this.properties[prop] == \"object\"){\n\t\t\tthis.properties[prop].reset();\n\t\t\tnprops[prop] = this.properties[prop];\n\t\t}\n\t}\n\tthis.properties = nprops;\n\tthis.redraw();\n}\n\nObjectRenderer.prototype.deleteProperty = function(prop){\n\tthis.objframe.removeProperty(prop);\n\tdelete(this.properties[prop]);\n\tthis.updated();\n}\n\nObjectRenderer.prototype.addProperty = function(prop){\n\tthis.objframe.addProperty(prop);\n\tthis.updated();\n\tthis.redraw();\n}\n\nObjectRenderer.prototype.addNewProperty = function(prop){\n\tthis.objframe.addProperty(prop);\n\tthis.updated();\n\tthis.newProperties.push(prop);\n\tthis.redraw();\n\tthis.goToProperty(prop);\n}\n\nObjectRenderer.prototype.addPropertyClass = function(prop, cls){\n\tthis.objframe.addProperty(prop, cls);\n\tthis.updated();\n}\n\nObjectRenderer.prototype.changeClass = function(cls){\n\tif(this.parent){\n\t\tthis.parent.addClass(cls);\t\t\n\t\tthis.parent.deletePropertyValue(this.subject());\t\t\n\t}\n}\n\nObjectRenderer.prototype.getClassMeta = function(cls){\n\tvar ctl = this.getController();\n\tif(ctl && ctl.classmeta && ctl.classmeta[cls]){\n\t\treturn ctl.classmeta[cls];\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.getController = function(){\n\tif(this.controller){\n\t\treturn this.controller;\n\t}\n\tif(this.parent && this.parent.parent){\n\t\treturn this.parent.parent.getController();\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.getClient = function(){\n\tif(this.controller){\n\t\treturn this.controller.getClient();\n\t}\n\telse {\n\t\tif(this.parent && this.parent.parent){\n\t\t\treturn(this.parent.parent.getClient())\n\t\t}\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.inputID = function(){\n\tif(this.idDOM){\n\t\treturn this.idDOM.value;\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.isNew = function(){\n\tif(this.new_object){\n\t\treturn true;\n\t}\n\tif(this.isPartOfNewDocument()){\n\t\treturn true;\n\t}\n\tif(this.parent) return this.parent.isNew();\n\treturn false;\n}\n\nObjectRenderer.prototype.setNew = function(){\n\tthis.new_object = true;\n}\n\nObjectRenderer.prototype.isUpdated = function(){\n\tvar i = 0;\n\tfor(var prop in this.properties){\n\t\tif(this.originalProperties[i] != prop) return true;\n\t\tif(this.properties[prop].isUpdated()) return true;\n\t\ti++;\t\t\n\t}\n\tif(i != this.originalProperties.length) return true;\n\treturn false;\n}\n\nObjectRenderer.prototype.childUpdated = function(){\n\tthis.viewer.redrawHeader();\n\tif(this.parent) this.parent.childUpdated();\n}\n\nObjectRenderer.prototype.updated = ObjectRenderer.prototype.childUpdated;\n\nObjectRenderer.prototype.isNewDocument = function(){\n\tif(this.root() && this.objframe.isnew()) return true;\n\treturn false;\n}\n\nObjectRenderer.prototype.isPartOfNewDocument = function(){\n\tif(this.isNewDocument()) return true;\n\tif(this.parent && this.parent.parent){\n\t\treturn this.parent.parent.isPartOfNewDocument();\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.setFacet = function(facet, nocascade){\n\tthis.facet = facet;\n\tif(!nocascade){\n\t\tfor(var prop in this.properties){\n\t\t\tthis.properties[prop].parentFacetChange(facet);\n\t\t}\n\t}\n\tif(this.parent){\n\t\tthis.parent.redraw();\n\t}\n\telse {\n\t\tthis.redraw();\n\t}\n}\n\nObjectRenderer.prototype.getDefaultFacets = function(){\n\tvar defs = {\n\t\tpage: {\n\t\t\tlabel: \"Full Page\", value: \"page\", \n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"body\", \"status\", \"facet\", \"view\", \"viewer\"],\n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"] \n\t\t},\n\t\tline: {\n\t\t\tlabel: \"Single Line\", value: \"line\",\n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"type\", \"body\", \"status\", \"facet\"], \n\t\t\tcontrols: [] \n\t\t},\n\t\tsummary: {\n\t\t\tlabel: \"Summary\", value: \"summary\",\n\t\t\tfeatures: [\"facet\", \"satus\", \"label\", \"type\", \"summary\", \"status\", \"facet\"], \n\t\t\tcontrols: [] \n\t\t},\n\t\tlabel: {\n\t\t\tlabel: \"Label\", value: \"label\",\n\t\t\tfeatures: [\"facet\", \"status\", \"label\"],\n\t\t\tcontrols: []\n\t\t}\n\t}\n\treturn defs;\n}\n\nObjectRenderer.prototype.getAvailableFacets = function(){\n\treturn Object.keys(this.facets);\n}\n\nObjectRenderer.prototype.currentFacet = function(){\n\treturn this.facet;\n}\n\nObjectRenderer.prototype.getDefaultFacet = function(){\n\tif(!this.parent) return \"page\";\n\tvar pfacet = this.parent.currentFacet();\n\tif(pfacet == \"page\"){\n\t\treturn \"page\";\n\t}\n\tif(pfacet == \"multiline\") return \"line\";\n\tif(pfacet == \"line\") return \"summary\";\n\treturn \"label\";\n}\n\nObjectRenderer.prototype.parentFacetChange = function(pfacet){\n\tif(pfacet == \"page\") this.setFacet(\"page\");\n\tif(pfacet == \"multiline\") this.setFacet(\"summary\");\n\tif(pfacet == \"line\") this.setFacet(\"summary\");\n\tif(pfacet == \"summary\") this.setFacet(\"summary\");\n}\n\nObjectRenderer.prototype.getContentOrientation = function(){\n\tif(this.currentFacet() == \"page\"){\n\t\treturn \"page\";\n\t}\n\tif(this.currentFacet() == \"line\"){\n\t\treturn \"line\";\n\t}\n\treturn \"label\";\n}\n\nObjectRenderer.prototype.getLabel = function(){\n\tfor(var prop in this.properties){\n\t\tif(TerminusClient.FrameHelper.getShorthand(prop) == \"rdfs:label\" || prop == \"rdfs:label\"){\n\t\t\tvar prend = this.properties[prop];\n\t\t\tvar vrend = prend.values[0];\n\t\t\tif(vrend){\n\t\t\t\tvar sum = vrend.getSummary();\n\t\t\t\tif(sum.long != \"empty\") return sum.long;\n\t\t\t}\n\t\t}\n\t}\n\tvar s = this.subject();\n\tif(s && s.substring(0, 2) == \"_:\"){\n\t\tvar ty = this.subjectClass();\n\t\tvar sh = TerminusClient.FrameHelper.getShorthand(ty);\n\t\tif(!sh) sh = ty;\n\t\tvar b = sh.split(\":\");\n\t\tif(b.length > 1){\n\t\t\treturn \"New \" + b[1];\n\t\t}\n\t\treturn \"New Object\";\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.getSummary = function(){\n\tvar ret = { status: \"ok\" };\n\tif(this.isUpdated()) ret.status = \"updated\";\n\tif(this.isNew()) ret.status = \"new\";\n\tret.propcount = 0;\n\tfor(var prop in this.properties){\n\t\tret.propcount++;\n\t}\n\tret.long = ret.propcount + \" properties\";\n\treturn ret;\t\n}\n\nObjectRenderer.prototype.getObjectHeaderViewer = function(){\n\treturn this.header_viewer;\n}\n\nObjectRenderer.prototype.getViewerForObject = function(format){\n\tif(format == \"json\"){\n\t\treturn new ObjectViewer.JSONObjectViewer(this);\n\t}\n\treturn new ObjectViewer.HTMLObjectViewer(this);\n}\n\nObjectRenderer.prototype.getFeaturesForFacet = function(facet){\n\treturn this.facets[facet].features.concat(this.facets[facet].controls);\n}\n \nObjectRenderer.prototype.hideDisabledControls = function(){\n\treturn this.hide_disabled_controls;\n}\n\nObjectRenderer.prototype.showFeature = function(which){\n\tif(this.features.indexOf(which) == -1 && this.controls.indexOf(which) == -1) {\n\t\treturn false;\n\t}\n\tvar cardcontrols = [\"delete\", \"clone\", \"add\"];\n\tif(cardcontrols.indexOf(which) != -1){\n\t\tif(!this.cardControlAllows(which)) return false;\n\t}\n\tvar updcontrols = [\"update\", \"reset\"];\n\tif(this.hideDisabledControls() && updcontrols.indexOf(which) != -1 ){\n\t\tif(!this.isUpdated()){\n\t\t\treturn false;\n\t\t}\n\t}\n\tif(this.isNewDocument() && which == \"clone\") return false;\n\tif(which == 'hide' && this.view == \"hidden\") return false;\n\tif(which == 'show' && this.view != \"hidden\") return false;\n\tvar fets = this.getFeaturesForFacet(this.facet);\n\tif (fets.indexOf(which) != -1){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.cardControlAllows = function(action){\n\tif(!this.parent) return true;\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nObjectRenderer.prototype.goToProperty = function(prop){\n\tthis.viewer.goTo(this.subject(), prop);\n}\n\nObjectRenderer.prototype.setMode = function(mode){\n\tthis.mode = mode;\n\tfor(var prop in this.properties){\n\t\tthis.properties[prop].setMode(mode);\n\t}\n\tthis.viewer.redraw();\n}\n\nObjectRenderer.prototype.currentViewer = function(){return this.viewerType;}\n\n\nObjectRenderer.prototype.setViewer = function(viewer){\n\tvar nviewer = this.getViewerForObject(viewer);\n\tif(nviewer){\n\t\tthis.viewerType = viewer;\n\t\tthis.viewer = nviewer;\n\t\tthis.viewer.redraw();\n\t}\n}\n\n\nObjectRenderer.prototype.setView = function(view){\n\tvar views = {\n\t\t\"full\": {\n\t\t\t\n\t\t},\n\t\t\"hidden\": {\n\t\t\t\n\t\t}\n\t};\n\tthis.view = view;\n\tthis.viewer.redraw();\n}\n\n\nObjectRenderer.prototype.hide = function(){\n\tthis.setView(\"hidden\");\n}\n\nObjectRenderer.prototype.show = function(){\n\tthis.setView(\"full\");\n}\n\nObjectRenderer.prototype.nukeViewer = function(){\n\tthis.viewer.remove();\n}\n\nObjectRenderer.prototype.getViewableProperties = function(){\n\treturn this.objframe.getFilledPropertyList();\t\n}\n\nObjectRenderer.prototype.getAddableProperties = function(){\n\tvar props = this.objframe.getMissingPropertyList();\t\n\treturn props;\n}\n\nObjectRenderer.prototype.getPropertiesToRender = function(options){\n\tvar sort = this.standardSort;\n\tvar filter = function(){return true};\n\tif(options && options.map && options.map.patterns){\n\t\t/*for(var i = 0; i<options.map.patterns.length; i++){\n\t\t\tif(this.objframe.matchesPattern({property: this.property(), action: \"sort\"}, options.map.patterns[i])){\n\t\t\t\tsort = options.map.patterns[i].sort;\n\t\t\t}\n\t\t\tif(this.objframe.matchesPattern({property: this.property(), action: \"filter\"}, options.map.patterns[i])){\n\t\t\t\tfilter = options.map.patterns[i].filter;\n\t\t\t}\n\t\t}*/\n\t}\n\treturn sort(this.objframe, filter);\n}\n\nObjectRenderer.prototype.standardSort = function(objframe, filter){\n\tvar sorted = [];\n\tvar rdft = TerminusClient.FrameHelper.getStdURL(\"rdfs\", \"label\");\n\tif(objframe.dataframes[rdft] && filter(objframe, rdft, objframe.dataframes[rdft])){\n\t\tsorted.push(rdft);\n\t}\n\tvar rdfc = TerminusClient.FrameHelper.getStdURL(\"rdfs\", \"comment\");\n\tif(objframe.dataframes[rdfc]){\n\t\tsorted.push(rdfc);\n\t}\n\tfor(var prop in objframe.dataframes){\n\t\tif(sorted.indexOf(prop) == -1) sorted.push(prop);\n\t}\n\tfor(var prop in objframe.children){\n\t\tif(sorted.indexOf(prop) == -1) sorted.push(prop);\t\t\n\t}\n\treturn sorted;\n}\n\n\nObjectRenderer.prototype.redraw = function(){\n\tthis.viewer.clear();\n\tthis.render(this.viewer);\n}\n\nObjectRenderer.prototype.extractLDO = function(extracts){\n\textracts[\"rdf:type\"] = this.objframe.cls;\n\tvar full = {};\n\tfull[this.subject()] = extracts;\n\treturn full;\t\n}\n\nObjectRenderer.prototype.extractJSONLD = function(extracts){\n\textracts[\"@type\"] = this.objframe.cls;\n\tif(this.subject() != \"_:\")\textracts[\"@id\"] = this.subject();\n\tif(this.objframe.jsonld_context) extracts['@context'] = this.objframe.jsonld_context;\n\treturn extracts;\n}\n\nObjectRenderer.prototype.extract = function(){\n\tvar extracts = {};\n\tfor(var i in this.properties){\n\t\tvar extracted = this.properties[i].extract();\n\t\tif(!TerminusClient.FrameHelper.empty(extracted)){\n\t\t\textracts[i] = extracted;\n\t\t}\n\t}\n\tif(TerminusClient.FrameHelper.empty(extracts) && this.parent){\n\t\treturn false;\n\t}\n\telse {\n\t\tvar ext = this.extractJSONLD(extracts);\n\t\treturn ext;\n\t\t//return this.extractLDO(extracts);\n\t}\n}\n\nmodule.exports={ObjectRenderer,PropertyRenderer}\n\n","\n\nfunction HTMLStringEditor(options){\n\tthis.css = ((options && options.css) ? \"terminus-literal-value \" + options.css : \"terminus-literal-value\");\n\tthis.options = options; \n}\n\nHTMLStringEditor.prototype.getDOM = function(renderer, dataviewer){\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\n\tty = (ty ? ty : renderer.frame.getType());\n\tvar value = renderer.value();\n\tvar big = ((this.options && typeof this.options.big != \"undefined\") ? this.options.big : this.isBigType(ty, value));\n\tif(big){\n\t\tvar input = document.createElement(\"textarea\");\n\t\tthis.css += \" terminus-literal-big-value\";\t\t\n\t}\n\telse {\n\t\tvar size = ((this.options && typeof this.options.size != \"undefined\") ? this.options.size : this.getTypeSize(ty, value));\n\t\tvar input = document.createElement(\"input\");\n\t\tinput.setAttribute('type', \"text\");\n\t\tinput.setAttribute('size', size);\n\t}\n\tinput.setAttribute('class', this.css);\n\tinput.value = value;\n\tvar self = this;\n\tinput.addEventListener(\"input\", function(){\n\t\trenderer.set(this.value);\n\t});\n\treturn input;\n}\n\nHTMLStringEditor.prototype.isBigType = function(ty, value){\n\tif(value && value.length && value.length > 100) return true;\n\tvar longs = [\"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\", \"xsd:base64Binary\", \"xdd:html\", \"xdd:json\", \"rdf:XMLLiteral\"];\n\tif(longs.indexOf(ty) == -1) return false;\n\treturn true;\n}\n\nHTMLStringEditor.prototype.getTypeSize = function(ty, value){\n\tif(value && value.length && value.length > 40) return 80;\n\tvar bigs = [\"xdd:url\", \"xdd:coordinate\", \"xsd:anyURI\"];\n\tvar smalls = [\"xsd:gYearMonth\", \"xdd:gYearRange\", \"xsd:decimal\", \"xsd:float\", \"xsd:time\", \"xsd:date\", \n\t\t\"xsd:dateTimeStamp\",\"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:duration\", \"xsd:yearMonthDuration\", \"xsd:dayTimeDuration\", \n\t\t\"xsd:nonNegativeInteger\", \"xsd:positiveInteger\", \"xsd:negativeInteger\",\t\"xsd:nonPositiveInteger\", \"xsd:integer\",\"xsd:unsignedInt\"];\n\tvar tinys = [\"xsd:boolean\", \"xsd:gYear\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:byte\", \"xsd:short\", \"xsd:unsignedByte\", \"xsd:language\"];\n\tif(bigs.indexOf(ty) != -1) return 80;\n\tif(smalls.indexOf(ty) != -1) return 16;\n\tif(tinys.indexOf(ty) != -1) return 8;\n\treturn 32;\n}\n\nmodule.exports={HTMLStringEditor}\n\n\n","function HTMLBooleanViewer(options){\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n}\n\nHTMLBooleanViewer.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', this.css);\n\tif(value){\n\t\tvar vallab = document.createTextNode(value);\n\t\tinput.appendChild(vallab);\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLBooleanViewer}\n\n","function HTMLBooleanEditor(options){\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n}\n\nHTMLBooleanEditor.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar input = document.createElement(\"input\");\n\tinput.setAttribute('type', \"checkbox\");\n\tif(value){\n\t\tinput.setAttribute(\"checked\", \"checked\");\t\t\t\t\t\n\t}\n\tinput.addEventListener(\"change\", function(){\n\t\tif(value){\n\t\t\trenderer.set(\"\");\n\t\t}\n\t\telse {\n\t\t\trenderer.set(\"true\");\n\t\t}\n\t});\n\treturn input;\n}\n\nmodule.exports={HTMLBooleanEditor}\n\n","function HTMLChoiceViewer(options){};\n\nHTMLChoiceViewer.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-choice-value\");\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tvar els = renderer.frame.frame.elements;\n\t\tfor(var i = 0; i<els.length; i++){\n\t\t\tif(els[i].class == value){\n\t\t\t\tif(els[i].label && els[i].label[\"@value\"]){\n\t\t\t\t\tvar lab = els[i].label[\"@value\"];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlab = TerminusClient.FrameHelper.labelFromURL(value);\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tinput.appendChild(document.createTextNode(lab));\n\t\t\t\tcontinue;\n\t\t\t}\t\t\t\t\n\t\t}\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLChoiceViewer}\n\n\n","const HTMLFrameHelper = require('../HTMLFrameHelper');\n\nfunction HTMLChoiceEditor(options){};\n\nHTMLChoiceEditor.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar optInput = document.createElement(\"select\");\n\toptInput.setAttribute('class', \"terminus-choice-picker\");\n\tvar foptions = renderer.frame.getChoiceOptions();\n\tfoptions.unshift({ value: \"\", label: \"Not Specified\"});\n\tvar callback = function(val){\n\t\trenderer.set(val);\n\t}\n\tvar sel = HTMLFrameHelper.getSelectionControl(\"select-choice\", foptions, value, callback);\n\treturn sel;\n}\n\nmodule.exports={HTMLChoiceEditor}\n\n","\nfunction HTMLCoordinateViewer(options){\n\tthis.inputs = [];\n}\n\nHTMLCoordinateViewer.prototype.getDOM = function(renderer, dataviewer){\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\n\tty = (ty ? ty : renderer.frame.getType());\n\tvar value = renderer.value();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-coordinate\");\n\tinput.setAttribute('data-value', value);\n\ttry {\n\t\tvar parsed = (value ? JSON.parse(value) : false);\n\t}\n\tcatch(e){\n\t\trenderer.badData(ty + \" failed to parse as json\", e.toString());\n\t\tvar parsed = false;\n\t\tvalue = false;\n\t}\n\tif(value){\n\t\tif(ty == \"xdd:coordinate\"){\n\t\t\tparsed = [parsed];\n\t\t}\n\t\tfor(var i = 0; i < parsed.length; i++){\n\t\t\tvar lldom = document.createElement(\"span\");\n\t\t\tlldom.setAttribute(\"class\", \"latlong\");\n\t\t\tlldom.appendChild(document.createTextNode(\"Latitude: \"));\n\t\t\tlldom.appendChild(document.createTextNode(parsed[i][0] + \" \" + \" \"));\n\t\t\tlldom.appendChild(document.createTextNode(\"Longitude: \"));\n\t\t\tlldom.appendChild(document.createTextNode(parsed[i][1] + \" \" ));\n\t\t\tinput.appendChild(lldom);\n\t\t}\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLCoordinateViewer}\n\n","function HTMLCoordinateEditor(options){\n\tthis.inputs = [];\n}\n\nHTMLCoordinateEditor.prototype.getInputDOMs = function(lat, long, change){\n\tvar latdom = document.createElement(\"input\");\n\tlatdom.setAttribute(\"type\", \"text\");\n\tlatdom.value = lat;\n\tvar longdom = document.createElement(\"input\");\n\tlongdom.setAttribute(\"type\", \"text\");\n\tlongdom.value = long;\n\tlatdom.addEventListener(\"change\", change);\n\tlongdom.addEventListener(\"change\", change);\n\treturn [latdom, longdom];\n}\n\nHTMLCoordinateEditor.prototype.getLatLongDOM = function(lat, long, ty, index, parent){\n\tvar lldom = document.createElement(\"span\");\n\tlldom.setAttribute(\"class\", \"terminus-lat-long\");\n\tvar firstcol = document.createElement(\"span\");\n\tfirstcol.setAttribute(\"class\", \"terminus-lat-long-col\");\n\tlldom.appendChild(firstcol);\n\tif(index > 2 || (ty == \"xdd:coordinatePolyline\" && index > 1)){\n\t\tvar delbut = document.createElement(\"button\");\n\t\tdelbut.setAttribute(\"class\", \"delete-coordinate\");\n\t\tdelbut.appendChild(document.createTextNode(\"Remove\"));\n\t\tdelbut.addEventListener(\"click\", function(){\n\t\t\tlong.value = \"\";\n\t\t\tlat.value = \"\";\n\t\t\tparent.removeChild(lldom);\n\t\t});\n\t\tfirstcol.appendChild(delbut);\n\t}\n\tlldom.appendChild(document.createTextNode(\"Latitude: \"));\n\tlldom.appendChild(lat);\n\tlldom.appendChild(document.createTextNode(\" \" + \" \"));\n\tlldom.appendChild(document.createTextNode(\"  Longitude: \"));\n\tlldom.appendChild(long);\n\tlldom.appendChild(document.createTextNode(\"  \" ));\n\treturn lldom;\n}\n\n\nHTMLCoordinateEditor.prototype.getDOM = function(renderer, dataviewer){\n\tvar ty = renderer.frame.getTypeShorthand();\n\tvar value = renderer.value();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-coordinate\");\n\tinput.setAttribute('data-value', value);\n\ttry {\n\t\tvar parsed = (value ? JSON.parse(value) : false);\n\t}\n\tcatch(e){\n\t\trenderer.badData(ty + \" failed to parse as json\", e.toString());\n\t\tvar parsed = false;\n\t\tvalue = false;\n\t}\n\tvar self = this;\n\tvar updateValueFromForm = function(){\n\t\tvar vals = [];\n\t\tfor(var i = 0; i<self.inputs.length; i++){\n\t\t\tif(self.inputs[i][0].value && self.inputs[i][1].value){\n\t\t\t\tvar val = \"[\" + self.inputs[i][0].value + \",\" + self.inputs[i][1].value + \"]\";\n\t\t\t\tvals.push(val);\n\t\t\t}\n\t\t}\n\t\tif(vals.length == 0){\n\t\t\trenderer.set(\"\");\n\t\t}\n\t\telse if(ty == \"xdd:coordinate\"){\n\t\t\trenderer.set(vals[0]);\n\t\t}\n\t\telse {\n\t\t\tvar op = \"[\";\n\t\t\tfor(var i = 0; i<vals.length; i++){\n\t\t\t\top += vals[i];\n\t\t\t\tif(i+1 < vals.length) op += \",\";\n\t\t\t}\n\t\t\top += \"]\";\n\t\t\trenderer.set(op);\n\t\t}\n\t};\n\tif(!parsed){\n\t\tif(ty == \"xdd:coordinate\") parsed = [\"\",\"\"];\n\t\telse {\n\t\t\tparsed = [[\"\",\"\"],[\"\",\"\"]];\n\t\t\tif(ty == \"xdd:coordinatePolygon\") parsed.push([\"\",\"\"]);\n\t\t}\n\t}\n\tif(ty == \"xdd:coordinate\"){\n\t\tparsed = [parsed];\n\t}\n\tfor(var i = 0; i < parsed.length; i++){\n\t\tthis.inputs.push(this.getInputDOMs(parsed[i][0], parsed[i][1], updateValueFromForm))\n\t}\n\tvar lldoms = document.createElement(\"span\");\n\tfor(var i = 0; i < this.inputs.length; i++){\n\t\tvar lldom = this.getLatLongDOM(this.inputs[i][0], this.inputs[i][1], ty, i, lldoms);\n\t\tlldoms.appendChild(lldom);\n\t}\n\tinput.appendChild(lldoms);\n\tvar self = this;\n\tif(ty != \"xdd:coordinate\"){\n\t\tvar butspan = document.createElement(\"span\");\n\t\tbutspan.setAttribute(\"class\", \"terminus-add-coordinate\")\n\t\tvar addbut = document.createElement(\"button\");\n\t\taddbut.setAttribute(\"class\", \"terminus-add-coordinate\");\n\t\taddbut.appendChild(document.createTextNode(\"Add\"));\n\t\taddbut.addEventListener(\"click\", function(){\n\t\t\tvar ipdoms = self.getInputDOMs(\"\", \"\", updateValueFromForm);\n\t\t\tvar lldom = self.getLatLongDOM(ipdoms[0], ipdoms[1], ty, self.inputs.length, lldoms);\n\t\t\tlldoms.appendChild(lldom);\n\t\t\tself.inputs.push(ipdoms);\n\t\t});\n\t\tbutspan.appendChild(addbut);\n\t\tinput.appendChild(butspan);\t\t\t\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLCoordinateEditor}","const DateHelper = require('./DateHelper');\n\nfunction HTMLDateViewer(options){\n\tthis.max = (options && options.max ? options.max : false);\n\tthis.min = (options && options.min ? options.min : false);\n\tthis.allowbce = (options && options.allowbce ? options.allowbce : false);\n\tthis.date_spacer = \"/\";\n\tthis.time_spacer = \":\";\n\tthis.datetime_separator = \", \";\n\tthis.helper = new DateHelper.HTMLDateHelper();\n}\n\nHTMLDateViewer.prototype.getDOM = function(renderer, dataviewer){\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\n\tty = (ty ? ty : renderer.frame.getType());\n\tvar value = renderer.value();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-date\");\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tvar parsed = TerminusClient.FrameHelper.parseDate(ty, value);\n\t\tvar datepart = this.getDateComponentDOM(parsed);\n\t\tvar timepart = this.getTimeComponentDOM(parsed);\n\t\tif(timepart) input.appendChild(timepart);\n\t\tif(timepart && datepart) input.appendChild(document.createTextNode(this.datetime_separator));\n\t\tif(datepart) input.appendChild(datepart);\n\t}\n\treturn input;\n}\n\nHTMLDateViewer.prototype.getTimeComponentDOM = function(parsed, ty){\n\tvar hdom = (parsed.hour ? document.createElement(\"span\") : false);\n\tif(hdom){\n\t\thdom.setAttribute(\"class\", \"terminus-time-hour\");\n\t\thdom.appendChild(document.createTextNode(parsed.hour));\n\t}\n\tvar mdom = (typeof parsed.minute != \"undefined\" ? document.createElement(\"span\") : false);\n\tif(mdom){\n\t\tmdom.setAttribute(\"class\", \"terminus-time-minute\");\n\t\tvar mlab = (parsed.minute < 10 ? parsed.minute : parsed.minute);\n\t\tmdom.appendChild(document.createTextNode(mlab));\n\t}\n\tvar sdom = (typeof parsed.second != \"undefined\" ? document.createElement(\"span\") : false);\n\tif(sdom){\n\t\tsdom.setAttribute(\"class\", \"terminus-time-second\");\n\t\tvar slab = (parsed.second < 10 ? parsed.second : parsed.second);\n\t\tsdom.appendChild(document.createTextNode(slab));\n\t}\n\tvar tz = (parsed.timezone ? document.createElement(\"span\") : false);\n\tif(tz){\n\t\tsdom.setAttribute(\"class\", \"terminus-time-timezone\");\n\t\tsdom.appendChild(document.createTextNode(parsed.timezone));\n\t}\n\tif(hdom || mdom || sdom || tz){\n\t\tvar dadom = document.createElement(\"span\");\n\t\tdadom.setAttribute(\"class\", \"terminus-time-components time-\"+ty);\n\t\tif(hdom) dadom.appendChild(hdom); \n\t\tif(mdom) {\n\t\t\tif(hdom) dadom.appendChild(document.createTextNode(this.time_spacer));\n\t\t\tdadom.appendChild(mdom); \n\t\t}\n\t\tif(sdom) {\n\t\t\tif(mdom || hdom) dadom.appendChild(document.createTextNode(this.time_spacer));\n\t\t\tdadom.appendChild(sdom); \n\t\t}\n\t\tif(tz){\n\t\t\tdadom.appendChild(document.createTextNode(\" (Timezone: \")); \n\t\t\tdadom.appendChild(sdom); \n\t\t\tdadom.appendChild(document.createTextNode(\")\")); \t\t\t\n\t\t}\n\t\treturn dadom;\n\t}\n\treturn false;\n}\n\nHTMLDateViewer.prototype.getDateComponentDOM = function(parsed, ty){\n\tvar ydom = (parsed.year ? document.createElement(\"span\") : false);\n\tif(ydom){\n\t\tydom.setAttribute(\"class\", \"terminus-date-year\");\n\t\tydom.appendChild(document.createTextNode(parsed.year));\n\t}\n\tvar mdom = (parsed.month ? document.createElement(\"span\") : false);\n\tif(mdom){\n\t\tmdom.setAttribute(\"class\", \"terminus-date-month\");\n\t\tmdom.appendChild(document.createTextNode(this.helper.getMonthName(parsed.month)));\t\t\n\t}\n\tvar ddom = (parsed.day ? document.createElement(\"span\") : false );\n\tif(ddom){\n\t\tddom.setAttribute(\"class\", \"terminus-date-day\");\n\t\tddom.appendChild(document.createTextNode(parsed.day));\t\t\n\t}\n\tif(ydom || mdom || ddom){\n\t\tvar dadom = document.createElement(\"span\");\n\t\tif(ddom) dadom.appendChild(ddom); \n\t\tif(mdom) {\n\t\t\tif(ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\n\t\t\tdadom.appendChild(mdom); \n\t\t}\n\t\tif(ydom) {\n\t\t\tif(mdom || ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\n\t\t\tdadom.appendChild(ydom); \n\t\t}\n\t\treturn dadom;\n\t}\n\treturn false;\n}\n\nmodule.exports={HTMLDateViewer}","const DateHelper = require('./DateHelper');\n\nfunction HTMLDateEditor(options){\n\tthis.max = (options && options.max ? options.max : false);\n\tthis.min = (options && options.min ? options.min : false);\n\tthis.allowbce = (options && options.allowbce ? options.allowbce : false);\n\tthis.date_spacer = \"/\";\n\tthis.time_spacer = \":\";\n\tthis.datetime_separator = \", \";\n\tthis.helper = new DateHelper.HTMLDateHelper();\n}\n\nHTMLDateEditor.prototype.getDOM = function(renderer, dataviewer){\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\n\tty = (ty ? ty : renderer.frame.getType())\n\tvar value = renderer.value();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-date\");\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tthis.parsed = TerminusClient.FrameHelper.parseDate(ty, value);\n\t}\n\telse this.parsed = {};\n\tvar datepart = this.getDateComponentDOM(this.parsed, ty, renderer);\n\tvar timepart = this.getTimeComponentDOM(this.parsed, ty, renderer);\n\tif(timepart) input.appendChild(timepart);\n\tif(timepart && datepart) input.appendChild(document.createTextNode(this.datetime_separator));\n\tif(datepart) input.appendChild(datepart);\n\treturn input;\n}\n\nHTMLDateEditor.prototype.set = function(part, val, renderer, ty){\n\tthis.parsed[part] = val;\n\tvar xsd = TerminusClient.FrameHelper.xsdFromParsed(this.parsed, ty);\n\tif(xsd){\n\t\trenderer.set(xsd);\n\t}\n}\n\nHTMLDateEditor.prototype.getTimeComponentDOM = function(parsed, ty, renderer){\n\tif([\"xsd:dateTime\", \"xsd:dateTimeStamp\", \"xsd:time\"].indexOf(ty) == -1){\n\t\treturn false;\n\t}\n\tvar self = this;\n\tvar hdom = document.createElement(\"input\");\n\thdom.setAttribute(\"class\", \"terminus-hour-input terminus-hour-\"+ty);\n\thdom.setAttribute(\"size\", 2);\n\thdom.setAttribute(\"placeholder\", \"HH\");\n\thdom.value = (parsed.hour ? parsed.hour : \"\");\n\thdom.addEventListener(\"input\", function(){\n\t\tself.set(\"hour\", this.value, renderer, ty);\n\t});\n\tvar mdom = document.createElement(\"input\");\n\tmdom.setAttribute(\"class\", \"terminus-minute-input terminus-minute-\"+ty);\n\tmdom.setAttribute(\"size\", 2);\n\tmdom.setAttribute(\"placeholder\", \"MM\");\n\tmdom.value = (parsed.minute ? parsed.minute: \"\");\n\tmdom.addEventListener(\"input\", function(){\n\t\tself.set(\"minute\", this.value, renderer, ty);\n\t});\n\tvar sdom = document.createElement(\"input\");\n\tsdom.setAttribute(\"class\", \"terminus-second-input terminus-second-\"+ty);\n\tsdom.setAttribute(\"size\", 8);\n\tsdom.setAttribute(\"placeholder\", \"SS.sss...\");\n\tsdom.value = (parsed.second ? parsed.second: \"\");\n\tsdom.addEventListener(\"input\", function(){\n\t\tself.set(\"second\", this.value, renderer, ty);\n\t})\n\tvar tdom = document.createElement(\"span\");\n\ttdom.appendChild(hdom);\n\ttdom.appendChild(document.createTextNode(this.time_spacer));\n\ttdom.appendChild(mdom);\n\ttdom.appendChild(document.createTextNode(this.time_spacer));\n\ttdom.appendChild(sdom);\n\treturn tdom;\n}\n\nHTMLDateEditor.prototype.getDateComponentDOM = function(parsed, ty, renderer){\n\tvar self = this;\n\tif([\"xsd:date\", \"xsd:dateTime\", \"xsd:gYear\", \"xsd:gYearMonth\", \"xsd:dateTimeStamp\"].indexOf(ty) != -1){\n\t\tvar ydom = document.createElement(\"input\");\n\t\tydom.setAttribute(\"class\", \"terminus-year-input terminus-year-\"+ty);\n\t\tydom.setAttribute(\"size\", 6);\n\t\tydom.setAttribute(\"placeholder\", \"YYYY\");\n\t\tydom.value = (parsed.year ? parsed.year : \"\");\n\t\tydom.addEventListener(\"input\", function(){\n\t\t\tself.set(\"year\", this.value, renderer, ty);\n\t\t})\n\t}\n\tif([\"xsd:date\", \"xsd:dateTime\", \"xsd:gYearMonth\", \"xsd:dateTimeStamp\", \"xsd:gMonth\", \"xsd:gMonthDay\"].indexOf(ty) != -1){\n\t\tvar mdom = document.createElement(\"select\");\n\t\tmdom.setAttribute(\"class\", \"terminus-month-input terminus-month-\"+ty);\n\t\tfor(var i = 0; i<this.helper.months.length; i++){\n\t\t\tvar opdom = document.createElement(\"option\");\n\t\t\topdom.value = i+1;\n\t\t\topdom.appendChild(document.createTextNode(this.helper.months[i]));\n\t\t\tif(parsed.month && parsed.month == i+1){\n\t\t\t\topdom.selected = true;\n\t\t\t}\n\t\t\tmdom.appendChild(opdom);\n\t\t}\n\t\tmdom.addEventListener(\"change\", function(){\n\t\t\tself.set(\"month\", this.value, renderer, ty);\n\t\t})\n\t}\t\n\tif([\"xsd:date\", \"xsd:dateTime\", \"xsd:dateTimeStamp\", \"xsd:gDay\", \"xsd:gMonthDay\"].indexOf(ty) != -1){\n\t\tvar ddom = document.createElement(\"input\");\n\t\tddom.setAttribute(\"class\", \"terminus-day-input terminus-day-\"+ty);\n\t\tddom.setAttribute(\"size\", 2);\n\t\tddom.setAttribute(\"placeholder\", \"DD\");\n\t\tddom.value = (parsed.day ? parsed.day : \"\");\t\n\t\tddom.addEventListener(\"input\", function(){\n\t\t\tself.set(\"day\", this.value, renderer, ty);\n\t\t})\n\t}\t\n\tif(ydom || mdom || ddom){\n\t\tvar dadom = document.createElement(\"span\");\n\t\tif(ddom) dadom.appendChild(ddom); \n\t\tif(mdom) {\n\t\t\tif(ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\n\t\t\tdadom.appendChild(mdom); \n\t\t}\n\t\tif(ydom) {\n\t\t\tif(mdom || ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\n\t\t\tdadom.appendChild(ydom); \n\t\t}\n\t\treturn dadom;\n\t}\n\treturn false;\n}\n\nmodule.exports={HTMLDateEditor}","function HTMLEntityViewer(options){}\nHTMLEntityViewer.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar value = TerminusClient.FrameHelper.unshorten(value);\n\tvar holder = document.createElement(\"span\");\n\tholder.setAttribute(\"class\", \"terminus-literal-value terminus-entity-reference-value\");\n\tvar self = this;\n\tif(this.holder){\n\t\treturn this.holder;\n\t}\n\tif(value){\n\t\tvar dom = this.getEntityViewHTML(value, renderer, dataviewer);\t\t\n\t\tholder.appendChild(dom);\n\t}\n\treturn holder;\n}\n\nHTMLEntityViewer.prototype.getEntityViewHTML = function(value, renderer, dataviewer){\n\tvar span = document.createElement(\"span\");\n\tvar self = this;\n\tspan.setAttribute(\"class\", \"terminus-internal-link\");\n\tspan.appendChild(dataviewer.internalLink(value));\n\tif(controller = renderer.getController()){\n\t\tcontroller.getInstanceMeta(value).then(function(response){\n\t\t\tvar lab = self.getEntityLabel(value, response, dataviewer);\n\t\t\tif(lab){ \n\t\t\t\tTerminusClient.FrameHelper.removeChildren(span);\n\t\t\t\tspan.appendChild(lab);\n\t\t\t}\t\n\t\t});\n\t}\n\treturn span;\n}\n\nHTMLEntityViewer.prototype.getEntityLabel = function(url, response, dv){\n\tvar nspan = document.createElement(\"span\");\n\tif(response && typeof response.InstanceLabel == \"object\" && response.InstanceLabel[\"@value\"]){\n\t\tnspan.appendChild(dv.internalLink(url, response.InstanceLabel[\"@value\"]));\n\t\tvar tit = url + \" Type: \" + response.InstanceType;\n\t\tif(typeof response.InstanceComment == \"object\" && response.InstanceComment[\"@value\"]){\n\t\t\ttit += \" \" + response.InstanceComment[\"@value\"];\n\t\t}\n\t\tnspan.setAttribute(\"title\", tit);\n\t\treturn nspan;\n\t}\n\treturn false;\n}\n\nmodule.exports={HTMLEntityViewer}","function HTMLEntityEditor(options){}\nHTMLEntityEditor.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar input = document.createElement(\"input\");\n\tinput.setAttribute(\"class\", \"terminus-literal-value terminus-entity-reference-value\");\n\tinput.setAttribute(\"type\", \"text\");\n\tinput.setAttribute('size', 80);\n\tinput.value = value;\n\tvar self = this;\n\tinput.addEventListener(\"change\", function(){\n\t\tvar url = this.value;\n\t\tif(url.indexOf(\"/\") == -1 && url.indexOf(\":\") == -1){\n\t\t\turl = \"doc:\" + url;\n\t\t}\n\t\trenderer.set(url);\n\t});\n\treturn input;\n}\n\nmodule.exports={HTMLEntityEditor}","function HTMLImageViewer(options){}\nHTMLImageViewer.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\n\tty = (ty ? ty : renderer.frame.getType());\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-image-value\");\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tvar img = document.createElement(\"a\");\n\t\timg.setAttribute('src', value);\n\t\tinput.appendChild(img);\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLImageViewer}\n\n\n","\n\nfunction HTMLImageEditor(options){}\nHTMLImageEditor.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\n\tty = (ty ? ty : renderer.frame.getType());\n\tif(ty == \"xsd:base64Binary\"){\n\t\tvar input = document.createElement(\"textarea\");\n\t\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-b64image-value\");\n\t\tinput.value = value;\n\t\tinput.addEventListener(\"change\", function(){\n\t\t\trenderer.set(this.value);\n\t\t});\n\t\treturn input;\n\t}\n\treturn false;\n}\n\nmodule.exports={HTMLImageEditor}","function HTMLLinkViewer(options){\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n}\n\nHTMLLinkViewer.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', this.css);\n\tinput.setAttribute('size', 80);\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tvar a = document.createElement(\"a\");\n\t\ta.setAttribute('href', value);\n\t\ta.appendChild(document.createTextNode(value));\n\t\tinput.appendChild(a);\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLLinkViewer}\n\n","function HTMLNumberViewer(options){\n\tthis.commas = (options && options.commas ? options.commas : true);\n}\n\nHTMLNumberViewer.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tif(value === 0) value = \"0\";\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', 'terminus-number-value terminus-literal-value');\n\tinput.setAttribute('data-value', value);\n\tvalue = (this.commas ? TerminusClient.FrameHelper.numberWithCommas(value) : value);\n\tinput.appendChild(document.createTextNode(value));\n\treturn input;\n}\n\nmodule.exports={HTMLNumberViewer}\n","function HTMLRangeViewer(options){\n\tthis.commas = (options && options.commas ? options.commas : true);\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n\tthis.delimiter = (options && options.delimiter ? options.delimiter : false);\n}\n\nHTMLRangeViewer.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar vals = TerminusClient.FrameHelper.parseRangeValue(value, this.delimiter);\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", this.css);\n\tvar rvals = document.createElement(\"span\");\n\trvals.setAttribute(\"class\", \"terminus-range-value-left\");\n\tvar svals = document.createElement(\"span\");\n\tsvals.setAttribute(\"class\", \"terminus-range-value-right\");\n\tvar x = (this.useCommas(renderer) ? TerminusClient.FrameHelper.numberWithCommas(vals[0]) : vals[0]);\n\tvar tnode = document.createTextNode(x);\n\trvals.appendChild(tnode);\n\td.appendChild(rvals);\t\n\tif(vals.length == 2){\n\t\td.appendChild(getRangeSymbolDOM());\n\t\tvar x2 = (this.useCommas(renderer) ? TerminusClient.FrameHelper.numberWithCommas(vals[1]) : vals[1]);\n\t\tvar t2node = document.createTextNode(x2);\n\t\tsvals.appendChild(t2node);\n\t\td.appendChild(svals);\t\n\t}\n\treturn d;\n}\n\nfunction useCommas(renderer){\n\tif(in_array(renderer.frame.getTypeShorthand(), array(\"xdd:gYearRange\", \"xdd:dateRange\"))) return false;\n\treturn this.commas;\n}\n\nfunction getRangeSymbolDOM(){\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", \"terminus-range-indicator\");\n\td.setAttribute(\"title\", \"The value is uncertain, it lies somewhere in this range\");\n\td.appendChild(document.createTextNode(\" ... \"));\n\treturn d;\n}\n\nmodule.exports={HTMLRangeViewer}\n","function HTMLRangeEditor(options){\n\tthis.commas = (options && options.commas ? options.commas : true);\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n\tthis.delimiter = (options && options.delimiter ? options.delimiter : false);\n}\n\nHTMLRangeEditor.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar vals = TerminusClient.FrameHelper.parseRangeValue(value, this.delimiter);\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", this.css);\n\tvar rvals = document.createElement(\"span\");\n\tvar svals = document.createElement(\"span\");\n\tvar data1 = (vals.length > 0 ? vals[0] : \"\");\n\tvar data2 = (vals.length > 1 ? vals[1] : \"\");\n\tvar firstip = document.createElement(\"input\");\n\tfirstip.setAttribute('type', \"text\");\n\tfirstip.setAttribute('size', 16);\n\tif(data1){\n\t\tfirstip.value = data1;\n\t}\n\tvar secondip = document.createElement(\"input\");\n\tsecondip.setAttribute('type', \"text\");\n\tsecondip.setAttribute('size', 16);\n\tif(data2){\n\t\tthis.showing_range = true;\n\t\tsecondip.value = data2;\n\t}\n\trvals.appendChild(firstip);\n\td.appendChild(rvals);\t\n\tif(this.showing_range){\n\t\tsvals.appendChild(getRangeSymbolDOM());\n\t\tsvals.appendChild(secondip);\n\t}\n\td.appendChild(svals);\t\n\tvar but = document.createElement(\"button\");\n\tbut.setAttribute(\"class\", \"terminus-change-range\");\n\tvar txt = this.showing_range ? \"Change to Simple Value\" : \"Change to Uncertain Range\";\n\tbut.appendChild(document.createTextNode(txt));\n\td.appendChild(but);\t\n\tvar self = this;\n\tbut.addEventListener(\"click\", function(){\n\t\tif(self.showing_range){\n\t\t\tself.showing_range = false;\n\t\t\tsecondip.value = \"\";\t\t\t\t\n\t\t\tTerminusClient.FrameHelper.removeChildren(svals);\n\t\t}\n\t\telse {\n\t\t\tself.showing_range = true;\n\t\t\tsecondip.value = \"\";\t\t\t\t\n\t\t\tsvals.appendChild(getRangeSymbolDOM());\n\t\t\tsvals.appendChild(secondip);\n\t\t}\n\t\tvar txt = self.showing_range ? \"Change to Simple Value\" : \"Change to Uncertain Range\";\n\t\tbut.innerText = txt;\n\t\tchangeHandler();\n\t});\n\tvar changeHandler = function(){\n\t\tif(self.showing_range && secondip.value){\n\t\t\tif(firstip.value) renderer.set(\"[\" + firstip.value + \",\" + secondip.value + \"]\");\t\t\t\t\n\t\t\telse renderer.set(secondip.value);\t\t\t\t\n\t\t}\n\t\telse {\n\t\t\trenderer.set(firstip.value);\n\t\t}\n\t}\n\tfirstip.addEventListener(\"change\", changeHandler);\n\tsecondip.addEventListener(\"change\", changeHandler);\n\treturn d;\n}\n\nfunction getRangeSymbolDOM(){\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", \"terminus-range-indicator\");\n\td.setAttribute(\"title\", \"The value is uncertain, it lies somewhere in this range\");\n\td.appendChild(document.createTextNode(\" ... \"));\n\treturn d;\n}\n\nmodule.exports={HTMLRangeEditor}\n","function SantizedHTMLViewer(options){\n\tthis.css = ((options && options.css) ? \"literal-value \" + options.css : \"literal-value\");\n}\n\nSantizedHTMLViewer.prototype.getDOM = function(renderer, dataviewer){\n\tvar val = renderer.value();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', this.css);\n\tinput.setAttribute('data-value', val);\n\tinput.innerHTML = val;\n\treturn input;\n}\n\nmodule.exports={SantizedHTMLViewer}\n","const GoogleMapHelper = require(\"./GoogleMapHelper\")\n\nfunction GoogleMapEditor(options){}\n\nGoogleMapEditor.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\n\tty = (ty ? ty : renderer.frame.getType())\n\tvar mapcontainer = document.createElement(\"div\");\n\tmapcontainer.setAttribute('class', \"gmap-window gmap-editor\");\n\tvar self = this;\n\tvar ghelper = new GoogleMapHelper();\n\tvar map = ghelper.initMap(mapcontainer, renderer, value, ty);\n    if(ty == \"xdd:coordinate\"){\n\t    google.maps.event.addListener(map, 'click', function(event) {\n\t    \tvar position = event.latLng;\n\t    \tvar coo = \"[\" + position.lat() + \",\" + position.lng() + \"]\";\n\t    \trenderer.set(coo);\n\t        ghelper.clearMarkers();\n\t        var init = {\n\t    \t\tposition: position, \n\t    \t\tmap: map\n\t    \t}\n\t    \tvar marker = new google.maps.Marker(init);\n\t    \tghelper.markers.push(marker);\n\t  \t});\n\t}\n    else {\n    \tgoogle.maps.event.addListener(map, 'click', function(event) {\n        \tvar path = ghelper.polyline.getPath();\n        \tpath.push(event.latLng);\n      \t    var position = event.latLng;\n      \t    ghelper.addMarker(position, map, renderer, '#' + path.getLength(), ty);\n      \t});\n    }\n    return mapcontainer;\n}\n\nmodule.exports={GoogleMapEditor};","const GoogleMapHelper = require(\"./GoogleMapHelper\")\n\nfunction GoogleMapViewer(options){}\n\nGoogleMapViewer.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\n\tty = (ty ? ty : renderer.frame.getType())\n\t\tvar map = document.createElement(\"div\");\n\tmap.setAttribute('class', \"gmap-window gmap-viewer\");\n\tvar self = this;\n\tvar ghelper = new GoogleMapHelper();\n\tghelper.initMap(map, renderer, value, ty);\t\t\n    return map;\n}\n\nmodule.exports={GoogleMapViewer};","function HTMLMarkupEditor(options){}\nHTMLMarkupEditor.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar ty = TerminusClient.FrameHelper.getShorthand(renderer.frame.getType());\n\tty = (ty ? ty : renderer.frame.getType());\n\tvar input = document.createElement(\"div\");\n\tinput.setAttribute('class', \"html-wysiwyg\");\n\tvar inner = document.createElement(\"span\");\n\tinner.setAttribute('class', \"html-literal literal-value\");\n\tinner.innerHTML=value;\n\tinput.appendChild(inner);\n\tif(typeof Quill != \"undefined\"){\n\t\tvar quill = new Quill(inner, { theme: 'snow' });\n\t\tquill.on(\"text-change\", function(){\n\t\t\trenderer.set(quill.root.innerHTML);\n\t\t});\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLMarkupEditor}","function S2EntityEditor(options){}\n\nS2EntityEditor.prototype.getDOM = function(renderer, dataviewer){\n\tvar value = renderer.value();\n\tvar cls = renderer.frame.range;\n\tvar cback = renderer.set;\n\tvar ctl = renderer.getController();\n\tvar d2ch = new TerminusDocumentChooser(ctl.ui, cls, value);\n\td2ch.change = function(val){\n\t\trenderer.set(val);\n\t}\n\td2ch.view = \"label\";\n\tvar d2dom = d2ch.getAsDOM();\n\treturn d2dom;\n}\n\n\nmodule.exports={S2EntityEditor}","const HTMLPropertyViewer = require('./PropertyViewer');\nconst RenderingMap = require('./RenderingMap');\nconst HTMLDataViewer = require('./DataViewer');\n\nfunction ValueRenderer(dataframe, index, parent, options){\n\tthis.frame = dataframe;\n\tthis.index = index;\n\tthis.parent = parent;\n\tthis.originalValue = this.value();\n\tthis.renderer_type = \"value\";\n\tthis.options = this.setOptions(options);\n}\n\nValueRenderer.prototype.depth = function(){return (this.parent ? this.parent.depth() : false);};\nValueRenderer.prototype.property = function(){ return (this.parent ? this.parent.property() : false);};\nValueRenderer.prototype.subject = function(){ return (this.parent ? this.parent.subject() : false);};\nValueRenderer.prototype.subjectClass = function(){ return (this.parent ? this.parent.subjectClass() : false);};\nValueRenderer.prototype.type = function(){\treturn (this.frame ? this.frame.range : false);};\nValueRenderer.prototype.range = function(){\treturn (this.frame ? this.frame.range : false);};\nValueRenderer.prototype.value = function(){\treturn (this.frame ? this.frame.get() : false);};\nValueRenderer.prototype.isDocument = function(){\treturn (this.frame ? this.frame.isDocument() : false);};\nValueRenderer.prototype.currentViewer = function(){\treturn this.viewerType;}\n\nValueRenderer.prototype.copy = function(nf){\n\tvar nvr = new ValueRenderer(nf, false, this.parent, this.options);\n\tnvr.mode = this.mode;\n\tnvr.view = this.view;\n\treturn nvr;\n}\n\nValueRenderer.prototype.setFacet = function(facet){\n\tthis.facet = facet;\n\tthis.parent.redraw();\n}\n\nValueRenderer.prototype.parentFacetChange = function(pfacet){\n\tif(pfacet == \"page\") this.setFacet(\"page\");\n\tif(pfacet == \"multiline\") this.setFacet(\"line\");\n\tif(pfacet == \"line\") this.setFacet(\"inline\");\n\tif(pfacet == \"summary\") this.setFacet(\"icon\");\n}\n\nValueRenderer.prototype.getDefaultFacet = function(){\n\tif(this.parent.currentFacet() == \"page\" || this.parent.currentFacet() == \"multiline\"){\n\t\treturn \"line\";\n\t}\n\treturn \"inline\";\n}\n\nValueRenderer.prototype.getAvailableFacets = function(){\n\treturn Object.values(this.facets);\n}\n\nValueRenderer.prototype.getDefaultFacets = function(){\n\tvar defs = {\n\t\tpage: {\n\t\t\tlabel: \"Full Page\", value: \"page\",\n\t\t\tfeatures: [\"facet\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\", \"control\"],\n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\n\t\t},\n\t\tline: {\n\t\t\tlabel: \"Single Line\", value: \"line\",\n\t\t\tfeatures: [\"facet\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\", \"control\"],\n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\n\t\t},\n\t\tinline: {\n\t\t\tlabel: \"Inline\", value: \"inline\",\n\t\t\tfeatures: [\"facet\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\", \"control\"],\n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\n\t\t},\n\t\tlabel: {\n\t\t\tlabel: \"Label\", value: \"label\",\n\t\t\tfeatures: [\"facet\", \"status\", \"body\"],\n\t\t\tcontrols: []\n\t\t},\n\t\ticon: {\n\t\t\tlabel: \"Snippet\", value: \"icon\",\n\t\t\tfeatures: [\"facet\", \"summary\"],\n\t\t\tcontrols: []\n\t\t}\n\t}\n\treturn defs;\n}\n\nValueRenderer.prototype.currentFacet = function(){\n\treturn this.facet;\n}\n\nValueRenderer.prototype.setOptions = function(options){\n\treturn TerminusDashboard.RenderingMap.decorateRenderer(options, this);\n}\n\nValueRenderer.prototype.hideDisabledControls = function(){\n\treturn this.hide_disabled_controls;\n}\n\nValueRenderer.prototype.setMode = function(mode){\n\tthis.mode = mode;\n\tthis.options.mode = mode;\n\tthis.viewerType = false;\n\tthis.redraw();\n}\n\nValueRenderer.prototype.setView = function(view){\n\tthis.view = view;\n\tthis.options.view = view;\n\tthis.redraw();\n}\n\nValueRenderer.prototype.getAPIURL = function(a, b){\n\tif(this.parent && this.parent.parent){\n\t\tif(client = this.parent.parent.getClient()){\n\t\t\tvar apiurl = client.dbURL() + a + \"/\" + b;\n\t\t\treturn apiurl;\n\t\t}\n\t}\n\treturn false;\n}\n\nValueRenderer.prototype.getClient = function(){\n\tif(this.parent && this.parent.parent){\n\t\treturn this.parent.parent.getClient();\n\t}\n\treturn false;\n}\n\nValueRenderer.prototype.getController = function(){\n\tif(this.parent && this.parent.parent){\n\t\treturn this.parent.parent.getController();\n\t}\n\treturn false;\n}\n\nValueRenderer.prototype.DBURL = function(){\n\tif(this.parent && this.parent.parent){\n\t\tif(client = this.parent.parent.getClient()){\n\t\t\treturn client.dbURL();\n\t\t}\n\t}\n\treturn false;\n}\n\nValueRenderer.prototype.getEntityReference = function(url, cls, entities, opts){\n\tif(this.parent && this.parent.parent){\n\t\tif(client = this.parent.parent.getClient()){\n\t\t\treturn client.getEntityReference(url, cls, entities, opts);\n\t\t}\n\t}\n}\n\nValueRenderer.prototype.badData = function(bd){\n\talert(\"bad data \" + bd);\n}\n\nValueRenderer.prototype.setNew = function(){\n\tthis.new_value = true;\n}\n\nValueRenderer.prototype.isNew = function(){\n\tif(this.new_value){\n\t\treturn true;\n\t}\n\treturn this.parent.isNew();\n}\n\n\nValueRenderer.prototype.isUpdated = function(){\n\tif(this.frame.get() != this.originalValue){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nValueRenderer.prototype.getSummary = function(){\n\tvar ret = { status: \"ok\" };\n\tif(this.isNew()) ret.status = \"new\";\n\telse if(this.isUpdated()) ret.status = \"updated\";\n\tvar val = this.frame.get();\n\tif(val){\n\t\tif(val.length && val.length > this.text_summary_length){\n\t\t\tret.long = val.substring(0, this.text_summary_length) + \"...\" + \" (\" + val.length + \" characters)\";\n\t\t}\n\t\telse {\n\t\t\tret.long = val;\n\t\t}\n\t}\n\telse {\n\t\tret.long = \"empty\";\n\t}\n\treturn ret;\n}\n\nValueRenderer.prototype.cardControlAllows = function(action){\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nValueRenderer.prototype.set = function(v){\n\tthis.frame.set(v);\n\tthis.viewer.redrawHeader();\n\tthis.parent.childUpdated();\n}\n\nValueRenderer.prototype.delete = function(){\n\tthis.parent.deletePropertyValue(this.value(), this.index);\n\tthis.parent.parent.redraw();\n}\n\nValueRenderer.prototype.load = function(link){\n\tthis.parent.load(link);\n}\n\nValueRenderer.prototype.hide = function(){\n\tthis.setView(\"hidden\");\n}\n\nValueRenderer.prototype.show = function(){\n\tthis.setView(\"full\");\n}\n\nValueRenderer.prototype.cancel = function(){\n\tthis.reset();\n\tthis.setMode(\"view\");\n}\n\nValueRenderer.prototype.save = function(){\n\tif(this.parent) {\n\t\tthis.parent.save();\n\t}\n}\n\nValueRenderer.prototype.reset = function(){\n\tthis.set(this.originalValue);\n\tthis.redraw();\n}\n\nValueRenderer.prototype.clone = function(){\n\tvar newb = this.parent.addPropertyValue(this.value());\n\tvar nrend = this.copy(newb);\n\tnrend.setNew();\n\tnrend.mode = \"edit\";\n\tnrend.index = this.parent.values.length;\n\tthis.parent.values.push(nrend);\n\tthis.parent.childUpdated();\n\tthis.parent.redraw();\n\tthis.parent.goToValue(this.parent.values.length-1);\n}\n\nValueRenderer.prototype.getViewerForValue = function(){\n\treturn new HTMLDataViewer.HTMLDataViewer(this);\n}\n\nValueRenderer.prototype.getFeaturesForFacet = function(facet){\n\treturn this.facets[facet].features.concat(this.facets[facet].controls);\n}\n\nValueRenderer.prototype.showFeature = function(which){\n\tif(this.features.indexOf(which) == -1 && this.controls.indexOf(which) == -1) {\n\t\treturn false;\n\t}\n\tvar cardcontrols = [\"delete\", \"clone\", \"add\"];\n\tif(cardcontrols.indexOf(which) != -1){\n\t\tif(!this.cardControlAllows(which)) return false;\n\t}\n\tvar updcontrols = [\"update\", \"reset\"];\n\tif(this.hideDisabledControls() && updcontrols.indexOf(which) != -1 ){\n\t\tif(!this.isUpdated()){\n\t\t\treturn false;\n\t\t}\n\t}\n\tif(which == 'hide' && this.view == \"hidden\") return false;\n\tif(which == 'show' && this.view != \"hidden\") return false;\n\tvar fets = this.getFeaturesForFacet(this.facet);\n\treturn (fets.indexOf(which) != -1);\n}\n\n\nValueRenderer.prototype.render = function(viewer){\n\tthis.viewer = (viewer ? viewer : this.getViewerForValue());\n\treturn this.viewer.render();\n}\n\nValueRenderer.prototype.extract = function(){\n\tvar val = this.value();\n\tif(val !== \"\" && val !== false){\n\t\tif(this.frame.isDatatypeProperty()){\n\t\t\tvar objlit = { \"@value\": this.value()}\n\t\t\t//var objlit = { data: this.value()}\n\t\t\tif(this.frame.isString()) objlit[\"@language\"] = this.frame.lang();\n\t\t\telse objlit[\"@type\"] = this.type();\n\t\t\treturn objlit;\n\t\t}\n\t\telse if(this.frame.isChoice() || this.frame.isDocument()){\n\t\t\treturn {\"@id\": val}\n\t\t}\n\t}\n\telse return val;\n}\n\nValueRenderer.prototype.getValueHeaderViewer = function(){\n\treturn new HTMLDataViewer.HTMLDataHeaderViewer();\n}\n\nValueRenderer.prototype.getDataValueViewer = function(){\n\tif(!this.viewerType) {\n\t\tthis.viewerType = this.getViewerForDataValue();\n\t}\n\treturn TerminusDashboard.RenderingMap.getViewer(this.viewerType, this.viewerOptions);\n}\n\nValueRenderer.prototype.getAvailableViewers = function(){\n\tvar dt = this.frame.getTypeShorthand();\n\tvar ft = this.frame.ftype();\n\tif(this.mode == \"view\"){\n\t\treturn TerminusDashboard.RenderingMap.getAvailableDataViewers(dt, ft);\n\t}\n\treturn TerminusDashboard.RenderingMap.getAvailableDataEditors(dt, ft);\n}\n\nValueRenderer.prototype.setViewer = function(viewer){\n\tthis.viewerType = viewer;\n\tthis.redraw();\n}\n\nValueRenderer.prototype.getViewerForDataValue = function(){\n\tvar dt = this.frame.getTypeShorthand();\n\tvar ft = this.frame.ftype();\n\tif(this.mode == \"edit\"){\n\t\treturn TerminusDashboard.RenderingMap.getEditorForDataFrame(dt, ft);\n\t}\n\treturn TerminusDashboard.RenderingMap.getViewerForDataFrame(dt, ft);\n}\n\nValueRenderer.prototype.redraw = function(){\n\tthis.viewer.clear();\n\tthis.render(this.viewer);\n}\n\n\n\n\n\nmodule.exports=ValueRenderer\n","/*\n * User Interface elements dealing with database level functions - view, delete, create, db\n * view document etc\n */\nconst WOQLResultsViewer = require('../query/WOQLResultsViewer');\nconst TerminusClassChooser = require('./TerminusClassChooser');\nconst TerminusDocumentChooser = require('./TerminusDocumentChooser');\nconst WOQLQuery=require('../query/WOQLQuery');\nconst UTILS=require('../Utils');\n\n/*\n * User Interface elements dealing with database level functions - view, delete, create, db\n * view document etc\n */\nfunction TerminusDBController(ui){\n\t this.ui = ui;\n}\n\n/*\n * Controller provides access to the server level functions (create/delete db) and db-level functions (schema, query, document)\n */\nTerminusDBController.prototype.getAsDOM = function(){\n\tvar self = this;\n\tvar dbc = document.createElement(\"div\");\n\tdbc.setAttribute(\"class\", \"terminus-db-controller\");\n\tif(this.ui && this.ui.db()){\n\t\tvar scd = document.createElement(\"div\");\n\t\tscd.setAttribute(\"class\", \"terminus-field terminus-db-connection\");\n\t\tvar lab = document.createElement(\"span\");\n\t\tlab.setAttribute(\"class\", \"terminus-label terminus-db-label terminus-control-panel-label\");\n\t\tlab.appendChild(document.createTextNode(\"DB \"));\n\t\tvar val = document.createElement(\"span\");\n\t\tval.setAttribute(\"class\", \"terminus-value terminus-db-value terminus-control-panel-value\");\n\t\tvar dbrec = this.ui.client.connection.getDBRecord();\n\t\tvar nm = (dbrec && dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.ui.db());\n\t\tval.appendChild(document.createTextNode(nm));\n\t\tscd.appendChild(lab);\n\t\tscd.appendChild(val);\n\t\t//dbc.appendChild(scd);\n\t\tvar nav = document.createElement('div');\n\t\tnav.setAttribute('class', 'span3');\n\t\tdbc.appendChild(nav);\n\t\tvar ul = document.createElement('ul');\n\t\tul.setAttribute('class','terminus-ul' );\n\t\tnav.appendChild(ul);\n\t\t// connected to db\n\t\tvar a = document.createElement('a');\n        a.setAttribute('class', 'terminus-dashboard-info terminus-list-group-a terminus-nav-width');\n        var txt = 'Database: ' + nm;\n        a.appendChild(document.createTextNode(txt));\n        ul.appendChild(a);\n\t\tif(this.ui.showControl(\"db\")){\n\t\t\tvar item = this.getControlHTML(\"Database Home\", \"fa-home\");\n\t\t\titem.classList.add(\"terminus-selected\");\n\t\t    item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.activateSelectedNav(this, self);\n\t\t\t\tself.ui.showDBMainPage();\n\t\t\t });\n\t        ul.appendChild(item);\n\t    }\n\t\tif(this.ui.showControl(\"delete_database\")){\n\t\t\tvar item = this.getControlHTML(\"Delete Database\", \"fa-trash-alt\");\n\t\t    item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.activateSelectedNav(this, self);\n\t\t\t\tself.ui.deleteDatabase();\n\t\t\t });\n\t        ul.appendChild(item);\n\t\t}\n\t\tif(this.ui.showControl(\"woql_select\")){\n\t\t\tvar item = this.getControlHTML(\"Query\", \"fa-search\");\n\t\t    item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.activateSelectedNav(this, self);\n\t\t\t\tself.ui.showQueryPage();\n\t\t\t});\n\t        ul.appendChild(item);\n\t\t}\n\t\tif(this.ui.showControl(\"woql_update\")){\n\t\t\tvar item = this.getControlHTML(\"Mapping\", \"fa-file-import\");\n\t        item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.activateSelectedNav(this, self);\n\t\t\t\tself.ui.showMappingPage();\n\t\t\t})\n\t        ul.appendChild(item);\n\t\t}\n\t\tif(this.ui.showControl(\"get_schema\")){\n\t\t\tvar item = this.getControlHTML(\"Schema\", \"fa-cog\");\n\t        item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.activateSelectedNav(this, self);\n\t\t\t\tself.ui.showSchemaPage();\n\t\t\t})\n\t        ul.appendChild(item);\n\t\t}\n\t\tif((this.ui.showControl(\"get_document\") || this.ui.showControl(\"create_document\"))){\n\t\t\tvar item = this.getControlHTML(\"Document\", \"fa-book\");\n\t        item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.removeSelectedNavClass(\"terminus-selected\");\n                this.classList.add(\"terminus-selected\");\n\t\t\t\tself.displayDocumentSubMenus();\n\t\t\t})\n\t        ul.appendChild(item);\n\t\t}\n\t\t// hidden submenus\n\t\tif(this.ui.showControl(\"get_document\")) {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.setAttribute('class', 'terminus-hide terminus-get-doc');\n\t\t\ta.appendChild(self.getDocumentChooserDOM());\n\t\t\ta.classList.add();\n\t\t\tul.appendChild(a);\n\t\t}\n\t\t// hidden submenus\n\t\tif(this.ui.showControl(\"create_document\")) {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.setAttribute('class', 'terminus-hide terminus-create-doc');\n\t\t\ta.appendChild(self.getDocumentCreatorDOM());\n\t\t\tul.appendChild(a);\n\t\t}\n\t}\n\treturn dbc;\n}\n\n\nTerminusDBController.prototype.getControlHTML = function(text, ic, css){\n    var self = this;\n    var a = document.createElement('a');\n\ta.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa ' + ic);\n    a.appendChild(icon);\n    var txt = document.createTextNode(text);\n    a.appendChild(txt);\n    return a;\n}\n\nTerminusDBController.prototype.showSubMenus = function(el){\n\tel.classList.remove('terminus-hide');\n\tel.classList.add('terminus-display');\n}\n\nTerminusDBController.prototype.displayDocumentSubMenus = function(){\n\t//display submenus on click of documents\n\tif(this.ui.showControl(\"get_document\")) {\n\t\tvar gd = document.getElementsByClassName('terminus-get-doc');\n\t\tthis.showSubMenus(gd[0]);\n\t}\n\tif(this.ui.showControl(\"create_document\")) {\n\t\tvar cd = document.getElementsByClassName('terminus-create-doc');\n\t\tthis.showSubMenus(cd[0]);\n\t}\n}\n\n\nTerminusDBController.prototype.getDocumentChooserDOM = function(){\n\tvar self = this;\n\tvar scd = document.createElement(\"span\");\n\tscd.setAttribute(\"class\", \"terminus-document-chooser terminus-form-horizontal terminus-control-group terminus-choose-by-id\");\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"terminus-document-chooser-label terminus-control-label terminus-control-label-padding\");\n\t//lab.appendChild(document.createTextNode(\"ID \"));\n\tvar dcip = document.createElement(\"input\");\n\tdcip.setAttribute(\"class\", \"terminus-form-doc-value terminus-document-chooser terminus-doc-input-text\");\n\tdcip.setAttribute(\"placeholder\", \"Enter Document ID\");\n\tvar nbut = document.createElement(\"button\");\n\tnbut.setAttribute('class', \"terminus-control-button terminus-document-button terminus-doc-btn\")\n\tnbut.appendChild(document.createTextNode(\"View\"));\n\tnbut.addEventListener(\"click\", function(){\n\t\tif(dcip.value) self.ui.showDocument(dcip.value);\n\t})\n\tif(this.ui.client.connectionConfig.platformEndpoint() && this.ui.pluginAvailable(\"select2\")){\n\n\t\tvar mcls = TerminusClient.FrameHelper.unshorten(\"tcs:Document\");\n\t\tvar d2ch = new TerminusDocumentChooser(this.ui, mcls);\n\t\td2ch.change = function(val){\n\t\t\tself.ui.showDocument(val);\n\t\t}\n\t\td2ch.view = \"label\";\n\t\tvar sdom = d2ch.getAsDOM('terminus-class-select');\n\t\tjQuery(dcip).hide();\n\t\tjQuery(nbut).hide();\n\t\tvar nlab = document.createElement(\"a\");\n\t\tnlab.setAttribute(\"href\", \"#\");\n\t\tnlab.setAttribute(\"class\", \"terminus-document-which-chooser\");\n\t\tnlab.appendChild(document.createTextNode(\"Choose by ID\"));\n\t\tvar show = \"label\";\n\t\tjQuery(nlab).click(function(){\n\t\t\tif(show == \"label\"){\n\t\t\t\tshow = \"id\";\n\t\t\t\tjQuery(dcip).show();\n\t\t\t\tjQuery(nbut).show();\n\t\t\t\tjQuery(sdom).hide();\n\t\t\t\tjQuery(nlab).text(\"Choose by Label\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tshow = \"label\";\n\t\t\t\tjQuery(dcip).hide();\n\t\t\t\tjQuery(nbut).hide();\n\t\t\t\tjQuery(sdom).show();\n\t\t\t\tjQuery(nlab).text(\"Choose by ID\");\n\t\t\t}\n\t\t})\n\t\tscd.appendChild(sdom);\n\t\tscd.prepend(nlab);\n\t}\n\tvar nbuts = document.createElement(\"span\");\n\tnbuts.setAttribute(\"class\", \"terminus-control-buttons terminus-document-chooser-buttons\");\n\tnbuts.appendChild(nbut);\n\tscd.appendChild(lab);\n\tscd.appendChild(dcip);\n\tscd.appendChild(nbuts);\n\treturn scd;\n};\n\nTerminusDBController.prototype.getDocumentCreatorDOM = function(){\n\tvar self = this;\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-document-creator terminus-form-horizontal terminus-control-group terminus-choose-by-id\");\n\n\tvar dcip = document.createElement(\"input\");\n\tdcip.setAttribute(\"class\", \"terminus-form-doc-value terminus-document-creator terminus-doc-input-text\");\n\tdcip.setAttribute(\"placeholder\", \"Enter Document Type\");\n\tvar nbut = document.createElement(\"button\");\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"document-creator-label terminus-control-label terminus-control-label-padding\");\n\t//lab.appendChild(document.createTextNode(\"Type \"));\n\tnbut.setAttribute('class', \"terminus-control-button create-document-button terminus-doc-btn\")\n\tnbut.appendChild(document.createTextNode(\"Create\"));\n\tnbut.addEventListener(\"click\", function(){\n\t\tif(dcip.value) self.ui.showCreateDocument(dcip.value);\n\t})\n\tvar nbuts = document.createElement(\"div\");\n\tnbuts.setAttribute(\"class\", \"terminus-control-buttons terminus-document-creator-buttons\");\n\tvar wq = new WOQLQuery(this.ui.client, {}, this.ui);\n\tvar filter = wq.getConcreteDocumentClassPattern(\"v:Element\");\n\tvar termcc = new TerminusClassChooser(this.ui, filter);\n\ttermcc.empty_choice = \"Create Document of Type\";\n\tvar self = this;\n\ttermcc.change = function(new_class){\n\t\tif(new_class){\n\t\t\tself.ui.showCreateDocument(new_class);\n\t\t\ttermcc.choice = false;\n\t\t}\n\t}\n\tvar tcdom = termcc.getAsDOM('terminus-class-select');\n\n\tvar gb = document.createElement('div');\n\tgb.setAttribute('class', 'terminus-doc-btn-group');\n\tvar bi = document.createElement('button');\n\tbi.setAttribute('class', 'terminus-doc-btn-selected terminus-doc-toggle-btn');\n\tbi.appendChild((document.createTextNode('D')));\n\tvar tds = document.createElement('span');\n\ttds.setAttribute('class', 'terminus-tooltiptext');\n\ttds.appendChild(document.createTextNode('Dropdown List'));\n\tbi.appendChild(tds);\n\tvar bt = document.createElement('button');\n\tbt.setAttribute('class', 'terminus-doc-toggle-btn');\n\tbt.appendChild((document.createTextNode('T')));\n\tvar tts = document.createElement('span');\n\ttts.setAttribute('class', 'terminus-tooltiptext');\n\ttts.appendChild(document.createTextNode('Text Input'));\n\tbt.appendChild(tts);\n\tgb.appendChild(bt);\n\tgb.appendChild(bi);\n\tvar nlabs = document.createElement(\"div\");\n\tnlabs.setAttribute('class', 'terminus-doc-btn-gp-align');\n\tnlabs.appendChild(gb);\n\tscd.appendChild(nlabs);\n\tvar ccDOM = document.createElement(\"span\");\n\tnlabs.appendChild(ccDOM);\n\tccDOM.setAttribute(\"class\", \"create-document-list\");\n\tccDOM.appendChild(tcdom);\n\tvar which = \"select\";\n\tbt.addEventListener(\"click\", function(){\n\t\t// create document of TerminusClient.FrameHelper.removeChildren(nlabs);\n\t\tTerminusClient.FrameHelper.removeChildren(ccDOM);\n\t\tUTILS.removeSelectedNavClass(\"terminus-doc-btn-selected\");\n\t\tthis.classList.add(\"terminus-doc-btn-selected\");\n\t\tccDOM.appendChild(dcip);\n\t\tccDOM.appendChild(nbut);\n\t});\n\n\tbi.addEventListener(\"click\", function(){\n\t\t// create document from dropdown\n\t\tTerminusClient.FrameHelper.removeChildren(ccDOM);\n\t\tUTILS.removeSelectedNavClass(\"terminus-doc-btn-selected\");\n\t\tthis.classList.add(\"terminus-doc-btn-selected\");\n\t\tccDOM.appendChild(tcdom);\n\t});\n\treturn scd;\n};\n\nfunction TerminusDBViewer(ui){\n\tthis.ui = ui;\n\tthis.wquery = new WOQLQuery(ui.client, this.options, ui);\n}\n\nTerminusDBViewer.prototype.getAsDOM = function(selected){\n\tvar pd = document.createElement(\"span\");\n\tpd.setAttribute(\"class\", \"terminus-db-home-page\");\n\tvar sth = document.createElement('div');\n\tvar banner = document.createElement('div');\n\t//pd.appendChild(banner);\n\tbanner.setAttribute('class', 'terminus-banner');\n\tvar dhp = document.createElement(\"span\");\n\tdhp.setAttribute('class', 'terminus-home-heading');\n\tdhp.appendChild(document.createTextNode(\"DB Home Page - \"));\n\tsth.appendChild(dhp);\n\tvar scd = document.createElement(\"span\");\n\tscd.setAttribute(\"class\", \"terminus-db-details\");\n\tvar scs = document.createElement(\"span\");\n\tscs.setAttribute(\"class\", \"terminus-db-details-value \");\n\tvar dbrec = this.ui.getDBRecord();\n\tif(dbrec){\n\t\tvar nm = (dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.db);\n\t\tscs.appendChild(document.createTextNode(nm));\n\t\tscs.setAttribute('class', 'terminus-home-heading');\n\t}\n\tscd.appendChild(scs);\n\tsth.appendChild(scd);\n\tbanner.appendChild(sth);\n\t//pd.appendChild(sth);\n\t//pd.appendChild(UTILS.getHeaderDom('Summary'));\n\tthis.getDeleteOnHomePage(pd);\n\t//this.getDBSummary(pd);\n\tpd.appendChild(pd.appendChild(UTILS.getHeaderDom('List of Documents')));\n\tthis.getClassesDOM(pd);\n\treturn pd;\n}\n\nTerminusDBViewer.prototype.getDbInfoBox = function(r, module){\n\tvar sp = document.createElement('span');\n    sp.setAttribute('class', 'terminus-db-info-box');\n\tvar info = document.createElement('div');\n\tinfo.appendChild(document.createTextNode(module.charAt(0).toUpperCase() + module.slice(1)));\n\tinfo.setAttribute('class', 'terminus-db-info');\n\tsp.appendChild(info);\n\n    var i = document.createElement('i');\n\tswitch(module){\n\t\tcase 'size':\n\t\t\ti.setAttribute('class', 'terminus-icon fa fa-balance-scale');\n\t\t    var txt = document.createTextNode('2 Gb');\n\t\tbreak;\n\t\tcase 'created':\n\t\t\ti.setAttribute('class', 'terminus-icon fa fa-calendar');\n\t\t    var txt = document.createTextNode('16 July 2015');\n\t\tbreak;\n\t\tcase 'modified':\n\t\t\ti.setAttribute('class', 'terminus-icon fa fa-clock');\n\t\t    var txt = document.createTextNode('22 Dec 2019');\n\t\tbreak;\n\t}\n    sp.appendChild(i);\n\tif(txt) sp.appendChild(txt);\n    r.appendChild(sp);\n}\n\nTerminusDBViewer.prototype.getDeleteOnHomePage = function(d){\n\t// delete database\n\tif(this.ui.db() == \"terminus\") return;\n    var del = document.createElement('button');\n    del.setAttribute('class', 'terminus-btn terminus-btn-float-right terminus-home-del');\n    del.setAttribute('type', 'button');\n    del.innerHTML = 'Delete Database';\n\tvar dbrec = this.ui.getDBRecord();\n\tif(dbrec)\n\t\tvar nm = (dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.ui.db());\n    var self = this;\n    var dbdel = this.ui.db();\n\n    del.addEventListener(\"click\", function(){\n      \tvar deleteConfirm = confirm(`Do you want to delete ${dbdel} Database?`);\n\t\tif (deleteConfirm == true) {\n\t\t\tself.ui.deleteDatabase(dbdel);\n\t\t}\n    });\n    d.appendChild(del);\n}\n\nTerminusDBViewer.prototype.getDBSummary = function(d){\n    var r = document.createElement('span');\n    r.setAttribute('class', 'terminus-db-info-box-display');\n    d.appendChild(r);\n\n    /* getDbInfoBox() calls can change according to further requirments */\n    this.getDbInfoBox(r, 'size');\n    this.getDbInfoBox(r, 'created');\n    this.getDbInfoBox(r, 'modified');\n}\n\nTerminusDBViewer.prototype.getClassesDOM = function(d){\n\tvar q = this.wquery.getClassesQuery();\n\tvar self = this;\n\tthis.wquery.execute(q)\n\t.then(function(result){\n\t\tself.result = new WOQLResultsViewer.WOQLResultsViewer(self.ui, result, self.wquery, {}, {}, false);\n\t\tif(self.result){\n\t\t\tvar nd = self.result.getAsDOM(d, false);\n\t\t\tif(nd){\n\t\t\t\tnd.setAttribute('class', 'terminus-margin-box');\n\t        }\n\t\t\telse{\n\t\t\t\tnor = document.createElement('div');\n\t\t\t\tnor.setAttribute('class', 'terminus-no-res-alert');\n\t\t\t\tnor.appendChild(document.createTextNode(\"No results available, create new ones to view them here...\"));\n\t\t\t\td.appendChild(nor);\n\t\t\t}\n\t\t}\n\t})\n\t.catch(function(err){\n\t\tconsole.error(err);\n\t\tself.ui.showError(err);\n\t});\n\treturn d;\n}\n\n\nfunction TerminusDBCreator(ui){\n\tthis.ui = ui;\n}\n\nTerminusDBCreator.prototype.getAsDOM = function(selected){\n\tvar scd = document.createElement(\"div\");\n\t/* test delete when over var txtHolder = document.createElement(\"div\");\n\ttxtHolder.appendChild(document.createTextNode('expecting laoder herer'));\n\tscd.appendChild(txtHolder);\n\tthis.ui.getLoader(scd);*/\n\tscd.setAttribute(\"class\", \"terminus-db-creator\");\n\tvar sct = document.createElement(\"h3\");\n\tsct.setAttribute(\"class\", \"terminus-db-creator-title terminus-module-head\");\n\tsct.appendChild(document.createTextNode(\"Create New Database\"));\n\tscd.appendChild(sct);\n\tvar mfd = document.createElement('div');\n\tmfd.setAttribute('class', 'terminus-form-border');\n\tscd.appendChild(mfd);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-id-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"ID\"));\n\tsci.appendChild(slab);\n\tvar idip = document.createElement(\"input\");\n\tidip.setAttribute(\"type\", \"text\");\n\tidip.setAttribute(\"class\", \"terminus-form-value terminus-input-text\");\n\tidip.setAttribute(\"placeholder\", \"No spaces or special characters allowed in IDs\");\n\tsci.appendChild(idip);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-title-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Title\"));\n\tvar titip = document.createElement(\"input\");\n\ttitip.setAttribute(\"type\", \"text\");\n\ttitip.setAttribute(\"placeholder\", \"A brief title for the Database\");\n\ttitip.setAttribute(\"class\", \"terminus-form-value terminus-input-text\");\n\tsci.appendChild(slab);\n\tsci.appendChild(titip);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-title-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Description\"));\n\tsci.appendChild(slab);\n\tvar descip = document.createElement(\"textarea\");\n\tdescip.setAttribute(\"class\", \"terminus-textarea terminus-db-description terminus-textarea \");\n\tdescip.setAttribute(\"placeholder\", \"A short text describing the database and its purpose\");\n\tsci.appendChild(descip);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-schema-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Import Schema\"));\n\tsci.appendChild(slab);\n\tvar schem = document.createElement(\"input\");\n\tschem.setAttribute(\"placeholder\", \"Terminus DB URL\");\n\tschem.setAttribute(\"type\", \"text\");\n\tschem.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-input-text\");\n\n\tsci.appendChild(schem);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-data-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Import Data\"));\n\tsci.appendChild(slab);\n\tvar datip = document.createElement(\"input\");\n\tdatip.setAttribute(\"type\", \"text\");\n\tdatip.setAttribute(\"placeholder\", \"Terminus DB URL\");\n\tdatip.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-input-text\");\n\tsci.appendChild(datip);\n\t//mfd.appendChild(sci);\n\tvar butfield = document.createElement(\"div\");\n\tbutfield.setAttribute(\"class\", \"terminus-control-buttons\");\n\tvar cancbut = document.createElement(\"button\");\n\tcancbut.setAttribute(\"class\", \"terminus-control-button terminus-cancel-db-button terminus-btn\");\n\tcancbut.appendChild(document.createTextNode(\"Cancel\"));\n\tvar loadbut = document.createElement(\"button\");\n\tloadbut.setAttribute(\"class\", \"terminus-control-button terminus-create-db-button terminus-btn\");\n\tloadbut.appendChild(document.createTextNode(\"Create\"));\n\tvar self = this;\n\tvar gatherips = function(){\n\t\tvar input = {};\n\t\tinput.id = idip.value;\n\t\tinput.title = titip.value;\n\t\tinput.description = descip.value;\n\t\tinput.schema = schem.value;\n\t\tinput.data = datip.value;\n\t\treturn input;\n\t}\n\tvar self = this;\n\tloadbut.addEventListener(\"click\", function(){\n\t\tvar input = gatherips();\n\t\tself.ui.createDatabase(input);\n\t})\n\tcancbut.addEventListener(\"click\", function(){\n\t\tself.ui.showServerMainPage();\n\t})\n\tbutfield.appendChild(cancbut);\n\tbutfield.appendChild(loadbut);\n\tmfd.appendChild(butfield);\n\n\treturn scd;\n}\nmodule.exports={TerminusDBViewer:TerminusDBViewer,\n\t            TerminusDBController:TerminusDBController,\n\t            TerminusDBCreator:TerminusDBCreator}\n","function TerminusViolations(vios, ui){\n\tthis.ui = ui;\n\tthis.vios = [];\n\tvar nvios = [];\n\tfor(var i = 0; i<vios.length; i++){\n\t\tfor(var j = 0; j<nvios.length; j++){\n\t\t\tif(JSON.stringify(vios[i]) == JSON.stringify(nvios[j])) continue;\n\t\t}\n\t\tnvios.push(vios[i]);\n\t}\n\tfor(var i = 0; i<nvios.length; i++){\n\t\tthis.vios.push(new TerminusViolation(nvios[i], this.ui));\n\t}\n}\n\nTerminusViolations.prototype.getAsDOM = function(context_msg){\n\tvar vdom = document.createElement(\"div\");\n\tvdom.setAttribute(\"class\", \"terminus-violations terminus-show-msg-vio\");\n\tvar vioHeading = document.createElement(\"div\");\n\tvioHeading.setAttribute('class', 'terminus-violations-heading');\n\tvdom.appendChild(vioHeading);\n\tvar msg = this.vios.length + (this.vios.length > 1 ? \" Violations Detected\" : \" Violation Detected\");\n\tif(context_msg) msg += \" \" + context_msg;\n\tvioHeading.appendChild(document.createTextNode(msg));\n\tfor(var i = 0; i<this.vios.length; i++){\n\t\tvdom.appendChild(this.vios[i].getAsDOM());\n\t}\n\treturn vdom;\n}\n\n/*\n * Class for displaying violation reports as HTML\n */\nfunction TerminusViolation(vio, ui){\n\tthis.ui = ui;\n\tthis.vio = vio;\n}\n\nTerminusViolation.prototype.getAsDOM = function(){\n\tvar vdom = document.createElement(\"div\");\n\tvdom.setAttribute(\"class\", \"terminus-violation\");\n\tif(this.vio['@type']){\n\t\tvar msg = this.vio['vio:message'] || {\"@value\": \"\"};\n\t\tvdom.appendChild(this.getPropertyAsDOM(this.vio[\"@type\"], msg));\n\t}\n\tfor(var prop in this.vio){\n\t\tif(prop != \"vio:message\" && prop != \"@type\"){\n\t\t\tvdom.appendChild(this.getPropertyAsDOM(prop, this.vio[prop]));\n\t\t}\n\t}\n\treturn vdom;\n}\n\nTerminusViolation.prototype.getPropertyAsDOM = function(prop, val){\n\tvar pdom = document.createElement(\"div\");\n\tpdom.setAttribute(\"class\", \"terminus-violation-property\");\n\tvar ldom = document.createElement(\"span\");\n\tldom.setAttribute(\"class\", \"terminus-label terminus-violation-property-label\");\n\tldom.appendChild(document.createTextNode(prop));\n\tvar vdom = document.createElement(\"span\");\n\tvdom.setAttribute(\"class\", \"terminus-violation-property-value\");\n\tvdom.appendChild(document.createTextNode(val[\"@value\"]));\n\tpdom.appendChild(ldom);\n\tpdom.appendChild(vdom);\n\treturn pdom;\n}\n\nmodule.exports=TerminusViolations\n","const WOQLQuery = require('../query/WOQLQuery');\nconst WOQLResultsViewer = require('../query/WOQLResultsViewer');\nconst WOQLTextboxGenerator = require('../query/WOQLTextboxGenerator');\nconst TerminusPluginManager = require('../plugins/TerminusPlugin');\n\nfunction TerminusQueryViewer(ui, options){\n\tthis.ui = ui;\n\tthis.options = options;\n\tthis.meta = {};\n\tthis.init();\n\tthis.generator = false;\n\tthis.result = false;\n\tthis.wquery = new WOQLQuery(ui.client, this.options, this.ui);\n\tthis.pman = new TerminusPluginManager();\n\tthis.gentype = (options && options.generator ? options.generator : \"textbox\");\n\tthis.generators = {\n\t\t\"textbox\" : { label: \"Simple Text Box\", value: \"textbox\"},\n\t}\n\tthis.loadGenerator();\n}\n\nTerminusQueryViewer.prototype.hasGeneratorOptions = function(){\n\treturn false;\n\tvar yup = false;\n\tfor(var gen in this.generators){\n\t\tif(yup) return true;\n\t\telse yup = true;\n\t}\n\treturn false;\n}\n\nTerminusQueryViewer.prototype.changeGenerator = function(ng){\n\tif(this.gentype != ng){\n\t\tthis.gentype = ng;\n\t\tthis.loadGenerator();\n\t\tthis.redrawGenerator();\n\t}\n}\nTerminusQueryViewer.prototype.redrawGenerator = function(q){\n\tTerminusClient.FrameHelper.removeChildren(this.inputDOM);\n\tthis.inputDOM.appendChild(this.getQueryButtonsDOM(q));\n}\n\nTerminusQueryViewer.prototype.loadGenerator = function(){\n\tvar self = this;\n\tvar nquery = function(q, settings){\n\t\tself.query(q, settings)\n\t}\n\tif(this.gentype == \"textbox\"){\n\t\tthis.generator = new WOQLTextboxGenerator(nquery, this, this.ui);\n\t}\n}\n\nTerminusQueryViewer.prototype.init = function(){\n\tvar wq = new WOQLQuery(this.ui.client, this.options, this.ui);\n\tvar woql = wq.getElementMetaDataQuery();\n\tvar self = this;\n\tself.meta = {};\n\twq.execute(woql).then(function(wresult){\n\t\tvar wqlR = new WOQLResultsViewer.WOQLResult(wresult, null ,null, self.ui);\n\t\tif(wqlR.hasBindings(wresult)){\n\t\t\tfor(var i = 0; i<wresult.bindings.length; i++){\n\t\t\t\tvar el = wresult.bindings[i].Element;\n\t\t\t\tif(el && typeof self.meta[el] == \"undefined\"){\n\t\t\t\t\tself.meta[el] = wresult.bindings[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n\t.catch(function(e){\n\t\tconsole.error(e);\n\t});\n}\n\n\nTerminusQueryViewer.prototype.query = function(val, settings, tab){\n\tvar self = this;\n\tTerminusClient.FrameHelper.removeChildren(this.resultDOM);\n\tthis.wquery.execute(val)\n\t.then(function(result){\n\t\tself.result = new WOQLResultsViewer.WOQLResultsViewer(self.ui, result, self.wquery, self.options, settings, true);\n\t\tvar nd = self.result.getAsDOM(self.resultDOM, true);\n\t\tif(nd){\n\t\t\t self.resultDOM.appendChild(nd);\n\t\t}\n\t})\n\t.catch(function(err){\n\t\tself.ui.showError(err);\n\t});\n}\n\nTerminusQueryViewer.prototype.getResultViewDom = function(){\n\tthis.resultDOM = document.createElement(\"div\");\n\tthis.resultDOM.setAttribute(\"class\", \"terminus-query-results\");\n}\n\nTerminusQueryViewer.prototype.getAsDOM = function(q){\n\tvar qbox = document.createElement(\"div\");\n\tqbox.setAttribute(\"class\", \"terminus-query-page\");\n\tif(this.hasGeneratorOptions()){\n\t\tqbox.appendChild(this.getQueryCreatorChoiceDOM(q));\n\t}\n\tthis.resultDOM = document.createElement(\"div\");\n\tthis.resultDOM.setAttribute(\"class\", \"terminus-query-results terminus-query-section\");\n\n\tvar qtHolder = document.createElement('span');\n\tqtHolder.setAttribute('style', 'display: flex;');\n\n\tthis.qTextBox = this.getQueryTextAreaDOM(q, qtHolder);\n\tthis.buttonsDOM = document.createElement(\"span\");\n\tthis.buttonsDOM.setAttribute(\"class\", \"terminus-query-input\");\n\tthis.buttonsDOM.appendChild(this.getQueryButtonsDOM(q, this.qTextBox));\n\n\tqtHolder.appendChild(this.buttonsDOM);\n\n\tqbox.appendChild(qtHolder);\n\tqbox.appendChild(this.resultDOM);\n\treturn qbox;\n}\n\nTerminusQueryViewer.prototype.getQueryCreatorChoiceDOM = function(){\n\tvar qcc = document.createElement(\"select\");\n\tqcc.setAttribute(\"class\", \"terminus-query-generator-selector\");\n\tfor(var c in this.generators){\n\t\tvar gen = this.generators[c];\n\t\tvar opt = document.createElement(\"option\");\n\t\topt.value = (gen.value ? gen.value : c);\n\t\tvar lab = (gen.label ? gen.label : c);\n\t\topt.appendChild(document.createTextNode(lab));\n\t\tqcc.appendChild(opt);\n\t}\n\tvar self = this;\n\tqcc.addEventListener(\"change\", function(){\n\t\tself.changeGenerator(this.value);\n\t});\n\treturn qcc;\n}\n\nTerminusQueryViewer.prototype.getQueryButtonsDOM = function(q, qip){\n\treturn this.generator.getAsDOM(q, qip);\n}\n\nTerminusQueryViewer.prototype.getQueryTextAreaDOM = function(q, box){\n\treturn this.generator.getQueryTextAreaDOM(q, box);\n}\n\nmodule.exports=TerminusQueryViewer\n","const TerminusClassChooser = require('../client/TerminusClassChooser');\nconst TerminusPropertyChooser = require('../client/TerminusPropertyChooser');\nconst TerminusDocumentChooser = require('../client/TerminusDocumentChooser');\nconst UTILS= require('../Utils')\n\nfunction WOQLTextboxGenerator(tq, qman, ui){\n\tthis.query = tq;\n\tthis.wquery = qman.wquery;\n\tthis.ui = ui;\n\t// default datatable settings if datatable plug in available\n\tthis.datatable = {};\n\tthis.datatable.pageLength = 20;\n\tthis.datatable.start = 0;\n}\n\nWOQLTextboxGenerator.prototype.gatherDatatableSettings = function(txtArea, queryName){\n\tthis.datatable.qTextDom =  txtArea;\n\tthis.datatable.query =  queryName;\n\tthis.datatable.chosenValue = null;\n}\n\nWOQLTextboxGenerator.prototype.getQueryButtonGroups = function(qbox){\n\tvar row = document.createElement('div');\n\trow.setAttribute('class', 'terminus-query-group-row');\n\tqbox.appendChild(row);\n\treturn row;\n}\n\nWOQLTextboxGenerator.prototype.qGroupQueries = function(qrow, header, descr){\n\tvar g = document.createElement('button');\n\tvar self = this;\n\tg.addEventListener('click', function(e){\n\t\tself.ui.clearMessages();\n\t\tif(header == 'Data Queries'){ // to ensure click event is not on button but on select instead so no need to hide\n\t\t\tvar target = e.target || e.srcElement,\n        \ttext = target.textContent || target.innerText;\n\t\t\tif((target.nodeName == 'SELECT')) return;\n\t\t}\n\t\telse if(header == 'Document Queries'){\n\t\t\tvar target = e.target || e.srcElement,\n        \ttext = target.textContent || target.innerText;\n\t\t\tif((target.nodeName == 'INPUT')) return;\n\t\t}\n\t\tfor(var i=0; i<this.children.length ; i++){\n\t\t\tUTILS.toggleVisibility(this.children[i]);\n\t\t}\n\t\tvar qeb = document.getElementsByClassName('query-example-buttons');\n\t\tfor(var i=0; i<qeb.length ; i++){\n\t\t\tif(this != qeb[i]){\n\t\t\t\tfor(var j=0; j<qeb[i].children.length ; j++){\n\t\t\t\t\tif(qeb[i].children[j].classList.contains('terminus-display')){\n\t\t\t\t\t\tqeb[i].children[j].classList.remove('terminus-display');\n\t\t\t\t\t\tqeb[i].children[j].classList.add('terminus-hide');\n\t\t\t\t    }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n\n\tg.setAttribute('class', 'terminus-group-box terminus-pointer query-example-buttons');\n\n\tvar cd = document.createElement('div');\n\tcd.setAttribute('class', 'terminus-group');\n\tg.appendChild(cd);\n\n\tvar ch = document.createElement('div');\n\tch.setAttribute('class', 'terminus-group-header');\n\tcd.appendChild(ch);\n\n\tvar d = document.createElement('div');\n\td.setAttribute('class', 'terminus-query-block-headers')\n\td.appendChild(document.createTextNode(header));\n\tch.appendChild(d);\n\tic = document.createElement('i');\n    ic.setAttribute('class', 'terminus-hand-pointer-float fa fa-hand-pointer');\n\td.appendChild(ic);\n\n\tvar t = document.createElement('h5');\n\tt.setAttribute('class', 'terminus-group-sub-title terminus-hide');\n\tt.appendChild(document.createTextNode(descr));\n\tg.appendChild(t);\n\n\tqrow.appendChild(g);\n\n\treturn g;\n}\n\nWOQLTextboxGenerator.prototype.setDatatableSettings = function(query){\n\tif(query.limit){\n\t\tthis.datatable.pageLength = query.limit[0];\n\t\tthis.datatable.start = query.limit[1].start[0];\n\t}\n\t/*\n\tvar newQuery = query.replace(/\\s/g,'');  // remove spaces\n\tvar searchStr = 'limit(';\n\tif(newQuery.indexOf(searchStr) !== -1){\n\t\tvar remString = newQuery.substring(searchStr.length, newQuery.length);\n\t\tvar limit = remString.substr(0, remString.indexOf(','));\n\t\tthis.datatable.pageLength = limit;\n\t\tthis.datatable.start = 0;\n\t}*/\n}\n\nWOQLTextboxGenerator.prototype.getQueryTextAreaDOM = function(q, box){\n\tvar qbox = document.createElement(\"span\");\n\tqbox.setAttribute(\"class\", \"terminus-query-textbox-input terminus-query-section\");\n\n\tvar eqh = document.createElement(\"H3\");\n\teqh.appendChild(document.createTextNode(\"Enter Query\"));\n\teqh.setAttribute('class', 'terminus-full-css-margin-top terminus-module-head');\n\tqbox.appendChild(eqh);\n\n\tvar qip = document.createElement(\"textarea\");\n\tqip.setAttribute(\"class\", \"terminus-query-box\");\n\tqip.setAttribute(\"placeholder\", \"Enter new query or load queries from example buttons provided below ...\");\n\tqip.setAttribute(\"style\", \"min-width: 400px; min-height: 60px;\");\n\tif(q) qip.value = JSON.stringify(q,undefined, 2);\n\tqbox.appendChild(qip);\n\tUTILS.stylizeEditor(this.ui, qip, 'query', 'javascript');\n\tvar self = this;\n\tvar qbut = document.createElement(\"button\");\n\tqbut.setAttribute(\"class\", \"terminus-control-button terminus-btn\")\n\tqbut.appendChild(document.createTextNode(\"Send Query\"));\n\tqbut.addEventListener(\"click\", function(){\n\t\tself.ui.clearMessages();\n\t\ttry {\n\t\t\tvar qval = JSON.parse(qip.value);\n\t\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\t\t// pass current Example query scope while editing the text editor\n\t\t\t\tself.gatherDatatableSettings(qip, self.datatable.query);\n\t\t\t\tself.setDatatableSettings(qval);\n\t\t\t\tself.query(qval, self.datatable);\n\t\t\t}\n\t\t\telse self.query(qval);\n\t\t}\n\t\tcatch(e){\n\t\t\talert(\"Failed to parse Query \" + e.toString());\n\t\t}\n\t})\n\tqbox.appendChild(qbut);\n\tbox.appendChild(qbox);\n\treturn qip;\n}\n\nWOQLTextboxGenerator.prototype.getAsDOM = function(q, qip){\n\tvar qbox = document.createElement(\"div\");\n\tqbox.setAttribute(\"class\", \"terminus-query-textbox-input\");\n\tvar qbuts = document.createElement(\"div\");\n\tqbuts.setAttribute(\"class\", \"terminus-control-buttons\");\n\t//qbuts.appendChild(qbut);\n\tqbox.appendChild(qbuts);\n\tvar qexs = document.createElement(\"div\");\n\tqexs.setAttribute(\"class\", \"terminus-query-examples terminus-db-list-title\");\n\tvar qh = document.createElement(\"H3\");\n\tqh.appendChild(document.createTextNode(\"Saved Queries\"));\n\tqh.setAttribute('class', 'terminus-full-css-margin-top terminus-module-head');\n\tqexs.appendChild(qh);\n\n\tvar qrow = this.getQueryButtonGroups(qexs);\n\tqexs.appendChild(qrow);\n\n\t/* grouping class queries */\n\tvar qcGroup = this.qGroupQueries(qrow, 'Schema Queries', '');\n\n\tvar nqbut = document.createElement(\"button\");\n\tnqbut.appendChild(document.createTextNode(\"Show All Classes\"));\n\tnqbut.setAttribute(\"class\", \"terminus-control-button terminus-q-btn\");\n\tnqbut.addEventListener(\"click\", function(){\n\t\tself.ui.clearMessages();\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tvar qval = self.wquery.getClassMetaDataQuery(null, self.datatable.pageLength, self.datatable.start);\n\t\tqip.value = JSON.stringify(qval,undefined, 2);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Classes');\n\t\t\tself.query(qval, self.datatable);\n\t\t}\n\t\telse self.query(qval);\n\t})\n\n\tvar aqbut = document.createElement(\"button\");\n\taqbut.appendChild(document.createTextNode(\"Show Document Classes\"));\n\taqbut.setAttribute(\"class\", \"terminus-control-button terminus-q-btn\");\n\taqbut.addEventListener(\"click\", function(){\n\t\tself.ui.clearMessages();\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tvar qvalue = self.wquery.getClassMetaDataQuery(self.wquery.getConcreteDocumentClassPattern(\"v:Element\"),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tself.datatable.pageLength, self.datatable.start);\n\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_Document_Classes');\n\t\t\tself.query(qvalue, self.datatable);\n\t\t}\n\t\telse self.query(qvalue);\n\t})\n\n\tvar ebut = document.createElement(\"button\");\n\tebut.appendChild(document.createTextNode(\"Show All Schema Elements\"));\n\tebut.setAttribute(\"class\", \"terminus-control-button terminus-q-btn\");\n\tvar self = this;\n\tebut.addEventListener(\"click\", function(){\n\t\tself.ui.clearMessages();\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tvar qval = self.wquery.getElementMetaDataQuery(null, self.datatable.pageLength, self.datatable.start);\n\t\tqip.value = JSON.stringify(qval,undefined, 2);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Schema_Elements');\n\t\t\tself.query(qval, self.datatable);\n\t\t}\n\t\telse self.query(qval);\n\t})\n\tvar dbut = document.createElement(\"button\");\n\tdbut.appendChild(document.createTextNode(\"Show All Documents\"));\n\tdbut.setAttribute(\"class\", \"terminus-control-button terminus-q-btn\");\n\tdbut.addEventListener(\"click\", function(){\n\t\tself.ui.clearMessages();\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tvar qvalue = self.wquery.getAllDocumentQuery(null, self.datatable.pageLength, self.datatable.start);\n\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Documents');\n\t\t\tself.query(qvalue, self.datatable);\n\t\t}\n\t\telse self.query(qvalue);\n\t})\n\tvar pbut = document.createElement(\"button\");\n\tpbut.appendChild(document.createTextNode(\"Show All Data\"));\n\tpbut.setAttribute(\"class\", \"terminus-control-button terminus-q-btn\");\n\tpbut.addEventListener(\"click\", function(){\n\t\tself.ui.clearMessages();\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tvar qvalue = self.wquery.getEverythingQuery(null, self.datatable.pageLength, self.datatable.start);\n\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Data');\n\t\t\tself.query(qvalue, self.datatable);\n\t\t}\n\t\telse self.query(qvalue);\n\t})\n\n\tvar prbut = document.createElement(\"button\");\n\tprbut.appendChild(document.createTextNode(\"Show All Properties\"));\n\tprbut.setAttribute(\"class\", \"terminus-control-button terminus-q-btn\");\n\tprbut.addEventListener(\"click\", function(){\n\t\tself.ui.clearMessages();\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tvar qvalue = self.wquery.getPropertyListQuery(null, self.datatable.pageLength, self.datatable.start);\n\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Properties');\n\t\t\tself.query(qvalue, self.datatable);\n\t\t}\n\t\telse self.query(qvalue);\n\t})\n\n\t/* grouping data queries */\n\tvar qdGroup = this.qGroupQueries(qrow, 'Data Queries', '');\n\n\tvar termcc = new TerminusClassChooser(this.ui);\n\ttermcc.empty_choice = \"Show data of type\";\n\tvar self = this;\n\ttermcc.change = function(new_class){\n\t\tself.ui.clearMessages();\n\t\tif(new_class){\n\t\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\t\tvar qvalue = self.wquery.getDataOfChosenClassQuery(new_class, self.datatable.pageLength, self.datatable.start);\n\t\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\n\t\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\t\tself.gatherDatatableSettings(qip, 'Show_Data_Class');\n\t\t\t\tself.datatable.chosenValue = new_class; // set chosen val from drop down\n\t\t\t\tself.query(qvalue, self.datatable);\n\t\t\t}\n\t\t\telse self.query(qvalue);\n\t\t}\n\t}\n\tvar tcdom = termcc.getAsDOM('terminus-query-select');\n\n\tvar termpc = new TerminusPropertyChooser(this.ui);\n\ttermpc.empty_choice = \"Show property data\";\n\tvar self = this;\n\ttermpc.change = function(new_property){\n\t\tif(new_property){\n\t\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\t\tvar qvalue = self.wquery.getDataOfChosenPropertyQuery(new_property, self.datatable.pageLength, self.datatable.start);\n\t\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\n\t\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\t\tself.gatherDatatableSettings(qip, 'Show_Property_Class');\n\t\t\t\tself.datatable.chosenValue = new_property; // set chosen val from drop down\n\t\t\t\tself.query(qvalue, self.datatable);\n\t\t\t}\n\t\t\telse self.query(qvalue);\n\t\t}\n\t}\n\n\t/* grouping document queries */\n\tvar qdocGroup = this.qGroupQueries(qrow, 'Document Queries', '');\n\n\tvar pdom = termpc.getAsDOM();\n\n\tvar docch = new TerminusDocumentChooser(this.ui);\n\tdocch.change = function(val){\n\t\tself.ui.clearMessages();\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tvar qvalue = self.wquery.getDocumentQuery(val, self.datatable.pageLength, self.datatable.start);\n\t\tqip.value = JSON.stringify(qvalue,undefined, 2);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_Document_Info_by_Id');\n\t\t\tself.datatable.chosenValue = val;\n\t\t\tself.query(qvalue, self.datatable);\n\t\t}\n\t\telse self.query(qvalue);\n\t}\n\tvar docdom = docch.getAsDOM('terminus-query-select');\n\n\tvar d2ch = new TerminusDocumentChooser(this.ui, TerminusClient.FrameHelper.unshorten(\"tcs:Document\"));\n\td2ch.view = \"label\";\n\td2ch.change = docch.change;\n\tvar d2dom = d2ch.getAsDOM('terminus-query-select');\n\tvar p = document.createElement(\"p\");\n\tp.appendChild(d2dom);\n\n\t/* class queries */\n\tvar clGroup = document.createElement('div');\n\tclGroup.setAttribute('class', 'terminus-hide ');\n\tclGroup.appendChild(ebut);\n\tvar br = document.createElement('BR');\n\tclGroup.appendChild(br);\n\tclGroup.appendChild(nqbut);\n\tvar br = document.createElement('BR');\n\tclGroup.appendChild(br);\n\tclGroup.appendChild(aqbut);\n\tvar br = document.createElement('BR');\n\tclGroup.appendChild(br);\n\tclGroup.appendChild(prbut);\n\tvar br = document.createElement('BR');\n\tclGroup.appendChild(br);\n\tqcGroup.appendChild(clGroup);\n\n\tqbox.appendChild(qexs);\n\n\t/* data queries */\n\tvar dtGroup = document.createElement('div');\n\tdtGroup.setAttribute('class', 'terminus-hide');\n\tdtGroup.appendChild(tcdom);\n\tdtGroup.appendChild(pdom);\n\n\tvar br = document.createElement('BR');\n\tdtGroup.appendChild(br);\n\tdtGroup.appendChild(pbut);\n\tqdGroup.appendChild(dtGroup);\n\n\n\t/* document queries */\n\tvar docGroup = document.createElement('div');\n\tdocGroup.setAttribute('class', 'terminus-hide');\n\tdocGroup.appendChild(docdom);\n\tdocGroup.appendChild(dbut);\n\t//docGroup.appendChild(p);\n\tqdocGroup.appendChild(docGroup);\n\n\treturn qbox;\n}\n\nmodule.exports=WOQLTextboxGenerator\n","/*\n * Utility Property which runs a query against the schema and presents the returned Propertyes as a drop-down / Property filter list\n */\nconst WOQLQuery = require('../query/WOQLQuery');\n\nTerminusPropertyChooser = function(ui, filter){\n\tthis.ui = ui;\n\tthis.choice = false;\n\tthis.filter = filter;\n}\n\nTerminusPropertyChooser.prototype.setRoot = function(root){\n\tthis.root = root;\n}\n\nTerminusPropertyChooser.prototype.setFilter = function(filter){\n\tthis.filter = filter;\n}\n\nTerminusPropertyChooser.prototype.change = function(cls){\n\talert(\"Need to specify Property chooser function (\" + cls + \")\");\n}\n\nTerminusPropertyChooser.prototype.getAsDOM = function(){\n\tvar ccdom = document.createElement(\"span\");\n\tccdom.setAttribute(\"Class\", \"terminus-Class-chooser\");\n\tvar ccsel = document.createElement(\"select\");\n\tccsel.setAttribute(\"Class\", \" terminus-type-select terminus-query-select\");\n\tvar self = this;\n\tccsel.addEventListener(\"change\", function(){\n\t\tif(this.value != this.choice){\n\t\t\tthis.choice = this.value;\n\t\t\tself.change(this.value);\n\t\t}\n\t});\n\tccdom.appendChild(ccsel);\n\tvar wq = new WOQLQuery(this.ui.client, false, this.ui);\n\tvar woql = wq.getPropertyListQuery(this.filter);\n\tvar self = this;\n\twq.execute(woql)\n\t.then(function(response){\n\t\tvar opts = self.getResultsAsOptions(response);\n\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\tccsel.appendChild(opts[i]);\n\t\t}\n\t});\n\treturn ccdom;\n}\n\nTerminusPropertyChooser.prototype.getResultsAsOptions = function(clist){\n\tvar choices = [];\n\tif(this.empty_choice){\n\t\tvar opt1 = document.createElement(\"option\");\n\t\topt1.setAttribute(\"Class\", \"terminus-class-choice terminus-empty-choice\");\n\t\topt1.value = \"\";\n\t\topt1.appendChild(document.createTextNode(this.empty_choice));\n\t\tchoices.push(opt1);\n\t}\n\tvar labopt = document.createElement(\"option\");\n\tlabopt.setAttribute(\"Class\", \"terminus-class-choice\");\n\tlabopt.value = \"rdfs:label\";\n\tlabopt.appendChild(document.createTextNode(\"Label\"));\n\tchoices.push(labopt);\n\n\tvar comopt = document.createElement(\"option\");\n\tcomopt.setAttribute(\"Class\", \"terminus-class-choice\");\n\tcomopt.value = \"rdfs:comment\";\n\tcomopt.appendChild(document.createTextNode(\"Comment\"));\n\tchoices.push(comopt);\n\n\tif(clist.bindings){\n\t\tvar added = [];\n\t\tfor(var i = 0; i<clist.bindings.length; i++){\n\t\t\tvar cprop = this.getVariableValueFromBinding(\"Property\", clist.bindings[i]);\n\t\t\tif(cprop && added.indexOf(cprop) == -1){\n\t\t\t\tadded.push(cprop);\n\t\t\t\tvar opt = document.createElement(\"option\");\n\t\t\t\topt.setAttribute(\"Class\", \"terminus-class-choice\");\n\t\t\t\topt.value = cprop;\n\t\t\t\tvar lab = this.getVariableValueFromBinding(\"Label\", clist.bindings[i]);\n\t\t\t\tif(!lab || lab == \"unknown\"){\n\t\t\t\t\tlab = TerminusClient.FrameHelper.labelFromURL(cprop);\n\t\t\t\t}\n\t\t\t\tif(lab[\"@value\"]) lab = lab[\"@value\"];\n\t\t\t\topt.appendChild(document.createTextNode(lab));\n\t\t\t\tchoices.push(opt);\n\t\t\t}\n\t\t}\n\t}\n\treturn choices;\n}\n\nTerminusPropertyChooser.prototype.getVariableValueFromBinding = function(varname, bind){\n\tfor(var key in bind){\n\t\tvar skey = key.substring(key.lastIndexOf(\"/\")+1);\n\t\tif(skey == varname){\n\t\t\treturn bind[key];\n\t\t}\n\t}\n\treturn false;\n}\n\n\nmodule.exports=TerminusPropertyChooser\n","function TerminusMappingViewer(ui, mode){\n\tthis.ui = ui;\n\tthis.mode = (mode ? mode : \"data\");\n}\n\nTerminusMappingViewer.prototype.getAsDOM = function(){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-mapping-page terminus-page\");\n\tvar tsel = document.createElement(\"select\");\n\tvar o1 = document.createElement(\"option\");\n\to1.value = \"data\";\n\to1.appendChild(document.createTextNode(\"Data Map\"))\n\ttsel.appendChild(o1);\n\tvar o2 = document.createElement(\"option\");\n\to2.value = \"model\";\n\to2.appendChild(document.createTextNode(\"Model Map\"))\n\ttsel.appendChild(o2);\n\tvar ff = this.getFormFieldDOM(\"Map Type\");\n\tff.appendChild(tsel);\n\tscd.appendChild(ff);\n\tvar source = this.getFormField(scd, \"Map Source\");\n\tvar target = this.getFormField(scd, \"Map Target\");\n\tvar queries = this.getFormField(scd, \"Queries\");\n\tvar options = this.getFormField(scd, \"Options\");\n\t\n\tvar mdom = this.getFormFieldDOM(\"Existing Mapping\");\n\tvar mapping = document.createElement(\"input\");\n\tmapping.setAttribute(\"type\", \"text\");\n\tmapping.setAttribute(\"size\", 80);\n\tmdom.appendChild(mapping);\n\tscd.appendChild(mdom);\n\t\n\tvar submit = document.createElement(\"button\");\n\tsubmit.setAttribute(\"class\", \"terminus-btn terminus-control-button\");\n\tsubmit.appendChild(document.createTextNode(\"Execute Mapping\"));\n\tvar self = this;\n\tsubmit.addEventListener(\"click\", function(){\n\t\tvar jsonip = {\n\t\t\tmap_source: JSON.parse(source.value),\n\t\t};\n\t\tif(tsel.value == \"data\"){\n\t\t\tjsonip[\"rdf:type\"] = \"dcogmodel:DataMap\";\n\t\t}\n\t\telse {\n\t\t\tjsonip[\"rdf:type\"] = \"dcogmodel:ModelMap\";\t\t\t\n\t\t}\n\t\tif(target.value) jsonip.map_target = target.value;\n\t\tif(queries.value) jsonip.queries = queries.value;\n\t\tif(options.value) jsonip.options = options.value;\n\t\tif(mapping.value) jsonip.mapping = mapping.value;\n\t\tself.ui.client.update(false, jsonip);\n\t})\n\tscd.appendChild(submit);\n\treturn scd;\n}\n\nTerminusMappingViewer.prototype.getFormFieldDOM = function(label){\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-mapping-field\");\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"terminus-form-label terminus-mapping-label\");\n\tlab.appendChild(document.createTextNode(label));\n\tsci.appendChild(lab);\n\treturn sci;\n}\n\nTerminusMappingViewer.prototype.getFormField = function(holder, label){\n\tvar ff = this.getFormFieldDOM(label);\n\tvar source = document.createElement(\"textarea\");\n\tsource.setAttribute(\"class\", \"terminus-form-value terminus-textarea\");\n\tff.appendChild(source);\n\tholder.appendChild(ff);\n\treturn source;\n}\n\nmodule.exports=TerminusMappingViewer\n","/*\n * Draws the screen for viewing and updating the schema\n * and provides wrappers around the client's schema API\n */\nconst TerminusClassChooser = require('./TerminusClassChooser');\nconst TerminusDocumentViewer = require('./TerminusDocument');\nconst UTILS=require('../Utils')\n\nfunction TerminusSchemaViewer(ui){\n\tthis.ui = ui;\n\tthis.mode = \"view\";\n\tthis.format = \"turtle\";\n\tthis.confirm_before_update = false;\n}\n\n/*\n * Retrieves schema from API and writes the response into the page\n */\nTerminusSchemaViewer.prototype.getAsDOM = function(){\n\tthis.holder = document.createElement(\"div\");\n\tthis.controldom = document.createElement(\"div\");\n\tthis.controldom.setAttribute(\"class\", \"terminus-schema-controls\");\n\tthis.pagedom = document.createElement(\"div\");\n\tthis.pagedom.setAttribute(\"class\", \"terminus-schema-viewer\");\n\tthis.loadSchema();\n\tthis.holder.appendChild(this.controldom);\n\tthis.holder.appendChild(this.pagedom);\n\treturn this.holder;\n}\n\nTerminusSchemaViewer.prototype.loadSchema = function(msg, msgtype){\n\tvar self = this;\n\tthis.ui.showBusy(\"Fetching Database Schema\");\n\tthis.ui.client.getSchema(false, {\"terminus:encoding\": \"terminus:\" + this.format})\n\t.then(function(response){\n\t\tself.ui.clearBusy();\n\t\tself.schema = response;\n\t\tself.refreshPage(msg, msgtype);\n\t})\n\t.catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\n}\n\nTerminusSchemaViewer.prototype.resetControlDOM = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.controldom);\n\tif(this.mode == \"edit\"){\n\t\tthis.controldom.appendChild(this.getSchemaSaveButtons());\n\t}\n\telse if(this.mode == \"import\"){\n\t\tthis.controldom.appendChild(this.getSchemaImportActionButtons());\n\t}\n\telse if(this.mode == \"class_frame\"){\n\t\tif(this.ui.showControl(\"get_schema\")){\n\t\t\tthis.controldom.appendChild(this.getShowSchemaButton());\n\t\t}\n\t\tif(this.ui.showControl(\"class_frame\")){\n\t\t\tthis.controldom.appendChild(this.getClassFrameChooser());\n\t\t}\n\t}\n\telse if(this.mode == \"view\"){\n\t\tif(this.ui.showControl(\"update_schema\")){\n\t\t\tthis.controldom.appendChild(this.getSchemaEditButton());\n\t\t}\n\t\tif(this.ui.showControl(\"import_schema\")){\n\t\t\tthis.controldom.appendChild(this.getImportButton());\n\t\t}\n\t\tif(this.ui.showControl(\"schema_format\")){\n\t\t\tthis.controldom.appendChild(this.getFormatChoices());\n\t\t}\n\t\tif(this.ui.showControl(\"class_frame\")){\n\t\t\tthis.controldom.appendChild(this.getClassFrameChooser());\n\t\t}\n\t}\n}\n\nTerminusSchemaViewer.prototype.getFormatChoices = function(){\n\tvar fc = document.createElement(\"select\");\n\tfc.setAttribute(\"class\", \"terminus-form-select terminus-schema-format terminus-type-select\");\n\tvar tc = document.createElement(\"option\");\n\ttc.setAttribute(\"class\", \"terminus-schema-turtle\");\n\ttc.value = \"turtle\";\n\ttc.appendChild(document.createTextNode(\"Turtle\"));\n\tif(this.format == \"turtle\") tc.selected = true;\n\tfc.appendChild(tc);\n\tvar tj = document.createElement(\"option\");\n\ttj.setAttribute(\"class\", \"terminus-schema-jsonld\");\n\ttj.value = \"jsonld\";\n\ttj.appendChild(document.createTextNode(\"Json LD\"));\n\tif(this.format == \"jsonld\") tj.selected = true;\n\tfc.appendChild(tj);\n\tvar self = this;\n\tfc.addEventListener(\"change\", function(e){\n\t\tself.format = this.value;\n\t\tself.loadSchema();\n\t});\n\treturn fc;\n}\n\n\nTerminusSchemaViewer.prototype.refreshPage = function(msg, msgtype){\n\tif(this.controldom) this.resetControlDOM();\n\tif(this.pagedom) this.refreshMainPage(msg, msgtype);\n}\n\nTerminusSchemaViewer.prototype.refreshMainPage = function(msg, msgtype){\n\tTerminusClient.FrameHelper.removeChildren(this.pagedom);\n\tif(this.mode == 'view'){\n\t\tthis.pagedom.appendChild(this.getSchemaViewDOM());\n\t}\n\telse if(this.mode == \"edit\"){\n\t\tthis.pagedom.appendChild(this.getSchemaEditDOM());\n\t}\n\telse if(this.mode == \"import\"){\n\t\tthis.pagedom.appendChild(this.getSchemaImportDOM());\n\t}\n\telse if(this.mode == \"class_frame\"){\n\t\tthis.pagedom.appendChild(this.getClassFrameDOM());\n\t}\n\tif(msg){\n\t\tthis.ui.showMessage(msg, msgtype);\n\t}\n}\n\nTerminusSchemaViewer.prototype.getSchemaSaveButtons = function(){\n\tvar ssb = document.createElement(\"span\");\n\tssb.setAttribute(\"class\", \"terminus-schema-save-buttons\");\n\tssb.appendChild(this.getCancelButton());\n\tssb.appendChild(this.getSaveButton());\n\treturn ssb;\n}\n\nTerminusSchemaViewer.prototype.getSchemaImportActionButtons = function(){\n\tvar ssb = document.createElement(\"span\");\n\tssb.setAttribute(\"class\", \"terminus-schema-import-buttons\");\n\tssb.appendChild(this.getCancelButton(true));\n\tssb.appendChild(this.getImportSaveButton());\n\treturn ssb;\n}\n\nTerminusSchemaViewer.prototype.getShowSchemaButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tself.mode = \"view\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"View Schema\", \"get_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getImportPreviewButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tself.mode = \"preview\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"Preview\", \"preview\", func);\n}\n\nTerminusSchemaViewer.prototype.getCancelButton = function(is_import){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tself.mode = \"view\";\n\t\tif(is_import){\n\t\t\tself.ui.redraw();\n\t\t}\n\t\telse {\n\t\t\tself.refreshPage();\n\t\t}\n\t}\n\treturn this.getSchemaButton(\"Cancel\", \"cancel_update\", func);\n}\n\nTerminusSchemaViewer.prototype.getImportSaveButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tif(typeof self.doImport == \"function\"){\n\t\t\tself.doImport();\n\t\t}\n\t}\n\treturn this.getSchemaButton(\"Import\", \"import_schema\", func)\n}\n\nTerminusSchemaViewer.prototype.getSaveButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tvar text = self.schema_edit_dom.value;\n\t\tif(typeof(self.schema) == \"object\"){\n\t\t\ttext = JSON.parse(text);\n\t\t}\n\t\treturn self.updateSchema(text, {\"terminus:encoding\": \"terminus:\" + self.format});\n\t}\n\treturn this.getSchemaButton(\"Save\", \"update_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getSchemaEditButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.mode = \"edit\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"Edit\", \"update_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getImportButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tself.mode = \"import\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"Import New Schema\", \"import_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getSchemaButton = function(label, action, func){\n\tvar opt = document.createElement(\"button\");\n\topt.appendChild(document.createTextNode(label));\n\topt.setAttribute(\"class\", \"terminus-btn terminus-control-button terminus-schema-\" + action);\n\topt.addEventListener(\"click\", func);\n\treturn opt;\n}\n\n/*\n * Updates schema, then fetches updated version and updates the page with it\n */\nTerminusSchemaViewer.prototype.updateSchema  = function(text, opts){\n\tthis.ui.showBusy(\"Updating Database Schema\");\n\tvar self = this;\n\treturn this.ui.client.updateSchema(false, text, opts)\n\t.then(function(response){\n\t\tif(response['terminus:status'] && response['terminus:status'] == \"terminus:success\"){\n\t\t\tself.ui.showBusy(\"Retrieving updated schema\");\n\t\t\tself.mode = \"view\";\n\t\t\tself.loadSchema(\"Successfully Updated Schema\");\n\t\t\tself.ui.redraw();\n\t\t}\n\t\telse if(response['terminus:status'] && response['terminus:status'] == \"terminus:failure\"){\n\t\t\tself.ui.clearBusy();\n\t\t\tself.ui.showViolations(response['terminus:witnesses'], \"schema\");\n\t\t}\n\t\telse {\n\t\t\tthrow new Error(\"Update Schema returned no terminus:status code\");\n\t\t}\n\t})\n\t.catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tif(error.data && error.data['terminus:witnesses']){\n\t\t\tself.ui.showViolations(error.data['terminus:witnesses'], \"schema\");\t\t\t\n\t\t}\n\t\telse {\n\t\t\tself.ui.showError(error);\n\t\t}\n\t});\n}\n\n/*\n * Imports a schema from the passed url\n * mode: replace | append\n */\nTerminusSchemaViewer.prototype.load  = function(url, key, mode){\n\tvar self = this;\n\tmode = (mode ? mode : \"replace\");\n\tthis.ui.showBusy(\"Loading schema from \" + url);\n\tvar origurl = this.ui.client.connectionConfig.schemaURL();\n\treturn this.ui.client.getSchema(url, {\"terminus:user_key\": key, \"terminus:encoding\" : \"terminus:\" + this.format})\n\t.then(function(response){\n\t\tvar newschema = (mode == \"append\") ? self.appendSchema(response) : response;\n\t\tif(self.confirm_before_update){\n\t\t\t//reconnect to original db\n\t\t\tself.ui.showResult(\"Schema retrieved - click save to deploy\");\n\t\t\tself.ui.client.connectionConfig.setSchemaURL(origurl);\n\t\t\tself.showConfirmPage(newschema);\n\t\t}\n\t\telse {\n\t\t\tself.ui.showBusy(\"Updating schema\");\n\t\t\tself.ui.client.connectionConfig.setSchemaURL(origurl);\n\t\t\tself.updateSchema(newschema, {\"terminus:encoding\": \"terminus:\" + self.format}).then(function(response){\n\t\t\t\tself.mode = \"view\";\n\t\t\t\tself.ui.clearBusy();\n\t\t\t\tself.ui.redraw();\n\t\t\t\tself.ui.showResult(\"Successfully deployed new schema from \" + url);\n\t\t\t\treturn response;\n\t\t\t});\n\t\t}\n\t}).catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\n}\n\nTerminusSchemaViewer.prototype.appendSchema = function(s2){\n\tvar nschema = this.schema;\n\tif(this.format == 'turtle'){\n\t\tnschema = this.schema + s2;\n\t}\n\telse if(this.format == 'jsonld'){\n\t\tfor(var i in s2){\n\t\t\tnschema[i] = s2[i];\n\t\t}\n\t}\n\treturn nschema;\n}\n\nTerminusSchemaViewer.prototype.getClassFrameChooser = function(){\n\tvar np = document.createElement(\"span\");\n\tnp.setAttribute(\"class\", \"terminus-class frame-chooser\");\n\tvar termcc = new TerminusClassChooser(this.ui);\n\ttermcc.empty_choice = \"View Individual Class Frames\";\n\tvar self = this;\n\ttermcc.change = function(new_class){\n\t\tif(new_class){\n\t\t\tself.cls = new_class;\n\t\t\tif(self.mode != \"class_frame\"){\n\t\t\t\tself.mode = \"class_frame\";\n\t\t\t\tself.refreshPage();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tself.refreshMainPage();\n\t\t\t}\n\t\t}\n\t}\n\tvar tcdom = termcc.getAsDOM();\n\tnp.appendChild(tcdom);\n\treturn np;\n}\n\nTerminusSchemaViewer.prototype.getClassFrameDOM = function(){\n\tvar np = document.createElement(\"div\");\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-classframe-page\");\n\tvar docviewer = new TerminusDocumentViewer(this.ui, \"model\");\n\tdocviewer.loadCreateDocument(this.cls);\n\tdocviewer.page_config = \"model\";\n\tnp.appendChild(docviewer.getAsDOM());\n\treturn np;\n}\n\nTerminusSchemaViewer.prototype.showConfirmPage = function(newschema){\n\tthis.schema = newschema;\n\tthis.confirm_before_update = false;\n\tthis.mode = \"edit\";\n\tthis.refreshPage(\"Confirm new schema\");\n}\n\nTerminusSchemaViewer.prototype.getSchemaEditDOM = function(){\n\tvar np = document.createElement(\"div\");\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-edit-page\");\n\tvar ipval = document.createElement(\"textarea\");\n\tipval.setAttribute(\"class\", \"terminus-schema-edit terminus-schema-textarea\");\n\tipval.setAttribute(\"width\", \"100%\");\n\tipval.setAttribute(\"style\", \"min-width: 400px; min-height: 400px;\");\n\tif(typeof(this.schema) == \"string\"){\n\t\tipval.innerHTML = this.schema;\n\t}\n\telse if(typeof (this.schema) == \"object\") {\n\t\tipval.innerHTML = JSON.stringify(this.schema, 0, 4);\n\t}\n\tthis.schema_edit_dom = ipval;\n\tnp.appendChild(ipval);\n\tUTILS.stylizeEditor(this.ui, ipval, 'schema', 'turtle');\n\treturn np;\n}\n\nTerminusSchemaViewer.prototype.getSchemaViewDOM = function(){\n\tvar self = this;\n\tvar np = document.createElement(\"div\");\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-view-page\");\n\tvar ipval = document.createElement(\"pre\");\n\tipval.setAttribute(\"class\", \"terminus-schema-view terminus-scheme-pre\");\n\tif(typeof(this.schema) == \"string\"){\n\t\tvar txt = this.schema.replace(/&/g, \"&amp;\")\n         .replace(/</g, \"&lt;\")\n         .replace(/>/g, \"&gt;\")\n         .replace(/\"/g, \"&quot;\")\n         .replace(/'/g, \"&#039;\");\n\t\tipval.innerHTML = txt;\n\t}\n\telse if(typeof (this.schema) == \"object\") {\n\t\tipval.innerHTML = JSON.stringify(this.schema, 0, 4);\n\t}\n\tvar cm = UTILS.stylizeCodeDisplay(this.ui, ipval, np, 'turtle');\n\tif(!cm) np.appendChild(ipval);\n\treturn np;\n}\n\nTerminusSchemaViewer.prototype.getSchemaImportDOM = function(){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-form-border terminus-schema-page terminus-schema-import-page\");\n\n\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-url-loader-input terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"URL\"));\n\tsci.appendChild(slab);\n\tvar inpUrl  = document.createElement(\"input\");\n\tinpUrl.setAttribute(\"type\", \"text\");\n\tinpUrl.setAttribute(\"class\", \"terminus-form-value terminus-input-text terminus-form-url terminus-url-connect\");\n\tinpUrl.setAttribute(\"placeholder\", \"Enter URL of DB to import from\");\n\tsci.appendChild(inpUrl);\n\tscd.appendChild(sci);\n\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar klab = document.createElement(\"span\");\n\tklab.setAttribute(\"class\", \"terminus-url-loader-input terminus-form-label  terminus-control-label terminus-import_mode-input\");\n\tklab.appendChild(document.createTextNode(\"Import Mode\"));\n\tsci.appendChild(klab);\n\tvar modes = document.createElement(\"select\");\n\tmodes.setAttribute(\"class\", \"terminus-form-select\");\n\n\tvar overwrite = document.createElement(\"option\");\n\toverwrite.value = \"replace\";\n\toverwrite.appendChild(document.createTextNode(\"Replace Mode\"))\n\tmodes.appendChild(overwrite);\n\tvar append = document.createElement(\"option\");\n\tappend.value = \"append\";\n\tappend.appendChild(document.createTextNode(\"Append Mode\"))\n\tmodes.appendChild(append);\n\tmodes.setAttribute(\"class\", \"terminus-form-select terminus-import-mode\");\n\tsci.appendChild(klab);\n\tsci.appendChild(modes);\n\tscd.appendChild(sci);\n\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar klab = document.createElement(\"span\");\n\tklab.setAttribute(\"class\", \"terminus-form-label terminus-url-key-input terminus-control-label\");\n\tklab.appendChild(document.createTextNode(\"Key\"))\n\tvar key = document.createElement(\"input\");\n\tkey.setAttribute(\"type\", \"text\");\n\tkey.setAttribute(\"class\", \"terminus-form-value terminus-input-text terminus-url-key\");\n\tsci.appendChild(klab);\n\tsci.appendChild(key);\n\tscd.appendChild(sci);\n\tvar self = this;\n\tthis.doImport = function(){\n\t\tif(inpUrl.value){\n\t\t\tself.load(inpUrl.value, key.value, modes.value);\n\t\t}\n\t}\n\treturn scd;\n}\n\nmodule.exports=TerminusSchemaViewer\n","/* User interface elements that relate to server context\n *\n * TerminusServerController is a control widget that invokes server actions\n * TerminusServerViewer is a window that displays server actions and server screens\n *\n */\n const Datatables = require('../plugins/datatables.terminus');\n const UTILS =require('../Utils')\n function TerminusServerController(ui){\n\t this.ui = ui;\n }\n\nTerminusServerController.prototype.getAsDOM = function(){\n\tvar rsc = document.createElement(\"div\");\n\trsc.setAttribute(\"class\", \"terminus-server-controller\");\n\tvar self = this;\n\tif(this.ui && this.ui.server()){\n\t\tvar scd = document.createElement(\"div\");\n\t\tscd.setAttribute(\"class\", \"terminus-server-connectiAlso, the title / hover stuff should include the full entry when it is shortened (for urls / comments) so when I hover over it I should see the full texton\");\n        var nav = document.createElement('div');\n        nav.setAttribute('class', 'span3');\n        var ul = document.createElement('ul');\n        ul.setAttribute('class', 'terminus-ul');\n        nav.appendChild(ul);\n        rsc.appendChild(nav);\n        // connected to server\n        var a = document.createElement('a');\n        a.setAttribute('class', 'terminus-dashboard-info terminus-list-group-a terminus-nav-width');\n        var txt = 'Server: ' + this.ui.server();\n        a.appendChild(document.createTextNode(txt));\n        ul.appendChild(a);\n        // change server\n        if(this.ui.showControl(\"change-server\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n                UTILS.activateSelectedNav(this, self);\n                self.ui.showLoadURLPage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-link');\n            a.appendChild(icon);\n            var txt = document.createTextNode('Change Server');\n            a.appendChild(txt);\n            ul.appendChild(a);\n        }\n        // view databases\n        if(this.ui.showControl(\"db\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n                UTILS.activateSelectedNav(this, self);\n                if(self.ui.db()){\n                    //self.ui.clearDB();\n                }\n                self.ui.showServerMainPage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-eye');\n            a.appendChild(icon);\n            var txt = document.createTextNode('View Databases');\n            a.appendChild(txt);\n            ul.appendChild(a);\n        }\n        if(this.ui.showControl(\"create_database\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n               UTILS.activateSelectedNav(this, self);\n                if(self.ui.db()){\n                    //self.ui.clearDB();\n                }\n                self.ui.showCreateDBPage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-plus');\n            a.appendChild(icon);\n            var txt = document.createTextNode('Create New Database');\n            a.appendChild(txt);\n            ul.appendChild(a);\n        }\n\t}\n\treturn rsc;\n}\n\nTerminusServerController.prototype.getServerLabelDOM = function(){\n\tvar srec = this.ui.client.connection.getServerRecord();\n\tvar lab = (srec && srec['rdfs:label'] && srec['rdfs:label'][\"@value\"] ? srec['rdfs:label'][\"@value\"] : this.ui.server());\n\tvar desc = (srec && srec['rdfs:comment'] && srec['rdfs:comment'][\"@value\"] ? srec['rdfs:comment'][\"@value\"] : \"\");\n\tdesc += \" Server URL: \"+ this.ui.server();\n\tvar val = document.createElement(\"span\");\n\tval.setAttribute(\"class\", \"terminus-server-value\");\n\tval.setAttribute(\"title\", desc);\n\tval.appendChild(document.createTextNode(lab));\n    val =  document.createElement('div');\n\treturn val;\n}\n\nfunction TerminusServerViewer(ui){\n\tthis.ui = ui;\n\tthis.server = this.ui.server();\n\tthis.max_cell_size = 500;\n\tthis.max_word_size = 40;\n}\n\nTerminusServerViewer.prototype.getAsDOM = function(selected){\n\tvar self = this;\n\tvar pd = document.createElement(\"span\");\n\tpd.setAttribute(\"class\", \"terminus-server-home-page\");\n\tif(this.ui.server()){\n\t\tvar scd = document.createElement(\"span\");\n\t\tscd.setAttribute(\"class\", \"terminus-server-home\");\n\t\tif(this.ui.showView(\"server\")){\n\t\t\t// 11092019 scd.appendChild(this.getServerDetailsDOM());\n\t\t}\n\t\tif(this.ui.showView(\"change-server\")){\n\t\t\tvar csbut = document.createElement(\"button\");\n\t\t\tcsbut.setAttribute(\"class\", \"terminus-control-button terminus-change-server-button terminus-btn\")\n\t\t\tcsbut.appendChild(document.createTextNode(\"Disconnect\"));\n\t\t\tcsbut.addEventListener(\"click\", function(){\n\t\t\t\t//self.ui.clearDB();\n\t\t\t\t//self.ui.clearServer();\n\t\t\t\tself.ui.showLoadURLPage();\n\t\t\t})\n\t\t\t// 11092019 scd.appendChild(csbut);\n\t\t}\n\t\tif(this.ui.showView(\"create_database\")){\n\t\t\tvar crbut = document.createElement(\"button\");\n\t\t\tcrbut.setAttribute(\"class\", \"terminus-control-button terminus-create-db-button terminus-btn\")\n\t\t\tcrbut.appendChild(document.createTextNode(\"Create New Database\"));\n\t\t\tcrbut.addEventListener(\"click\", function(){\n\t\t\t\tif(self.ui.db()){\n\t\t\t\t\t//self.ui.clearDB();\n\t\t\t\t}\n\t\t\t\tself.ui.clearMessages();\n\t\t\t\tself.ui.showCreateDBPage();\n\t\t\t})\n\t\t\t// 11092019 scd.appendChild(crbut);\n\t\t}\n\t\tif(this.ui.showView(\"db\")){\n\t\t\tscd.appendChild(this.getDBListDOM());\n\t\t}\n\t\tpd.appendChild(scd);\n\t}\n\telse {\n\t\tself.ui.showLoadURLPage();\n\n\t\t//pd.appendChild(this.getLoadURLPage());\n\t}\n\treturn pd;\n}\n\nTerminusServerViewer.prototype.getServerDetailsDOM = function(){\n\tvar scd = document.createElement(\"span\");\n\tscd.setAttribute(\"class\", \"terminus-server-details terminus-server-banner\");\n\tvar scl = document.createElement(\"span\");\n\tscl.setAttribute(\"class\", \"terminus-label terminus-server-info\");\n\tscl.appendChild(document.createTextNode(\"Connected to Server - \"))\n\tvar scs = document.createElement(\"span\");\n\tscs.setAttribute(\"class\", \"terminus-value terminus-server-info\");\n\tscs.appendChild(document.createTextNode(this.ui.server()))\n\tscd.appendChild(scl);\n\tscd.appendChild(scs);\n\treturn scd;\n}\n\nTerminusServerViewer.prototype.wrapTableLinkCell = function(tdElement,dbid, text){\n\tvar self = this;\n\tvar wrap = document.createElement(\"p\");\n//\twrap.setAttribute(\"href\", \"#\");\n\twrap.setAttribute(\"class\", \"terminus-table-content\");\n\tif(text.length > this.max_cell_size){\n\t\twrap.setAttribute(\"title\", text);\n\t\ttext = text.substring(0, this.max_cell_size) + \"...\";\n\t}\n\tconst replacements = {}\n\tconst words = text.split(\" \");\n\tfor(var i = 0; i < words.length; i++){\n\t\tvar word = words[i];\n\t\tif(word.length > this.max_word_size){\n\t\t\twrap.setAttribute(\"title\", text);\n\t\t\tvar newstr = word.substring(0, this.max_word_size) + \"...\";\n\t\t\treplacements[word] = newstr;\n\t\t}\n\t}\n\tfor(var k in replacements){\n\t\ttext = text.replace(k, replacements[k]);\n\t}\n\twrap.appendChild(document.createTextNode(text));\n\ttdElement.addEventListener(\"click\", function(){\n\t\tself.ui.connectToDB(dbid);\n\t\tself.ui.showDBMainPage();\n\t});\n\treturn wrap;\n}\n\nTerminusServerViewer.prototype.getDBListDOM = function(){\n\tvar self = this;\n\tvar sec = document.createElement(\"div\");\n\tvar lihed = document.createElement(\"h3\");\n\tlihed.setAttribute(\"class\", \"terminus-db-list-title terminus-module-head\");\n\tlihed.appendChild(document.createTextNode(\"Available Databases\"));\n\tsec.appendChild(lihed);\n\tvar scd = document.createElement(\"table\");\n\tscd.setAttribute(\"class\", \"terminus-db-list terminus-db-size terminus-hover-table\");\n\tvar thead = document.createElement(\"thead\");\n\tvar thr = document.createElement(\"tr\");\n\tvar th1 = document.createElement(\"th\");\n\tth1.appendChild(document.createTextNode(\"ID\"));\n\tth1.setAttribute(\"class\", \"terminus-db-id terminus-table-header-full-css\");\n\tvar th2 = document.createElement(\"th\");\n\tth2.appendChild(document.createTextNode(\"Title\"));\n\tth2.setAttribute(\"class\", \"terminus-db-title terminus-table-header-full-css\");\n\tvar th3 = document.createElement(\"th\");\n\tth3.appendChild(document.createTextNode(\"Description\"));\n\tth3.setAttribute(\"class\", \"terminus-db-description terminus-table-header-full-css\");\n\tvar th4 = document.createElement(\"th\");\n\tth4.setAttribute(\"class\", \"terminus-db-size terminus-table-header-full-css\");\n\tth4.appendChild(document.createTextNode(\"Size\"));\n\tvar th5 = document.createElement(\"th\");\n\tth5.setAttribute(\"class\", \"terminus-db-created terminus-table-header-full-css\");\n\tth5.appendChild(document.createTextNode(\"Created\"));\n\tvar th6 = document.createElement(\"th\");\n\tth6.appendChild(document.createTextNode(\"Delete\"));\n\tth6.setAttribute(\"class\", \"terminus-db-delete terminus-table-header-full-css\");\n\tthr.appendChild(th1);\n\tthr.appendChild(th2);\n\tthr.appendChild(th3);\n\t//thr.appendChild(th4);\n\t//thr.appendChild(th5);\n\tthr.appendChild(th6);\n\tthead.appendChild(thr);\n\tscd.appendChild(thead);\n\tvar tbody = document.createElement(\"tbody\");\n\tvar dbrecs = this.ui.client.connection.getServerDBRecords();\n\tfor(let fullid in dbrecs){\n\t\tlet dbrec = dbrecs[fullid];\n\t\tconst dbid = fullid.split(\":\")[1];\n\t\tlet tr = document.createElement(\"tr\");\n\t\tvar td1 = document.createElement(\"td\");\n\t\ttd1.appendChild(this.wrapTableLinkCell(td1,dbid, dbid));\n\t\ttd1.setAttribute(\"class\", \"terminus-db-id terminus-db-pointer\");\n\t\tvar td2 = document.createElement(\"td\");\n\t\ttd2.setAttribute(\"class\", \"terminus-db-title terminus-db-pointer\");\n\t\tvar txt = (dbrec && dbrec['rdfs:label'] && dbrec['rdfs:label']['@value'] ? dbrec['rdfs:label']['@value'] : \"\");\n\t\ttd2.appendChild(this.wrapTableLinkCell(td2,dbid, txt));\n\t\tvar td3 = document.createElement(\"td\");\n\t\ttd3.setAttribute(\"class\", \"terminus-db-description terminus-db-pointer\");\n\t\tvar txt = (dbrec && dbrec['rdfs:comment'] && dbrec['rdfs:comment']['@value'] ? dbrec['rdfs:comment']['@value'] : \"\");\n\t\ttd3.appendChild(this.wrapTableLinkCell(td3,dbid, txt));\n\t\tvar td4 = document.createElement(\"td\");\n\t\ttd4.setAttribute(\"class\", \"terminus-db-size terminus-db-pointer\");\n\t\tvar txt = (dbrec && dbrec['terminus:size'] && dbrec['terminus:size']['@value'] ? dbrec['terminus:size']['@value'] : \"\");\n\t\ttd4.appendChild(this.wrapTableLinkCell(td4,dbid, txt));\n\t\tvar td5 = document.createElement(\"td\");\n\t\ttd5.setAttribute(\"class\", \"terminus-db-created terminus-db-pointer\");\n\t\tvar txt = (dbrec && dbrec['terminus:last_updated'] && dbrec['terminus:last_updated']['@value'] ? dbrec['terminus:last_updated']['@value'] : \"\");\n\t\ttd5.appendChild(this.wrapTableLinkCell(td5,dbid, txt));\n\t\tvar td6 = document.createElement(\"td\");\n\t\ttd6.setAttribute(\"class\", \"db-delete\");\n        if(this.deleteDBPermitted(dbid)){\n            if(this.ui.pluginAvailable(\"font-awesome\")){\n                var delbut = document.createElement('i');\n        \t\tdelbut.setAttribute(\"class\", \"terminus-db-list-del-icon fa fa-times-circle\");\n        \t}\n            else{\n                var delbut = document.createElement(\"button\");\n    \t\t\tdelbut.appendChild(document.createTextNode(\"Delete\"));\n    \t\t\tdelbut.setAttribute(\"class\", \"terminus-control-button terminus-delete-db-button\");\n            }\n\t\t\t// function to fix db in a closure\n\t\t\tvar delDB = function(db){\n\t\t\t\treturn function(){\n\t\t\t\t\tlet deleteConfirm = confirm(`Do you want to delete ${db} Database?`);\n\t\t\t\t\tif (deleteConfirm == true) {\n\t\t\t  \t\t\tself.ui.deleteDatabase(db);\n\t\t\t\t\t}\n\t\t\t\t\t//self.ui.deleteDatabase(db);\n\t\t\t\t}\n\t\t\t};\n\t\t\tdelbut.addEventListener(\"click\", delDB(dbid));\n\t\t\ttd6.appendChild(delbut);\n\t\t}\n\n\t\ttr.appendChild(td1);\n\t\ttr.appendChild(td2);\n\t\ttr.appendChild(td3);\n\t\t//tr.appendChild(td4);\n\t\t//tr.appendChild(td5);\n\t\ttr.appendChild(td6);\n\t\ttbody.appendChild(tr);\n\t}\n\tscd.appendChild(tbody);\n\tsec.appendChild(scd);\n\n\tif(this.ui.pluginAvailable(\"datatables\")){\n        var dt = new Datatables.CspDatatables(this.ui);\n\t\tvar tab = dt.draw(scd);\n\t}\n\treturn sec;\n}\n\nTerminusServerViewer.prototype.deleteDBPermitted = function(dbid){\n\tif(dbid == \"terminus\") return false;\n\tif(this.ui.client.connection.capabilitiesPermit(\"delete_database\", dbid)) return true;\n\treturn false;\n}\n\nmodule.exports = {TerminusServerViewer,TerminusServerController}\n","function TerminusURLLoader(ui, val){\n\tthis.ui = ui;\n\tthis.val = val;\n\tthis.url_input = false;\n\tthis.key_input = false;\n}\n\nTerminusURLLoader.prototype.getLabelDOM = function(){\n\treturn document.createTextNode(\"Connect\");\n}\n\nTerminusURLLoader.prototype.getFormFieldDOM = function(ip, fname, ltxt, pholder){\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-horizontal terminus-control-group terminus-form-field-spacing terminus-form-field terminus-field-\"+fname);\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"terminus-control-label terminus-form-label terminus-form-field-label terminus-label-\"+fname);\n\tlab.appendChild(document.createTextNode(ltxt))\n\tip.setAttribute(\"type\", \"text\");\n\tip.setAttribute(\"placeholder\", pholder);\n\tsci.appendChild(lab);\n\tsci.appendChild(ip);\n\treturn sci;\n}\n\nTerminusURLLoader.prototype.getAsDOM = function(){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-form terminus-url-loader\");\n\tvar stit = document.createElement(\"h3\");\n\tstit.setAttribute(\"class\", \"terminus-form-header terminus-connect-header terminus-module-head\");\n\tstit.appendChild(document.createTextNode(\"Connect To Terminus Server\"));\n\tscd.appendChild(stit);\n\tvar mfd = document.createElement('div');\n\tmfd.setAttribute('class', 'terminus-form-border');\n\tscd.appendChild(mfd);\n\tthis.url_input = document.createElement(\"input\");\n\tthis.url_input.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-form-field-input terminus-input-text\");\n\tif(this.val){\n\t\tthis.url_input.value = this.val;\n\t}\n\tmfd.appendChild(this.getFormFieldDOM(this.url_input, \"connect\", \"URL\", \"Terminus DB URL\"));\n\tthis.key_input = document.createElement(\"input\");\n\tthis.key_input.setAttribute(\"class\", \"terminus-form-value terminus-value terminus-input-text\");\n\tmfd.appendChild(this.getFormFieldDOM(this.key_input, \"connect\", \"Key\", \"Server API Key\"));\n\tvar loadbuts = document.createElement(\"div\");\n\tloadbuts.setAttribute(\"class\", \"terminus-control-buttons\");\n\tvar loadbut = document.createElement(\"button\");\n\tloadbut.setAttribute(\"class\", \"terminus-control-button terminus-url-load terminus-btn\");\n\tloadbut.appendChild(document.createTextNode(\"Connect\"));\n\tvar self = this;\n\tloadbut.addEventListener(\"click\", function(){\n\t\tif(self.url_input.value){\n\t\t\tself.ui.load(self.url_input.value, self.key_input.value);\n\t\t}\n\t});\n\tloadbuts.appendChild(loadbut);\n\tmfd.appendChild(loadbuts);\n\treturn scd;\n}\n\n\nmodule.exports=TerminusURLLoader\n"],"sourceRoot":""}